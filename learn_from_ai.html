<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width, initial-scale=1" data-next-head=""/><meta name="description" content="The blog owned by Ryo, about Programing, Painting, and Gaming." data-next-head=""/><meta property="og:description" content="The blog owned by Ryo, about Programing, Painting, and Gaming." data-next-head=""/><meta name="twitter:description" content="The blog owned by Ryo, about Programing, Painting, and Gaming." data-next-head=""/><meta property="og:image" content="https://ryojerryyu.github.io/blog-next/img/home-bg-kasumi-hanabi.jpg" data-next-head=""/><meta name="twitter:image" content="https://ryojerryyu.github.io/blog-next/img/home-bg-kasumi-hanabi.jpg" data-next-head=""/><meta property="og:type" content="website" data-next-head=""/><meta property="og:url" content="https://blog.ryo-okami.xyz/learn_from_ai" data-next-head=""/><meta name="twitter:card" content="summary_large_image" data-next-head=""/><meta name="twitter:site" content="@ryo_okami" data-next-head=""/><meta name="twitter:creator" content="@ryo_okami" data-next-head=""/><link rel="icon" href="/blog-next/favicon.ico" data-next-head=""/><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests" data-next-head=""/><title data-next-head="">Learn from AI | Ryo&#x27;s Blog</title><meta property="og:title" content="Learn from AI" data-next-head=""/><meta property="og:site_name" content="Ryo&#x27;s Blog" data-next-head=""/><meta name="twitter:title" content="Learn from AI | Ryo&#x27;s Blog" data-next-head=""/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="apple-touch-icon" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="192x192" href="/android-chrome-192x192.png"/><link rel="manifest" href="/site.webmanifest"/><meta name="msapplication-TileColor" content="#da532c"/><meta name="theme-color" content="#ffffff"/><link data-next-font="" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/blog-next/_next/static/css/397d68d5fde9c406.css" as="style"/><link rel="preload" href="/blog-next/_next/static/css/fa130f064ba7fac2.css" as="style"/><link rel="stylesheet" href="/blog-next/_next/static/css/397d68d5fde9c406.css" data-n-g=""/><link rel="stylesheet" href="/blog-next/_next/static/css/fa130f064ba7fac2.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" noModule="" src="/blog-next/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/blog-next/_next/static/chunks/webpack-b34303dc48bcdc2b.js" defer=""></script><script src="/blog-next/_next/static/chunks/framework-dbc2568ebd4bd029.js" defer=""></script><script src="/blog-next/_next/static/chunks/main-1bf486756f8ae5cb.js" defer=""></script><script src="/blog-next/_next/static/chunks/pages/_app-560d59d16eb21d42.js" defer=""></script><script src="/blog-next/_next/static/chunks/7361-63ae555e31d14291.js" defer=""></script><script src="/blog-next/_next/static/chunks/6347-9224c81235a876aa.js" defer=""></script><script src="/blog-next/_next/static/chunks/pages/learn_from_ai-74ad28e3fe31ff7f.js" defer=""></script><script src="/blog-next/_next/static/UNqxw3V2eZQs6bqVXGorK/_buildManifest.js" defer=""></script><script src="/blog-next/_next/static/UNqxw3V2eZQs6bqVXGorK/_ssgManifest.js" defer=""></script></head><body><div id="__next"><style data-emotion="css czlpqi">.css-czlpqi{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;box-sizing:border-box;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;position:fixed;z-index:1100;top:0;left:auto;right:0;--AppBar-background:#1976d2;--AppBar-color:#fff;background-color:var(--AppBar-background);color:var(--AppBar-color);background-color:rgba(15, 23, 42, 0.75);}@media print{.css-czlpqi{position:absolute;}}</style><style data-emotion="css 1cmpeoq">.css-1cmpeoq{background-color:#fff;color:rgba(0, 0, 0, 0.87);-webkit-transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;box-shadow:var(--Paper-shadow);background-image:var(--Paper-overlay);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;box-sizing:border-box;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;position:fixed;z-index:1100;top:0;left:auto;right:0;--AppBar-background:#1976d2;--AppBar-color:#fff;background-color:var(--AppBar-background);color:var(--AppBar-color);background-color:rgba(15, 23, 42, 0.75);}@media print{.css-1cmpeoq{position:absolute;}}</style><header class="MuiPaper-root MuiPaper-elevation MuiPaper-elevation4 MuiAppBar-root MuiAppBar-colorPrimary MuiAppBar-positionFixed mui-fixed css-1cmpeoq" style="--Paper-shadow:0px 2px 4px -1px rgba(0,0,0,0.2),0px 4px 5px 0px rgba(0,0,0,0.14),0px 1px 10px 0px rgba(0,0,0,0.12)"><style data-emotion="css awgou1">.css-awgou1{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding-left:16px;padding-right:16px;min-height:56px;}@media (min-width:600px){.css-awgou1{padding-left:24px;padding-right:24px;}}@media (min-width:0px){@media (orientation: landscape){.css-awgou1{min-height:48px;}}}@media (min-width:600px){.css-awgou1{min-height:64px;}}</style><div class="MuiToolbar-root MuiToolbar-gutters MuiToolbar-regular css-awgou1"><style data-emotion="css 1guk29">@media (min-width:0px){.css-1guk29{display:none;}}@media (min-width:900px){.css-1guk29{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}</style><div class="ml-2 w-24 mr-4 MuiBox-root css-1guk29"><a class="DefaultLayout_textlink__W55gl" href="/blog-next">Ryo&#x27;s Blog</a></div><style data-emotion="css 1m04nb5">@media (min-width:0px){.css-1m04nb5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}@media (min-width:900px){.css-1m04nb5{display:none;}}</style><div class="ml-2 mr-4 MuiBox-root css-1m04nb5"><a title="Ryo&#x27;s Blog" href="/blog-next"><style data-emotion="css q7mezt">.css-q7mezt{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;fill:currentColor;font-size:1.5rem;}</style><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium h-6 w-6 text-gray-300 hover:text-white css-q7mezt" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="HomeIcon"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"></path></svg></a></div><style data-emotion="css nznm6s">.css-nznm6s{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1;-ms-flex:1;flex:1;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}</style><div class="MuiBox-root css-nznm6s"><div class="DefaultLayoutMenu bg-transparent min-w-full"><ul class="rc-menu-overflow rc-menu rc-menu-root rc-menu-horizontal" role="menu" tabindex="0" data-menu-list="true"><li class="rc-menu-overflow-item rc-menu-item" style="opacity:1;order:0" role="menuitem" tabindex="-1"><a class="DefaultLayout_textlink__W55gl" href="/blog-next/articles">Articles</a></li><li class="rc-menu-overflow-item rc-menu-item" style="opacity:1;order:1" role="menuitem" tabindex="-1"><a class="DefaultLayout_textlink__W55gl" href="/blog-next/learn_from_ai">Learn from AI</a></li><li class="rc-menu-overflow-item rc-menu-item" style="opacity:1;order:2" role="menuitem" tabindex="-1"><a class="DefaultLayout_textlink__W55gl" href="/blog-next/tags">Tags</a></li><li class="rc-menu-overflow-item rc-menu-submenu rc-menu-submenu-horizontal" style="opacity:1;order:3" role="none"><div role="menuitem" class="rc-menu-submenu-title" tabindex="-1" aria-expanded="false" aria-haspopup="true"><span class="DefaultLayout_textlink__W55gl">More</span><i class="rc-menu-submenu-arrow"></i></div></li><li class="rc-menu-overflow-item rc-menu-overflow-item-rest rc-menu-submenu rc-menu-submenu-horizontal" style="opacity:0;height:0;overflow-y:hidden;order:9007199254740991;pointer-events:none;position:absolute" aria-hidden="true" role="none"><div role="menuitem" class="rc-menu-submenu-title" tabindex="-1" title="..." aria-expanded="false" aria-haspopup="true">...<i class="rc-menu-submenu-arrow"></i></div></li></ul><div style="display:none" aria-hidden="true"></div></div></div><style data-emotion="css k008qs">.css-k008qs{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><div class="MuiBox-root css-k008qs"><a title="Twitter" href="https://twitter.com/ryo_okami"><svg class="h-6 w-6 fill-gray-300 hover:fill-white mx-1 sm:mx-2" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a><a title="GitHub" href="https://github.com/RyoJerryYu"><svg class="h-6 w-6 fill-gray-300 hover:fill-white mx-1 sm:mx-2" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a><a title="Pixiv" href="https://www.pixiv.net/users/9159893"><svg class="h-6 w-6 fill-gray-300 hover:fill-white mx-1 sm:mx-2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4.935 0A4.924 4.924 0 0 0 0 4.935v14.13A4.924 4.924 0 0 0 4.935 24h14.13A4.924 4.924 0 0 0 24 19.065V4.935A4.924 4.924 0 0 0 19.065 0zm7.81 4.547c2.181 0 4.058.676 5.399 1.847a6.118 6.118 0 0 1 2.116 4.66c.005 1.854-.88 3.476-2.257 4.563-1.375 1.092-3.225 1.697-5.258 1.697-2.314 0-4.46-.842-4.46-.842v2.718c.397.116 1.048.365.635.779H5.79c-.41-.41.19-.65.644-.779V7.666c-1.053.81-1.593 1.51-1.868 2.031.32 1.02-.284.969-.284.969l-1.09-1.73s3.868-4.39 9.553-4.39zm-.19.971c-1.423-.003-3.184.473-4.27 1.244v8.646c.988.487 2.484.832 4.26.832h.01c1.596 0 2.98-.593 3.93-1.533.952-.948 1.486-2.183 1.492-3.683-.005-1.54-.504-2.864-1.42-3.86-.918-.992-2.274-1.645-4.002-1.646Z"></path></svg></a></div></div></header><style data-emotion="css awgou1">.css-awgou1{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding-left:16px;padding-right:16px;min-height:56px;}@media (min-width:600px){.css-awgou1{padding-left:24px;padding-right:24px;}}@media (min-width:0px){@media (orientation: landscape){.css-awgou1{min-height:48px;}}}@media (min-width:600px){.css-awgou1{min-height:64px;}}</style><div class="MuiToolbar-root MuiToolbar-gutters MuiToolbar-regular css-awgou1"></div><style data-emotion="css vktxal">.css-vktxal{--Grid-columns:12;--Grid-columnSpacing:0px;--Grid-rowSpacing:0px;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;min-width:0;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;gap:var(--Grid-rowSpacing) var(--Grid-columnSpacing);width:100%;max-width:80rem;margin-left:auto;margin-right:auto;padding:0.5rem;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;}.css-vktxal >*{--Grid-parent-columns:12;}.css-vktxal >*{--Grid-parent-columnSpacing:0px;}.css-vktxal >*{--Grid-parent-rowSpacing:0px;}</style><div class="MuiGrid2-root MuiGrid2-container MuiGrid2-direction-xs-row css-vktxal"><style data-emotion="css 9gdssj">.css-9gdssj{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-basis:auto;-ms-flex-preferred-size:auto;flex-basis:auto;width:calc(100% * 0 / var(--Grid-parent-columns) - (var(--Grid-parent-columns) - 0) * (var(--Grid-parent-columnSpacing) / var(--Grid-parent-columns)));min-width:0;box-sizing:border-box;}@media (min-width:900px){.css-9gdssj{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-basis:auto;-ms-flex-preferred-size:auto;flex-basis:auto;width:calc(100% * 0 / var(--Grid-parent-columns) - (var(--Grid-parent-columns) - 0) * (var(--Grid-parent-columnSpacing) / var(--Grid-parent-columns)));}}@media (min-width:1200px){.css-9gdssj{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-basis:auto;-ms-flex-preferred-size:auto;flex-basis:auto;width:calc(100% * 2 / var(--Grid-parent-columns) - (var(--Grid-parent-columns) - 2) * (var(--Grid-parent-columnSpacing) / var(--Grid-parent-columns)));}}</style><div class="MuiGrid2-root MuiGrid2-direction-xs-row MuiGrid2-grid-xs-0 MuiGrid2-grid-md-0 MuiGrid2-grid-lg-2 css-9gdssj"></div><style data-emotion="css 9h67uz">.css-9h67uz{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-basis:auto;-ms-flex-preferred-size:auto;flex-basis:auto;width:calc(100% * 12 / var(--Grid-parent-columns) - (var(--Grid-parent-columns) - 12) * (var(--Grid-parent-columnSpacing) / var(--Grid-parent-columns)));min-width:0;box-sizing:border-box;}@media (min-width:900px){.css-9h67uz{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-basis:auto;-ms-flex-preferred-size:auto;flex-basis:auto;width:calc(100% * 9 / var(--Grid-parent-columns) - (var(--Grid-parent-columns) - 9) * (var(--Grid-parent-columnSpacing) / var(--Grid-parent-columns)));}}@media (min-width:1200px){.css-9h67uz{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-basis:auto;-ms-flex-preferred-size:auto;flex-basis:auto;width:calc(100% * 8 / var(--Grid-parent-columns) - (var(--Grid-parent-columns) - 8) * (var(--Grid-parent-columnSpacing) / var(--Grid-parent-columns)));}}</style><div class="MuiGrid2-root MuiGrid2-direction-xs-row MuiGrid2-grid-xs-12 MuiGrid2-grid-md-9 MuiGrid2-grid-lg-8 css-9h67uz"><div class="DefaultLayout_contentHeight__RDRZE"><div class="PostList_postList__Tuobz"><div class="PostList_postListElement__qi6kp"><a href="/blog-next/learn_from_ai/golang-new-and-memory-management"><h6 class="PostList_postTitle__vveJr">GoLang ä¸­ new() ä¸å†…å­˜ç®¡ç†æœºåˆ¶è¯¦è§£</h6><div class="PostList_postDate__z_XQh"><time dateTime="2025-03-07T16:00:00.000Z">2025-03-07</time></div><div class="PostList_postAbstract__HtPA1"><p class="py-1">&gt; æœ¬æ–‡ä¸ºä¸ GPT-4o çš„å¯¹è¯è®°å½•ï¼Œæ·±å…¥æ¢è®¨ GoLang ä¸­ new() å‡½æ•°çš„ä½¿ç”¨ä»¥åŠç›¸å…³çš„å†…å­˜ç®¡ç†æœºåˆ¶ã€‚</p><p class="py-1">åœ¨ Go è¯­è¨€ä¸­ï¼Œ`new()` å‡½æ•°ç”¨äºåˆ†é…å†…å­˜å¹¶è¿”å›æŒ‡å‘è¯¥å†…å­˜çš„æŒ‡é’ˆã€‚`new()` å‡½æ•°çš„è¡Œä¸ºæ˜¯éå¸¸ç®€å•ä¸”å®‰å…¨çš„ï¼šå®ƒæ€»æ˜¯è¿”å›ä¸€ä¸ªæŒ‡å‘é›¶å€¼çš„æŒ‡é’ˆã€‚Go è¯­è¨€çš„å†…å­˜åˆ†é…å™¨ä¼šç¡®ä¿å†…å­˜åˆ†é…æˆåŠŸï¼Œå› æ­¤åœ¨ä½¿ç”¨ `new()` æ—¶ï¼Œä¸ä¼šå‡ºç°å†…å­˜åˆ†é…å¤±è´¥çš„æƒ…å†µã€‚</p><p class="py-1">æ¢å¥è¯è¯´ï¼Œ`new()` å‡½æ•°åœ¨ Go ä¸­ä¸ä¼šè¿”å› `nil`ï¼Œå› ä¸ºå®ƒæ€»æ˜¯èƒ½å¤ŸæˆåŠŸåˆ†é…å†…å­˜å¹¶è¿”å›ä¸€ä¸ªæœ‰æ•ˆçš„æŒ‡é’ˆã€‚Go è¯­è¨€çš„è®¾è®¡ç›®æ ‡ä¹‹ä¸€å°±æ˜¯æä¾›ä¸€ä¸ªå®‰å…¨çš„å†…å­˜ç®¡ç†æœºåˆ¶ï¼Œå› æ­¤å¼€å‘è€…ä¸éœ€è¦æ‹…å¿ƒå†…å­˜åˆ†é…å¤±è´¥çš„é—®é¢˜ã€‚</p></div></a><div class="TagsBox_tagsBox__WzhAf py-4 md:py-1"><a class="tag-word TagsBox_tag__Rk32C" href="/blog-next/tags/golang">#<!-- -->GoLang</a><a class="tag-word TagsBox_tag__Rk32C" href="/blog-next/tags/memory-management">#<!-- -->Memory Management</a></div></div><div class="PostList_postListElement__qi6kp"><a href="/blog-next/learn_from_ai/pytorch-model-save-and-load"><h6 class="PostList_postTitle__vveJr">PyTorch æ¨¡å‹çš„ä¿å­˜ä¸åŠ è½½æœºåˆ¶è¯¦è§£</h6><div class="PostList_postDate__z_XQh"><time dateTime="2025-03-07T13:00:00.000Z">2025-03-07</time></div><div class="PostList_postAbstract__HtPA1"><p class="py-1">&gt; æœ¬æ–‡ä¸ºä¸ DeepSeek å¯¹è¯è®°å½•ï¼Œæ·±å…¥æ¢è®¨ PyTorch ä¸­æ¨¡å‹çš„ä¿å­˜å’ŒåŠ è½½æœºåˆ¶ï¼ŒåŒ…æ‹¬ä¸åŒçš„ä¿å­˜æ–¹å¼ã€æœ€ä½³å®è·µä»¥åŠå¸¸è§é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚</p><p class="py-1">&gt; [!reasoning]-</p><p class="py-1">&gt;</p></div></a><div class="TagsBox_tagsBox__WzhAf py-4 md:py-1"><a class="tag-word TagsBox_tag__Rk32C" href="/blog-next/tags/deep-learning">#<!-- -->Deep Learning</a><a class="tag-word TagsBox_tag__Rk32C" href="/blog-next/tags/pytorch">#<!-- -->PyTorch</a><a class="tag-word TagsBox_tag__Rk32C" href="/blog-next/tags/model-management">#<!-- -->Model Management</a></div></div><div class="PostList_postListElement__qi6kp"><a href="/blog-next/learn_from_ai/resnet-math-and-gradient-vanishing"><h6 class="PostList_postTitle__vveJr">ResNet çš„æ•°å­¦åŸç†ä¸æ¢¯åº¦æ¶ˆå¤±é—®é¢˜åˆ†æ</h6><div class="PostList_postDate__z_XQh"><time dateTime="2025-03-07T10:00:00.000Z">2025-03-07</time></div><div class="PostList_postAbstract__HtPA1"><p class="py-1">&gt; æœ¬æ–‡æ·±å…¥æ¢è®¨äº† ResNet çš„æ•°å­¦åŸç†ï¼Œåˆ†æäº†æ·±åº¦ç¥ç»ç½‘ç»œä¸­çš„æ¢¯åº¦æ¶ˆå¤±é—®é¢˜åŠå…¶è§£å†³æ–¹æ¡ˆã€‚é€šè¿‡æ•°å­¦æ¨å¯¼å’Œç›´è§‚è§£é‡Šï¼Œå¸®åŠ©è¯»è€…ç†è§£æ®‹å·®è¿æ¥çš„ä½œç”¨æœºåˆ¶ï¼Œä»¥åŠå®ƒå¦‚ä½•æœ‰æ•ˆåœ°è§£å†³äº†æ·±åº¦ç¥ç»ç½‘ç»œè®­ç»ƒä¸­çš„å…³é”®é—®é¢˜ã€‚</p><p class="py-1">&gt; [!query]</p><p class="py-1">&gt;</p></div></a><div class="TagsBox_tagsBox__WzhAf py-4 md:py-1"><a class="tag-word TagsBox_tag__Rk32C" href="/blog-next/tags/deep-learning">#<!-- -->Deep Learning</a><a class="tag-word TagsBox_tag__Rk32C" href="/blog-next/tags/neural-networks">#<!-- -->Neural Networks</a><a class="tag-word TagsBox_tag__Rk32C" href="/blog-next/tags/resnet">#<!-- -->ResNet</a><a class="tag-word TagsBox_tag__Rk32C" href="/blog-next/tags/mathematics">#<!-- -->Mathematics</a></div></div><div class="PostList_postListElement__qi6kp"><a href="/blog-next/learn_from_ai/pytorch-backpropagation-mechanism"><h6 class="PostList_postTitle__vveJr">PyTorch è‡ªåŠ¨å¾®åˆ†ä¸åå‘ä¼ æ’­æœºåˆ¶åŸç†è§£æ</h6><div class="PostList_postDate__z_XQh"><time dateTime="2025-03-06T15:50:00.000Z">2025-03-06</time></div><div class="PostList_postAbstract__HtPA1"><p class="py-1">&gt; æœ¬æ–‡ä¸ºç”¨æˆ·ä¸ DeepSeek çš„é—®ç­”ã€‚ä¸»é¢˜ä¸º PyTorch çš„åå‘ä¼ æ’­æœºåˆ¶ã€‚æœ¬æ–‡ä»æ•°å­¦åŸç†ã€è®¡ç®—å›¾æœºåˆ¶å’Œå®é™…éœ€æ±‚ä¸‰ä¸ªæ–¹é¢æ·±å…¥è§£é‡Šå…¶å·¥ä½œåŸç†ï¼Œå¹¶ç»“åˆ PyTorch çš„è‡ªåŠ¨å¾®åˆ†ï¼ˆAutogradï¼‰ç³»ç»Ÿè¿›è¡Œè¯´æ˜ã€‚</p><p class="py-1">&gt; [!query]</p><p class="py-1">&gt;</p></div></a><div class="TagsBox_tagsBox__WzhAf py-4 md:py-1"><a class="tag-word TagsBox_tag__Rk32C" href="/blog-next/tags/pytorch">#<!-- -->PyTorch</a><a class="tag-word TagsBox_tag__Rk32C" href="/blog-next/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0">#<!-- -->æ·±åº¦å­¦ä¹ </a><a class="tag-word TagsBox_tag__Rk32C" href="/blog-next/tags/%E5%8F%8D%E5%90%91%E4%BC%A0%E6%92%AD">#<!-- -->åå‘ä¼ æ’­</a><a class="tag-word TagsBox_tag__Rk32C" href="/blog-next/tags/%E8%87%AA%E5%8A%A8%E5%BE%AE%E5%88%86">#<!-- -->è‡ªåŠ¨å¾®åˆ†</a><a class="tag-word TagsBox_tag__Rk32C" href="/blog-next/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0">#<!-- -->å­¦ä¹ ç¬”è®°</a></div></div><div class="PostList_postListElement__qi6kp"><a href="/blog-next/learn_from_ai/lora-matrix-initialization-strategy"><h6 class="PostList_postTitle__vveJr">LoRAå¾®è°ƒä¸­çš„çŸ©é˜µåˆå§‹åŒ–ç­–ç•¥ï¼šAéšæœºä¸Bé›¶åˆå§‹åŒ–</h6><div class="PostList_postDate__z_XQh"><time dateTime="2025-03-05T02:00:00.000Z">2025-03-05</time></div><div class="PostList_postAbstract__HtPA1"><p class="py-1">&gt; æœ¬æ–‡æ˜¯ä¸ Deepseek-R1 æ¨¡å‹+Search çš„å¯¹è¯è®°å½•ï¼Œè¯¦ç»†æ¢è®¨äº† LoRAï¼ˆä½ç§©é€‚åº”ï¼‰å¾®è°ƒæŠ€æœ¯ä¸­çŸ©é˜µåˆå§‹åŒ–ç­–ç•¥çš„æ•°å­¦åŸç†ã€‚æ–‡ç« åˆ†æäº†ä¸ºä»€ä¹ˆåœ¨ LoRA ä¸­çŸ©é˜µ A é‡‡ç”¨éšæœºåˆå§‹åŒ–è€ŒçŸ©é˜µ B é‡‡ç”¨é›¶åˆå§‹åŒ–çš„åŸå› ï¼ŒåŒ…æ‹¬ä¿æŒåˆå§‹æ¨¡å‹ç¨³å®šæ€§ã€ç¡®ä¿æ¢¯åº¦æ›´æ–°æœ‰æ•ˆæ€§ã€å®ç°é€æ­¥å­¦ä¹ çš„ä½ç§©æ›´æ–°ç­‰æ–¹é¢ã€‚åŒæ—¶ï¼Œæ–‡ç« ä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆåå‘åˆå§‹åŒ–ç­–ç•¥ï¼ˆBéšæœºè€ŒAä¸ºé›¶ï¼‰åœ¨ç†è®ºä¸Šå­˜åœ¨é—®é¢˜ï¼Œä¼šå¯¼è‡´æ¢¯åº¦æ¶ˆå¤±å’Œè®­ç»ƒæ•ˆç‡ä¸‹é™ã€‚è¿™äº›åˆ†ææœ‰åŠ©äºç†è§£æ·±åº¦å­¦ä¹ ä¸­å‚æ•°é«˜æ•ˆå¾®è°ƒæŠ€æœ¯çš„è®¾è®¡åŸç†ã€‚</p><p class="py-1">&gt; [!reasoning]-</p><p class="py-1">&gt; å—¯ï¼Œè¿™ä¸ªé—®é¢˜æ˜¯å…³äºLoRAï¼ˆä½ç§©é€‚åº”ï¼‰åˆå§‹åŒ–çš„ã€‚ä¸ºä»€ä¹ˆåœ¨åˆå§‹åŒ–çš„æ—¶å€™ï¼ŒçŸ©é˜µAæ˜¯éšæœºåˆå§‹åŒ–çš„ï¼Œè€ŒçŸ©é˜µBæ˜¯é›¶åˆå§‹åŒ–çš„å‘¢ï¼Ÿæˆ‘éœ€è¦ä»”ç»†æ€è€ƒä¸€ä¸‹ã€‚</p></div></a><div class="TagsBox_tagsBox__WzhAf py-4 md:py-1"><a class="tag-word TagsBox_tag__Rk32C" href="/blog-next/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0">#<!-- -->æ·±åº¦å­¦ä¹ </a><a class="tag-word TagsBox_tag__Rk32C" href="/blog-next/tags/lora">#<!-- -->LoRA</a><a class="tag-word TagsBox_tag__Rk32C" href="/blog-next/tags/%E5%8F%82%E6%95%B0%E9%AB%98%E6%95%88%E5%BE%AE%E8%B0%83">#<!-- -->å‚æ•°é«˜æ•ˆå¾®è°ƒ</a><a class="tag-word TagsBox_tag__Rk32C" href="/blog-next/tags/%E6%A8%A1%E5%9E%8B%E8%AE%AD%E7%BB%83">#<!-- -->æ¨¡å‹è®­ç»ƒ</a><a class="tag-word TagsBox_tag__Rk32C" href="/blog-next/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0">#<!-- -->å­¦ä¹ ç¬”è®°</a></div></div><div class="PostList_postListElement__qi6kp"><a href="/blog-next/learn_from_ai/cpp-rvo-and-rust-move-semantics"><h6 class="PostList_postTitle__vveJr">C++å³å€¼å¼•ç”¨ä¸Rustç§»åŠ¨è¯­ä¹‰</h6><div class="PostList_postDate__z_XQh"><time dateTime="2024-12-08T12:00:00.000Z">2024-12-08</time></div><div class="PostList_postAbstract__HtPA1"><p class="py-1">&gt; **å‚è€ƒè¦ç‚¹:**</p><p class="py-1">&gt; - C++çš„å³å€¼å¼•ç”¨(T&amp;&amp;)ç”¨äºæ•è·ä¸´æ—¶å¯¹è±¡ï¼Œç§»åŠ¨è¯­ä¹‰é€šè¿‡è½¬ç§»èµ„æºæ‰€æœ‰æƒé¿å…ä¸å¿…è¦çš„å¤åˆ¶</p><p class="py-1">&gt; - è¿”å›å€¼ä¼˜åŒ–(RVO)æ˜¯ç¼–è¯‘å™¨ä¼˜åŒ–æŠ€æœ¯ï¼Œå¯ä»¥ç›´æ¥åœ¨è°ƒç”¨æ–¹æ ˆå¸§æ„é€ å¯¹è±¡ï¼Œé¿å…å¤åˆ¶</p></div></a><div class="TagsBox_tagsBox__WzhAf py-4 md:py-1"><a class="tag-word TagsBox_tag__Rk32C" href="/blog-next/tags/c++">#<!-- -->C++</a><a class="tag-word TagsBox_tag__Rk32C" href="/blog-next/tags/rust">#<!-- -->Rust</a><a class="tag-word TagsBox_tag__Rk32C" href="/blog-next/tags/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80">#<!-- -->ç¼–ç¨‹è¯­è¨€</a></div></div><div class="PostList_postListElement__qi6kp"><a href="/blog-next/learn_from_ai/executable-file-formats"><h6 class="PostList_postTitle__vveJr">å¯æ‰§è¡Œæ–‡ä»¶æ ¼å¼å¯¹æ¯”ï¼šELFã€PEã€Mach-Oç­‰</h6><div class="PostList_postDate__z_XQh"><time dateTime="2024-12-08T02:00:00.000Z">2024-12-08</time></div><div class="PostList_postAbstract__HtPA1"><p class="py-1">&gt; æœ¬æ–‡ä»‹ç»äº†å‡ ç§ä¸»è¦çš„å¯æ‰§è¡Œæ–‡ä»¶æ ¼å¼ï¼ŒåŒ…æ‹¬Linuxç³»ç»Ÿä½¿ç”¨çš„ELFæ ¼å¼ã€Windowsç³»ç»Ÿä½¿ç”¨çš„PEæ ¼å¼ã€ä»¥åŠmacOSç³»ç»Ÿä½¿ç”¨çš„Mach-Oæ ¼å¼ç­‰ã€‚æ–‡ç« è¯¦ç»†è®¨è®ºäº†æ¯ç§æ ¼å¼çš„ç‰¹ç‚¹ã€ä½¿ç”¨å¹³å°å’Œå†å²æ¼”å˜ï¼Œå¸®åŠ©è¯»è€…ç†è§£ä¸åŒæ“ä½œç³»ç»Ÿä¸­äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼çš„å·®å¼‚ã€‚</p><p class="py-1">ELFï¼ˆExecutable and Linkable Formatï¼‰æ‰§è¡Œæ–‡ä»¶æ˜¯ä¸€ç§ç”¨äºLinuxå’Œç±»Unixæ“ä½œç³»ç»Ÿçš„æ ‡å‡†äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼ã€‚å®ƒåŒ…å«äº†å¯æ‰§è¡Œç¨‹åºã€å…±äº«åº“ã€ç›®æ ‡æ–‡ä»¶å’Œæ ¸å¿ƒè½¬å‚¨æ–‡ä»¶ã€‚ELFæ–‡ä»¶æ ¼å¼è®¾è®¡çµæ´»ã€å¯æ‰©å±•ï¼Œå¹¶ä¸”å¯ç§»æ¤ï¼Œå®ƒå®šä¹‰äº†ç¨‹åºä»£ç çš„åŠ è½½å’Œæ‰§è¡Œæ–¹å¼ï¼ŒåŒ…æ‹¬ä»£ç æ®µã€æ•°æ®æ®µã€ç¬¦å·è¡¨å’Œé‡å®šä½ä¿¡æ¯ç­‰ã€‚æ“ä½œç³»ç»Ÿæ ¹æ®ELFæ–‡ä»¶ä¸­çš„è¿™äº›ä¿¡æ¯æ¥å’Œæ‰§è¡Œç¨‹åºã€‚ELFæ ¼å¼ä¹Ÿå…è®¸ç¨‹åºå…±äº«åº“ï¼Œå³å¤šä¸ªç¨‹åºå¯ä»¥å…±äº«åŒä¸€æ®µä»£ç ï¼Œä»è€Œå‡å°‘å†…å­˜å ç”¨å¹¶æé«˜æ•ˆç‡ã€‚åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­ï¼ŒELFæ–‡ä»¶ä½œä¸ºç›®æ ‡æ–‡ä»¶æ ¼å¼åœ¨ç¼–è¯‘æ—¶ç”Ÿæˆï¼Œå¹¶æœ€ç»ˆç”±é“¾æ¥å™¨ç»„åˆå½¢æˆå¯æ‰§è¡Œæ–‡ä»¶æˆ–å…±äº«åº“ã€‚</p><p class="py-1">æ˜¯çš„ï¼Œé™¤äº†ELFï¼ˆExecutable and Linking Formatï¼‰ä¹‹å¤–ï¼Œè¿˜æœ‰å…¶ä»–å‡ ç§å¸¸è§çš„äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼ï¼Œå®ƒä»¬åœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿå’Œå¹³å°ä¸Šè¢«å¹¿æ³›ä½¿ç”¨ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ä¸»è¦çš„äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼ï¼š</p></div></a><div class="TagsBox_tagsBox__WzhAf py-4 md:py-1"><a class="tag-word TagsBox_tag__Rk32C" href="/blog-next/tags/linux">#<!-- -->Linux</a><a class="tag-word TagsBox_tag__Rk32C" href="/blog-next/tags/windows">#<!-- -->Windows</a><a class="tag-word TagsBox_tag__Rk32C" href="/blog-next/tags/macos">#<!-- -->macOS</a><a class="tag-word TagsBox_tag__Rk32C" href="/blog-next/tags/%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6">#<!-- -->å¯æ‰§è¡Œæ–‡ä»¶</a><a class="tag-word TagsBox_tag__Rk32C" href="/blog-next/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0">#<!-- -->å­¦ä¹ ç¬”è®°</a></div></div><div class="PostList_postListElement__qi6kp"><a href="/blog-next/learn_from_ai/opencv-coordinate-system-conventions"><h6 class="PostList_postTitle__vveJr">OpenCV åæ ‡è¡¨ç¤ºï¼šç†è§£ (y, x) ä¸ (x, y) çš„åŒºåˆ«</h6><div class="PostList_postDate__z_XQh"><time dateTime="2024-11-29T03:00:00.000Z">2024-11-29</time></div><div class="PostList_postAbstract__HtPA1"><p class="py-1">&gt; ğŸ“ æœ¬æ–‡æ˜¯æˆ‘åœ¨å­¦ä¹  OpenCV æ—¶é‡åˆ°çš„ä¸€ä¸ªé—®é¢˜ã€‚é—®é¢˜çš„è§£ç­”å’Œä¸­æ–‡ç¿»è¯‘å‡ç”± AI ç”Ÿæˆã€‚</p><p class="py-1">Why sometimes opencv represent a point coordinate as (y,x) (e.g. the result of cv2.findContours) , and sometimes it represent as (x, y) (e.g. the arg `center` of cv2.circle)?</p><p class="py-1">&gt; ä¸ºä»€ä¹ˆ OpenCV æœ‰æ—¶ç”¨ (y,x) è¡¨ç¤ºåæ ‡ç‚¹ï¼ˆæ¯”å¦‚ cv2.findContours çš„è¿”å›å€¼ï¼‰ï¼Œæœ‰æ—¶åˆç”¨ (x,y) è¡¨ç¤ºï¼ˆæ¯”å¦‚ cv2.circle å‡½æ•°çš„ `center` å‚æ•°ï¼‰ï¼Ÿ</p></div></a><div class="TagsBox_tagsBox__WzhAf py-4 md:py-1"><a class="tag-word TagsBox_tag__Rk32C" href="/blog-next/tags/opencv">#<!-- -->OpenCV</a><a class="tag-word TagsBox_tag__Rk32C" href="/blog-next/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86">#<!-- -->å›¾åƒå¤„ç†</a><a class="tag-word TagsBox_tag__Rk32C" href="/blog-next/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0">#<!-- -->å­¦ä¹ ç¬”è®°</a></div></div><div class="PostList_postListElement__qi6kp"><a href="/blog-next/learn_from_ai/deep-learning-model-formats"><h6 class="PostList_postTitle__vveJr">æ·±åº¦å­¦ä¹ æ¨¡å‹æ–‡ä»¶æ ¼å¼å¯¹æ¯”ï¼špthã€safetensor ä¸ onnx</h6><div class="PostList_postDate__z_XQh"><time dateTime="2024-11-29T02:00:00.000Z">2024-11-29</time></div><div class="PostList_postAbstract__HtPA1"><p class="py-1">&gt; æœ¬é¡µé¢ä»‹ç»äº†ä¸‰ç§æœºå™¨å­¦ä¹ æ¨¡å‹æ–‡ä»¶æ ¼å¼ï¼š.pthã€.safetensor å’Œ .onnxã€‚ä¸»è¦å†…å®¹åŒ…æ‹¬æ¯ç§æ ¼å¼çš„å®šä¹‰ã€ä¿å­˜çš„å†…å®¹ã€ç”¨é€”ä»¥åŠå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«å’Œè½¬æ¢æ–¹æ³•ã€‚</p><p class="py-1">PyTorch ä¸­çš„`.pth`æ–‡ä»¶é€šå¸¸ç”¨äºä¿å­˜æ¨¡å‹çš„æƒé‡ï¼ˆparametersï¼‰å’Œè®­ç»ƒè¿‡ç¨‹ä¸­çš„ä¼˜åŒ–å™¨çŠ¶æ€ï¼ˆoptimizer stateï¼‰ã€‚å…·ä½“æ¥è¯´ï¼Œä¸€ä¸ª`.pth`æ–‡ä»¶å¯èƒ½åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š</p><p class="py-1">1. **æ¨¡å‹çŠ¶æ€å­—å…¸ï¼ˆModel state dictionaryï¼‰**ï¼š</p></div></a><div class="TagsBox_tagsBox__WzhAf py-4 md:py-1"><a class="tag-word TagsBox_tag__Rk32C" href="/blog-next/tags/pytorch">#<!-- -->PyTorch</a><a class="tag-word TagsBox_tag__Rk32C" href="/blog-next/tags/onnx">#<!-- -->ONNX</a><a class="tag-word TagsBox_tag__Rk32C" href="/blog-next/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0">#<!-- -->æ·±åº¦å­¦ä¹ </a><a class="tag-word TagsBox_tag__Rk32C" href="/blog-next/tags/%E6%A8%A1%E5%9E%8B%E9%83%A8%E7%BD%B2">#<!-- -->æ¨¡å‹éƒ¨ç½²</a><a class="tag-word TagsBox_tag__Rk32C" href="/blog-next/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0">#<!-- -->å­¦ä¹ ç¬”è®°</a></div></div></div></div></div><style data-emotion="css vkdybf">.css-vkdybf{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-basis:auto;-ms-flex-preferred-size:auto;flex-basis:auto;width:calc(100% * 0 / var(--Grid-parent-columns) - (var(--Grid-parent-columns) - 0) * (var(--Grid-parent-columnSpacing) / var(--Grid-parent-columns)));min-width:0;box-sizing:border-box;}@media (min-width:900px){.css-vkdybf{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-basis:auto;-ms-flex-preferred-size:auto;flex-basis:auto;width:calc(100% * 3 / var(--Grid-parent-columns) - (var(--Grid-parent-columns) - 3) * (var(--Grid-parent-columnSpacing) / var(--Grid-parent-columns)));}}@media (min-width:1200px){.css-vkdybf{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-basis:auto;-ms-flex-preferred-size:auto;flex-basis:auto;width:calc(100% * 2 / var(--Grid-parent-columns) - (var(--Grid-parent-columns) - 2) * (var(--Grid-parent-columnSpacing) / var(--Grid-parent-columns)));}}</style><div class="MuiGrid2-root MuiGrid2-direction-xs-row MuiGrid2-grid-xs-0 MuiGrid2-grid-md-3 MuiGrid2-grid-lg-2 css-vkdybf"></div></div><footer class="DefaultLayout_footer__aWV4u"><style data-emotion="css vktxal">.css-vktxal{--Grid-columns:12;--Grid-columnSpacing:0px;--Grid-rowSpacing:0px;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;min-width:0;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;gap:var(--Grid-rowSpacing) var(--Grid-columnSpacing);width:100%;max-width:80rem;margin-left:auto;margin-right:auto;padding:0.5rem;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;}.css-vktxal >*{--Grid-parent-columns:12;}.css-vktxal >*{--Grid-parent-columnSpacing:0px;}.css-vktxal >*{--Grid-parent-rowSpacing:0px;}</style><div class="MuiGrid2-root MuiGrid2-container MuiGrid2-direction-xs-row css-vktxal"><style data-emotion="css 9gdssj">.css-9gdssj{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-basis:auto;-ms-flex-preferred-size:auto;flex-basis:auto;width:calc(100% * 0 / var(--Grid-parent-columns) - (var(--Grid-parent-columns) - 0) * (var(--Grid-parent-columnSpacing) / var(--Grid-parent-columns)));min-width:0;box-sizing:border-box;}@media (min-width:900px){.css-9gdssj{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-basis:auto;-ms-flex-preferred-size:auto;flex-basis:auto;width:calc(100% * 0 / var(--Grid-parent-columns) - (var(--Grid-parent-columns) - 0) * (var(--Grid-parent-columnSpacing) / var(--Grid-parent-columns)));}}@media (min-width:1200px){.css-9gdssj{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-basis:auto;-ms-flex-preferred-size:auto;flex-basis:auto;width:calc(100% * 2 / var(--Grid-parent-columns) - (var(--Grid-parent-columns) - 2) * (var(--Grid-parent-columnSpacing) / var(--Grid-parent-columns)));}}</style><div class="MuiGrid2-root MuiGrid2-direction-xs-row MuiGrid2-grid-xs-0 MuiGrid2-grid-md-0 MuiGrid2-grid-lg-2 css-9gdssj"></div><style data-emotion="css 9h67uz">.css-9h67uz{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-basis:auto;-ms-flex-preferred-size:auto;flex-basis:auto;width:calc(100% * 12 / var(--Grid-parent-columns) - (var(--Grid-parent-columns) - 12) * (var(--Grid-parent-columnSpacing) / var(--Grid-parent-columns)));min-width:0;box-sizing:border-box;}@media (min-width:900px){.css-9h67uz{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-basis:auto;-ms-flex-preferred-size:auto;flex-basis:auto;width:calc(100% * 9 / var(--Grid-parent-columns) - (var(--Grid-parent-columns) - 9) * (var(--Grid-parent-columnSpacing) / var(--Grid-parent-columns)));}}@media (min-width:1200px){.css-9h67uz{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-basis:auto;-ms-flex-preferred-size:auto;flex-basis:auto;width:calc(100% * 8 / var(--Grid-parent-columns) - (var(--Grid-parent-columns) - 8) * (var(--Grid-parent-columnSpacing) / var(--Grid-parent-columns)));}}</style><div class="MuiGrid2-root MuiGrid2-direction-xs-row MuiGrid2-grid-xs-12 MuiGrid2-grid-md-9 MuiGrid2-grid-lg-8 css-9h67uz"><div class="flex flex-row justify-center items-center"><div class="DefaultLayout_footerLeft__Qn_VV">Â© 2023 Ryo Jerry Yu. All rights reserved.</div><div class="DefaultLayout_footerRight__GlReP"><a title="Twitter" href="https://twitter.com/ryo_okami"><svg class="h-6 w-6 fill-gray-300 hover:fill-white transition-all ease-in-out mx-1 md:mx-2" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a><a title="GitHub" href="https://github.com/RyoJerryYu"><svg class="h-6 w-6 fill-gray-300 hover:fill-white transition-all ease-in-out mx-1 md:mx-2" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a><a title="Pixiv" href="https://www.pixiv.net/users/9159893"><svg class="h-6 w-6 fill-gray-300 hover:fill-white transition-all ease-in-out mx-1 md:mx-2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4.935 0A4.924 4.924 0 0 0 0 4.935v14.13A4.924 4.924 0 0 0 4.935 24h14.13A4.924 4.924 0 0 0 24 19.065V4.935A4.924 4.924 0 0 0 19.065 0zm7.81 4.547c2.181 0 4.058.676 5.399 1.847a6.118 6.118 0 0 1 2.116 4.66c.005 1.854-.88 3.476-2.257 4.563-1.375 1.092-3.225 1.697-5.258 1.697-2.314 0-4.46-.842-4.46-.842v2.718c.397.116 1.048.365.635.779H5.79c-.41-.41.19-.65.644-.779V7.666c-1.053.81-1.593 1.51-1.868 2.031.32 1.02-.284.969-.284.969l-1.09-1.73s3.868-4.39 9.553-4.39zm-.19.971c-1.423-.003-3.184.473-4.27 1.244v8.646c.988.487 2.484.832 4.26.832h.01c1.596 0 2.98-.593 3.93-1.533.952-.948 1.486-2.183 1.492-3.683-.005-1.54-.504-2.864-1.42-3.86-.918-.992-2.274-1.645-4.002-1.646Z"></path></svg></a></div></div></div><style data-emotion="css vkdybf">.css-vkdybf{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-basis:auto;-ms-flex-preferred-size:auto;flex-basis:auto;width:calc(100% * 0 / var(--Grid-parent-columns) - (var(--Grid-parent-columns) - 0) * (var(--Grid-parent-columnSpacing) / var(--Grid-parent-columns)));min-width:0;box-sizing:border-box;}@media (min-width:900px){.css-vkdybf{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-basis:auto;-ms-flex-preferred-size:auto;flex-basis:auto;width:calc(100% * 3 / var(--Grid-parent-columns) - (var(--Grid-parent-columns) - 3) * (var(--Grid-parent-columnSpacing) / var(--Grid-parent-columns)));}}@media (min-width:1200px){.css-vkdybf{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-basis:auto;-ms-flex-preferred-size:auto;flex-basis:auto;width:calc(100% * 2 / var(--Grid-parent-columns) - (var(--Grid-parent-columns) - 2) * (var(--Grid-parent-columnSpacing) / var(--Grid-parent-columns)));}}</style><div class="MuiGrid2-root MuiGrid2-direction-xs-row MuiGrid2-grid-xs-0 MuiGrid2-grid-md-3 MuiGrid2-grid-lg-2 css-vkdybf"></div></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"posts":[{"pathMapping":{"filePath":"public/content/learn_from_ai/2025-03-07-golang-new-and-memory-management.md","pagePath":"/learn_from_ai/golang-new-and-memory-management","slug":"golang-new-and-memory-management"},"meta":{"content":"\n\u003e æœ¬æ–‡ä¸ºä¸ GPT-4o çš„å¯¹è¯è®°å½•ï¼Œæ·±å…¥æ¢è®¨ GoLang ä¸­ new() å‡½æ•°çš„ä½¿ç”¨ä»¥åŠç›¸å…³çš„å†…å­˜ç®¡ç†æœºåˆ¶ã€‚\n\n## Q: Golang ä¸­ï¼Œ new() å¦‚æœå†…å­˜ç”³è¯·ä¸æˆåŠŸä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ\n\nåœ¨ Go è¯­è¨€ä¸­ï¼Œ`new()` å‡½æ•°ç”¨äºåˆ†é…å†…å­˜å¹¶è¿”å›æŒ‡å‘è¯¥å†…å­˜çš„æŒ‡é’ˆã€‚`new()` å‡½æ•°çš„è¡Œä¸ºæ˜¯éå¸¸ç®€å•ä¸”å®‰å…¨çš„ï¼šå®ƒæ€»æ˜¯è¿”å›ä¸€ä¸ªæŒ‡å‘é›¶å€¼çš„æŒ‡é’ˆã€‚Go è¯­è¨€çš„å†…å­˜åˆ†é…å™¨ä¼šç¡®ä¿å†…å­˜åˆ†é…æˆåŠŸï¼Œå› æ­¤åœ¨ä½¿ç”¨ `new()` æ—¶ï¼Œä¸ä¼šå‡ºç°å†…å­˜åˆ†é…å¤±è´¥çš„æƒ…å†µã€‚\n\næ¢å¥è¯è¯´ï¼Œ`new()` å‡½æ•°åœ¨ Go ä¸­ä¸ä¼šè¿”å› `nil`ï¼Œå› ä¸ºå®ƒæ€»æ˜¯èƒ½å¤ŸæˆåŠŸåˆ†é…å†…å­˜å¹¶è¿”å›ä¸€ä¸ªæœ‰æ•ˆçš„æŒ‡é’ˆã€‚Go è¯­è¨€çš„è®¾è®¡ç›®æ ‡ä¹‹ä¸€å°±æ˜¯æä¾›ä¸€ä¸ªå®‰å…¨çš„å†…å­˜ç®¡ç†æœºåˆ¶ï¼Œå› æ­¤å¼€å‘è€…ä¸éœ€è¦æ‹…å¿ƒå†…å­˜åˆ†é…å¤±è´¥çš„é—®é¢˜ã€‚\n\nå¦‚æœä½ æœ‰ä»»ä½•å…¶ä»–å…³äº Go è¯­è¨€çš„é—®é¢˜ï¼Œæ¬¢è¿éšæ—¶æé—®ï¼\n\n## Q: é‚£å¦‚æœæœºå™¨ä¸Šçš„å†…å­˜å·²ç»æ»¡äº†ï¼Œè°ƒç”¨ new() ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ\n\nåœ¨ Go è¯­è¨€ä¸­ï¼Œå¦‚æœæœºå™¨ä¸Šçš„å†…å­˜å·²ç»æ»¡äº†ï¼Œè°ƒç”¨ `new()` æˆ–å…¶ä»–å†…å­˜åˆ†é…å‡½æ•°ï¼ˆå¦‚ `make()` æˆ– `append()`ï¼‰æ—¶ï¼ŒGo è¿è¡Œæ—¶ä¼šå°è¯•åˆ†é…å†…å­˜ã€‚å¦‚æœå†…å­˜ç¡®å®ä¸è¶³ï¼ŒGo è¿è¡Œæ—¶ä¼šå¼•å‘ä¸€ä¸ªè¿è¡Œæ—¶é”™è¯¯ï¼ˆruntime panicï¼‰ï¼Œé€šå¸¸æ˜¯ `runtime: out of memory`ã€‚\n\nè¿™ç§æƒ…å†µä¼šå¯¼è‡´ç¨‹åºå´©æºƒï¼Œå› ä¸º Go è¯­è¨€çš„å†…å­˜åˆ†é…å™¨æ— æ³•æ»¡è¶³å†…å­˜è¯·æ±‚ã€‚Go è¯­è¨€çš„è®¾è®¡ç›®æ ‡ä¹‹ä¸€æ˜¯ç®€åŒ–å†…å­˜ç®¡ç†ï¼Œå› æ­¤å®ƒä¸æä¾›æ‰‹åŠ¨å¤„ç†å†…å­˜åˆ†é…å¤±è´¥çš„æœºåˆ¶ã€‚ç›¸åï¼ŒGo ä¾èµ–äºåƒåœ¾å›æ”¶å’Œè‡ªåŠ¨å†…å­˜ç®¡ç†æ¥å°½é‡å‡å°‘å†…å­˜ä¸è¶³çš„æƒ…å†µã€‚\n\nå› æ­¤ï¼Œåœ¨ç¼–å†™ Go ç¨‹åºæ—¶ï¼Œå¼€å‘è€…é€šå¸¸ä¸éœ€è¦ç›´æ¥å¤„ç†å†…å­˜åˆ†é…å¤±è´¥çš„æƒ…å†µï¼Œä½†éœ€è¦æ³¨æ„ç¨‹åºçš„å†…å­˜ä½¿ç”¨æƒ…å†µï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤§æ•°æ®é›†æˆ–é•¿æ—¶é—´è¿è¡Œçš„æœåŠ¡æ—¶ï¼Œä»¥é¿å…å†…å­˜è€—å°½ã€‚\n\n## Q: new è¿”å›çš„å¯¹è±¡ä¸€å®šåœ¨å †ä¸Šå—ï¼Ÿå¦‚æœé€ƒé€¸åˆ†æå‘ç°è¿™ä¸ªå¯¹è±¡æ²¡æœ‰é€ƒé€¸ï¼Œä¹Ÿä¼šåœ¨å †ä¸Šå—ï¼Ÿ\n\nåœ¨ Go è¯­è¨€ä¸­ï¼Œ`new()` è¿”å›çš„å¯¹è±¡ä¸ä¸€å®šæ€»æ˜¯åœ¨å †ä¸Šåˆ†é…ã€‚Go ç¼–è¯‘å™¨ä½¿ç”¨ä¸€ç§ç§°ä¸ºé€ƒé€¸åˆ†æï¼ˆescape analysisï¼‰çš„æŠ€æœ¯æ¥å†³å®šå¯¹è±¡æ˜¯åˆ†é…åœ¨å †ä¸Šè¿˜æ˜¯æ ˆä¸Šã€‚\n\nå¦‚æœé€ƒé€¸åˆ†æå‘ç°ä¸€ä¸ªå¯¹è±¡æ²¡æœ‰é€ƒé€¸å‡ºå…¶å‡½æ•°çš„ä½œç”¨åŸŸï¼ˆå³ï¼Œå®ƒä¸ä¼šåœ¨å‡½æ•°è¿”å›åç»§ç»­è¢«ä½¿ç”¨ï¼‰ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨å¯èƒ½ä¼šé€‰æ‹©åœ¨æ ˆä¸Šåˆ†é…è¯¥å¯¹è±¡ã€‚è¿™æ˜¯å› ä¸ºåœ¨æ ˆä¸Šåˆ†é…å’Œé‡Šæ”¾å†…å­˜çš„æˆæœ¬é€šå¸¸æ¯”åœ¨å †ä¸Šæ›´ä½ã€‚\n\nå› æ­¤ï¼Œå³ä½¿ä½¿ç”¨ `new()` åˆ†é…å†…å­˜ï¼Œå¦‚æœç¼–è¯‘å™¨é€šè¿‡é€ƒé€¸åˆ†æç¡®å®šè¯¥å¯¹è±¡ä¸ä¼šé€ƒé€¸ï¼Œå®ƒå¯èƒ½ä¼šåœ¨æ ˆä¸Šåˆ†é…è¯¥å¯¹è±¡ä»¥æé«˜æ€§èƒ½ã€‚\n\næ€»ç»“æ¥è¯´ï¼Œ`new()` è¿”å›çš„å¯¹è±¡ä¸ä¸€å®šåœ¨å †ä¸Šï¼Œå…·ä½“å–å†³äºé€ƒé€¸åˆ†æçš„ç»“æœã€‚å¦‚æœå¯¹è±¡æ²¡æœ‰é€ƒé€¸ï¼Œç¼–è¯‘å™¨å¯èƒ½ä¼šé€‰æ‹©åœ¨æ ˆä¸Šåˆ†é…å®ƒã€‚\n","title":"GoLang ä¸­ new() ä¸å†…å­˜ç®¡ç†æœºåˆ¶è¯¦è§£","abstract":"\u003e æœ¬æ–‡ä¸ºä¸ GPT-4o çš„å¯¹è¯è®°å½•ï¼Œæ·±å…¥æ¢è®¨ GoLang ä¸­ new() å‡½æ•°çš„ä½¿ç”¨ä»¥åŠç›¸å…³çš„å†…å­˜ç®¡ç†æœºåˆ¶ã€‚\nåœ¨ Go è¯­è¨€ä¸­ï¼Œ`new()` å‡½æ•°ç”¨äºåˆ†é…å†…å­˜å¹¶è¿”å›æŒ‡å‘è¯¥å†…å­˜çš„æŒ‡é’ˆã€‚`new()` å‡½æ•°çš„è¡Œä¸ºæ˜¯éå¸¸ç®€å•ä¸”å®‰å…¨çš„ï¼šå®ƒæ€»æ˜¯è¿”å›ä¸€ä¸ªæŒ‡å‘é›¶å€¼çš„æŒ‡é’ˆã€‚Go è¯­è¨€çš„å†…å­˜åˆ†é…å™¨ä¼šç¡®ä¿å†…å­˜åˆ†é…æˆåŠŸï¼Œå› æ­¤åœ¨ä½¿ç”¨ `new()` æ—¶ï¼Œä¸ä¼šå‡ºç°å†…å­˜åˆ†é…å¤±è´¥çš„æƒ…å†µã€‚\næ¢å¥è¯è¯´ï¼Œ`new()` å‡½æ•°åœ¨ Go ä¸­ä¸ä¼šè¿”å› `nil`ï¼Œå› ä¸ºå®ƒæ€»æ˜¯èƒ½å¤ŸæˆåŠŸåˆ†é…å†…å­˜å¹¶è¿”å›ä¸€ä¸ªæœ‰æ•ˆçš„æŒ‡é’ˆã€‚Go è¯­è¨€çš„è®¾è®¡ç›®æ ‡ä¹‹ä¸€å°±æ˜¯æä¾›ä¸€ä¸ªå®‰å…¨çš„å†…å­˜ç®¡ç†æœºåˆ¶ï¼Œå› æ­¤å¼€å‘è€…ä¸éœ€è¦æ‹…å¿ƒå†…å­˜åˆ†é…å¤±è´¥çš„é—®é¢˜ã€‚","length":29,"created_at":"2025-03-07T16:00:00.000Z","updated_at":"2025-03-07T16:00:00.000Z","tags":["GoLang","Memory Management"],"license":true}},{"pathMapping":{"filePath":"public/content/learn_from_ai/2025-03-07-pytorch-model-save-and-load.md","pagePath":"/learn_from_ai/pytorch-model-save-and-load","slug":"pytorch-model-save-and-load"},"meta":{"content":"\n\u003e æœ¬æ–‡ä¸ºä¸ DeepSeek å¯¹è¯è®°å½•ï¼Œæ·±å…¥æ¢è®¨ PyTorch ä¸­æ¨¡å‹çš„ä¿å­˜å’ŒåŠ è½½æœºåˆ¶ï¼ŒåŒ…æ‹¬ä¸åŒçš„ä¿å­˜æ–¹å¼ã€æœ€ä½³å®è·µä»¥åŠå¸¸è§é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚\n\n## Q: PyTorch ä¸­æ‰€è°“çš„ä¿å­˜æ¨¡å‹/åŠ è½½æ¨¡å‹ï¼ŒæŒ‡çš„æ˜¯ä¿å­˜/åŠ è½½ä»€ä¹ˆï¼Ÿæ˜¯ state_dict å—ï¼Ÿ\n\n\u003e [!reasoning]-\n\u003e\n\u003e å—¯ï¼Œæˆ‘ç°åœ¨è¦å¼„æ¸…æ¥š PyTorch ä¸­ä¿å­˜å’ŒåŠ è½½æ¨¡å‹åˆ°åº•æ˜¯æ€ä¹ˆå›äº‹ã€‚ç”¨æˆ·é—®æ˜¯ä¸æ˜¯ä¿å­˜å’ŒåŠ è½½ state_dictï¼Œæˆ‘éœ€è¦ä»”ç»†æƒ³ä¸€æƒ³è¿™ä¸ªé—®é¢˜ã€‚\n\u003e\n\u003e é¦–å…ˆï¼Œæˆ‘è®°å¾—åœ¨ PyTorch é‡Œè®­ç»ƒæ¨¡å‹çš„æ—¶å€™ï¼Œæ¨¡å‹çš„å¯å­¦ä¹ å‚æ•°ï¼Œæ¯”å¦‚å„å±‚çš„æƒé‡å’Œåç½®ï¼Œæ˜¯å­˜æ”¾åœ¨æ¨¡å‹çš„ parameters ä¸­çš„ã€‚è€Œ state_dict åº”è¯¥æ˜¯ä¸€ä¸ªä¿å­˜è¿™äº›å‚æ•°çš„ä¸œè¥¿ã€‚å¯¹ï¼Œæ¯ä¸ª torch.nn.Module éƒ½æœ‰ state_dictï¼Œå®ƒæ˜¯ä¸€ä¸ªå­—å…¸ï¼Œå°†æ¯ä¸ªå±‚æ˜ å°„åˆ°å¯¹åº”çš„å‚æ•°å¼ é‡ã€‚\n\u003e\n\u003e é‚£ä¿å­˜æ¨¡å‹çš„æ—¶å€™ï¼Œæœ‰ä¸¤ç§å¸¸è§çš„æ–¹æ³•ã€‚ä¸€ç§æ˜¯ç›´æ¥ä¿å­˜æ•´ä¸ªæ¨¡å‹ï¼Œä½¿ç”¨ torch.save(model, 'model.pth')ã€‚è¿™æ ·çš„è¯ï¼Œä¿å­˜çš„æ˜¯æ•´ä¸ªæ¨¡å‹å¯¹è±¡ï¼ŒåŒ…æ‹¬ç»“æ„å®šä¹‰å’Œå‚æ•°ã€‚ä¸è¿‡è¿™ç§æ–¹æ³•å¯èƒ½æœ‰ç¼ºç‚¹ï¼Œæ¯”å¦‚å½“æ¨¡å‹å®šä¹‰æ‰€åœ¨çš„æ–‡ä»¶è·¯å¾„å˜åŒ–æ—¶ï¼ŒåŠ è½½çš„æ—¶å€™å¯èƒ½ä¼šæ‰¾ä¸åˆ°ç±»å®šä¹‰ï¼Œå¯¼è‡´é”™è¯¯ã€‚æ‰€ä»¥é€šå¸¸æ›´æ¨èå¦ä¸€ç§æ–¹æ³•ï¼Œå°±æ˜¯åªä¿å­˜ state_dictï¼Œè¿™æ ·éœ€è¦çš„æ—¶å€™å†åŠ è½½åˆ°ä¸€ä¸ªå®šä¹‰å¥½çš„æ¨¡å‹ç»“æ„ä¸­ã€‚\n\u003e\n\u003e æ‰€ä»¥ç”¨æˆ·çš„é—®é¢˜æ˜¯è¯´ä¿å­˜æ¨¡å‹æ˜¯ä¸æ˜¯ä¿å­˜ state_dictï¼Œå¯¹å§ï¼Ÿæ˜¯çš„ï¼Œé€šå¸¸æœ€ä½³åšæ³•æ˜¯ä¿å­˜ state_dictï¼Œè€Œä¸æ˜¯æ•´ä¸ªæ¨¡å‹å¯¹è±¡ã€‚å› ä¸º state_dict åªåŒ…å«å‚æ•°ï¼Œä¸åŒ…å«æ¨¡å‹ç»“æ„ï¼Œè¿™æ ·åœ¨åŠ è½½çš„æ—¶å€™æ›´çµæ´»ã€‚æ¯”å¦‚ï¼Œå½“ä½ æƒ³åœ¨ä¸åŒé¡¹ç›®ä¸­ä½¿ç”¨åŒä¸€ä¸ªæ¨¡å‹å‚æ•°ï¼Œæˆ–è€…æ¨¡å‹ç±»æœ‰ä¿®æ”¹æ—¶ï¼ŒåŠ è½½ state_dict ä¼šæ›´æ–¹ä¾¿ã€‚\n\u003e\n\u003e é‚£åŠ è½½çš„æ—¶å€™ï¼Œå°±éœ€è¦å…ˆå®ä¾‹åŒ–æ¨¡å‹ï¼Œç„¶åç”¨ load_state_dict æ–¹æ³•åŠ è½½å‚æ•°ã€‚æ¯”å¦‚ï¼š\n\u003e\n\u003e model = MyModelClass(\\*args, \\*\\*kwargs)\n\u003e\n\u003e model.load_state_dict(torch.load('model.pth'))\n\u003e\n\u003e è¿™æ ·å‚æ•°å°±è¢«æ­£ç¡®åŠ è½½åˆ°æ¨¡å‹é‡Œäº†ã€‚è€Œå¦‚æœä¿å­˜çš„æ˜¯æ•´ä¸ªæ¨¡å‹ï¼ŒåŠ è½½çš„æ—¶å€™å¯ä»¥ç›´æ¥ç”¨ model = torch.load('model.pth')ï¼Œä½†è¿™æ—¶å€™æ¨¡å‹ç±»å¿…é¡»åœ¨å½“å‰ä½œç”¨åŸŸå¯è®¿é—®ï¼Œå¦åˆ™ä¼šå‡ºé”™ã€‚\n\u003e\n\u003e æ‰€ä»¥æ€»ç»“ä¸€ä¸‹ï¼Œä¿å­˜æ¨¡å‹é€šå¸¸æŒ‡çš„æ˜¯ä¿å­˜ state_dictï¼Œè€ŒåŠ è½½æ¨¡å‹å°±æ˜¯åŠ è½½è¿™ä¸ª state_dict åˆ°å·²ç»å®šä¹‰å¥½çš„æ¨¡å‹ç»“æ„ä¸­ã€‚å½“ç„¶ï¼ŒPyTorch ä¹Ÿå…è®¸ä¿å­˜æ•´ä¸ªæ¨¡å‹ï¼Œä½†ä¸å¤Ÿçµæ´»ï¼Œæ‰€ä»¥æ¨èç”¨ state_dict çš„æ–¹å¼ã€‚\n\u003e\n\u003e å¦å¤–ï¼Œå¯èƒ½è¿˜æœ‰å…¶ä»–éœ€è¦ä¿å­˜çš„å†…å®¹ï¼Œæ¯”å¦‚ä¼˜åŒ–å™¨çš„ state_dictï¼Œè¿™æ ·åœ¨æ¢å¤è®­ç»ƒçš„æ—¶å€™å¯ä»¥æ¥ç€ä¹‹å‰çš„ä¼˜åŒ–å™¨çŠ¶æ€ç»§ç»­è®­ç»ƒã€‚è¿™æ—¶å€™ä¿å­˜çš„ checkpoint å¯èƒ½åŒ…æ‹¬ model_state_dictã€optimizer_state_dictã€epochã€loss ç­‰ä¿¡æ¯ã€‚åŠ è½½çš„æ—¶å€™éœ€è¦åˆ†åˆ«å¤„ç†è¿™äº›éƒ¨åˆ†ã€‚\n\u003e\n\u003e ä½†ç”¨æˆ·çš„é—®é¢˜ä¸»è¦æ˜¯å…³äºä¿å­˜å’ŒåŠ è½½æ¨¡å‹æœ¬èº«ï¼Œæ‰€ä»¥æ ¸å¿ƒç­”æ¡ˆåº”è¯¥æ˜¯ state_dictã€‚ä¸è¿‡è¦è¯´æ˜ä¿å­˜æ•´ä¸ªæ¨¡å‹çš„æƒ…å†µä¹Ÿå­˜åœ¨ï¼Œä½† state_dict æ›´æ¨èã€‚æ‰€ä»¥å›ç­”çš„æ—¶å€™åº”è¯¥æ¶µç›–è¿™ä¸¤ç§æƒ…å†µï¼Œä½†å¼ºè°ƒ state_dict æ˜¯æ›´å¸¸ç”¨çš„æ–¹æ³•ã€‚\n\nåœ¨ PyTorch ä¸­ï¼Œä¿å­˜å’ŒåŠ è½½æ¨¡å‹çš„**æ ¸å¿ƒæ˜¯ `state_dict`**ï¼Œä½†å…·ä½“æ“ä½œå¯ä»¥çµæ´»é€‰æ‹©ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†è¯´æ˜ï¼š\n\n---\n\n### 1. **`state_dict` æ˜¯ä»€ä¹ˆï¼Ÿ**\n\n- **`state_dict`** æ˜¯ä¸€ä¸ª Python å­—å…¸å¯¹è±¡ï¼Œå®ƒå°†æ¨¡å‹çš„æ¯ä¸€å±‚ï¼ˆå¦‚å·ç§¯å±‚ã€å…¨è¿æ¥å±‚ç­‰ï¼‰æ˜ å°„åˆ°å¯¹åº”çš„å‚æ•°å¼ é‡ï¼ˆæƒé‡å’Œåç½®ï¼‰ã€‚\n- ä¾‹å¦‚ï¼Œä¸€ä¸ªç®€å•çš„ç¥ç»ç½‘ç»œå¯èƒ½åŒ…å«ï¼š\n  ```python\n  model.state_dict() = {\n      'conv1.weight': tensor(...),\n      'conv1.bias': tensor(...),\n      'fc1.weight': tensor(...),\n      'fc1.bias': tensor(...),\n      ...\n  }\n  ```\n- **ä¼˜åŒ–å™¨**ï¼ˆå¦‚ `torch.optim.SGD`ï¼‰ä¹Ÿæœ‰è‡ªå·±çš„ `state_dict`ï¼Œä¿å­˜ä¼˜åŒ–å™¨çš„çŠ¶æ€ï¼ˆå¦‚åŠ¨é‡ç¼“å†²ç­‰ï¼‰ã€‚\n\n---\n\n### 2. **ä¿å­˜æ¨¡å‹çš„ä¸¤ç§æ–¹å¼**\n\n#### **æ–¹å¼ 1ï¼šä»…ä¿å­˜ `state_dict`ï¼ˆæ¨èï¼‰**\n\n- **ä»£ç ç¤ºä¾‹**ï¼š\n  ```python\n  torch.save(model.state_dict(), 'model_weights.pth')\n  ```\n- **ä¼˜ç‚¹**ï¼š\n  - æ–‡ä»¶ä½“ç§¯å°ï¼Œåªä¿å­˜å‚æ•°ï¼Œä¸ä¿å­˜æ¨¡å‹ç»“æ„ã€‚\n  - åŠ è½½çµæ´»ï¼šéœ€å…ˆå®ä¾‹åŒ–æ¨¡å‹ç»“æ„ï¼Œå†åŠ è½½å‚æ•°ã€‚\n  - é¿å…å› ä»£ç å˜æ›´ï¼ˆå¦‚ç±»åä¿®æ”¹ï¼‰å¯¼è‡´çš„åŠ è½½å¤±è´¥ã€‚\n\n#### **æ–¹å¼ 2ï¼šä¿å­˜æ•´ä¸ªæ¨¡å‹ï¼ˆä¸æ¨èï¼‰**\n\n- **ä»£ç ç¤ºä¾‹**ï¼š\n  ```python\n  torch.save(model, 'entire_model.pth')\n  ```\n- **ç¼ºç‚¹**ï¼š\n  - æ–‡ä»¶ä½“ç§¯å¤§ï¼ŒåŒ…å«æ¨¡å‹ç»“æ„å’Œå‚æ•°ã€‚\n  - ä¾èµ–åŸå§‹ä»£ç ç¯å¢ƒï¼ˆæ¨¡å‹ç±»çš„å®šä¹‰å¿…é¡»å­˜åœ¨ï¼‰ï¼Œå¦åˆ™åŠ è½½æ—¶ä¼šæŠ¥é”™ã€‚\n\n---\n\n### 3. **åŠ è½½æ¨¡å‹çš„å¯¹åº”æ–¹æ³•**\n\n#### **åŠ è½½ `state_dict`ï¼ˆéœ€å…ˆæ„å»ºæ¨¡å‹ç»“æ„ï¼‰**\n\n```python\nmodel = MyModelClass()  # å¿…é¡»ä¸ä¿å­˜æ—¶çš„æ¨¡å‹ç»“æ„ä¸€è‡´\nmodel.load_state_dict(torch.load('model_weights.pth'))\nmodel.eval()  # åˆ‡æ¢åˆ°æ¨ç†æ¨¡å¼ï¼ˆå…³é—­ dropout ç­‰ï¼‰\n```\n\n#### **åŠ è½½æ•´ä¸ªæ¨¡å‹ï¼ˆç›´æ¥ä½¿ç”¨ï¼‰**\n\n```python\nmodel = torch.load('entire_model.pth')\nmodel.eval()\n```\n\n---\n\n### 4. **å®é™…åœºæ™¯ä¸­çš„æœ€ä½³å®è·µ**\n\n- **ä¿å­˜è®­ç»ƒæ£€æŸ¥ç‚¹ï¼ˆCheckpointï¼‰**ï¼š\n  é€šå¸¸éœ€è¦ä¿å­˜ `state_dict` ä¹‹å¤–çš„ä¿¡æ¯ï¼ˆå¦‚ä¼˜åŒ–å™¨çŠ¶æ€ã€è®­ç»ƒæ­¥æ•°ç­‰ï¼‰ï¼š\n\n  ```python\n  checkpoint = {\n      'model_state_dict': model.state_dict(),\n      'optimizer_state_dict': optimizer.state_dict(),\n      'epoch': 100,\n      'loss': loss,\n  }\n  torch.save(checkpoint, 'checkpoint.pth')\n  ```\n\n- **åŠ è½½æ£€æŸ¥ç‚¹**ï¼š\n  ```python\n  checkpoint = torch.load('checkpoint.pth')\n  model.load_state_dict(checkpoint['model_state_dict'])\n  optimizer.load_state_dict(checkpoint['optimizer_state_dict'])\n  epoch = checkpoint['epoch']\n  ```\n\n---\n\n### 5. **å…³é”®æ€»ç»“**\n\n- **ä¿å­˜æ¨¡å‹**ï¼šæœ¬è´¨æ˜¯ä¿å­˜æ¨¡å‹çš„ `state_dict`ï¼ˆæ¨èï¼‰ï¼Œä½†ä¹Ÿå¯ä»¥ä¿å­˜æ•´ä¸ªæ¨¡å‹ã€‚\n- **åŠ è½½æ¨¡å‹**ï¼š\n  - è‹¥ä¿å­˜çš„æ˜¯ `state_dict`ï¼Œéœ€å…ˆå®ä¾‹åŒ–æ¨¡å‹ç»“æ„ï¼Œå†åŠ è½½å‚æ•°ã€‚\n  - è‹¥ä¿å­˜çš„æ˜¯æ•´ä¸ªæ¨¡å‹ï¼Œç›´æ¥åŠ è½½ä½†éœ€ä¿è¯ä»£ç å…¼å®¹æ€§ã€‚\n- **çµæ´»æ€§**ï¼šä½¿ç”¨ `state_dict` æ›´å®‰å…¨ã€æ›´çµæ´»ï¼Œé€‚åˆè·¨é¡¹ç›®æˆ–æ¨¡å‹ç»“æ„å¯èƒ½å˜åŒ–çš„åœºæ™¯ã€‚\n\n## Q: model çš„ config åˆæ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Ÿæ˜¯è¶…å‚å—ï¼Ÿ\n\n\u003e [!reasoning]-\n\u003e\n\u003e å—¯ï¼Œç”¨æˆ·ä¹‹å‰é—®è¿‡ PyTorch ä¸­ä¿å­˜å’ŒåŠ è½½æ¨¡å‹çš„æ¦‚å¿µï¼Œç°åœ¨åˆæ¥ç€é—®\"model çš„ config æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Ÿæ˜¯è¶…å‚å—ï¼Ÿ\"æˆ‘éœ€è¦ä»”ç»†åˆ†æè¿™ä¸ªé—®é¢˜ï¼Œç¡®ä¿ç†è§£ç”¨æˆ·çš„çœŸå®éœ€æ±‚ã€‚\n\u003e\n\u003e é¦–å…ˆï¼Œç”¨æˆ·å·²ç»äº†è§£ state_dictï¼Œç°åœ¨è½¬å‘æ¨¡å‹é…ç½®ï¼ˆconfigï¼‰ã€‚å¯èƒ½ä»–ä»¬åœ¨å®é™…é¡¹ç›®ä¸­é‡åˆ°äº†éœ€è¦ä¿å­˜æˆ–ç®¡ç†æ¨¡å‹ç»“æ„çš„æƒ…å†µï¼Œæˆ–è€…åœ¨é˜…è¯»ä»£ç æ—¶é‡åˆ°äº† config è¿™ä¸ªæœ¯è¯­ã€‚ç”¨æˆ·æƒ³çŸ¥é“ config å…·ä½“æŒ‡ä»€ä¹ˆï¼Œæ˜¯å¦åŒ…æ‹¬è¶…å‚æ•°ã€‚\n\u003e\n\u003e æ¥ä¸‹æ¥ï¼Œæˆ‘éœ€è¦æ˜ç¡®\"model config\"çš„å®šä¹‰ã€‚åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œæ¨¡å‹é…ç½®é€šå¸¸æŒ‡çš„æ˜¯å®šä¹‰æ¨¡å‹ç»“æ„çš„å‚æ•°ï¼Œæ¯”å¦‚ç¥ç»ç½‘ç»œçš„å±‚æ•°ã€æ¯å±‚çš„ç¥ç»å…ƒæ•°é‡ã€æ¿€æ´»å‡½æ•°ç±»å‹ç­‰ã€‚è€Œè¶…å‚æ•°å¯èƒ½åŒ…æ‹¬å­¦ä¹ ç‡ã€æ‰¹é‡å¤§å°ã€ä¼˜åŒ–å™¨ç±»å‹ç­‰è®­ç»ƒè¿‡ç¨‹ä¸­çš„è®¾ç½®ã€‚ä½†æœ‰æ—¶å€™è¿™ä¸¤è€…ä¹‹é—´çš„ç•Œé™å¹¶ä¸ä¸¥æ ¼ï¼Œç‰¹åˆ«æ˜¯å½“æŸäº›ç»“æ„å‚æ•°ä¹Ÿè¢«è§†ä¸ºè¶…å‚æ•°æ—¶ã€‚\n\u003e\n\u003e ç”¨æˆ·å¯èƒ½æ··æ·†äº†æ¨¡å‹é…ç½®å’Œè¶…å‚æ•°ï¼Œéœ€è¦åŒºåˆ†è¿™ä¸¤è€…ã€‚éœ€è¦ä¸¾ä¾‹è¯´æ˜ï¼Œæ¯”å¦‚åœ¨ Transformer æ¨¡å‹ä¸­ï¼Œconfig å¯èƒ½åŒ…å«éšè—å±‚å¤§å°ã€å¤´æ•°ç­‰ï¼Œè€Œè¶…å‚æ•°åˆ™æ˜¯è®­ç»ƒæ—¶çš„è®¾ç½®ã€‚ä½†æœ‰æ—¶ï¼Œä¾‹å¦‚åœ¨ HuggingFace çš„åº“ä¸­ï¼Œæ¨¡å‹é…ç½®ç±»ï¼ˆå¦‚ BertConfigï¼‰ç¡®å®åŒ…å«äº†æ¨¡å‹ç»“æ„çš„æ‰€æœ‰å‚æ•°ï¼Œè¿™å¯èƒ½è®©ç”¨æˆ·äº§ç”Ÿç–‘é—®ã€‚\n\u003e\n\u003e å¦å¤–ï¼Œç”¨æˆ·å¯èƒ½æƒ³çŸ¥é“ä¸ºä»€ä¹ˆéœ€è¦å•ç‹¬ä¿å­˜ configã€‚å¯èƒ½ä»–ä»¬åœ¨ä¿å­˜æ¨¡å‹æ—¶ï¼Œé™¤äº† state_dict ä¹‹å¤–ï¼Œè¿˜éœ€è¦ä¿å­˜æ¨¡å‹ç»“æ„çš„ä¿¡æ¯ï¼Œä»¥ä¾¿é‡æ–°å®ä¾‹åŒ–æ¨¡å‹ã€‚æ¯”å¦‚ï¼Œå¦‚æœåªä¿å­˜ state_dictï¼ŒåŠ è½½æ—¶éœ€è¦å…ˆæœ‰æ¨¡å‹ç±»çš„å®šä¹‰å’Œ config å‚æ•°ï¼Œæ‰èƒ½æ­£ç¡®åˆ›å»ºæ¨¡å‹å®ä¾‹ï¼Œç„¶ååŠ è½½æƒé‡ã€‚\n\u003e\n\u003e éœ€è¦è§£é‡Š config çš„ä½œç”¨ï¼šå®ƒå®šä¹‰äº†æ¨¡å‹çš„ç»“æ„ï¼Œæ˜¯é‡å»ºæ¨¡å‹å®ä¾‹çš„å¿…è¦ä¿¡æ¯ã€‚ä¸è¶…å‚æ•°ä¸åŒï¼Œconfig ä¸»è¦æ¶‰åŠæ¨¡å‹æ¶æ„ï¼Œè€Œè¶…å‚æ•°æ¶‰åŠè®­ç»ƒè¿‡ç¨‹ã€‚ä½†æœ‰äº›æƒ…å†µä¸‹ï¼Œä¸¤è€…å¯èƒ½æœ‰é‡å ï¼Œæ¯”å¦‚å­¦ä¹ ç‡å¯èƒ½è¢«åŒ…å«åœ¨è®­ç»ƒé…ç½®ä¸­ï¼Œè€Œå±‚æ•°åœ¨æ¨¡å‹é…ç½®ä¸­ã€‚\n\u003e\n\u003e è¿˜éœ€è¦è€ƒè™‘ç”¨æˆ·å¯èƒ½çš„å®é™…åº”ç”¨åœºæ™¯ã€‚æ¯”å¦‚ï¼Œä½¿ç”¨ HuggingFace çš„ Transformers åº“æ—¶ï¼Œæ¨¡å‹é…ç½®è¢«æ˜ç¡®åˆ†ç¦»ï¼Œç”¨æˆ·éœ€è¦ä¿å­˜ config.json å’Œ model.binã€‚è¿™æ—¶å€™ï¼Œconfig ä¿å­˜æ¨¡å‹ç»“æ„ï¼Œmodel.bin ä¿å­˜ state_dictã€‚ç”¨æˆ·å¯èƒ½åœ¨è¿™ç§æƒ…å†µä¸‹é‡åˆ° config çš„æ¦‚å¿µï¼Œéœ€è¦è§£é‡Šè¿™ç§è®¾è®¡çš„åŸå› å’Œå¥½å¤„ã€‚\n\u003e\n\u003e æ­¤å¤–ï¼Œç”¨æˆ·å¯èƒ½æƒ³çŸ¥é“å¦‚ä½•ç®¡ç† configï¼Œæ¯”å¦‚ä½¿ç”¨ YAML æˆ– JSON æ–‡ä»¶æ¥å­˜å‚¨æ¨¡å‹ç»“æ„å‚æ•°ï¼Œæ–¹ä¾¿ç‰ˆæœ¬æ§åˆ¶å’Œå®éªŒå¤ç°ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåˆ†å¼€ä¿å­˜ config å’Œ state_dict æ›´çµæ´»ï¼Œå› ä¸ºä¿®æ”¹ç»“æ„æ—¶åªéœ€è°ƒæ•´ config è€Œä¸å½±å“è®­ç»ƒå¥½çš„æƒé‡ã€‚\n\u003e\n\u003e æœ€åï¼Œè¦ç¡®ä¿å›ç­”ç»“æ„æ¸…æ™°ï¼Œåˆ†ç‚¹è¯´æ˜ï¼Œç»™å‡ºä»£ç ç¤ºä¾‹ï¼Œå¹¶æ¯”è¾ƒ config ä¸è¶…å‚æ•°çš„åŒºåˆ«å’Œè”ç³»ã€‚åŒæ—¶ï¼Œæ³¨æ„ç”¨æˆ·å¯èƒ½çš„æŠ€æœ¯æ°´å¹³ï¼Œé¿å…ä½¿ç”¨è¿‡äºä¸“ä¸šçš„æœ¯è¯­ï¼Œä¿æŒè§£é‡Šçš„æ˜“æ‡‚æ€§ã€‚\n\nåœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œ**æ¨¡å‹çš„ `config`ï¼ˆé…ç½®ï¼‰** é€šå¸¸æŒ‡**å®šä¹‰æ¨¡å‹ç»“æ„çš„æ‰€æœ‰å‚æ•°**ï¼Œè€Œè¶…å‚ï¼ˆHyperparametersï¼‰æ›´å¤šæŒ‡**æ§åˆ¶è®­ç»ƒè¿‡ç¨‹çš„å‚æ•°**ã€‚è¿™ä¸¤è€…æœ‰æ—¶ä¼šæœ‰é‡å ï¼Œä½†æ ¸å¿ƒåŒºåˆ«åœ¨äºä½œç”¨å¯¹è±¡ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†è§£é‡Šï¼š\n\n---\n\n### 1. **ä»€ä¹ˆæ˜¯æ¨¡å‹çš„ `config`ï¼Ÿ**\n\n- **æ¨¡å‹é…ç½®**ï¼ˆModel Configurationï¼‰æ˜¯å®šä¹‰**æ¨¡å‹ç»“æ„**çš„ä¸€ç»„å‚æ•°ï¼Œä¾‹å¦‚ï¼š\n\n  - ç¥ç»ç½‘ç»œçš„å±‚æ•°ã€æ¯å±‚çš„ç¥ç»å…ƒæ•°é‡\n  - å·ç§¯æ ¸å¤§å°ã€æ­¥é•¿ï¼ˆStrideï¼‰ã€å¡«å……ï¼ˆPaddingï¼‰\n  - æ¿€æ´»å‡½æ•°ç±»å‹ï¼ˆå¦‚ ReLUã€Sigmoidï¼‰\n  - æ³¨æ„åŠ›æœºåˆ¶çš„å¤´æ•°ï¼ˆå¦‚ Transformer ä¸­çš„ `num_heads`ï¼‰\n  - è¯åµŒå…¥ç»´åº¦ï¼ˆå¦‚ NLP æ¨¡å‹ä¸­çš„ `hidden_size`ï¼‰\n\n- **ç¤ºä¾‹**ï¼ˆä»¥ Transformer æ¨¡å‹ä¸ºä¾‹ï¼‰ï¼š\n  ```python\n  config = {\n      \"num_layers\": 12,          # Transformer å±‚æ•°\n      \"hidden_size\": 768,         # éšè—å±‚ç»´åº¦\n      \"num_attention_heads\": 12,  # æ³¨æ„åŠ›å¤´æ•°\n      \"intermediate_size\": 3072,  # FeedForward å±‚ç»´åº¦\n      \"vocab_size\": 30522,        # è¯è¡¨å¤§å°\n  }\n  ```\n\n---\n\n### 2. **æ¨¡å‹ `config` ä¸è¶…å‚æ•°çš„åŒºåˆ«**\n\n| **ç±»åˆ«**     | **æ¨¡å‹é…ç½®ï¼ˆConfigï¼‰**                 | **è¶…å‚æ•°ï¼ˆHyperparametersï¼‰**                                  |\n| ------------ | -------------------------------------- | -------------------------------------------------------------- |\n| **ä½œç”¨å¯¹è±¡** | æ¨¡å‹ç»“æ„                               | è®­ç»ƒè¿‡ç¨‹                                                       |\n| **å…¸å‹å‚æ•°** | å±‚æ•°ã€ç»´åº¦ã€æ³¨æ„åŠ›å¤´æ•°ã€å·ç§¯æ ¸å¤§å°     | å­¦ä¹ ç‡ã€æ‰¹é‡å¤§å°ï¼ˆBatch Sizeï¼‰ã€ä¼˜åŒ–å™¨ç±»å‹ã€è®­ç»ƒè½®æ•°ï¼ˆEpochsï¼‰ |\n| **ä¿å­˜ç›®çš„** | é‡å»ºæ¨¡å‹ç»“æ„ï¼ˆå¦‚åŠ è½½ `state_dict` å‰ï¼‰ | å¤ç°è®­ç»ƒè¿‡ç¨‹ï¼ˆå¦‚è°ƒå‚ã€å®éªŒå¯¹æ¯”ï¼‰                               |\n| **ä¿®æ”¹é¢‘ç‡** | ä½é¢‘ï¼ˆæ¨¡å‹ç»“æ„ç¨³å®šåå¾ˆå°‘æ”¹åŠ¨ï¼‰         | é«˜é¢‘ï¼ˆéœ€åå¤è°ƒæ•´ä¼˜åŒ–ï¼‰                                         |\n\n---\n\n### 3. **ä¸ºä»€ä¹ˆéœ€è¦å•ç‹¬ç®¡ç† `config`ï¼Ÿ**\n\n- **åœºæ™¯ 1ï¼šé‡å»ºæ¨¡å‹**  \n  è‹¥ä»…ä¿å­˜ `state_dict`ï¼ˆæ¨¡å‹æƒé‡ï¼‰ï¼ŒåŠ è½½æ—¶å¿…é¡»**å…ˆæ ¹æ® `config` é‡å»ºæ¨¡å‹ç»“æ„**ï¼Œæ‰èƒ½åŠ è½½æƒé‡ï¼š\n\n  ```python\n  # ä¿å­˜\n  torch.save(model.state_dict(), \"model_weights.pth\")\n  with open(\"model_config.json\", \"w\") as f:\n      json.dump(config, f)\n\n  # åŠ è½½\n  with open(\"model_config.json\", \"r\") as f:\n      config = json.load(f)\n  model = MyModel(**config)  # æ ¹æ® config å®ä¾‹åŒ–æ¨¡å‹\n  model.load_state_dict(torch.load(\"model_weights.pth\"))\n  ```\n\n- **åœºæ™¯ 2ï¼šç‰ˆæœ¬æ§åˆ¶ä¸å®éªŒå¤ç°**  \n  å°† `config` ä¿å­˜ä¸º JSON/YAML æ–‡ä»¶ï¼Œä¾¿äºè®°å½•ä¸åŒæ¨¡å‹ç»“æ„çš„å®éªŒæ•ˆæœã€‚\n\n- **åœºæ™¯ 3ï¼šå…±äº«æ¨¡å‹**  \n  å¼€æºç¤¾åŒºå¸¸ç”¨æ¨¡å¼ï¼ˆå¦‚ HuggingFace Transformersï¼‰ï¼š\n  - `config.json`ï¼šå®šä¹‰æ¨¡å‹ç»“æ„\n  - `pytorch_model.bin`ï¼šä¿å­˜ `state_dict`\n\n---\n\n### 4. **`config` ä¸è¶…å‚æ•°çš„é‡å æƒ…å†µ**\n\næŸäº›å‚æ•°å¯èƒ½åŒæ—¶å½±å“æ¨¡å‹ç»“æ„å’Œè®­ç»ƒï¼Œä¾‹å¦‚ï¼š\n\n- **Dropout æ¯”ç‡**ï¼šæ—¢æ˜¯æ¨¡å‹ç»“æ„çš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿè¢«è§†ä¸ºè¶…å‚æ•°ã€‚\n- **è¯åµŒå…¥ç»´åº¦**ï¼šå½±å“æ¨¡å‹ç»“æ„ï¼Œä½†å¯èƒ½å› è®­ç»ƒèµ„æºè°ƒæ•´ï¼ˆå¦‚æ˜¾å­˜ä¸è¶³æ—¶è°ƒå°ç»´åº¦ï¼‰ã€‚\n\næ­¤æ—¶ï¼Œå¯ä»¥**å°†ä¸¤è€…ç»Ÿä¸€ç®¡ç†**ï¼Œä½†å»ºè®®åˆ†å¼€å­˜å‚¨ï¼š\n\n```python\n# ç»Ÿä¸€é…ç½®æ–‡ä»¶ï¼ˆconfig.yamlï¼‰\nmodel:\n  num_layers: 12\n  hidden_size: 768\ntraining:\n  learning_rate: 1e-4\n  batch_size: 32\n```\n\n---\n\n### 5. **å®é™…ä»£ç ç¤ºä¾‹**\n\n#### å®šä¹‰æ¨¡å‹æ—¶ä½¿ç”¨ `config`ï¼š\n\n```python\nclass TransformerModel(nn.Module):\n    def __init__(self, config):\n        super().__init__()\n        self.embedding = nn.Embedding(config[\"vocab_size\"], config[\"hidden_size\"])\n        self.layers = nn.ModuleList([TransformerBlock(config) for _ in range(config[\"num_layers\"])])\n        # ...\n\n# åˆå§‹åŒ–æ¨¡å‹\nconfig = {\"vocab_size\": 30000, \"hidden_size\": 512, \"num_layers\": 6}\nmodel = TransformerModel(config)\n```\n\n#### ä¿å­˜ä¸åŠ è½½å®Œæ•´æ¨¡å‹ï¼ˆå«ç»“æ„å’Œæƒé‡ï¼‰ï¼š\n\n```python\n# ä¿å­˜ï¼ˆä¸æ¨èï¼Œä½†æŸäº›åœºæ™¯éœ€è¦ï¼‰\nfull_model = {\"config\": config, \"state_dict\": model.state_dict()}\ntorch.save(full_model, \"full_model.pth\")\n\n# åŠ è½½\nloaded = torch.load(\"full_model.pth\")\nmodel = TransformerModel(loaded[\"config\"])\nmodel.load_state_dict(loaded[\"state_dict\"])\n```\n\n---\n\n### 6. **æ€»ç»“**\n\n- **æ¨¡å‹ `config`**ï¼šå®šä¹‰æ¨¡å‹ç»“æ„çš„å‚æ•°ï¼ˆå¦‚å±‚æ•°ã€ç»´åº¦ï¼‰ï¼Œæ˜¯**é‡å»ºæ¨¡å‹**çš„å¿…éœ€ä¿¡æ¯ã€‚\n- **è¶…å‚æ•°**ï¼šæ§åˆ¶è®­ç»ƒè¿‡ç¨‹çš„å‚æ•°ï¼ˆå¦‚å­¦ä¹ ç‡ã€æ‰¹é‡å¤§å°ï¼‰ï¼Œå½±å“æ¨¡å‹å¦‚ä½•å­¦ä¹ ã€‚\n- **æœ€ä½³å®è·µ**ï¼š\n  - å§‹ç»ˆä¿å­˜ `config`ï¼ˆå¦‚ JSON æ–‡ä»¶ï¼‰ï¼Œç¡®ä¿æ¨¡å‹å¯å¤ç°ã€‚\n  - åˆ†å¼€ç®¡ç†æ¨¡å‹é…ç½®å’Œè®­ç»ƒè¶…å‚æ•°ï¼Œé¿å…æ··æ·†ã€‚\n\n\u003e [!info] äº®æ›°\n\u003e\n\u003e - Config ä¸»è¦æ˜¯å®šä¹‰æ¨¡å‹ç»“æ„ã€‚ä¼šæ ¹æ® Config å†³å®šæœ‰å¤šå°‘å±‚ç­‰ã€‚\n\u003e - è¶…å‚ä¸»è¦æ˜¯è®­ç»ƒè¿‡ç¨‹ä¸­çš„å­¦ä¹ ç‡ã€ Epochs ç­‰ï¼Œå¤ç°è®­ç»ƒè¿‡ç¨‹æ—¶éœ€è¦ï¼Œä½†ä¸æ¨¡å‹ç»“æ„æ— å…³ï¼Œåªä¸è®­ç»ƒè¿‡ç¨‹æœ‰å…³ã€‚\n\n## Q: æ‰€è°“\"æƒé‡\"å°±æ˜¯æŒ‡ state_dict ä¸­çš„å†…å®¹å—ï¼Ÿ\n\n\u003e [!reasoning]-\n\u003e\n\u003e å—¯ï¼Œç”¨æˆ·é—®ï¼š\"æ‰€è°“'æƒé‡'å°±æ˜¯æŒ‡ state_dict ä¸­çš„å†…å®¹å—ï¼Ÿ\"è¿™ä¸ªé—®é¢˜çœ‹èµ·æ¥æ˜¯æƒ³ç¡®è®¤ PyTorch ä¸­çš„æƒé‡å’Œ state_dict ä¹‹é—´çš„å…³ç³»ã€‚é¦–å…ˆï¼Œæˆ‘éœ€è¦å›é¡¾ä¸€ä¸‹ä¹‹å‰çš„å¯¹è¯ï¼Œç¡®ä¿å›ç­”çš„ä¸€è‡´æ€§ã€‚\n\u003e\n\u003e ä¹‹å‰å·²ç»è§£é‡Šäº† state_dict æ˜¯ä¿å­˜æ¨¡å‹å‚æ•°çš„æ ¸å¿ƒï¼Œé‡Œé¢åŒ…å«äº†å„å±‚çš„æƒé‡å’Œåç½®ã€‚ç”¨æˆ·å¯èƒ½ç°åœ¨å¯¹\"æƒé‡\"è¿™ä¸ªæœ¯è¯­çš„å…·ä½“æŒ‡å‘æœ‰ç–‘é—®ï¼Œéœ€è¦æ˜ç¡®æƒé‡æ˜¯å¦ç­‰åŒäº state_dict ä¸­çš„æ‰€æœ‰å†…å®¹ã€‚\n\u003e\n\u003e é¦–å…ˆï¼Œæˆ‘åº”è¯¥æ˜ç¡®\"æƒé‡\"åœ¨æœºå™¨å­¦ä¹ ä¸­çš„å®šä¹‰ã€‚é€šå¸¸ï¼Œæƒé‡æŒ‡çš„æ˜¯æ¨¡å‹ä¸­çš„å¯å­¦ä¹ å‚æ•°ï¼Œæ¯”å¦‚çº¿æ€§å±‚ä¸­çš„æƒé‡çŸ©é˜µå’Œåç½®å‘é‡ã€‚è€Œ state_dict ä¸ä»…åŒ…æ‹¬è¿™äº›æƒé‡ï¼Œè¿˜å¯èƒ½åŒ…æ‹¬å…¶ä»–å‚æ•°ï¼Œæ¯”å¦‚ BatchNorm å±‚çš„å‡å€¼å’Œæ–¹å·®ï¼Œæˆ–è€…ä¼˜åŒ–å™¨çš„çŠ¶æ€ã€‚å› æ­¤ï¼Œstate_dict çš„å†…å®¹å¯èƒ½æ¯”å•çº¯çš„\"æƒé‡\"æ›´å¹¿æ³›ã€‚\n\u003e\n\u003e æ¥ä¸‹æ¥ï¼Œéœ€è¦åŒºåˆ† state_dict ä¸­çš„ä¸åŒéƒ¨åˆ†ã€‚æ¨¡å‹å’Œä¼˜åŒ–å™¨éƒ½æœ‰è‡ªå·±çš„ state_dictã€‚æ¨¡å‹çš„ state_dict åŒ…å«å„å±‚çš„å‚æ•°ï¼Œè€Œä¼˜åŒ–å™¨çš„ state_dict åŒ…å«ä¼˜åŒ–å™¨çš„çŠ¶æ€ï¼Œå¦‚åŠ¨é‡ç¼“å­˜ç­‰ã€‚ç”¨æˆ·çš„é—®é¢˜å¯èƒ½é›†ä¸­åœ¨æ¨¡å‹çš„ state_dict ä¸­çš„æƒé‡éƒ¨åˆ†ï¼Œè€Œæ˜¯å¦åŒ…æ‹¬å…¶ä»–å‚æ•°éœ€è¦æ¾„æ¸…ã€‚\n\u003e\n\u003e å¦å¤–ï¼Œç”¨æˆ·å¯èƒ½å¯¹å¦‚ä½•æ­£ç¡®ä¿å­˜å’ŒåŠ è½½æ¨¡å‹æœ‰æ›´æ·±å…¥çš„ç†è§£éœ€æ±‚ã€‚æ¯”å¦‚ï¼Œä¿å­˜ state_dict æ—¶ï¼Œæ˜¯å¦åªä¿å­˜äº†æƒé‡ï¼Œè¿˜æ˜¯è¿˜æœ‰å…¶ä»–å¿…è¦çš„å‚æ•°ï¼Ÿéœ€è¦è¯´æ˜ state_dict ä¸­çš„å†…å®¹å¯¹äºæ¨¡å‹é‡å»ºçš„é‡è¦æ€§ï¼Œä»¥åŠæƒé‡åœ¨å…¶ä¸­çš„è§’è‰²ã€‚\n\u003e\n\u003e å¯èƒ½ç”¨æˆ·åœ¨å®é™…æ“ä½œä¸­é‡åˆ°äº†é—®é¢˜ï¼Œæ¯”å¦‚åŠ è½½æ¨¡å‹æ—¶ç»“æ„ä¸åŒ¹é…ï¼Œæˆ–è€…å‚æ•°æœªæ­£ç¡®åŠ è½½ï¼Œå› æ­¤éœ€è¦æ˜ç¡® state_dict ä¸­çš„å†…å®¹ã€‚éœ€è¦ä¸¾ä¾‹è¯´æ˜ï¼Œæ¯”å¦‚ä¸€ä¸ªç®€å•çš„çº¿æ€§æ¨¡å‹ï¼Œå±•ç¤ºå…¶ state_dict ä¸­çš„é”®å€¼å¯¹ï¼Œæ˜ç¡®å“ªäº›æ˜¯æƒé‡ï¼Œå“ªäº›æ˜¯åç½®ï¼Œæˆ–è€…å…¶ä»–ç±»å‹çš„å‚æ•°ã€‚\n\u003e\n\u003e è¿˜éœ€è¦è€ƒè™‘ç”¨æˆ·å¯èƒ½çš„è¯¯è§£ï¼Œæ¯”å¦‚è®¤ä¸º state_dict ä»…åŒ…å«æƒé‡ï¼Œè€Œå¿½ç•¥äº†å…¶ä»–å¿…è¦çš„å‚æ•°ï¼Œå¯¼è‡´æ¨¡å‹æ— æ³•æ­£ç¡®è¿è¡Œã€‚å› æ­¤ï¼Œå¼ºè°ƒ state_dict åŒ…å«æ‰€æœ‰å¿…è¦çš„å‚æ•°ï¼Œè€Œæƒé‡æ˜¯å…¶ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œä½†è¿˜æœ‰å…¶ä»–å¦‚åç½®ã€BatchNorm çš„å‚æ•°ç­‰ã€‚\n\u003e\n\u003e æ­¤å¤–ï¼Œç”¨æˆ·å¯èƒ½å…³å¿ƒå¦‚ä½•ä»…ä¿å­˜æˆ–æ“ä½œæƒé‡ï¼Œæ¯”å¦‚è¿ç§»å­¦ä¹ ä¸­çš„éƒ¨åˆ†å‚æ•°åŠ è½½ã€‚è¿™æ—¶å€™éœ€è¦è¯´æ˜å¦‚ä½•ä» state_dict ä¸­é€‰æ‹©æ€§åœ°æå–æˆ–åŠ è½½ç‰¹å®šçš„æƒé‡éƒ¨åˆ†ã€‚\n\u003e\n\u003e æ€»ç»“æ¥è¯´ï¼Œå›ç­”éœ€è¦æ˜ç¡®ä»¥ä¸‹å‡ ç‚¹ï¼š\n\u003e\n\u003e 1. æƒé‡æ˜¯æ¨¡å‹ä¸­çš„å¯å­¦ä¹ å‚æ•°ï¼Œå¦‚çº¿æ€§å±‚çš„æƒé‡çŸ©é˜µã€‚\n\u003e\n\u003e 2. state_dict åŒ…å«æ¨¡å‹çš„æ‰€æœ‰å‚æ•°ï¼ŒåŒ…æ‹¬æƒé‡ã€åç½®ä»¥åŠå…¶ä»–å±‚ç‰¹å®šçš„å‚æ•°ã€‚\n\u003e\n\u003e 3. æ¨¡å‹çš„ state_dict ä¸ä¼˜åŒ–å™¨çš„ state_dict ä¸åŒï¼Œåè€…åŒ…å«ä¼˜åŒ–å™¨çŠ¶æ€ã€‚\n\u003e\n\u003e 4. æ­£ç¡®åŠ è½½æ¨¡å‹éœ€è¦ç¡®ä¿ state_dict çš„ç»“æ„ä¸å½“å‰æ¨¡å‹ç»“æ„åŒ¹é…ã€‚\n\u003e\n\u003e 5. ç¤ºä¾‹è¯´æ˜ state_dict ä¸­çš„å…·ä½“å†…å®¹ï¼Œå¸®åŠ©ç”¨æˆ·ç›´è§‚ç†è§£ã€‚\n\u003e\n\u003e åŒæ—¶ï¼Œè¦æ³¨æ„ç”¨è¯å‡†ç¡®ï¼Œé¿å…æ··æ·†ï¼Œæ¯”å¦‚\"å‚æ•°\"å’Œ\"æƒé‡\"çš„åŒºåˆ«ï¼Œç¡®ä¿ç”¨æˆ·èƒ½æ¸…æ™°ç†è§£ä¸¤è€…çš„åŒ…å«å…³ç³»ã€‚å¯èƒ½è¿˜éœ€è¦æåˆ°åœ¨ä¿å­˜å’ŒåŠ è½½æ—¶çš„æœ€ä½³å®è·µï¼Œæ¯”å¦‚å¦‚ä½•ç»“åˆ config æ¥é‡å»ºæ¨¡å‹ç»“æ„ï¼Œå†åŠ è½½ state_dict ä¸­çš„å‚æ•°ï¼Œä»¥ç¡®ä¿æ¨¡å‹çš„æ­£ç¡®æ€§ã€‚\n\u003e\n\u003e æœ€åï¼Œæ£€æŸ¥æ˜¯å¦æœ‰é—æ¼ç‚¹ï¼Œæ¯”å¦‚æ˜¯å¦æåˆ° eval()æ¨¡å¼çš„å½±å“ï¼Œæˆ–è€…è®­ç»ƒ/æ¨ç†æ—¶åŠ è½½å‚æ•°çš„æ³¨æ„äº‹é¡¹ï¼Œä½†æ ¹æ®é—®é¢˜èŒƒå›´ï¼Œå¯èƒ½ä¸éœ€è¦å±•å¼€ï¼Œé™¤éç”¨æˆ·æœ‰è¿›ä¸€æ­¥çš„é—®é¢˜ã€‚\n\nåœ¨ PyTorch ä¸­ï¼Œ**\"æƒé‡\"ç¡®å®æ˜¯ `state_dict` ä¸­çš„æ ¸å¿ƒå†…å®¹**ï¼Œä½† `state_dict` åŒ…å«çš„ä¿¡æ¯å¯èƒ½æ¯”\"æƒé‡\"æ›´å¹¿æ³›ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†è§£é‡Šï¼š\n\n---\n\n### 1. **\"æƒé‡\"æ˜¯ä»€ä¹ˆï¼Ÿ**\n\n- **æƒé‡ï¼ˆWeightsï¼‰** æ˜¯æ¨¡å‹ä¸­**å¯å­¦ä¹ çš„å‚æ•°**ï¼Œä¾‹å¦‚ï¼š\n  - å…¨è¿æ¥å±‚ï¼ˆ`nn.Linear`ï¼‰ä¸­çš„æƒé‡çŸ©é˜µï¼ˆ`weight`ï¼‰å’Œåç½®ï¼ˆ`bias`ï¼‰ã€‚\n  - å·ç§¯å±‚ï¼ˆ`nn.Conv2d`ï¼‰çš„å·ç§¯æ ¸å‚æ•°ã€‚\n  - åµŒå…¥å±‚ï¼ˆ`nn.Embedding`ï¼‰çš„è¯å‘é‡çŸ©é˜µã€‚\n- è¿™äº›å‚æ•°é€šè¿‡åå‘ä¼ æ’­å’Œä¼˜åŒ–å™¨ï¼ˆå¦‚ SGDã€Adamï¼‰åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­é€æ­¥æ›´æ–°ã€‚\n\n---\n\n### 2. **`state_dict` ä¸­çš„å†…å®¹**\n\n`state_dict` æ˜¯ PyTorch ä¸­æ¨¡å‹æˆ–ä¼˜åŒ–å™¨çš„**çŠ¶æ€å­—å…¸**ï¼Œå…·ä½“åŒ…å«ï¼š\n\n- **å¯¹æ¨¡å‹è€Œè¨€**ï¼š\n  - æ‰€æœ‰æƒé‡ï¼ˆ`weight`ï¼‰ã€åç½®ï¼ˆ`bias`ï¼‰ã€‚\n  - å…¶ä»–**ä¸å±‚ç›¸å…³çš„å‚æ•°**ï¼Œä¾‹å¦‚ï¼š\n    - `BatchNorm` å±‚çš„ `running_mean` å’Œ `running_var`ï¼ˆåœ¨æ¨ç†æ—¶ä½¿ç”¨çš„å‡å€¼å’Œæ–¹å·®ï¼‰ã€‚\n    - `LSTM` æˆ– `GRU` ä¸­çš„éšè—çŠ¶æ€ç¼“å­˜ï¼ˆå¦‚æœæ¨¡å‹è®¾è®¡æ—¶æ˜¾å¼å­˜å‚¨äº†è¿™äº›çŠ¶æ€ï¼‰ã€‚\n  ```python\n  # ç¤ºä¾‹ï¼šä¸€ä¸ªç®€å•æ¨¡å‹çš„ state_dict\n  model = nn.Sequential(\n      nn.Linear(10, 20),\n      nn.ReLU(),\n      nn.BatchNorm1d(20)\n  )\n  print(model.state_dict().keys())\n  # è¾“å‡ºï¼š\n  # ['0.weight', '0.bias', '2.weight', '2.bias', '2.running_mean', '2.running_var', '2.num_batches_tracked']\n  ```\n- **å¯¹ä¼˜åŒ–å™¨è€Œè¨€**ï¼š\n  - ä¼˜åŒ–å™¨çš„çŠ¶æ€ï¼ˆå¦‚åŠ¨é‡ç¼“å­˜ã€å†å²æ¢¯åº¦ç­‰ï¼‰ã€‚\n  ```python\n  optimizer = torch.optim.Adam(model.parameters())\n  print(optimizer.state_dict().keys())\n  # è¾“å‡ºï¼š\n  # ['state', 'param_groups']\n  ```\n\n---\n\n### 3. **\"æƒé‡\"ä¸ `state_dict` çš„å…³ç³»**\n\n- **`state_dict` åŒ…å«æƒé‡ï¼Œä½†ä¸ä»…é™äºæƒé‡**ï¼š\n  - æƒé‡æ˜¯ `state_dict` ä¸­çš„ä¸€éƒ¨åˆ†ï¼ˆå¦‚ `conv1.weight`, `fc.bias`ï¼‰ã€‚\n  - `state_dict` è¿˜å¯èƒ½åŒ…å«**éå¯å­¦ä¹ çš„å‚æ•°**ï¼ˆå¦‚ `BatchNorm` çš„ç»Ÿè®¡é‡ `running_mean`ï¼‰ã€‚\n  - å¯¹äºå¤æ‚æ¨¡å‹ï¼ˆå¦‚ Transformerï¼‰ï¼Œè¿˜å¯èƒ½åŒ…å«ä½ç½®ç¼–ç ã€æ³¨æ„åŠ›æ©ç ç­‰å‚æ•°ã€‚\n- **æ€»ç»“**ï¼š\n  - **æƒé‡æ˜¯ `state_dict` çš„æ ¸å¿ƒå†…å®¹**ï¼Œä½† `state_dict` æ˜¯æ›´å…¨é¢çš„æ¨¡å‹çŠ¶æ€è¡¨ç¤ºã€‚\n\n---\n\n### 4. **ä¸ºä»€ä¹ˆéœ€è¦ `state_dict` è€Œä¸ä»…ä»…æ˜¯æƒé‡ï¼Ÿ**\n\n- **å®Œæ•´æ¢å¤æ¨¡å‹çŠ¶æ€**ï¼š\n  å¦‚æœä»…ä¿å­˜æƒé‡ï¼Œå¿½ç•¥ `BatchNorm` çš„ `running_mean` ç­‰å‚æ•°ï¼Œåœ¨æ¨ç†æ—¶ä¼šå¯¼è‡´ç»Ÿè®¡é‡é”™è¯¯ï¼Œå½±å“æ¨¡å‹æ€§èƒ½ã€‚\n- **å…¼å®¹æ€§**ï¼š\n  åŠ è½½æ¨¡å‹æ—¶éœ€ç¡®ä¿ `state_dict` çš„é”®ï¼ˆå¦‚å±‚åç§°ï¼‰ä¸å½“å‰æ¨¡å‹ç»“æ„ä¸¥æ ¼åŒ¹é…ï¼Œå¦åˆ™ä¼šæŠ¥é”™ `Missing keys` æˆ– `Unexpected keys`ã€‚\n- **çµæ´»æ€§**ï¼š\n  å¯ä»¥æ‰‹åŠ¨ä¿®æ”¹ `state_dict`ï¼Œä¾‹å¦‚è¿ç§»å­¦ä¹ ä¸­ä»…åŠ è½½éƒ¨åˆ†å±‚çš„æƒé‡ã€‚\n\n---\n\n### 5. **æ“ä½œ `state_dict` çš„å¸¸è§åœºæ™¯**\n\n#### **(1) æŸ¥çœ‹æ¨¡å‹æƒé‡**\n\n```python\nfor name, param in model.named_parameters():\n    print(f\"å±‚å: {name}, å‚æ•°å½¢çŠ¶: {param.shape}\")\n```\n\n#### **(2) é€‰æ‹©æ€§åŠ è½½éƒ¨åˆ†æƒé‡ï¼ˆè¿ç§»å­¦ä¹ ï¼‰**\n\n```python\npretrained_dict = torch.load('pretrained.pth')\nmodel_dict = model.state_dict()\n\n# ç­›é€‰å‡ºåç§°å’Œå½¢çŠ¶åŒ¹é…çš„æƒé‡\npretrained_dict = {\n    k: v for k, v in pretrained_dict.items()\n    if k in model_dict and v.shape == model_dict[k].shape\n}\nmodel_dict.update(pretrained_dict)\nmodel.load_state_dict(model_dict)\n```\n\n#### **(3) æ‰‹åŠ¨ä¿®æ”¹æƒé‡**\n\n```python\n# å°†ç¬¬ä¸€å±‚å·ç§¯çš„æƒé‡ç½®é›¶\nwith torch.no_grad():\n    model.conv1.weight.copy_(torch.zeros_like(model.conv1.weight))\n```\n\n---\n\n### 6. **æ€»ç»“**\n\n- **æƒé‡**æ˜¯æ¨¡å‹çš„å¯å­¦ä¹ å‚æ•°ï¼Œæ˜¯ `state_dict` çš„æ ¸å¿ƒå†…å®¹ã€‚\n- **`state_dict`** æ˜¯æ¨¡å‹çŠ¶æ€çš„å®Œæ•´è¡¨ç¤ºï¼ŒåŒ…æ‹¬ï¼š\n  - æ‰€æœ‰æƒé‡ã€åç½®ã€‚\n  - éå¯å­¦ä¹ çš„è¿è¡Œæ—¶å‚æ•°ï¼ˆå¦‚ `BatchNorm` çš„ç»Ÿè®¡é‡ï¼‰ã€‚\n- **æœ€ä½³å®è·µ**ï¼š\n  - ä¿å­˜æ¨¡å‹æ—¶ä½¿ç”¨ `torch.save(model.state_dict(), ...)`ã€‚\n  - åŠ è½½æ—¶éœ€å…ˆæ„å»ºç›¸åŒç»“æ„çš„æ¨¡å‹ï¼Œå†è°ƒç”¨ `model.load_state_dict()`ã€‚\n  - è‹¥éœ€è°ƒæ•´æ¨¡å‹ç»“æ„ï¼Œå¯é€‰æ‹©æ€§åŠ è½½åŒ¹é…çš„æƒé‡ã€‚\n\n\u003e [!info] äº®æ›°\n\u003e\n\u003e state_dict åŒ…æ‹¬ Parameter ä¸ Buffer ï¼Œæ¨¡å‹çš„å¯å­¦ä¹ å‚æ•°â€”â€”**æƒé‡**ä¸»è¦æŒ‡å…¶ä¸­çš„ Parameter ã€‚\n","title":"PyTorch æ¨¡å‹çš„ä¿å­˜ä¸åŠ è½½æœºåˆ¶è¯¦è§£","abstract":"\u003e æœ¬æ–‡ä¸ºä¸ DeepSeek å¯¹è¯è®°å½•ï¼Œæ·±å…¥æ¢è®¨ PyTorch ä¸­æ¨¡å‹çš„ä¿å­˜å’ŒåŠ è½½æœºåˆ¶ï¼ŒåŒ…æ‹¬ä¸åŒçš„ä¿å­˜æ–¹å¼ã€æœ€ä½³å®è·µä»¥åŠå¸¸è§é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚\n\u003e [!reasoning]-\n\u003e","length":433,"created_at":"2025-03-07T13:00:00.000Z","updated_at":"2025-03-07T13:00:00.000Z","tags":["Deep Learning","PyTorch","Model Management"],"license":true}},{"pathMapping":{"filePath":"public/content/learn_from_ai/2025-03-07-resnet-math-and-gradient-vanishing.md","pagePath":"/learn_from_ai/resnet-math-and-gradient-vanishing","slug":"resnet-math-and-gradient-vanishing"},"meta":{"content":"\n\u003e æœ¬æ–‡æ·±å…¥æ¢è®¨äº† ResNet çš„æ•°å­¦åŸç†ï¼Œåˆ†æäº†æ·±åº¦ç¥ç»ç½‘ç»œä¸­çš„æ¢¯åº¦æ¶ˆå¤±é—®é¢˜åŠå…¶è§£å†³æ–¹æ¡ˆã€‚é€šè¿‡æ•°å­¦æ¨å¯¼å’Œç›´è§‚è§£é‡Šï¼Œå¸®åŠ©è¯»è€…ç†è§£æ®‹å·®è¿æ¥çš„ä½œç”¨æœºåˆ¶ï¼Œä»¥åŠå®ƒå¦‚ä½•æœ‰æ•ˆåœ°è§£å†³äº†æ·±åº¦ç¥ç»ç½‘ç»œè®­ç»ƒä¸­çš„å…³é”®é—®é¢˜ã€‚\n\n## Q: ResNet çš„æ•°å­¦åŸç†ä¸ä½œç”¨\n\n\u003e [!query]\n\u003e\n\u003e æ·±å…¥è§£é‡Š ResNet çš„æ•°å­¦åŸç†ä¸ä½œç”¨ã€‚æç¤ºï¼šä½ å¯ä»¥ä½¿ç”¨å…¬å¼ã€Mermaid å›¾è¡¨ã€è¡¨æ ¼ç­‰æ–¹å¼ä½¿å†…å®¹æ›´å®¹æ˜“ç†è§£ã€‚\n\n\u003e [!reasoning]-\n\u003e\n\u003e å—¯ï¼Œç”¨æˆ·è®©æˆ‘æ·±å…¥è§£é‡Š ResNet çš„æ•°å­¦åŸç†å’Œä½œç”¨ï¼Œè¿˜æç¤ºå¯ä»¥ç”¨å…¬å¼ã€å›¾è¡¨ã€è¡¨æ ¼ç­‰ã€‚æˆ‘å¾—å…ˆå›å¿†ä¸€ä¸‹ ResNet çš„åŸºæœ¬æ¦‚å¿µï¼Œç„¶åæƒ³æƒ³æ€ä¹ˆç»„ç»‡å†…å®¹ã€‚\n\u003e\n\u003e é¦–å…ˆï¼ŒResNet çš„æ ¸å¿ƒæ˜¯æ®‹å·®å­¦ä¹ ï¼Œå¯¹å§ï¼Ÿæˆ‘è®°å¾—ä½•æºæ˜ä»–ä»¬æå‡ºçš„ï¼Œè§£å†³äº†æ·±åº¦ç½‘ç»œä¸­çš„æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ã€‚é‚£æ®‹å·®å—çš„ç»“æ„æ˜¯å…³é”®ï¼Œåº”è¯¥è¦è¯¦ç»†è§£é‡Šã€‚å¯èƒ½éœ€è¦ç”»ä¸ªæ®‹å·®å—çš„ç¤ºæ„å›¾ï¼Œç”¨ Mermaid çš„è¯ï¼Œåº”è¯¥å¯ä»¥ç”»ä¸ªç®€å•çš„æ¡†å›¾ï¼Œæ¯”å¦‚è¾“å…¥åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œä¸€ä¸ªç»è¿‡å·ç§¯å±‚ï¼Œå¦ä¸€ä¸ªæ˜¯ shortcutï¼Œç„¶åç›¸åŠ ã€‚\n\u003e\n\u003e æ•°å­¦åŸç†æ–¹é¢ï¼Œæ®‹å·®å—çš„å…¬å¼æ˜¯ H(x) = F(x) + xï¼Œè¿™é‡Œ F(x)æ˜¯æ®‹å·®å‡½æ•°ï¼Œç›®æ ‡æ˜¯è®©ç½‘ç»œå­¦ä¹  F(x) = H(x) - xï¼Œè€Œä¸æ˜¯ç›´æ¥å­¦ä¹  H(x)ã€‚è¿™æ ·åœ¨æ·±å±‚ç½‘ç»œä¸­ï¼Œæ¢¯åº¦æ›´å®¹æ˜“å›ä¼ ï¼Œå› ä¸ºåŠ æ³•æ“ä½œè®©æ¢¯åº¦å¯ä»¥ç›´æ¥æµè¿‡ï¼Œå¯¹å§ï¼Ÿè¿™éƒ¨åˆ†éœ€è¦ç”¨å…¬å¼å±•ç¤ºï¼Œå¯èƒ½ç”¨ LaTeX å†™å‡ºæ¥ã€‚\n\u003e\n\u003e ç„¶åï¼Œä¸ºä»€ä¹ˆæ®‹å·®æœ‰æ•ˆï¼Ÿå¯èƒ½å¾—ä»åå‘ä¼ æ’­çš„è§’åº¦åˆ†æï¼Œæ¯”å¦‚å¯¼æ•°çš„è®¡ç®—ã€‚å½“æŸå¤±å‡½æ•°å¯¹ x æ±‚å¯¼æ—¶ï¼Œä¼šæœ‰ä¸¤æ¡è·¯å¾„ï¼Œä¸€ä¸ªæ˜¯æ®‹å·®å±‚çš„å¯¼æ•°ï¼Œå¦ä¸€ä¸ªæ˜¯æ’ç­‰æ˜ å°„çš„å¯¼æ•°ï¼Œè¿™æ ·å³ä½¿æ®‹å·®å±‚çš„æ¢¯åº¦å¾ˆå°ï¼Œè‡³å°‘è¿˜æœ‰ 1 çš„éƒ¨åˆ†ï¼Œé˜²æ­¢æ¢¯åº¦æ¶ˆå¤±ã€‚è¿™ç‚¹éœ€è¦è¯¦ç»†è¯´æ˜ï¼Œå¯èƒ½ç”¨é“¾å¼æ³•åˆ™çš„å…¬å¼ã€‚\n\u003e\n\u003e ä½œç”¨æ–¹é¢ï¼ŒResNet å…è®¸è®­ç»ƒæ›´æ·±çš„ç½‘ç»œï¼Œæ¯”å¦‚ ResNet-152ï¼Œè€Œä¸ä¼šå‡ºç°é€€åŒ–é—®é¢˜ã€‚ä¼ ç»Ÿç½‘ç»œå±‚æ•°åŠ æ·±æ—¶ï¼Œå‡†ç¡®ç‡ä¼šé¥±å’Œç”šè‡³ä¸‹é™ï¼Œè€Œ ResNet é€šè¿‡æ®‹å·®å­¦ä¹ è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚å¯èƒ½éœ€è¦ç”¨å›¾è¡¨æ¯”è¾ƒä¼ ç»Ÿç½‘ç»œå’Œ ResNet åœ¨æ·±åº¦å¢åŠ æ—¶çš„è¡¨ç°å·®å¼‚ï¼Œæˆ–è€…å¼•ç”¨è®ºæ–‡ä¸­çš„å®éªŒæ•°æ®ã€‚\n\u003e\n\u003e å¦å¤–ï¼ŒResNet çš„ç»“æ„å˜ä½“ï¼Œæ¯”å¦‚ä¸åŒçš„æ®‹å·®å—è®¾è®¡ï¼Œå¦‚ BasicBlock å’Œ Bottleneckã€‚Bottleneck ç”¨äº† 1x1 å·ç§¯æ¥é™ç»´å’Œå‡ç»´ï¼Œå‡å°‘è®¡ç®—é‡ï¼Œè¿™é‡Œå¯ä»¥ç”¨è¡¨æ ¼å¯¹æ¯”ä¸¤è€…çš„ç»“æ„å‚æ•°ï¼Œæ¯”å¦‚å·ç§¯å±‚çš„å¤§å°ã€é€šé“æ•°å˜åŒ–ç­‰ã€‚\n\u003e\n\u003e å¯èƒ½ç”¨æˆ·è¿˜æƒ³çŸ¥é“ ResNet çš„åº”ç”¨åœºæ™¯ï¼Œæ¯”å¦‚åœ¨å›¾åƒåˆ†ç±»ã€ç›®æ ‡æ£€æµ‹ç­‰ä»»åŠ¡ä¸­çš„æ•ˆæœã€‚ä¸è¿‡é—®é¢˜ä¸»è¦æ˜¯æ•°å­¦åŸç†å’Œä½œç”¨ï¼Œè¿™éƒ¨åˆ†å¯ä»¥ç®€è¦æåŠï¼Œä½†é‡ç‚¹è¿˜æ˜¯åŸç†ã€‚\n\u003e\n\u003e éœ€è¦æ£€æŸ¥æœ‰æ²¡æœ‰é—æ¼çš„å…³é”®ç‚¹ï¼Œæ¯”å¦‚æ’ç­‰æ˜ å°„çš„é‡è¦æ€§ï¼Œå¦‚æœ shortcut éœ€è¦è°ƒæ•´ç»´åº¦æ€ä¹ˆåŠï¼Ÿè¿™æ—¶å€™å¯èƒ½ç”¨ 1x1 å·ç§¯æ¥åŒ¹é…ç»´åº¦ï¼Œè¿™ä¹Ÿåº”è¯¥åœ¨ç»“æ„éƒ¨åˆ†è¯´æ˜ã€‚\n\u003e\n\u003e è¿˜æœ‰ï¼Œåˆå§‹åŒ–æƒé‡çš„é—®é¢˜ï¼Œæ®‹å·®ç½‘ç»œæ˜¯å¦è®©åˆå§‹åŒ–æ›´å®¹æ˜“ï¼Ÿå¯èƒ½æåˆ°å‚æ•°åˆå§‹åŒ–çš„å½±å“å‡å°ï¼Œå› ä¸ºæ®‹å·®ç»“æ„æœ¬èº«æœ‰åŠ©äºç¨³å®šè®­ç»ƒã€‚\n\u003e\n\u003e æ€»ç»“ä¸€ä¸‹ï¼Œç»“æ„éƒ¨åˆ†ç”¨ Mermaid å›¾ï¼Œæ•°å­¦éƒ¨åˆ†ç”¨å…¬å¼å’Œå¯¼æ•°æ¨å¯¼ï¼Œä½œç”¨éƒ¨åˆ†ç”¨å¯¹æ¯”å’Œå®éªŒæ•°æ®ï¼Œç»“æ„å˜ä½“ç”¨è¡¨æ ¼ã€‚è¿™æ ·å†…å®¹ä¼šæ¯”è¾ƒå…¨é¢ï¼Œä¹Ÿç¬¦åˆç”¨æˆ·çš„è¦æ±‚ã€‚\n\nå¥½çš„ï¼æˆ‘å°†ä»æ•°å­¦åŸç†ã€ç½‘ç»œç»“æ„ã€ä½œç”¨æœºåˆ¶ç­‰æ–¹é¢æ·±å…¥è§£é‡Š ResNetï¼Œå¹¶ç»“åˆå…¬å¼ã€å›¾è¡¨å’Œç¤ºä¾‹è¿›è¡Œè¯´æ˜ã€‚\n\n---\n\n### 1. ResNet çš„æ ¸å¿ƒæ€æƒ³ï¼šæ®‹å·®å­¦ä¹ \n\nResNetï¼ˆæ®‹å·®ç½‘ç»œï¼‰çš„æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡å¼•å…¥ **æ®‹å·®å—ï¼ˆResidual Blockï¼‰** æ¥è§£å†³æ·±åº¦ç¥ç»ç½‘ç»œä¸­çš„æ¢¯åº¦æ¶ˆå¤±å’Œç½‘ç»œé€€åŒ–é—®é¢˜ã€‚å…¶æ•°å­¦åŸç†å¯ä»¥æ¦‚æ‹¬ä¸ºï¼š\n\n#### æ®‹å·®å…¬å¼\n\nå‡è®¾æˆ‘ä»¬å¸Œæœ›ç½‘ç»œå­¦ä¹ çš„æ˜ å°„ä¸º $$ H(x) $$ï¼ŒResNet å°†å…¶æ‹†è§£ä¸ºï¼š\n\n$$\nH(x) = F(x) + x\n$$\n\nå…¶ä¸­ï¼š\n\n- $$ x $$ æ˜¯è¾“å…¥\n- $$ F(x) = H(x) - x $$ æ˜¯æ®‹å·®å‡½æ•°\n\nç½‘ç»œåªéœ€å­¦ä¹ æ®‹å·® $$ F(x) $$ï¼Œè€Œä¸æ˜¯ç›´æ¥å­¦ä¹  $$ H(x) $$ã€‚è¿™ç§è®¾è®¡ä½¿å¾—æ·±å±‚ç½‘ç»œçš„è®­ç»ƒæ›´åŠ ç¨³å®šã€‚\n\n---\n\n### 2. æ®‹å·®å—çš„æ•°å­¦å®ç°\n\n#### æ®‹å·®å—ç»“æ„\n\nä¸€ä¸ªå…¸å‹çš„æ®‹å·®å—ç”±ä»¥ä¸‹ç»„ä»¶æ„æˆï¼š\n\n1. **å·ç§¯å±‚**ï¼ˆç”¨äºç‰¹å¾æå–ï¼‰\n2. **è·³è·ƒè¿æ¥ï¼ˆShortcut Connectionï¼‰**ï¼ˆå°†è¾“å…¥ç›´æ¥ä¼ é€’åˆ°è¾“å‡ºï¼‰\n\n#### ç»“æ„ç¤ºä¾‹ï¼ˆMermaid æµç¨‹å›¾ï¼‰ï¼š\n\n```mermaid\ngraph LR\n    A[è¾“å…¥ x] --\u003e B[å·ç§¯å±‚]\n    B --\u003e C[æ¿€æ´»å‡½æ•° ReLU]\n    C --\u003e D[å·ç§¯å±‚]\n    D --\u003e E[ReLU]\n    E --\u003e F[\"æ®‹å·® F(x)\"]\n    A --\u003e G[è·³è·ƒè¿æ¥]\n    F --\u003e H[\"F(x) + x\"]\n    H --\u003e I[\"è¾“å‡º H(x)\"]\n```\n\n#### æ•°å­¦è¡¨è¾¾å¼\n\nå¯¹äºç¬¬ $$ l $$ å±‚çš„æ®‹å·®å—ï¼š\n\n$$\nx\\_{l+1} = f(x_l + \\mathcal{F}(x_l, W_l))\n$$\n\nå…¶ä¸­ï¼š\n\n- $$ \\mathcal{F}(x_l, W_l) $$ æ˜¯æ®‹å·®å‡½æ•°ï¼ˆç”±å·ç§¯å±‚å’Œæ¿€æ´»å‡½æ•°ç»„æˆï¼‰\n- $$ f $$ æ˜¯æ¿€æ´»å‡½æ•°ï¼ˆé€šå¸¸ä¸º ReLUï¼‰\n\n---\n\n### 3. ä¸ºä»€ä¹ˆæ®‹å·®æœ‰æ•ˆï¼Ÿ\n\n#### æ¢¯åº¦ä¼ æ’­åˆ†æ\n\nå‡è®¾æŸå¤±å‡½æ•°ä¸º $$ L $$ï¼Œåå‘ä¼ æ’­æ—¶æ¢¯åº¦è®¡ç®—ä¸ºï¼š\n\n$$\n\\frac{\\partial L}{\\partial x*l} = \\frac{\\partial L}{\\partial x*{l+1}} \\cdot \\left( 1 + \\frac{\\partial \\mathcal{F}(x_l, W_l)}{\\partial x_l} \\right)\n$$\n\n- å³ä½¿ $$ \\frac{\\partial \\mathcal{F}}{\\partial x_l} $$ è¶‹è¿‘äº 0ï¼Œæ¢¯åº¦ä»ç„¶å¯ä»¥é€šè¿‡ $$ 1 $$ ä¼ é€’ï¼ˆé¿å…æ¢¯åº¦æ¶ˆå¤±ï¼‰\n- è¿™ç§è®¾è®¡ä½¿å¾—è¶…æ·±å±‚ç½‘ç»œï¼ˆå¦‚ ResNet-152ï¼‰çš„è®­ç»ƒæˆä¸ºå¯èƒ½ã€‚\n\n#### ä¸ä¼ ç»Ÿç½‘ç»œçš„å¯¹æ¯”\n\n| ç‰¹æ€§         | ä¼ ç»Ÿç½‘ç»œ         | ResNet           |\n| ------------ | ---------------- | ---------------- |\n| æ¢¯åº¦ä¼ æ’­     | é€å±‚è¡°å‡         | é€šè¿‡æ®‹å·®ä¿æŒç¨³å®š |\n| é€€åŒ–é—®é¢˜     | éšæ·±åº¦å¢åŠ è€Œæ˜¾è‘— | æ˜¾è‘—ç¼“è§£         |\n| æœ€å¤§æœ‰æ•ˆæ·±åº¦ | ~20 å±‚           | 1000+ å±‚         |\n\n---\n\n### 4. ResNet çš„ç½‘ç»œç»“æ„\n\n#### å…¸å‹å˜ä½“ï¼ˆä»¥ ImageNet ä¸ºä¾‹ï¼‰\n\n| æ¨¡å‹       | å±‚æ•° | æ®‹å·®å—ç±»å‹ | å‚æ•°æ•°é‡ |\n| ---------- | ---- | ---------- | -------- |\n| ResNet-18  | 18   | BasicBlock | 11.7M    |\n| ResNet-34  | 34   | BasicBlock | 21.8M    |\n| ResNet-50  | 50   | Bottleneck | 25.6M    |\n| ResNet-101 | 101  | Bottleneck | 44.5M    |\n| ResNet-152 | 152  | Bottleneck | 60.2M    |\n\n#### ä¸¤ç§æ®‹å·®å—è®¾è®¡\n\n1. **BasicBlock**ï¼ˆç”¨äºæµ…å±‚ç½‘ç»œï¼‰ï¼š\n\n   ```mermaid\n   graph LR\n       A[è¾“å…¥] --\u003e B[3x3 å·ç§¯]\n       B --\u003e C[ReLU]\n       C --\u003e D[3x3 å·ç§¯]\n       D --\u003e E[ä¸è¾“å…¥ç›¸åŠ ]\n       E --\u003e F[è¾“å‡º]\n   ```\n\n2. **Bottleneck**ï¼ˆç”¨äºæ·±å±‚ç½‘ç»œï¼Œå‡å°‘è®¡ç®—é‡ï¼‰ï¼š\n   ```mermaid\n   graph LR\n       A[è¾“å…¥] --\u003e B[1x1 å·ç§¯é™ç»´]\n       B --\u003e C[3x3 å·ç§¯]\n       C --\u003e D[1x1 å·ç§¯å‡ç»´]\n       D --\u003e E[ä¸è¾“å…¥ç›¸åŠ ]\n       E --\u003e F[è¾“å‡º]\n   ```\n\n---\n\n### 5. ResNet çš„ä½œç”¨\n\n#### ä¸»è¦ä¼˜åŠ¿\n\n1. **è§£å†³æ¢¯åº¦æ¶ˆå¤±**ï¼šé€šè¿‡è·³è·ƒè¿æ¥ä¼ é€’åŸå§‹ä¿¡å·ã€‚\n2. **ç¼“è§£ç½‘ç»œé€€åŒ–**ï¼šå³ä½¿ç½‘ç»œåŠ æ·±ï¼Œæ€§èƒ½ä¸ä¼šæ˜¾è‘—ä¸‹é™ã€‚\n3. **çµæ´»æ€§**ï¼šé€‚ç”¨äºå¤šç§ä»»åŠ¡ï¼ˆåˆ†ç±»ã€æ£€æµ‹ã€åˆ†å‰²ç­‰ï¼‰ã€‚\n\n#### å®éªŒå¯¹æ¯”ï¼ˆImageNet 2015ï¼‰\n\n| æ¨¡å‹       | Top-5 é”™è¯¯ç‡ | æ·±åº¦ |\n| ---------- | ------------ | ---- |\n| VGG-19     | 8.43%        | 19   |\n| ResNet-34  | 5.71%        | 34   |\n| ResNet-152 | 4.49%        | 152  |\n\n---\n\n### 6. æ•°å­¦æ‰©å±•ï¼šæ®‹å·®ç½‘ç»œçš„é€šç”¨æ€§\n\næ®‹å·®æ€æƒ³å¯æ¨å¹¿åˆ°å…¶ä»–æ“ä½œï¼š\n\n$$\nH(x) = F(x) + \\mathcal{G}(x)\n$$\n\nå…¶ä¸­ $$ \\mathcal{G}(x) $$ å¯ä»¥æ˜¯ï¼š\n\n- å·ç§¯ï¼ˆå½“è¾“å…¥è¾“å‡ºç»´åº¦ä¸åŒæ—¶ï¼‰\n- æ± åŒ–ï¼ˆç”¨äºä¸‹é‡‡æ ·ï¼‰\n\n---\n\n### æ€»ç»“\n\nResNet é€šè¿‡å¼•å…¥æ®‹å·®å­¦ä¹ ï¼Œè§£å†³äº†æ·±åº¦ç¥ç»ç½‘ç»œçš„è®­ç»ƒéš¾é¢˜ï¼Œå…¶æ ¸å¿ƒæ•°å­¦åŸç†æ˜¯é€šè¿‡è·³è·ƒè¿æ¥ä¿ç•™åŸå§‹ä¿¡å·ï¼Œä½¿ç½‘ç»œèƒ½å¤Ÿé«˜æ•ˆåœ°å­¦ä¹ æ®‹å·®æ˜ å°„ã€‚è¿™ä¸€è®¾è®¡ä¸ä»…æå‡äº†æ¨¡å‹æ€§èƒ½ï¼Œè¿˜æ¨åŠ¨äº†æ·±åº¦å­¦ä¹ åœ¨è®¡ç®—æœºè§†è§‰é¢†åŸŸçš„è¿›ä¸€æ­¥å‘å±•ã€‚\n\n## Q: æ·±åº¦ç½‘ç»œæ¢¯åº¦æ¶ˆå¤±çš„åŸç†åŠè§£å†³æ–¹æ¡ˆ\n\n\u003e [!query]\n\u003e\n\u003e æ·±åº¦ç½‘ç»œä¸­ï¼Œæ¢¯åº¦æ¶ˆå¤±æ˜¯æŒ‡ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆä¼šå‡ºç°æ¢¯åº¦æ¶ˆå¤±ï¼Ÿæ·±å…¥è®²è¿°ä¸€ä¸‹å…¶åŸç†ã€‚æç¤ºï¼šä½ å¯ä»¥ä½¿ç”¨å…¬å¼ã€Mermaid å›¾è¡¨ã€è¡¨æ ¼ç­‰æ–¹å¼ä½¿å†…å®¹æ›´å®¹æ˜“ç†è§£ã€‚\n\n\u003e [!reasoning]-\n\u003e\n\u003e å—¯ï¼Œç”¨æˆ·é—®çš„æ˜¯æ·±åº¦ç½‘ç»œä¸­çš„æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ï¼Œéœ€è¦è¯¦ç»†è§£é‡Šå®ƒçš„åŸç†ï¼Œè¿˜æœ‰ä¸ºä»€ä¹ˆä¼šå‡ºç°ã€‚é¦–å…ˆï¼Œæˆ‘å¾—å›æƒ³ä¸€ä¸‹æ¢¯åº¦æ¶ˆå¤±çš„åŸºæœ¬æ¦‚å¿µã€‚æ¢¯åº¦æ¶ˆå¤±æ˜¯æŒ‡åœ¨è®­ç»ƒæ·±åº¦ç¥ç»ç½‘ç»œæ—¶ï¼Œåå‘ä¼ æ’­è¿‡ç¨‹ä¸­æ¢¯åº¦é€æ¸å˜å°ï¼Œå¯¼è‡´æµ…å±‚ç½‘ç»œçš„æƒé‡æ›´æ–°ç¼“æ…¢ç”šè‡³åœæ­¢ï¼Œä½¿å¾—æ¨¡å‹éš¾ä»¥è®­ç»ƒã€‚è¿™å¯èƒ½æ˜¯å› ä¸ºæ¿€æ´»å‡½æ•°çš„é€‰æ‹©ï¼Œæ¯”å¦‚ sigmoid æˆ–è€… tanhï¼Œå®ƒä»¬çš„å¯¼æ•°åœ¨è¾“å…¥å€¼è¾ƒå¤§æˆ–è¾ƒå°æ—¶ä¼šè¶‹è¿‘äºé›¶ï¼Œå¯¼è‡´æ¢¯åº¦é€å±‚è¡°å‡ã€‚\n\u003e\n\u003e æ¥ä¸‹æ¥ï¼Œæˆ‘å¾—è€ƒè™‘å¦‚ä½•ç»„ç»‡å†…å®¹ã€‚ç”¨æˆ·å¸Œæœ›æ·±å…¥è®²è§£åŸç†ï¼Œå¯èƒ½éœ€è¦ç”¨å…¬å¼æ¥è¯´æ˜æ¢¯åº¦æ˜¯å¦‚ä½•åœ¨åå‘ä¼ æ’­ä¸­ç´¯ç§¯çš„ã€‚æ¯”å¦‚ï¼Œé“¾å¼æ³•åˆ™ä¸­çš„å„å±‚å¯¼æ•°ç›¸ä¹˜ï¼Œå¦‚æœæ¯ä¸ªå¯¼æ•°éƒ½å°äº 1ï¼Œå¤šæ¬¡ç›¸ä¹˜åä¼šè¶‹è¿‘äºé›¶ã€‚è¿™æ—¶å€™å¯ä»¥ä¸¾ä¸€ä¸ªå…·ä½“çš„ä¾‹å­ï¼Œæ¯”å¦‚ç”¨ sigmoid æ¿€æ´»å‡½æ•°ï¼Œå…¶å¯¼æ•°æœ€å¤§ä¸º 0.25ï¼Œæ‰€ä»¥ç»è¿‡å¤šå±‚åæ¢¯åº¦ä¼šæŒ‡æ•°çº§ä¸‹é™ã€‚\n\u003e\n\u003e ç„¶åï¼Œéœ€è¦åˆ†æä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ç§æƒ…å†µã€‚å¯èƒ½çš„åŸå› åŒ…æ‹¬æ¿€æ´»å‡½æ•°çš„é€‰æ‹©ã€æƒé‡åˆå§‹åŒ–ä¸å½“ã€ç½‘ç»œç»“æ„è¿‡æ·±ç­‰ã€‚è¿™é‡Œå¯ä»¥å¯¹æ¯”ä¸åŒçš„æ¿€æ´»å‡½æ•°ï¼Œæ¯”å¦‚ ReLU å¦‚ä½•ç¼“è§£æ¢¯åº¦æ¶ˆå¤±ï¼Œå› ä¸ºå®ƒçš„å¯¼æ•°æ˜¯ 1 æˆ– 0ï¼Œä¸ä¼šå¯¼è‡´æ¢¯åº¦è¡°å‡ã€‚å¦å¤–ï¼Œåˆå§‹åŒ–æ–¹æ³•å¦‚ He åˆå§‹åŒ–ä¹Ÿæœ‰å¸®åŠ©ï¼Œä½†æ ¹æœ¬åŸå› è¿˜æ˜¯åœ¨äºé“¾å¼æ³•åˆ™ä¸­çš„ä¹˜ç§¯æ•ˆåº”ã€‚\n\u003e\n\u003e ç”¨æˆ·è¿˜æåˆ°å¯ä»¥ä½¿ç”¨å…¬å¼ã€å›¾è¡¨æˆ–è¡¨æ ¼ï¼Œæ‰€ä»¥å¯èƒ½éœ€è¦ç”»ä¸€ä¸ªç®€å•çš„è®¡ç®—å›¾ï¼Œæˆ–è€…ç”¨æ•°å­¦å…¬å¼å±•ç¤ºæ¢¯åº¦å¦‚ä½•é€å±‚ä¼ é€’ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æ¯ä¸€å±‚çš„å¯¼æ•°æ˜¯ Ïƒâ€™(z)ï¼Œé‚£ä¹ˆç»è¿‡ n å±‚åï¼Œæ¢¯åº¦å°±æ˜¯åˆå§‹æ¢¯åº¦ä¹˜ä»¥(Ïƒâ€™(z))^nï¼Œå¦‚æœ Ïƒâ€™(z) \u003c 1ï¼Œå°±ä¼šæŒ‡æ•°ä¸‹é™ã€‚\n\u003e\n\u003e å¦å¤–ï¼Œå¯èƒ½éœ€è¦æåˆ° LSTM å’Œæ®‹å·®è¿æ¥ï¼ˆResNetï¼‰æ˜¯å¦‚ä½•è§£å†³æ¢¯åº¦æ¶ˆå¤±çš„ã€‚æ¯”å¦‚ LSTM é€šè¿‡é—¨æ§æœºåˆ¶ä¿æŒæ¢¯åº¦æµåŠ¨ï¼Œè€Œæ®‹å·®è¿æ¥æä¾›äº†çŸ­è·¯è·¯å¾„ï¼Œä½¿å¾—æ¢¯åº¦å¯ä»¥ç›´æ¥å›ä¼ ï¼Œå‡å°‘äº†ç›¸ä¹˜çš„æ¬¡æ•°ã€‚\n\u003e\n\u003e åœ¨ç»“æ„å®‰æ’ä¸Šï¼Œå¯èƒ½éœ€è¦å…ˆå®šä¹‰æ¢¯åº¦æ¶ˆå¤±ï¼Œç„¶ååˆ†æåŸå› ï¼Œå†æ·±å…¥æ•°å­¦åŸç†ï¼Œæœ€åè®¨è®ºè§£å†³æ–¹æ¡ˆã€‚éœ€è¦æ³¨æ„ç”¨è¯å‡†ç¡®ï¼Œæ¯”å¦‚åŒºåˆ†æ¢¯åº¦æ¶ˆå¤±å’Œæ¢¯åº¦çˆ†ç‚¸ï¼Œè™½ç„¶éƒ½æ˜¯æ¢¯åº¦ä¸ç¨³å®šé—®é¢˜ï¼Œä½†æ–¹å‘ä¸åŒã€‚\n\u003e\n\u003e è¿˜éœ€è¦æ£€æŸ¥æ˜¯å¦æœ‰é—æ¼çš„å…³é”®ç‚¹ï¼Œæ¯”å¦‚ç½‘ç»œæ·±åº¦çš„å½±å“ï¼Œæˆ–è€…ä¸åŒä¼˜åŒ–å™¨çš„æ•ˆæœï¼Œæ¯”å¦‚ Adam æ˜¯å¦æœ‰åŠ©äºç¼“è§£æ¢¯åº¦æ¶ˆå¤±ã€‚ä¸è¿‡å¯èƒ½ä¸»è¦åŸå› æ˜¯æ¿€æ´»å‡½æ•°å’Œé“¾å¼æ³•åˆ™ï¼Œä¼˜åŒ–å™¨å¯èƒ½å½±å“ä¸å¤§ï¼Œä½†å¯ä»¥ç®€å•æåŠã€‚\n\u003e\n\u003e æœ€åï¼Œç¡®ä¿è§£é‡Šæ¸…æ™°ï¼Œé€æ­¥å¼•å¯¼è¯»è€…ç†è§£æ¢¯åº¦æ¶ˆå¤±çš„æœºåˆ¶ï¼Œå¹¶é€šè¿‡ç¤ºä¾‹æˆ–å›¾è¡¨å¸®åŠ©ç†è§£ã€‚å¯èƒ½è¿˜éœ€è¦æ¯”è¾ƒä¸åŒæ¿€æ´»å‡½æ•°çš„å¯¼æ•°ï¼Œæ¯”å¦‚ sigmoidã€tanh å’Œ ReLUï¼Œç”¨è¡¨æ ¼æˆ–å›¾è¡¨æ˜¾ç¤ºå®ƒä»¬çš„å¯¼æ•°èŒƒå›´ï¼Œä»è€Œè¯´æ˜ä¸ºä»€ä¹ˆ ReLU æ›´é€‚åˆæ·±å±‚ç½‘ç»œã€‚\n\n### æ·±åº¦ç½‘ç»œä¸­æ¢¯åº¦æ¶ˆå¤±çš„åŸç†åˆ†æ\n\n#### 1. æ¢¯åº¦æ¶ˆå¤±çš„å®šä¹‰\n\næ¢¯åº¦æ¶ˆå¤±ï¼ˆVanishing Gradientï¼‰æ˜¯æŒ‡æ·±åº¦ç¥ç»ç½‘ç»œåœ¨åå‘ä¼ æ’­è¿‡ç¨‹ä¸­ï¼Œæ¢¯åº¦éšç€å±‚æ•°çš„å¢åŠ å‘ˆç°æŒ‡æ•°çº§è¡°å‡çš„ç°è±¡ï¼Œå¯¼è‡´æµ…å±‚ç½‘ç»œçš„å‚æ•°æ›´æ–°å¹…åº¦æå°ç”šè‡³æ— æ³•æ›´æ–°ã€‚\n\n---\n\n#### 2. æ¢¯åº¦æ¶ˆå¤±çš„æ•°å­¦åŸç†\n\n**åå‘ä¼ æ’­é“¾å¼æ³•åˆ™**æ˜¯æ ¸å¿ƒæœºåˆ¶ã€‚å‡è®¾ç½‘ç»œæœ‰ $$ L $$ å±‚ï¼ŒæŸå¤±å‡½æ•°ä¸º $$ \\mathcal{L} $$ï¼Œç¬¬ $$ l $$ å±‚çš„æƒé‡æ¢¯åº¦ä¸ºï¼š\n\n$$\n\\frac{\\partial \\mathcal{L}}{\\partial W^{(l)}} = \\frac{\\partial \\mathcal{L}}{\\partial a^{(L)}} \\cdot \\prod\\_{k=l}^{L-1} \\left( \\frac{\\partial a^{(k+1)}}{\\partial a^{(k)}} \\right) \\cdot \\frac{\\partial a^{(l)}}{\\partial W^{(l)}}\n$$\n\nå…¶ä¸­ $$ a^{(k)} $$ æ˜¯ç¬¬ $$ k $$ å±‚çš„æ¿€æ´»å€¼ã€‚æ¢¯åº¦ç”±å¤šä¸ªé›…å¯æ¯”çŸ©é˜µä¹˜ç§¯ç»„æˆï¼Œè‹¥æ¯é¡¹ $$ \\frac{\\partial a^{(k+1)}}{\\partial a^{(k)}} \u003c 1 $$ï¼Œåˆ™æ¢¯åº¦ä¼šæŒ‡æ•°è¡°å‡ã€‚\n\n---\n\n#### 3. æ¢¯åº¦æ¶ˆå¤±çš„æ ¹æº\n\n##### (1) æ¿€æ´»å‡½æ•°çš„é€‰æ‹©\n\n- **Sigmoid/Tanh å‡½æ•°**ï¼šå¯¼æ•°èŒƒå›´åˆ†åˆ«ä¸º $$ (0, 0.25] $$ å’Œ $$ (0, 1] $$ï¼Œå¯¼è‡´æ¢¯åº¦é€å±‚ç¼©å°ã€‚\n  $$\n  \\text{Sigmoid å¯¼æ•°: } \\sigma'(x) = \\sigma(x)(1-\\sigma(x))\n  $$\n  $$\n  \\text{Tanh å¯¼æ•°: } \\tanh'(x) = 1 - \\tanh^2(x)\n  $$\n- **ReLU å‡½æ•°**ï¼šå¯¼æ•°ä¸º 0 æˆ– 1ï¼Œæ¢¯åº¦å¯ç¨³å®šä¼ é€’ï¼ˆä½†å¯èƒ½å¼•å‘ç¥ç»å…ƒæ­»äº¡ï¼‰ã€‚\n\n##### (2) æƒé‡åˆå§‹åŒ–é—®é¢˜\n\n- è‹¥æƒé‡ $$ W $$ åˆå§‹å€¼è¿‡å°ï¼Œåˆ™ $$ \\prod W $$ çš„ä¹˜ç§¯ä¼šå¯¼è‡´è¾“å‡ºæ”¶ç¼©ã€‚\n- ä¾‹å¦‚ï¼šä½¿ç”¨å‡å€¼ä¸º 0ã€æ–¹å·®è¿‡å°çš„æ­£æ€åˆ†å¸ƒåˆå§‹åŒ–æ—¶ï¼Œæ¿€æ´»å€¼ä¼šé€å±‚åç¼©ã€‚\n\n##### (3) æ·±å±‚ç½‘ç»œçš„é“¾å¼ä¹˜ç§¯\n\n- æ¢¯åº¦è®¡ç®—æ¶‰åŠ $$ \\prod\\_{k=l}^L \\frac{\\partial a^{(k)}}{\\partial a^{(k-1)}} $$ã€‚\n- å‡è®¾æ¯å±‚æ¢¯åº¦å› å­ä¸º $$ \\alpha \u003c 1 $$ï¼Œåˆ™æ€»æ¢¯åº¦ä¸º $$ \\alpha^{L-l} $$ï¼ŒæŒ‡æ•°çº§è¡°å‡ã€‚\n\n---\n\n#### 4. æ¢¯åº¦æ¶ˆå¤±çš„ç›´è§‚æ¼”ç¤º\n\n```mermaid\ngraph LR\n  A[è¾“å…¥å±‚] --\u003e B[éšè—å±‚1: æ¢¯åº¦=0.8]\n  B --\u003e C[éšè—å±‚2: æ¢¯åº¦=0.6]\n  C --\u003e D[...]\n  D --\u003e E[éšè—å±‚N: æ¢¯åº¦=0.2]\n  E --\u003e F[è¾“å‡ºå±‚]\n\n  style A fill:#f9f\n  style F fill:#f9f\n```\n\n---\n\n#### 5. å…³é”®å‚æ•°å¯¹æ¯”è¡¨\n\n| å› ç´              | å¯¹æ¢¯åº¦çš„å½±å“             | å…¸å‹ç¤ºä¾‹                        |\n| ---------------- | ------------------------ | ------------------------------- |\n| æ¿€æ´»å‡½æ•°å¯¼æ•°èŒƒå›´ | å¯¼æ•°è¶Šå°ï¼Œæ¢¯åº¦è¡°å‡è¶Šå¿«   | Sigmoidï¼ˆæœ€å¤§å¯¼æ•° 0.25ï¼‰        |\n| ç½‘ç»œæ·±åº¦         | å±‚æ•°è¶Šå¤šï¼Œä¹˜ç§¯æ•ˆåº”è¶Šæ˜¾è‘— | 100 å±‚ vs 5 å±‚ç½‘ç»œ              |\n| æƒé‡åˆå§‹åŒ–æ–¹å·®   | æ–¹å·®è¿‡å°å¯¼è‡´æ¿€æ´»å€¼åç¼©   | He åˆå§‹åŒ– vs é›¶å‡å€¼å°æ–¹å·®åˆå§‹åŒ– |\n\n---\n\n#### 6. è§£å†³æ–¹æ¡ˆ\n\n1. **æ¿€æ´»å‡½æ•°ä¼˜åŒ–**ï¼šä½¿ç”¨ ReLUã€Leaky ReLU ç­‰æ¢¯åº¦ä¿æŒèƒ½åŠ›å¼ºçš„å‡½æ•°ã€‚\n2. **æ®‹å·®è¿æ¥ï¼ˆResNetï¼‰**ï¼šé€šè¿‡è·³è·ƒè¿æ¥ç»•è¿‡éçº¿æ€§å˜æ¢ï¼Œç›´æ¥ä¼ é€’æ¢¯åº¦ã€‚\n3. **æ‰¹å½’ä¸€åŒ–ï¼ˆBatchNormï¼‰**ï¼šç¨³å®šæ¿€æ´»å€¼åˆ†å¸ƒï¼Œå‡ç¼“æ¢¯åº¦è¡°å‡ã€‚\n4. **æ¢¯åº¦è£å‰ª/è‡ªé€‚åº”ä¼˜åŒ–å™¨**ï¼šé—´æ¥ç¼“è§£æ¢¯åº¦ä¸ç¨³å®šé—®é¢˜ï¼ˆå¦‚ Adamï¼‰ã€‚\n\n---\n\n#### 7. æ•°å­¦ç¤ºä¾‹\n\nå‡è®¾ 5 å±‚ç½‘ç»œä½¿ç”¨ Sigmoid æ¿€æ´»ï¼Œæ¯å±‚æ¢¯åº¦å› å­ä¸º 0.25ï¼š\n\n$$\n\\text{æ€»æ¢¯åº¦} = \\text{åˆå§‹æ¢¯åº¦} \\times (0.25)^5 = \\text{åˆå§‹æ¢¯åº¦} \\times 0.00098\n$$\n\næµ…å±‚æƒé‡æ›´æ–°å‡ ä¹åœæ»ã€‚\n\n---\n\né€šè¿‡ç†è§£æ¢¯åº¦æ¶ˆå¤±çš„æ•°å­¦æœºåˆ¶å’Œå·¥ç¨‹ä¼˜åŒ–æ–¹æ³•ï¼Œå¯æœ‰æ•ˆè®¾è®¡æ›´ç¨³å®šçš„æ·±åº¦ç½‘ç»œç»“æ„ã€‚\n","title":"ResNet çš„æ•°å­¦åŸç†ä¸æ¢¯åº¦æ¶ˆå¤±é—®é¢˜åˆ†æ","abstract":"\u003e æœ¬æ–‡æ·±å…¥æ¢è®¨äº† ResNet çš„æ•°å­¦åŸç†ï¼Œåˆ†æäº†æ·±åº¦ç¥ç»ç½‘ç»œä¸­çš„æ¢¯åº¦æ¶ˆå¤±é—®é¢˜åŠå…¶è§£å†³æ–¹æ¡ˆã€‚é€šè¿‡æ•°å­¦æ¨å¯¼å’Œç›´è§‚è§£é‡Šï¼Œå¸®åŠ©è¯»è€…ç†è§£æ®‹å·®è¿æ¥çš„ä½œç”¨æœºåˆ¶ï¼Œä»¥åŠå®ƒå¦‚ä½•æœ‰æ•ˆåœ°è§£å†³äº†æ·±åº¦ç¥ç»ç½‘ç»œè®­ç»ƒä¸­çš„å…³é”®é—®é¢˜ã€‚\n\u003e [!query]\n\u003e","length":309,"created_at":"2025-03-07T10:00:00.000Z","updated_at":"2025-03-07T10:00:00.000Z","tags":["Deep Learning","Neural Networks","ResNet","Mathematics"],"license":true}},{"pathMapping":{"filePath":"public/content/learn_from_ai/2025-03-06-pytorch-backpropagation-mechanism.md","pagePath":"/learn_from_ai/pytorch-backpropagation-mechanism","slug":"pytorch-backpropagation-mechanism"},"meta":{"content":"\n\u003e æœ¬æ–‡ä¸ºç”¨æˆ·ä¸ DeepSeek çš„é—®ç­”ã€‚ä¸»é¢˜ä¸º PyTorch çš„åå‘ä¼ æ’­æœºåˆ¶ã€‚æœ¬æ–‡ä»æ•°å­¦åŸç†ã€è®¡ç®—å›¾æœºåˆ¶å’Œå®é™…éœ€æ±‚ä¸‰ä¸ªæ–¹é¢æ·±å…¥è§£é‡Šå…¶å·¥ä½œåŸç†ï¼Œå¹¶ç»“åˆ PyTorch çš„è‡ªåŠ¨å¾®åˆ†ï¼ˆAutogradï¼‰ç³»ç»Ÿè¿›è¡Œè¯´æ˜ã€‚\n\n## Q; æ·±å…¥è§£æ PyTorch ä¸­çš„åå‘ä¼ æ’­æœºåˆ¶\n\n\u003e [!query]\n\u003e\n\u003e æ·±å…¥è§£é‡Š torch ä¸­åå‘ä¼ æ’­æœºåˆ¶çš„æ•°å­¦åŸç†ä¸ä¸ºä½•éœ€è¦åå‘ä¼ æ’­æœºåˆ¶ã€‚æç¤ºï¼šä½ å¯ä»¥ä½¿ç”¨å…¬å¼ã€Mermaid å›¾è¡¨ã€è¡¨æ ¼ç­‰æ–¹å¼ä½¿å†…å®¹æ›´å®¹æ˜“ç†è§£ã€‚\n\n\u003e [!reasoning]-\n\u003e\n\u003e å—¯ï¼Œç”¨æˆ·è®©æˆ‘æ·±å…¥è§£é‡Š PyTorch ä¸­çš„åå‘ä¼ æ’­æœºåˆ¶çš„æ•°å­¦åŸç†ä»¥åŠä¸ºä»€ä¹ˆéœ€è¦å®ƒã€‚å¥½çš„ï¼Œæˆ‘å¾—å…ˆå›å¿†ä¸€ä¸‹åå‘ä¼ æ’­çš„åŸºç¡€çŸ¥è¯†ï¼Œç„¶åç»“åˆ PyTorch çš„å…·ä½“å®ç°æ¥å±•å¼€ã€‚\n\u003e\n\u003e é¦–å…ˆï¼Œåå‘ä¼ æ’­æ˜¯ç¥ç»ç½‘ç»œè®­ç»ƒçš„æ ¸å¿ƒï¼Œç”¨äºè®¡ç®—æ¢¯åº¦ã€‚ç”¨æˆ·å¯èƒ½å·²ç»äº†è§£æ¢¯åº¦ä¸‹é™ï¼Œä½†éœ€è¦æ›´åº•å±‚çš„æ•°å­¦è§£é‡Šã€‚æˆ‘åº”è¯¥ä»è®¡ç®—å›¾å¼€å§‹ï¼Œå› ä¸º PyTorch ä½¿ç”¨åŠ¨æ€å›¾æœºåˆ¶ã€‚æ¯ä¸ªå¼ é‡çš„è¿ç®—éƒ½ä¼šè®°å½•åœ¨è®¡ç®—å›¾ä¸­ï¼Œè¿™æ ·åœ¨åå‘ä¼ æ’­æ—¶å¯ä»¥è‡ªåŠ¨è®¡ç®—æ¢¯åº¦ã€‚\n\u003e\n\u003e æ•°å­¦åŸç†æ–¹é¢ï¼Œå¾—å…ˆè®²é“¾å¼æ³•åˆ™ã€‚æ¯”å¦‚ï¼Œå‡è®¾æœ‰ä¸€ä¸ªç®€å•çš„å‡½æ•°ï¼Œy = w*x + bï¼Œç„¶åæŸå¤±å‡½æ•°æ˜¯ L = (y - t)^2ã€‚é‚£ä¹ˆæ±‚ L å¯¹ w çš„æ¢¯åº¦å°±éœ€è¦é“¾å¼æ³•åˆ™ï¼šdL/dw = dL/dy * dy/dwã€‚åå‘ä¼ æ’­çš„è¿‡ç¨‹å°±æ˜¯ä»è¾“å‡ºå±‚å¼€å§‹ï¼Œé€å±‚åº”ç”¨é“¾å¼æ³•åˆ™ï¼Œå°†æ¢¯åº¦ä¼ æ’­å›å„å±‚çš„å‚æ•°ã€‚\n\u003e\n\u003e ç„¶åéœ€è¦è§£é‡Šä¸ºä»€ä¹ˆéœ€è¦åå‘ä¼ æ’­ã€‚æ‰‹åŠ¨è®¡ç®—æ¢¯åº¦åœ¨å¤æ‚ç½‘ç»œä¸­ä¸ç°å®ï¼Œåå‘ä¼ æ’­è‡ªåŠ¨é«˜æ•ˆåœ°è®¡ç®—æ‰€æœ‰å‚æ•°çš„æ¢¯åº¦ï¼ŒèŠ‚çœäº†æ—¶é—´å’Œå‡å°‘é”™è¯¯ã€‚å¯èƒ½è¿˜éœ€è¦æ¯”è¾ƒå‰å‘ä¼ æ’­å’Œåå‘ä¼ æ’­çš„è®¡ç®—é‡ï¼Œæ¯”å¦‚åå‘ä¼ æ’­å¦‚ä½•å¤ç”¨å‰å‘çš„ä¸­é—´ç»“æœï¼Œæé«˜æ•ˆç‡ã€‚\n\u003e\n\u003e PyTorch ä¸­çš„ autograd æœºåˆ¶æ˜¯å…³é”®ã€‚æ¯ä¸ª Tensor çš„.grad_fn å±æ€§è®°å½•äº†åˆ›å»ºå®ƒçš„æ“ä½œï¼Œè¿™æ ·åœ¨è°ƒç”¨.backward()æ—¶ï¼Œä¼šæ²¿ç€è¿™äº›å‡½æ•°å½¢æˆçš„è®¡ç®—å›¾åå‘éå†ï¼Œåº”ç”¨é“¾å¼æ³•åˆ™ã€‚éœ€è¦ä¸¾ä¾‹è¯´æ˜ï¼Œæ¯”å¦‚æ„å»ºä¸€ä¸ªç®€å•çš„è®¡ç®—å›¾ï¼Œç„¶åå±•ç¤ºæ¢¯åº¦è®¡ç®—çš„è¿‡ç¨‹ã€‚\n\u003e\n\u003e å¯èƒ½ç”¨æˆ·å¯¹è®¡ç®—å›¾çš„å…·ä½“å®ç°ç»†èŠ‚æ„Ÿå…´è¶£ï¼Œæ¯”å¦‚ PyTorch çš„åŠ¨æ€å›¾ç‰¹æ€§ï¼Œæ¯æ¬¡å‰å‘ä¼ æ’­éƒ½ä¼šæ„å»ºæ–°çš„å›¾ï¼Œè¿™æ ·æ›´çµæ´»ã€‚ä½†æ•°å­¦åŸç†è¿˜æ˜¯é“¾å¼æ³•åˆ™ï¼Œä¸ç®¡å›¾çš„ç»“æ„å¦‚ä½•å˜åŒ–ï¼Œæ¢¯åº¦è®¡ç®—çš„æ–¹æ³•æ˜¯ä¸€è‡´çš„ã€‚\n\u003e\n\u003e å¦å¤–ï¼Œå¯èƒ½éœ€è¦æåˆ°ä¸ºä»€ä¹ˆä¸èƒ½åªç”¨æ•°å€¼æ–¹æ³•æ¥è¿‘ä¼¼æ¢¯åº¦ï¼Œæ¯”å¦‚è®¡ç®—èµ„æºçš„é—®é¢˜ï¼Œå°¤å…¶æ˜¯é«˜ç»´å‚æ•°æ—¶ï¼Œæ•°å€¼æ¢¯åº¦è®¡ç®—é‡å¤ªå¤§ã€‚è€Œåå‘ä¼ æ’­é€šè¿‡è§£ææ³•é«˜æ•ˆè®¡ç®—ï¼Œé€‚åˆæ·±åº¦å­¦ä¹ çš„å¤§è§„æ¨¡å‚æ•°ã€‚\n\u003e\n\u003e è¿˜è¦æ³¨æ„è§£é‡Šå¶å­èŠ‚ç‚¹å’Œä¸­é—´èŠ‚ç‚¹çš„æ¢¯åº¦å­˜å‚¨æƒ…å†µï¼ŒPyTorch é»˜è®¤åªä¿ç•™å¶å­èŠ‚ç‚¹çš„æ¢¯åº¦ï¼Œä¸­é—´èŠ‚ç‚¹çš„æ¢¯åº¦ä¼šè¢«é‡Šæ”¾ä»¥èŠ‚çœå†…å­˜ã€‚è¿™å¯èƒ½åœ¨è®­ç»ƒå¤§æ¨¡å‹æ—¶å¾ˆé‡è¦ï¼Œç”¨æˆ·å¯èƒ½éœ€è¦äº†è§£å¦‚ä½•æ§åˆ¶æ¢¯åº¦çš„ä¿ç•™ã€‚\n\u003e\n\u003e æˆ–è®¸ç”¨æˆ·å¯¹åå‘ä¼ æ’­çš„æ•°å­¦æ¨å¯¼æœ‰æ›´æ·±çš„éœ€æ±‚ï¼Œæ¯”å¦‚å¦‚ä½•æ‰©å±•åˆ°å¤šå±‚ç½‘ç»œï¼Œæˆ–è€…å¦‚ä½•å¤„ç†å¤æ‚çš„å±‚ç»“æ„å¦‚å·ç§¯å±‚ã€å¾ªç¯å±‚ã€‚ä½†æ ¹æ®é—®é¢˜ï¼Œå¯èƒ½åªéœ€è¦åŸºç¡€æ•°å­¦ï¼Œæ¯”å¦‚é“¾å¼æ³•åˆ™çš„å¤šæ¬¡åº”ç”¨ï¼Œä»¥åŠå¦‚ä½•ç´¯ç§¯å„å±‚çš„æ¢¯åº¦ã€‚\n\u003e\n\u003e æœ€åï¼Œæ€»ç»“åå‘ä¼ æ’­çš„å¿…è¦æ€§ï¼šè‡ªåŠ¨åŒ–ã€é«˜æ•ˆã€å‡†ç¡®è®¡ç®—æ¢¯åº¦ï¼Œä½¿å¾—è®­ç»ƒæ·±å±‚ç½‘ç»œå¯è¡Œã€‚è€Œ PyTorch çš„è‡ªåŠ¨å¾®åˆ†æœºåˆ¶è®©ç”¨æˆ·æ— éœ€æ‰‹åŠ¨å®ç°è¿™äº›å¤æ‚çš„è®¡ç®—ï¼Œåªéœ€å…³æ³¨æ¨¡å‹ç»“æ„ã€‚\n\u003e\n\u003e å¯èƒ½éœ€è¦ç”¨å…¬å¼æ¥å±•ç¤ºé“¾å¼æ³•åˆ™çš„åº”ç”¨ï¼Œæ¯”å¦‚å¤šå±‚çš„æ¢¯åº¦ç›¸ä¹˜ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªä¸‰å±‚çš„ç½‘ç»œï¼Œæ¯ä¸€å±‚çš„æƒé‡æ¢¯åº¦å¦‚ä½•è®¡ç®—ã€‚åŒæ—¶ï¼Œç”¨ Mermaid å›¾å±•ç¤ºè®¡ç®—å›¾çš„ç»“æ„ï¼Œè¯´æ˜å‰å‘å’Œåå‘çš„è·¯å¾„ã€‚\n\u003e\n\u003e è¿˜æœ‰å¯èƒ½è¦è€ƒè™‘æ¿€æ´»å‡½æ•°çš„å¯¼æ•°ï¼Œæ¯”å¦‚ ReLU åœ¨åå‘ä¼ æ’­ä¸­çš„å¤„ç†ï¼Œè¿™æ ·åœ¨è®¡ç®—å›¾ä¸­å¦‚ä½•å¤„ç†ä¸å¯å¯¼ç‚¹ï¼Œä½† PyTorch çš„ autograd ä¼šè‡ªåŠ¨å¤„ç†è¿™äº›ã€‚\n\u003e\n\u003e æ€»ä¹‹ï¼Œæˆ‘éœ€è¦ä»æ•°å­¦åŸç†ï¼ˆé“¾å¼æ³•åˆ™ï¼‰ã€è®¡ç®—å›¾çš„æ¦‚å¿µã€PyTorch çš„å®ç°æœºåˆ¶ï¼ˆåŠ¨æ€å›¾ã€autogradï¼‰ã€ä»¥åŠåå‘ä¼ æ’­çš„å¿…è¦æ€§ï¼ˆé«˜æ•ˆã€è‡ªåŠ¨ï¼‰è¿™å‡ ä¸ªæ–¹é¢æ¥ç»„ç»‡å†…å®¹ï¼Œå¹¶ç”¨å…¬å¼å’Œå›¾è¡¨è¾…åŠ©è¯´æ˜ã€‚\n\u003e\n\u003e æœ€åï¼Œæˆ‘éœ€è¦ç”¨ä¸€ä¸ªå…·ä½“çš„ä¾‹å­ï¼Œæ¯”å¦‚ä¸€ä¸ªç®€å•çš„ç¥ç»ç½‘ç»œï¼Œæ¥å±•ç¤ºåå‘ä¼ æ’­çš„æ•´ä¸ªè¿‡ç¨‹ï¼ŒåŒ…æ‹¬å‰å‘ä¼ æ’­ã€åå‘ä¼ æ’­ã€æ¢¯åº¦è®¡ç®—å’Œå‚æ•°æ›´æ–°ã€‚è¿™æ ·ç”¨æˆ·å¯ä»¥ç›´è§‚åœ°ç†è§£åå‘ä¼ æ’­çš„æ¯ä¸ªæ­¥éª¤ã€‚\n\u003e\n\u003e å¦‚æœç”¨æˆ·å¯¹ PyTorch çš„ä»£ç å®ç°æ„Ÿå…´è¶£ï¼Œæˆ‘ä¹Ÿå¯ä»¥æä¾›ä¸€äº›å…³é”®ä»£ç æ®µçš„è§£æï¼Œæ¯”å¦‚å¦‚ä½•å®šä¹‰è®¡ç®—å›¾ã€å¦‚ä½•è·Ÿè¸ªæ¢¯åº¦ã€å¦‚ä½•æ‰§è¡Œåå‘ä¼ æ’­ç­‰ã€‚\n\u003e\n\u003e æ€»ä¹‹ï¼Œæˆ‘éœ€è¦ç¡®ä¿è§£é‡Šæ¸…æ™°ï¼Œç»“åˆæ•°å­¦åŸç†å’Œä»£ç ç¤ºä¾‹ï¼Œå¸®åŠ©ç”¨æˆ·ç†è§£ PyTorch ä¸­çš„åå‘ä¼ æ’­æœºåˆ¶ã€‚\n\n### æ·±å…¥è§£æ PyTorch ä¸­çš„åå‘ä¼ æ’­æœºåˆ¶\n\nåå‘ä¼ æ’­ï¼ˆBackpropagationï¼‰æ˜¯ç¥ç»ç½‘ç»œè®­ç»ƒçš„æ ¸å¿ƒç®—æ³•ã€‚æœ¬æ–‡å°†ä»æ•°å­¦åŸç†ã€è®¡ç®—å›¾æœºåˆ¶å’Œå®é™…éœ€æ±‚ä¸‰ä¸ªæ–¹é¢æ·±å…¥è§£é‡Šå…¶å·¥ä½œåŸç†ï¼Œå¹¶ç»“åˆ PyTorch çš„è‡ªåŠ¨å¾®åˆ†ï¼ˆAutogradï¼‰ç³»ç»Ÿè¿›è¡Œè¯´æ˜ã€‚\n\n---\n\n#### ä¸€ã€åå‘ä¼ æ’­çš„æ•°å­¦åŸç†\n\n##### 1. é“¾å¼æ³•åˆ™ï¼ˆChain Ruleï¼‰\n\nåå‘ä¼ æ’­æœ¬è´¨ä¸Šæ˜¯é“¾å¼æ³•åˆ™çš„é«˜æ•ˆå®ç°ã€‚å‡è®¾ç¥ç»ç½‘ç»œçš„è®¡ç®—æµç¨‹ä¸ºï¼š\n\n$$\nL = f(g(h(x)))\n$$\n\nå…¶ä¸­ï¼š\n\n- $$ h(x) = W_1x + b_1 $$\n- $$ g(z) = \\text{ReLU}(z) $$\n- $$ f(y) = \\frac{1}{2}(y - t)^2 $$ ï¼ˆå‡æ–¹è¯¯å·®æŸå¤±ï¼‰\n\nåˆ™æ¢¯åº¦è®¡ç®—ä¸ºï¼š\n\n$$\n\\frac{\\partial L}{\\partial W_1} = \\frac{\\partial L}{\\partial f} \\cdot \\frac{\\partial f}{\\partial g} \\cdot \\frac{\\partial g}{\\partial h} \\cdot \\frac{\\partial h}{\\partial W_1}\n$$\n\n##### 2. æ¢¯åº¦ç´¯ç§¯å…¬å¼\n\nå¯¹äºä»»æ„å‚æ•° $$ \\theta $$ï¼Œæ¢¯åº¦è®¡ç®—å¯è¡¨ç¤ºä¸ºï¼š\n\n$$\n\\frac{\\partial \\mathcal{L}}{\\partial \\theta} = \\sum_{\\text{path } \\theta \\to \\mathcal{L}} \\left( \\prod_{i} \\frac{\\partial \\text{op}_i}{\\partial \\text{input}_i} \\right)\n$$\n\n---\n\n#### äºŒã€PyTorch çš„å®ç°æœºåˆ¶\n\n##### 1. åŠ¨æ€è®¡ç®—å›¾ï¼ˆDynamic Computation Graphï¼‰\n\nPyTorch åœ¨å‰å‘ä¼ æ’­æ—¶è‡ªåŠ¨æ„å»ºè®¡ç®—å›¾ï¼ŒèŠ‚ç‚¹ä¸ºå¼ é‡ï¼Œè¾¹ä¸ºè¿ç®—æ“ä½œï¼š\n\n```mermaid\ngraph LR\n  x((x)) --\u003e MatMul --\u003e h((h))\n  W1((W1)) --\u003e MatMul\n  b1((b1)) --\u003e Add --\u003e z((z))\n  h --\u003e Add\n  z --\u003e ReLU --\u003e y((y))\n  y --\u003e MSE --\u003e Loss((Loss))\n```\n\n##### 2. Autograd æ ¸å¿ƒç»„ä»¶\n\n| ç»„ä»¶                   | ä½œç”¨                                     |\n| ---------------------- | ---------------------------------------- |\n| `Tensor.requires_grad` | æ ‡è®°éœ€è¦è·Ÿè¸ªæ¢¯åº¦çš„å¼ é‡                   |\n| `Tensor.grad_fn`       | è®°å½•åˆ›å»ºè¯¥å¼ é‡çš„æ“ä½œï¼ˆå¦‚ `MulBackward`ï¼‰ |\n| `Tensor.grad`          | å­˜å‚¨è®¡ç®—å¾—åˆ°çš„æ¢¯åº¦                       |\n\n##### 3. åå‘ä¼ æ’­è¿‡ç¨‹\n\n```python\nimport torch\n\nx = torch.tensor([2.0], requires_grad=True)\nW = torch.tensor([3.0], requires_grad=True)\ny = W * x\ny.backward()\n\nprint(W.grad)  # è¾“å‡º: tensor([2.])\nprint(x.grad)  # è¾“å‡º: tensor([3.])\n```\n\n---\n\n#### ä¸‰ã€ä¸ºä½•éœ€è¦åå‘ä¼ æ’­ï¼Ÿ\n\n##### 1. æ‰‹åŠ¨è®¡ç®—ä¸å¯è¡Œæ€§\n\nå¯¹äºåŒ…å«ç™¾ä¸‡å‚æ•°çš„ç°ä»£ç¥ç»ç½‘ç»œï¼Œæ‰‹åŠ¨è®¡ç®—æ¢¯åº¦çš„æ—¶é—´å¤æ‚åº¦ä¸º $$ O(n^2) $$ ï¼Œè€Œåå‘ä¼ æ’­åªéœ€ $$ O(n) $$ ã€‚\n\n##### 2. è®¡ç®—æ•ˆç‡å¯¹æ¯”\n\n| æ–¹æ³•                 | æ—¶é—´å¤æ‚åº¦   | ç©ºé—´å¤æ‚åº¦ | æ•°å€¼ç¨³å®šæ€§ |\n| -------------------- | ------------ | ---------- | ---------- |\n| æ•°å€¼å¾®åˆ†             | $$ O(n^2) $$ | $$ O(1) $$ | å·®         |\n| ç¬¦å·å¾®åˆ†             | $$ O(1) $$   | $$ O(n) $$ | å¥½         |\n| è‡ªåŠ¨å¾®åˆ†ï¼ˆåå‘ä¼ æ’­ï¼‰ | $$ O(n) $$   | $$ O(n) $$ | ä¼˜ç§€       |\n\n##### 3. å†…å­˜ä¼˜åŒ–ç­–ç•¥\n\nPyTorch é‡‡ç”¨ä»¥ä¸‹æŠ€æœ¯é™ä½å†…å­˜å ç”¨ï¼š\n\n- **æ¢¯åº¦æ£€æŸ¥ç‚¹**ï¼šåªä¿ç•™å…³é”®èŠ‚ç‚¹çš„ä¸­é—´ç»“æœ\n- **å³æ—¶é‡Šæ”¾ä¸­é—´æ¢¯åº¦**ï¼šé»˜è®¤åªä¿ç•™å¶å­èŠ‚ç‚¹çš„æ¢¯åº¦\n\n---\n\n#### å››ã€åå‘ä¼ æ’­çš„æ•°å­¦æ‰©å±•\n\n##### 1. çŸ©é˜µæ±‚å¯¼ç¤ºä¾‹\n\nå¯¹äºå…¨è¿æ¥å±‚ $$ Y = XW + b $$ ï¼Œæ¢¯åº¦è®¡ç®—ä¸ºï¼š\n\n$$\n\\frac{\\partial \\mathcal{L}}{\\partial W} = X^T \\cdot \\frac{\\partial \\mathcal{L}}{\\partial Y}\n$$\n\n##### 2. å¤æ‚è¿ç®—å¤„ç†\n\n```python\n# PyTorch è‡ªåŠ¨å¤„ç†ä¸å¯å¯¼ç‚¹\nx = torch.tensor([-1.0, 0.0, 2.0], requires_grad=True)\ny = torch.relu(x)\ny.backward(torch.tensor([1.0, 1.0, 1.0]))\nprint(x.grad)  # è¾“å‡º: tensor([0., 0., 1.])\n```\n\n---\n\n#### äº”ã€æ€»ç»“\n\n**åå‘ä¼ æ’­çš„å¿…è¦æ€§**ï¼š\n\n1. **è‡ªåŠ¨å¾®åˆ†**ï¼šé¿å…æ‰‹å·¥æ¨å¯¼å¤æ‚å¯¼æ•°\n2. **è®¡ç®—é«˜æ•ˆ**ï¼šåˆ©ç”¨é“¾å¼æ³•åˆ™çš„åˆ†è§£ç‰¹æ€§\n3. **å†…å­˜ä¼˜åŒ–**ï¼šåŠ¨æ€å›¾çš„å³æ—¶æ„å»ºä¸é”€æ¯\n4. **æ¡†æ¶æ”¯æ’‘**ï¼šæ”¯æŒä»»æ„å¤æ‚ç½‘ç»œç»“æ„\n\nPyTorch é€šè¿‡åŠ¨æ€è®¡ç®—å›¾å’Œ Autograd ç³»ç»Ÿï¼Œå°†åå‘ä¼ æ’­çš„æ•°å­¦åŸç†é«˜æ•ˆå®ç°ï¼Œä½¿å¾—æ·±åº¦å­¦ä¹ æ¨¡å‹çš„è®­ç»ƒå˜å¾—å¯è¡Œä¸”é«˜æ•ˆã€‚ç†è§£è¿™ä¸€æœºåˆ¶å¯¹äºè°ƒè¯•æ¨¡å‹ã€ä¼˜åŒ–å†…å­˜ä½¿ç”¨å’Œå®ç°è‡ªå®šä¹‰ç®—å­è‡³å…³é‡è¦ã€‚\n\n## Q: å‚æ•°çš„æ¢¯åº¦ç´¯åŠ è®¡ç®—å…¬å¼\n\n\u003e [!query]\n\u003e\n\u003e ä½ æåˆ°å¯¹äºä»»æ„å‚æ•° $$ \\theta $$ï¼Œæ¢¯åº¦è®¡ç®—å¯è¡¨ç¤ºä¸ºï¼š\n\u003e\n\u003e $$\n\u003e \\frac{\\partial \\mathcal{L}}{\\partial \\theta} = \\sum_{\\text{path } \\theta \\to \\mathcal{L}} \\left( \\prod_{i} \\frac{\\partial \\text{op}_i}{\\partial \\text{input}_i} \\right)\n\u003e $$\n\u003e\n\u003e è¿™ä¸ªå…¬å¼æˆ‘æ²¡æ‡‚ï¼Œå†æ·±å…¥è§£é‡Šä¸€ä¸‹ã€‚æˆ‘åªæœ‰æœ¬ç§‘ç¨‹åº¦çš„é«˜ç­‰æ•°å­¦çŸ¥è¯†ä¸çº¿æ€§ä»£æ•°çŸ¥è¯†ï¼Œå»ºè®®ä¸€æ­¥ä¸€æ­¥è§£é‡Šæ¨ç†è¿‡ç¨‹ã€‚\n\n\u003e [!reasoning]-\n\u003e\n\u003e å—¯ï¼Œç”¨æˆ·é—®çš„æ˜¯å…³äºåå‘ä¼ æ’­ä¸­æ¢¯åº¦è®¡ç®—çš„å…¬å¼ï¼Œé‚£ä¸ªå…¬å¼çœ‹èµ·æ¥æœ‰ç‚¹å¤æ‚ï¼Œå¯¹å§ï¼Ÿè®©æˆ‘å…ˆä»”ç»†çœ‹çœ‹ç”¨æˆ·çš„é—®é¢˜ã€‚ä»–æåˆ°ï¼Œå¯¹äºä»»æ„å‚æ•° Î¸ï¼Œæ¢¯åº¦è®¡ç®—æ˜¯è·¯å¾„ Î¸ åˆ° L çš„å’Œï¼Œæ¯ä¸ªè·¯å¾„ä¸­çš„å„ä¸ªæ“ä½œçš„å¯¼æ•°ç›¸ä¹˜ã€‚ç”¨æˆ·æœ¬ç§‘æ•°å­¦å’Œçº¿æ€§ä»£æ•°åŸºç¡€ï¼Œå¯èƒ½éœ€è¦æ›´åŸºç¡€çš„è§£é‡Šã€‚\n\u003e\n\u003e é¦–å…ˆï¼Œæˆ‘éœ€è¦ç¡®è®¤ç”¨æˆ·å¯¹è¿™ä¸ªå…¬å¼çš„ç†è§£ç¨‹åº¦ã€‚å…¬å¼é‡Œçš„æ±‚å’Œç¬¦å·å’Œè·¯å¾„å¯èƒ½è®©ä»–å›°æƒ‘ã€‚å¯èƒ½ç”¨æˆ·å¯¹é“¾å¼æ³•åˆ™æœ‰ä¸€å®šçš„äº†è§£ï¼Œä½†è·¯å¾„çš„æ¦‚å¿µä¸å¤ªæ¸…æ¥šã€‚æ¯”å¦‚ï¼Œåœ¨è®¡ç®—å›¾ä¸­ï¼Œå‚æ•° Î¸ åˆ°æŸå¤± L å¯èƒ½æœ‰å¤šä¸ªä¸åŒçš„è·¯å¾„ï¼Œæ¯ä¸ªè·¯å¾„å¯¹åº”ä¸€ä¸ªæ¢¯åº¦è´¡çŒ®ï¼Œæ‰€ä»¥æ¢¯åº¦æ˜¯è¿™äº›è·¯å¾„è´¡çŒ®çš„æ€»å’Œã€‚\n\u003e\n\u003e æ¥ä¸‹æ¥ï¼Œæˆ‘éœ€è¦ç”¨æ›´ç®€å•çš„æ–¹å¼æ¥è§£é‡Šè¿™ä¸ªå…¬å¼ã€‚æˆ–è®¸ç”¨ä¸€ä¸ªå…·ä½“çš„ä¾‹å­æ¥è¯´æ˜ä¼šæ›´å¥½ã€‚æ¯”å¦‚ï¼Œå‡è®¾æœ‰ä¸€ä¸ªç®€å•çš„è®¡ç®—å›¾ï¼Œå…¶ä¸­ Î¸ åˆ†ä¸¤ä¸ªè·¯å¾„å½±å“ Lï¼Œæ¯ä¸ªè·¯å¾„éƒ½éœ€è¦è®¡ç®—å¯¼æ•°çš„ä¹˜ç§¯ï¼Œç„¶åå°†å®ƒä»¬ç›¸åŠ ã€‚\n\u003e\n\u003e ç„¶åï¼Œæˆ‘åº”è¯¥åˆ†æ­¥éª¤è§£é‡Šé“¾å¼æ³•åˆ™ï¼Œä»¥åŠä¸ºä»€ä¹ˆéœ€è¦å°†ä¸åŒè·¯å¾„çš„æ¢¯åº¦ç›¸åŠ ã€‚å¯èƒ½éœ€è¦ç”¨å›¾ç¤ºæ¥è¾…åŠ©ï¼Œæ¯”å¦‚ç”»ä¸€ä¸ªç®€å•çš„è®¡ç®—å›¾ï¼Œå±•ç¤ºå¤šä¸ªåˆ†æ”¯çš„æƒ…å†µï¼Œæ¯ä¸ªåˆ†æ”¯å¯¹åº”ä¸€ä¸ªä¹˜ç§¯é¡¹ï¼Œæœ€åç›¸åŠ å¾—åˆ°æ€»çš„æ¢¯åº¦ã€‚\n\u003e\n\u003e å¦å¤–ï¼Œç”¨æˆ·å¯èƒ½å¯¹â€œè·¯å¾„â€è¿™ä¸ªè¯ä¸å¤ªç†è§£ï¼Œéœ€è¦æ˜ç¡®åœ¨è®¡ç®—å›¾ä¸­çš„è·¯å¾„æŒ‡çš„æ˜¯ä»€ä¹ˆã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå‚æ•°å¯èƒ½åœ¨å¤šä¸ªå±‚ä¸­ä½¿ç”¨ï¼Œæ¯æ¬¡ä½¿ç”¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ªä¸åŒçš„è·¯å¾„åˆ°æŸå¤±å‡½æ•°ï¼Œå› æ­¤æ¯ä¸ªè·¯å¾„çš„æ¢¯åº¦éƒ½éœ€è¦è¢«è®¡ç®—å¹¶ç´¯åŠ ã€‚\n\u003e\n\u003e è¿˜è¦æ³¨æ„ï¼Œç”¨æˆ·å¯èƒ½å¯¹ä¹˜ç§¯çš„éƒ¨åˆ†æœ‰ç–‘é—®ï¼Œä¸ºä»€ä¹ˆæ˜¯å„ä¸ªæ“ä½œçš„å¯¼æ•°ç›¸ä¹˜ã€‚è¿™æ—¶å€™éœ€è¦å›é¡¾é“¾å¼æ³•åˆ™çš„åŸºæœ¬åŸç†ï¼Œå³å¤åˆå‡½æ•°æ±‚å¯¼æ—¶ï¼Œå¤–å±‚å‡½æ•°çš„å¯¼æ•°å’Œå†…å±‚å‡½æ•°çš„å¯¼æ•°ç›¸ä¹˜ï¼Œè€Œå¦‚æœæœ‰å¤šä¸ªä¸­é—´æ­¥éª¤ï¼Œå°±éœ€è¦è¿ä¹˜è¿™äº›å¯¼æ•°ã€‚\n\u003e\n\u003e å¯èƒ½è¿˜éœ€è¦è§£é‡Šä¸ºä»€ä¹ˆä¼šæœ‰å¤šä¸ªè·¯å¾„ï¼Œä¾‹å¦‚åœ¨ç¥ç»ç½‘ç»œä¸­ï¼Œä¸€ä¸ªå‚æ•°å¯èƒ½åœ¨å¤šä¸ªç¥ç»å…ƒä¸­è¢«ä½¿ç”¨ï¼Œæˆ–è€…åœ¨ä¸åŒçš„æ—¶é—´æ­¥ï¼ˆå¦‚ RNN ä¸­ï¼‰ï¼Œå¯¼è‡´æ¢¯åº¦éœ€è¦ä»å„ä¸ªè·¯å¾„åå‘ä¼ æ’­å›æ¥ï¼Œç„¶åç´¯åŠ èµ·æ¥ã€‚\n\u003e\n\u003e æœ€åï¼Œé€šè¿‡ä¸€ä¸ªå…·ä½“çš„æ•°å­¦ä¾‹å­ï¼Œé€æ­¥è®¡ç®—æ¯ä¸ªæ­¥éª¤çš„å¯¼æ•°ï¼Œå¹¶å°†å®ƒä»¬ç›¸ä¹˜ï¼Œæœ€åç›¸åŠ ï¼Œæ¥éªŒè¯è¿™ä¸ªå…¬å¼çš„æ­£ç¡®æ€§ã€‚è¿™æ ·ç”¨æˆ·å¯ä»¥é€šè¿‡å®é™…çš„è®¡ç®—è¿‡ç¨‹ç†è§£æŠ½è±¡çš„å…¬å¼ã€‚\n\u003e\n\u003e æ€»ç»“ä¸€ä¸‹ï¼Œæˆ‘éœ€è¦ç”¨å…·ä½“çš„ä¾‹å­ã€å›¾ç¤ºï¼Œåˆ†æ­¥éª¤è§£é‡Šé“¾å¼æ³•åˆ™åœ¨è®¡ç®—å›¾ä¸­çš„å¤šä¸ªè·¯å¾„ä¸­çš„åº”ç”¨ï¼Œä»¥åŠæ¢¯åº¦ç´¯åŠ çš„åŸå› ï¼Œå¸®åŠ©ç”¨æˆ·ç†è§£è¿™ä¸ªå…¬å¼çš„å«ä¹‰å’Œæ¨å¯¼è¿‡ç¨‹ã€‚\n\nå¥½çš„ï¼æˆ‘å°†ç”¨æœ€ç›´è§‚çš„æ–¹å¼ï¼Œé€šè¿‡ä¸€ä¸ªå…·ä½“ä¾‹å­é€æ­¥è§£é‡Šè¿™ä¸ªå…¬å¼çš„æ•°å­¦åŸç†ã€‚æˆ‘ä»¬ç»“åˆå›¾ç¤ºå’Œåˆ†æ­¥æ¨å¯¼æ¥ç†è§£é“¾å¼æ³•åˆ™åœ¨åå‘ä¼ æ’­ä¸­çš„åº”ç”¨ã€‚\n\n---\n\n### **ä¸€ã€é—®é¢˜åœºæ™¯è®¾å®š**\n\nå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç®€å•çš„è®¡ç®—å›¾ï¼Œå…¶ä¸­å‚æ•° $$\\theta$$ é€šè¿‡ä¸¤æ¡è·¯å¾„å½±å“æœ€ç»ˆæŸå¤± $$L$$ ï¼š\n\n```mermaid\ngraph LR\n    Î¸((Î¸)) --\u003e Op1 --\u003e A\n    Î¸ --\u003e Op2 --\u003e B\n    A --\u003e Op3 --\u003e L\n    B --\u003e Op3 --\u003e L\n```\n\n- **è·¯å¾„ 1**ï¼š$$\\theta \\xrightarrow{\\text{Op1}} A \\xrightarrow{\\text{Op3}} L$$\n- **è·¯å¾„ 2**ï¼š$$\\theta \\xrightarrow{\\text{Op2}} B \\xrightarrow{\\text{Op3}} L$$\n\nç›®æ ‡æ˜¯è®¡ç®— $$\\frac{\\partial L}{\\partial \\theta}$$ã€‚\n\n---\n\n### **äºŒã€åˆ†æ­¥æ¨å¯¼**\n\n#### **æ­¥éª¤ 1ï¼šå‰å‘ä¼ æ’­è¡¨è¾¾å¼**\n\nå‡è®¾å…·ä½“æ“ä½œä¸ºï¼š\n\n- $$A = \\theta^2$$ ï¼ˆOp1ï¼šå¹³æ–¹æ“ä½œï¼‰\n- $$B = 2\\theta$$ ï¼ˆOp2ï¼šçº¿æ€§æ“ä½œï¼‰\n- $$L = A + B$$ ï¼ˆOp3ï¼šåŠ æ³•æ“ä½œï¼‰\n\nåˆ™æœ€ç»ˆæŸå¤±ä¸ºï¼š\n\n$$\nL = \\theta^2 + 2\\theta\n$$\n\n#### **æ­¥éª¤ 2ï¼šç›´æ¥æ±‚å¯¼ï¼ˆå¯¹æ¯”éªŒè¯ï¼‰**\n\nç›´æ¥å¯¹ $$L$$ æ±‚å¯¼ï¼š\n\n$$\n\\frac{\\partial L}{\\partial \\theta} = 2\\theta + 2\n$$\n\n---\n\n#### **æ­¥éª¤ 3ï¼šåå‘ä¼ æ’­è§†è§’**\n\næ ¹æ®è®¡ç®—å›¾ï¼Œæ¢¯åº¦éœ€è¦æ²¿ç€ä¸¤æ¡è·¯å¾„åå‘ä¼ æ’­ï¼š\n\n##### **è·¯å¾„ 1 çš„æ¢¯åº¦è®¡ç®—ï¼ˆÎ¸ â†’ A â†’ Lï¼‰**\n\n1. $$A = \\theta^2 \\quad \\Rightarrow \\quad \\frac{\\partial A}{\\partial \\theta} = 2\\theta$$\n2. $$L = A + B \\quad \\Rightarrow \\quad \\frac{\\partial L}{\\partial A} = 1$$\n3. è·¯å¾„ 1 çš„æ¢¯åº¦è´¡çŒ®ï¼š\n   $$\n   \\frac{\\partial L}{\\partial \\theta} \\bigg|_{\\text{è·¯å¾„1}} = \\frac{\\partial L}{\\partial A} \\cdot \\frac{\\partial A}{\\partial \\theta} = 1 \\cdot 2\\theta = 2\\theta\n   $$\n\n##### **è·¯å¾„ 2 çš„æ¢¯åº¦è®¡ç®—ï¼ˆÎ¸ â†’ B â†’ Lï¼‰**\n\n1. $$B = 2\\theta \\quad \\Rightarrow \\quad \\frac{\\partial B}{\\partial \\theta} = 2$$\n2. $$L = A + B \\quad \\Rightarrow \\quad \\frac{\\partial L}{\\partial B} = 1$$\n3. è·¯å¾„ 2 çš„æ¢¯åº¦è´¡çŒ®ï¼š\n   $$\n   \\frac{\\partial L}{\\partial \\theta} \\bigg|_{\\text{è·¯å¾„2}} = \\frac{\\partial L}{\\partial B} \\cdot \\frac{\\partial B}{\\partial \\theta} = 1 \\cdot 2 = 2\n   $$\n\n##### **æ€»æ¢¯åº¦ = è·¯å¾„ 1 + è·¯å¾„ 2**\n\n$$\n\\frac{\\partial L}{\\partial \\theta} = 2\\theta + 2\n$$\n\n---\n\n### **ä¸‰ã€é€šç”¨å…¬å¼è§£æ**\n\nåŸå…¬å¼ï¼š\n\n$$\n\\frac{\\partial \\mathcal{L}}{\\partial \\theta} = \\sum_{\\text{path } \\theta \\to \\mathcal{L}} \\left( \\prod_{i} \\frac{\\partial \\text{op}_i}{\\partial \\text{input}_i} \\right)\n$$\n\n#### **1. ç¬¦å·è§£é‡Š**\n\n- **è·¯å¾„ï¼ˆPathï¼‰**ï¼šå‚æ•° $$\\theta$$ åˆ°æŸå¤± $$\\mathcal{L}$$ çš„æ‰€æœ‰å¯èƒ½æ•°æ®æµåŠ¨è·¯å¾„ã€‚\n- **ä¹˜ç§¯é¡¹ $$\\prod$$**ï¼šæ²¿æŸæ¡è·¯å¾„çš„æ‰€æœ‰æ“ä½œï¼ˆopï¼‰çš„å¯¼æ•°è¿ä¹˜ï¼ˆé“¾å¼æ³•åˆ™ï¼‰ã€‚\n- **æ±‚å’Œé¡¹ $$\\sum$$**ï¼šå°†æ‰€æœ‰è·¯å¾„çš„æ¢¯åº¦è´¡çŒ®ç›¸åŠ ï¼ˆå¤šè·¯å¾„æ—¶æ¢¯åº¦ç´¯åŠ ï¼‰ã€‚\n\n#### **2. å…³é”®æ€§è´¨**\n\n- **é“¾å¼æ³•åˆ™**ï¼šå¤åˆå‡½æ•°çš„å¯¼æ•° = å¤–å±‚å¯¼æ•° Ã— å†…å±‚å¯¼æ•°ã€‚\n- **å¤šè·¯å¾„å åŠ **ï¼šå¦‚æœå‚æ•°å½±å“è¾“å‡ºçš„å¤šä¸ªåˆ†æ”¯ï¼Œæ¢¯åº¦æ˜¯å„åˆ†æ”¯è´¡çŒ®çš„æ€»å’Œã€‚\n\n---\n\n### **å››ã€å¤æ‚æ¡ˆä¾‹éªŒè¯**\n\nè€ƒè™‘ä¸€ä¸ªæ›´å¤æ‚çš„è®¡ç®—å›¾ï¼š\n\n```mermaid\ngraph LR\n    Î¸((Î¸)) --\u003e Op1 --\u003e C\n    Î¸ --\u003e Op2 --\u003e D\n    C --\u003e Op3 --\u003e E\n    D --\u003e Op4 --\u003e E\n    E --\u003e Op5 --\u003e L\n```\n\n#### **å‰å‘ä¼ æ’­è¡¨è¾¾å¼**\n\n- $$C = \\theta^3$$ï¼ˆOp1ï¼‰\n- $$D = \\sin(\\theta)$$ï¼ˆOp2ï¼‰\n- $$E = C \\cdot D$$ï¼ˆOp3ï¼‰\n- $$L = \\ln(E)$$ï¼ˆOp4ï¼‰\n\n#### **åå‘ä¼ æ’­è®¡ç®—**\n\n##### **è·¯å¾„ 1ï¼šÎ¸ â†’ C â†’ E â†’ L**\n\n$$\n\\frac{\\partial L}{\\partial \\theta} \\bigg|_{\\text{è·¯å¾„1}} = \\frac{\\partial L}{\\partial E} \\cdot \\frac{\\partial E}{\\partial C} \\cdot \\frac{\\partial C}{\\partial \\theta} = \\frac{1}{E} \\cdot D \\cdot 3\\theta^2\n$$\n\n##### **è·¯å¾„ 2ï¼šÎ¸ â†’ D â†’ E â†’ L**\n\n$$\n\\frac{\\partial L}{\\partial \\theta} \\bigg|_{\\text{è·¯å¾„2}} = \\frac{\\partial L}{\\partial E} \\cdot \\frac{\\partial E}{\\partial D} \\cdot \\frac{\\partial D}{\\partial \\theta} = \\frac{1}{E} \\cdot C \\cdot \\cos(\\theta)\n$$\n\n##### **æ€»æ¢¯åº¦**\n\n$$\n\\frac{\\partial L}{\\partial \\theta} = \\frac{D \\cdot 3\\theta^2 + C \\cdot \\cos(\\theta)}{E}\n$$\n\n---\n\n### **äº”ã€åå‘ä¼ æ’­çš„æœ¬è´¨**\n\n1. **è‡ªåŠ¨åŒ–çš„é“¾å¼æ³•åˆ™**ï¼šæ¡†æ¶é€šè¿‡è®¡ç®—å›¾è‡ªåŠ¨è¿½è¸ªæ“ä½œè·¯å¾„ã€‚\n2. **æ¢¯åº¦ç´¯åŠ è§„åˆ™**ï¼šå½“ä¸€ä¸ªå‚æ•°å½±å“å¤šä¸ªåˆ†æ”¯æ—¶ï¼Œæ¢¯åº¦æ˜¯æ‰€æœ‰è·¯å¾„è´¡çŒ®çš„æ€»å’Œã€‚\n3. **è®¡ç®—æ•ˆç‡**ï¼šé¿å…é‡å¤è®¡ç®—ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ç½‘ç»œæ·±åº¦æˆçº¿æ€§å…³ç³»ï¼ˆ$$O(n)$$ï¼‰ã€‚\n\n---\n\n### **å…­ã€æ€»ç»“**\n\n- **ä¸ºä»€ä¹ˆéœ€è¦æ±‚å’Œï¼ˆ$$\\sum$$ï¼‰**ï¼šå› ä¸ºå‚æ•°å¯èƒ½é€šè¿‡å¤šä¸ªè·¯å¾„å½±å“æŸå¤±ï¼Œæ¯ä¸ªè·¯å¾„è´¡çŒ®ä¸€éƒ¨åˆ†æ¢¯åº¦ã€‚\n- **ä¸ºä»€ä¹ˆéœ€è¦è¿ä¹˜ï¼ˆ$$\\prod$$ï¼‰**ï¼šé“¾å¼æ³•åˆ™è¦æ±‚å°†è·¯å¾„ä¸Šçš„æ‰€æœ‰å±€éƒ¨å¯¼æ•°ç›¸ä¹˜ã€‚\n- **åå‘ä¼ æ’­çš„ä¼˜åŠ¿**ï¼šå°†å¤æ‚çš„å…¨å±€æ±‚å¯¼åˆ†è§£ä¸ºå±€éƒ¨å¯¼æ•°çš„è¿ä¹˜ä¸è·¯å¾„æ±‚å’Œï¼Œå¤§å¹…é™ä½è®¡ç®—å¤æ‚åº¦ã€‚\n\né€šè¿‡è¿™ç§åˆ†è·¯å¾„è®¡ç®—å†ç´¯åŠ çš„æ–¹å¼ï¼Œåå‘ä¼ æ’­å·§å¦™åœ°åˆ©ç”¨è®¡ç®—å›¾çš„ç»“æ„ä¿¡æ¯ï¼Œå®ç°äº†é«˜æ•ˆçš„æ¢¯åº¦è®¡ç®—ã€‚\n\n## Q: ä» PyTorch ä»£ç å±‚é¢æ·±å…¥è§£é‡Šä¸€ä¸‹ PyTorch çš„åå‘ä¼ æ’­å¦‚ä½•å®ç°\n\n\u003e [!query]\n\u003e\n\u003e ä» PyTorch ä»£ç å±‚é¢æ·±å…¥è§£é‡Šä¸€ä¸‹ PyTorch çš„åå‘ä¼ æ’­å¦‚ä½•å®ç°\n\n\u003e [!reasoning]-\n\u003e\n\u003e å—¯ï¼Œç”¨æˆ·ä¹‹å‰å·²ç»äº†è§£äº†åå‘ä¼ æ’­çš„æ•°å­¦åŸç†å’Œä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Œç°åœ¨ä»–ä»¬æƒ³ä» PyTorch ä»£ç å±‚é¢æ·±å…¥ç†è§£åå‘ä¼ æ’­çš„å®ç°ã€‚ç”¨æˆ·å¯èƒ½æœ‰ä¸€å®šçš„ç¼–ç¨‹åŸºç¡€ï¼Œä½†å¯èƒ½å¯¹ PyTorch çš„å†…éƒ¨æœºåˆ¶ä¸å¤ªç†Ÿæ‚‰ã€‚æˆ‘éœ€è¦ç¡®ä¿è§£é‡Šæ¸…æ™°ï¼Œç»“åˆä»£ç ç¤ºä¾‹ï¼ŒåŒæ—¶é¿å…è¿‡äºå¤æ‚çš„æœ¯è¯­ã€‚\n\u003e\n\u003e é¦–å…ˆï¼Œç”¨æˆ·æåˆ°äº†ä¹‹å‰çš„å…¬å¼ï¼Œå…³äºæ¢¯åº¦çš„è·¯å¾„æ±‚å’Œï¼Œç°åœ¨éœ€è¦å°†è¿™ä¸€æ•°å­¦æ¦‚å¿µä¸ PyTorch çš„å…·ä½“å®ç°è”ç³»èµ·æ¥ã€‚ä»–ä»¬å¯èƒ½æƒ³çŸ¥é“ PyTorch æ˜¯å¦‚ä½•åŠ¨æ€æ„å»ºè®¡ç®—å›¾çš„ï¼Œå¦‚ä½•è·Ÿè¸ªæ¢¯åº¦ï¼Œä»¥åŠ backward()æ–¹æ³•å…·ä½“åšäº†ä»€ä¹ˆã€‚\n\u003e\n\u003e æ¥ä¸‹æ¥ï¼Œæˆ‘åº”è¯¥åˆ†æ­¥éª¤è§£é‡Š PyTorch çš„å…³é”®ç»„ä»¶ï¼Œæ¯”å¦‚ Tensor çš„ requires_grad å±æ€§ã€grad_fnã€grad å±æ€§ï¼Œä»¥åŠåŠ¨æ€è®¡ç®—å›¾çš„æ„å»ºè¿‡ç¨‹ã€‚éœ€è¦ä¸¾ä¾‹è¯´æ˜ï¼Œæ¯”å¦‚ä¸€ä¸ªç®€å•çš„è®¡ç®—å›¾ï¼Œå¹¶å±•ç¤ºæ¢¯åº¦æ˜¯å¦‚ä½•ç´¯ç§¯çš„ã€‚åŒæ—¶ï¼Œç”¨æˆ·å¯èƒ½å¯¹æ¢¯åº¦ç´¯ç§¯å’Œå†…å­˜ç®¡ç†æ„Ÿå…´è¶£ï¼Œæ¯”å¦‚ PyTorch å¦‚ä½•é‡Šæ”¾ä¸­é—´å˜é‡ï¼Œå¦‚ä½•é€šè¿‡ retain_grad()æ¥ä¿ç•™æ¢¯åº¦ã€‚\n\u003e\n\u003e å¦å¤–ï¼Œç”¨æˆ·å¯èƒ½å¯¹å¤šè·¯å¾„æ¢¯åº¦ç´¯åŠ çš„æƒ…å†µæœ‰ç–‘é—®ï¼Œæ¯”å¦‚å½“å¤šä¸ªæ“ä½œå½±å“åŒä¸€ä¸ªå‚æ•°æ—¶ï¼Œæ¢¯åº¦æ˜¯å¦‚ä½•ç›¸åŠ çš„ã€‚è¿™æ—¶å€™éœ€è¦ä¸¾ä¾‹è¯´æ˜ï¼Œæ¯”å¦‚ä¸€ä¸ªå‚æ•°é€šè¿‡ä¸¤æ¡è·¯å¾„å½±å“æŸå¤±å‡½æ•°ï¼ŒPyTorch å¦‚ä½•å¤„ç†è¿™ç§æƒ…å†µã€‚\n\u003e\n\u003e è¿˜éœ€è¦æåˆ° Autograd å¼•æ“çš„å·¥ä½œåŸç†ï¼Œæ¯”å¦‚å¦‚ä½•éå†è®¡ç®—å›¾ï¼Œæ‰§è¡Œåå‘ä¼ æ’­ï¼Œä»¥åŠå¦‚ä½•ä¼˜åŒ–è®¡ç®—æ•ˆç‡ã€‚å¯èƒ½è¿˜éœ€è¦è®¨è®ºä¸€äº›é«˜çº§è¯é¢˜ï¼Œæ¯”å¦‚ detach()çš„ä½œç”¨ï¼Œæˆ–è€…å¦‚ä½•è‡ªå®šä¹‰åå‘ä¼ æ’­å‡½æ•°ï¼Œä½†æ ¹æ®ç”¨æˆ·çš„çŸ¥è¯†æ°´å¹³ï¼Œå¯èƒ½éœ€è¦ä¿æŒåŸºç¡€ã€‚\n\u003e\n\u003e ç”¨æˆ·å¯èƒ½å­˜åœ¨çš„è¯¯åŒºæ˜¯è®¤ä¸º PyTorch ä¼šä¿å­˜æ‰€æœ‰ä¸­é—´å˜é‡çš„æ¢¯åº¦ï¼Œä½†å®é™…ä¸Šé»˜è®¤åªä¿ç•™å¶å­èŠ‚ç‚¹çš„æ¢¯åº¦ã€‚è¿™éœ€è¦ç‰¹åˆ«è¯´æ˜ï¼Œå¹¶è§£é‡Šå¦‚ä½•é€šè¿‡ retain_grad()æ¥æŸ¥çœ‹ä¸­é—´èŠ‚ç‚¹çš„æ¢¯åº¦ã€‚\n\u003e\n\u003e æœ€åï¼Œåº”è¯¥æ€»ç»“ PyTorch åå‘ä¼ æ’­çš„å…³é”®ç‚¹ï¼Œå¼ºè°ƒå…¶åŠ¨æ€è®¡ç®—å›¾çš„ä¼˜åŠ¿ï¼Œä»¥åŠå¦‚ä½•é«˜æ•ˆç®¡ç†å†…å­˜å’Œè®¡ç®—èµ„æºã€‚ç¡®ä¿ç”¨æˆ·ç†è§£ä¸ºä»€ä¹ˆ PyTorch é€‚åˆåŠ¨æ€å›¾æ¨¡å‹ï¼Œä»¥åŠåœ¨å®é™…è°ƒè¯•ä¸­å¦‚ä½•åˆ©ç”¨è¿™äº›æœºåˆ¶ã€‚\n\nä»¥ä¸‹æ˜¯å…³äº PyTorch åå‘ä¼ æ’­å®ç°æœºåˆ¶çš„ä»£ç çº§æ·±å…¥è§£æï¼Œç»“åˆå…³é”®ä»£ç æ®µå’Œåº•å±‚åŸç†è¯´æ˜ï¼š\n\n---\n\n### **ä¸€ã€PyTorch åå‘ä¼ æ’­çš„ä¸‰å¤§æ ¸å¿ƒç»„ä»¶**\n\n#### **1. Tensor çš„æ¢¯åº¦è¿½è¸ªæœºåˆ¶**\n\n```python\nimport torch\n\n# åˆ›å»ºéœ€è¦æ¢¯åº¦è¿½è¸ªçš„å¼ é‡\nx = torch.tensor([2.0], requires_grad=True)  # å¶å­èŠ‚ç‚¹\nW = torch.tensor([3.0], requires_grad=True)  # å¶å­èŠ‚ç‚¹\n\n# æ‰§è¡Œè®¡ç®—ï¼ˆè‡ªåŠ¨è®°å½•æ“ä½œï¼‰\ny = W * x           # grad_fn=\u003cMulBackward0\u003e\nz = y + 1           # grad_fn=\u003cAddBackward0\u003e\nloss = z.mean()      # grad_fn=\u003cMeanBackward0\u003e\n\nprint(loss.grad_fn)  # è¾“å‡º: \u003cMeanBackward0 object\u003e\n```\n\n- **`requires_grad=True`**ï¼šæ ‡è®°éœ€è¦è¿½è¸ªæ¢¯åº¦çš„å¼ é‡ï¼ˆå¶å­èŠ‚ç‚¹ï¼‰\n- **`grad_fn`**ï¼šè®°å½•åˆ›å»ºè¯¥å¼ é‡çš„æ“ä½œï¼ˆåå‘ä¼ æ’­æ—¶çŸ¥é“å¦‚ä½•è®¡ç®—æ¢¯åº¦ï¼‰\n\n#### **2. è®¡ç®—å›¾çš„åŠ¨æ€æ„å»º**\n\nPyTorch çš„è®¡ç®—å›¾æ˜¯**åŠ¨æ€æ„å»ºçš„**ï¼Œæ¯æ¬¡å‰å‘ä¼ æ’­éƒ½ä¼šæ–°å»ºä¸€ä¸ªå›¾ï¼š\n\n```python\n# ç¤ºä¾‹ï¼šåŠ¨æ€å›¾ç‰¹æ€§\ndef forward(x):\n    if x.sum() \u003e 0:\n        return x * 2\n    else:\n        return x * (-1)\n\nx = torch.tensor([3.0], requires_grad=True)\nout = forward(x)  # æ ¹æ®è¾“å…¥å€¼åŠ¨æ€åˆ›å»ºä¸åŒçš„è®¡ç®—å›¾\nout.backward()    # è‡ªåŠ¨é€‚åº”ä¸åŒçš„åˆ†æ”¯è·¯å¾„\n```\n\n#### **3. åå‘ä¼ æ’­å¼•æ“ï¼ˆAutograd Engineï¼‰**\n\nå½“è°ƒç”¨ `.backward()` æ—¶ï¼ŒPyTorch ä¼šæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š\n\n```python\nloss.backward()  # è§¦å‘åå‘ä¼ æ’­\n```\n\n- **åå‘éå†è®¡ç®—å›¾**ï¼šä» `loss` çš„ `grad_fn` å¼€å§‹ï¼Œæ²¿ç€ `next_functions` é€’å½’\n- **è®¡ç®—å±€éƒ¨æ¢¯åº¦**ï¼šåœ¨æ¯ä¸ªæ“ä½œèŠ‚ç‚¹è°ƒç”¨å·²æ³¨å†Œçš„ `backward()` æ–¹æ³•\n- **æ¢¯åº¦ç´¯åŠ **ï¼šå°†è®¡ç®—ç»“æœç´¯ç§¯åˆ°å¯¹åº”å¼ é‡çš„ `.grad` å±æ€§ä¸­\n\n---\n\n### **äºŒã€ä»£ç çº§åå‘ä¼ æ’­æµç¨‹åˆ†è§£**\n\n#### **æ­¥éª¤ 1ï¼šå‰å‘ä¼ æ’­æ„å»ºè®¡ç®—å›¾**\n\n```python\na = torch.tensor(2.0, requires_grad=True)\nb = torch.tensor(3.0, requires_grad=True)\nc = a * b      # grad_fn=\u003cMulBackward0\u003e\nd = c + 1      # grad_fn=\u003cAddBackward0\u003e\nloss = d**2    # grad_fn=\u003cPowBackward0\u003e\n```\n\næ­¤æ—¶çš„è®¡ç®—å›¾ç»“æ„ï¼š\n\n```mermaid\ngraph LR\n  a --\u003e Mul --\u003e c\n  b --\u003e Mul\n  c --\u003e Add --\u003e d\n  d --\u003e Pow --\u003e loss\n```\n\n#### **æ­¥éª¤ 2ï¼šæ‰§è¡Œåå‘ä¼ æ’­**\n\n```python\nloss.backward()  # è§¦å‘åå‘ä¼ æ’­\n```\n\n##### **åº•å±‚æ“ä½œåˆ†è§£**ï¼š\n\n1. **åˆå§‹åŒ–æ¢¯åº¦**ï¼šè®¾ç½® `loss.grad = 1.0`ï¼ˆæ ‡é‡æŸå¤±çš„é»˜è®¤æ¢¯åº¦ï¼‰\n2. **åå‘ä¼ æ’­åˆ° d**ï¼š\n   - è°ƒç”¨ `PowBackward0` çš„ `backward()` æ–¹æ³•ï¼š\n     ```python\n     d_grad = 2 * d  # å¯¼æ•°å…¬å¼ï¼šd(loss)/d(d) = 2d\n     ```\n3. **åå‘ä¼ æ’­åˆ° c**ï¼š\n   - è°ƒç”¨ `AddBackward0` çš„ `backward()` æ–¹æ³•ï¼š\n     ```python\n     c_grad = d_grad * 1  # åŠ æ³•æ“ä½œçš„å¯¼æ•°ä¸º1\n     ```\n4. **åå‘ä¼ æ’­åˆ° a å’Œ b**ï¼š\n   - è°ƒç”¨ `MulBackward0` çš„ `backward()` æ–¹æ³•ï¼š\n     ```python\n     a_grad = c_grad * b  # å¯¼æ•°å…¬å¼ï¼šd(c)/d(a) = b\n     b_grad = c_grad * a  # å¯¼æ•°å…¬å¼ï¼šd(c)/d(b) = a\n     ```\n5. **æ¢¯åº¦ç´¯åŠ **ï¼š\n   ```python\n   a.grad += a_grad  # å®é™…ä¸º in-place æ“ä½œ\n   b.grad += b_grad\n   ```\n\n#### **æ­¥éª¤ 3ï¼šæŸ¥çœ‹ç»“æœ**\n\n```python\nprint(a.grad)  # è¾“å‡º: 2*d* b = 2*(2*3+1)*3 = 42\nprint(b.grad)  # è¾“å‡º: 2*d* a = 2*(2*3+1)*2 = 28\n```\n\n---\n\n### **ä¸‰ã€PyTorch åå‘ä¼ æ’­çš„å…³é”®å®ç°ç»†èŠ‚**\n\n#### **1. æ¢¯åº¦è®¡ç®—è§„åˆ™æ³¨å†Œ**\n\næ¯ä¸ª `torch` æ“ä½œéƒ½æœ‰é¢„å®šä¹‰çš„æ¢¯åº¦è®¡ç®—è§„åˆ™ï¼š\n\n```python\n# ç¤ºä¾‹ï¼šè‡ªå®šä¹‰æ“ä½œçš„æ¢¯åº¦è§„åˆ™\nclass MyAdd(torch.autograd.Function):\n    @staticmethod\n    def forward(ctx, x, y):\n        ctx.save_for_backward(x, y)  # ä¿å­˜å‰å‘ä¼ æ’­çš„è¾“å…¥\n        return x + y\n\n    @staticmethod\n    def backward(ctx, grad_output):\n        x, y = ctx.saved_tensors\n        return grad_output * 1, grad_output * 1  # åŠ æ³•æ“ä½œçš„å¯¼æ•°\n\n# ä½¿ç”¨è‡ªå®šä¹‰æ“ä½œ\na = torch.tensor(2.0, requires_grad=True)\nb = torch.tensor(3.0, requires_grad=True)\nc = MyAdd.apply(a, b)\nc.backward()\n```\n\n#### **2. æ¢¯åº¦ç´¯åŠ æœºåˆ¶**\n\nPyTorch é»˜è®¤ä¼š**ç´¯åŠ æ¢¯åº¦**ï¼Œå› æ­¤æ¯æ¬¡åå‘ä¼ æ’­å‰éœ€è¦æ‰‹åŠ¨æ¸…é›¶ï¼š\n\n```python\noptimizer.zero_grad()  # æ ‡å‡†è®­ç»ƒå¾ªç¯ä¸­çš„å¿…è¦æ“ä½œ\nloss.backward()        # æ¢¯åº¦ä¼šç´¯åŠ åˆ° .grad å±æ€§ä¸­\noptimizer.step()\n```\n\n#### **3. éæ ‡é‡å¼ é‡çš„åå‘ä¼ æ’­**\n\nå½“è¾“å‡ºä¸ºéæ ‡é‡æ—¶ï¼Œéœ€è¦æä¾› `gradient` å‚æ•°ï¼š\n\n```python\nx = torch.tensor([1.0, 2.0], requires_grad=True)\ny = x * 2\n\n# å‡è®¾ y æ˜¯å‘é‡ï¼Œéœ€è¦æä¾›æ¢¯åº¦åˆå§‹å€¼\ny.backward(gradient=torch.tensor([0.1, 0.2]))\nprint(x.grad)  # è¾“å‡º: tensor([0.2, 0.4])\n```\n\n#### **4. å†…å­˜ä¼˜åŒ–ç­–ç•¥**\n\n- **ä¸­é—´å˜é‡é‡Šæ”¾**ï¼šé»˜è®¤åªä¿ç•™å¶å­èŠ‚ç‚¹çš„æ¢¯åº¦\n- **æ¢¯åº¦æ£€æŸ¥ç‚¹**ï¼šé€šè¿‡ `torch.utils.checkpoint` å‡å°‘å†…å­˜å ç”¨\n- **ç¦ç”¨æ¢¯åº¦è®¡ç®—**ï¼šä½¿ç”¨ `with torch.no_grad():` æˆ– `@torch.inference_mode()`\n\n---\n\n### **å››ã€å¯è§†åŒ–åå‘ä¼ æ’­è¿‡ç¨‹**\n\n#### **ç¤ºä¾‹ä»£ç **\n\n```python\nimport torchviz\n\na = torch.tensor(3.0, requires_grad=True)\nb = torch.tensor(4.0, requires_grad=True)\nc = a * b\nd = c.sin()\nd.backward()\n\n# ç”Ÿæˆè®¡ç®—å›¾å¯è§†åŒ–\ntorchviz.make_dot(d, params={'a':a, 'b':b}).render(\"graph\")\n```\n\n#### **ç”Ÿæˆçš„è®¡ç®—å›¾ç»“æ„**\n\n```mermaid\ngraph LR\n  a((a)) --\u003e Mul --\u003e c\n  b((b)) --\u003e Mul\n  c --\u003e Sin --\u003e d((d))\n  d --\u003e Backward\n```\n\n---\n\n### **äº”ã€PyTorch åå‘ä¼ æ’­çš„æ€§èƒ½ä¼˜åŒ–**\n\n#### **1. å¼‚æ­¥æ‰§è¡Œ**\n\n```python\n# ä½¿ç”¨ CUDA æµå®ç°å¼‚æ­¥è®¡ç®—\nwith torch.cuda.stream(torch.cuda.Stream()):\n    loss.backward()  # åœ¨éé»˜è®¤æµä¸­æ‰§è¡Œåå‘ä¼ æ’­\n```\n\n#### **2. æ··åˆç²¾åº¦è®­ç»ƒ**\n\n```python\nscaler = torch.cuda.amp.GradScaler()\n\nwith torch.cuda.amp.autocast():\n    output = model(input)\n    loss = loss_fn(output, target)\n\nscaler.scale(loss).backward()  # è‡ªåŠ¨ç¼©æ”¾æ¢¯åº¦\nscaler.step(optimizer)\nscaler.update()\n```\n\n#### **3. æ¢¯åº¦è£å‰ª**\n\n```python\ntorch.nn.utils.clip_grad_norm_(model.parameters(), max_norm=1.0)\n```\n\n---\n\n### **å…­ã€è°ƒè¯•æŠ€å·§**\n\n#### **1. æ£€æŸ¥æ¢¯åº¦æ˜¯å¦å­˜åœ¨**\n\n```python\nprint([p.requires_grad for p in model.parameters()])  # æ£€æŸ¥å‚æ•°æ˜¯å¦å¯ç”¨æ¢¯åº¦\n```\n\n#### **2. æ¢¯åº¦æ•°å€¼æ£€æŸ¥**\n\n```python\nfor name, param in model.named_parameters():\n    if param.grad is not None:\n        print(f\"{name} æ¢¯åº¦å‡å€¼: {param.grad.mean().item()}\")\n```\n\n#### **3. ä¿ç•™ä¸­é—´æ¢¯åº¦**\n\n```python\ny = x * 2\ny.retain_grad()  # å¼ºåˆ¶ä¿ç•™ä¸­é—´å˜é‡çš„æ¢¯åº¦\ny.backward()\nprint(y.grad)    # å¯ä»¥æŸ¥çœ‹ä¸­é—´æ¢¯åº¦\n```\n\n---\n\n### **ä¸ƒã€åº•å±‚å®ç°åŸç†**\n\n#### **1. C++ æ ¸å¿ƒå¼•æ“**\n\nPyTorch çš„åå‘ä¼ æ’­å¼•æ“ä¸»è¦ç”±ä»¥ä¸‹ C++ ç»„ä»¶æ„æˆï¼š\n\n- **`torch::autograd::Engine`**ï¼šç®¡ç†åå‘ä¼ æ’­ä»»åŠ¡çš„æ‰§è¡Œ\n- **`torch::autograd::Node`**ï¼šè¡¨ç¤ºè®¡ç®—å›¾ä¸­çš„æ“ä½œèŠ‚ç‚¹\n- **`torch::autograd::Edge`**ï¼šè¡¨ç¤ºèŠ‚ç‚¹ä¹‹é—´çš„è¿æ¥å…³ç³»\n\n#### **2. åå‘ä¼ æ’­ä»»åŠ¡è°ƒåº¦**\n\n```cpp\n// ä¼ªä»£ç ï¼šå¼•æ“æ‰§è¡Œæµç¨‹\nvoid Engine::execute(const EdgeList\u0026 roots) {\n    // 1. æ„å»ºä»»åŠ¡é˜Ÿåˆ—\n    // 2. ä½¿ç”¨çº¿ç¨‹æ± å¹¶è¡Œæ‰§è¡Œåå‘ä»»åŠ¡\n    // 3. å¤„ç†ä¾èµ–å…³ç³»ï¼ˆæ‹“æ‰‘æ’åºï¼‰\n    // 4. è°ƒç”¨æ¯ä¸ª Node çš„ apply() æ–¹æ³•\n}\n```\n\n---\n\n### **å…«ã€æ€»ç»“ï¼šPyTorch åå‘ä¼ æ’­çš„è®¾è®¡å“²å­¦**\n\n1. **åŠ¨æ€è®¡ç®—å›¾**ï¼šå³æ—¶æ„å»ºã€å³æ—¶é”€æ¯ï¼Œçµæ´»é€‚åº”å¯å˜ç½‘ç»œç»“æ„\n2. **å»¶è¿Ÿè®¡ç®—**ï¼šåªåœ¨éœ€è¦æ—¶æ‰§è¡Œæ¢¯åº¦è®¡ç®—ï¼Œä¼˜åŒ–å†…å­˜ä½¿ç”¨\n3. **åˆ†ç¦»å¼è®¾è®¡**ï¼šå‰å‘ä¼ æ’­è®°å½•æ“ä½œï¼Œåå‘ä¼ æ’­æ—¶æ‰§è¡Œå®é™…è®¡ç®—\n4. **å¯æ‰©å±•æ€§**ï¼šé€šè¿‡æ³¨å†Œè‡ªå®šä¹‰ Function æ”¯æŒä»»æ„å¤æ‚æ“ä½œ\n\nç†è§£è¿™äº›åº•å±‚æœºåˆ¶ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…ï¼š\n\n- æ›´é«˜æ•ˆåœ°è°ƒè¯•æ¢¯åº¦ç›¸å…³é—®é¢˜\n- åˆç†æ§åˆ¶å†…å­˜ä½¿ç”¨ï¼ˆå¦‚ä½¿ç”¨ `detach()` æˆªæ–­è®¡ç®—å›¾ï¼‰\n- å®ç°è‡ªå®šä¹‰ç¥ç»ç½‘ç»œå±‚å’ŒæŸå¤±å‡½æ•°\n- ä¼˜åŒ–è®­ç»ƒè¿‡ç¨‹çš„æ€§èƒ½\n\n## Q: æ·±å…¥è®²è§£å‡ ç§å¾®åˆ†æ–¹æ³•çš„å¤æ‚åº¦ä¸æ•°å€¼ç¨³å®šæ€§\n\n\u003e [!query]\n\u003e\n\u003e ä½ ä¹‹å‰æåˆ°æ•°å€¼å¾®åˆ†ã€ç¬¦å·å¾®åˆ†ã€è‡ªåŠ¨å¾®åˆ†çš„æ—¶é—´ç©ºé—´å¤æ‚åº¦ä»¥åŠæ•°å€¼ç¨³å®šæ€§çš„å¯¹æ¯”ã€‚è¿™äº›å¤æ‚åº¦æ˜¯å¦‚ä½•è®¡ç®—å‡ºçš„ç»“æœï¼Ÿæ•°å€¼ç¨³å®šæ€§åˆå¦‚ä½•è¯„ä¼°ï¼Ÿ\n\n\u003e [!reasoning]-\n\u003e\n\u003e å¥½çš„ï¼Œæˆ‘ç°åœ¨éœ€è¦ä»”ç»†ç†è§£ç”¨æˆ·çš„é—®é¢˜ã€‚ç”¨æˆ·ä¹‹å‰è¯¢é—®äº† PyTorch çš„åå‘ä¼ æ’­æœºåˆ¶ï¼Œç°åœ¨é’ˆå¯¹æ•°å€¼å¾®åˆ†ã€ç¬¦å·å¾®åˆ†å’Œè‡ªåŠ¨å¾®åˆ†çš„æ—¶é—´ç©ºé—´å¤æ‚åº¦ä»¥åŠæ•°å€¼ç¨³å®šæ€§å¯¹æ¯”æå‡ºç–‘é—®ï¼Œæƒ³çŸ¥é“è¿™äº›å¤æ‚åº¦æ˜¯å¦‚ä½•è®¡ç®—çš„ï¼Œä»¥åŠæ•°å€¼ç¨³å®šæ€§å¦‚ä½•è¯„ä¼°ã€‚ç”¨æˆ·å¯èƒ½åœ¨å­¦ä¹ è¿™äº›å¾®åˆ†æ–¹æ³•æ—¶ï¼Œå¯¹èƒŒåçš„æ•°å­¦åŸç†å’Œè¯„ä¼°æ–¹æ³•æ„Ÿåˆ°å›°æƒ‘ï¼Œéœ€è¦æ›´æ·±å…¥çš„è§£é‡Šã€‚\n\u003e\n\u003e é¦–å…ˆï¼Œæˆ‘éœ€è¦å›å¿†æ•°å€¼å¾®åˆ†ã€ç¬¦å·å¾®åˆ†å’Œè‡ªåŠ¨å¾®åˆ†çš„åŸºæœ¬æ¦‚å¿µã€‚æ•°å€¼å¾®åˆ†æ˜¯é€šè¿‡æœ‰é™å·®åˆ†è¿‘ä¼¼å¯¼æ•°ï¼Œç¬¦å·å¾®åˆ†æ˜¯é€šè¿‡ä»£æ•°è§„åˆ™æ±‚å¯¼è¡¨è¾¾å¼ï¼Œè‡ªåŠ¨å¾®åˆ†ï¼ˆå¦‚åå‘ä¼ æ’­ï¼‰åˆ™æ˜¯é€šè¿‡åˆ†è§£è®¡ç®—è¿‡ç¨‹ï¼Œåˆ©ç”¨é“¾å¼æ³•åˆ™é«˜æ•ˆè®¡ç®—æ¢¯åº¦ã€‚ç”¨æˆ·å·²ç»çŸ¥é“å®ƒä»¬çš„å¤æ‚åº¦å¯¹æ¯”è¡¨æ ¼ï¼Œä½†éœ€è¦äº†è§£è¿™äº›å¤æ‚åº¦æ˜¯å¦‚ä½•å¾—å‡ºçš„ï¼Œä»¥åŠæ•°å€¼ç¨³å®šæ€§çš„è¯„ä¼°æ–¹æ³•ã€‚\n\u003e\n\u003e æ¥ä¸‹æ¥ï¼Œæ—¶é—´å¤æ‚åº¦çš„è®¡ç®—ã€‚å¯¹äºæ•°å€¼å¾®åˆ†ï¼Œå‡è®¾æœ‰ n ä¸ªå‚æ•°ï¼Œæ¯ä¸ªå‚æ•°éƒ½éœ€è¦å•ç‹¬è®¡ç®—æ¢¯åº¦ï¼Œæ¯æ¬¡è®¡ç®—éœ€è¦ä¸¤æ¬¡å‰å‘ä¼ æ’­ï¼ˆf(x+h)å’Œ f(x-h)ï¼‰ï¼Œæ‰€ä»¥æ€»çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(n)çš„å‰å‘è®¡ç®—ä¹˜ä»¥ n ä¸ªå‚æ•°ï¼Œå¾—åˆ° O(n^2)ã€‚è€Œè‡ªåŠ¨å¾®åˆ†åªéœ€è¦ä¸€æ¬¡å‰å‘å’Œä¸€æ¬¡åå‘ä¼ æ’­ï¼Œåå‘ä¼ æ’­çš„æ—¶é—´å¤æ‚åº¦ä¸å‰å‘ç›¸å½“ï¼Œæ‰€ä»¥æ€»çš„æ˜¯ O(n)ã€‚ç¬¦å·å¾®åˆ†åˆ™å¯èƒ½å› ä¸ºè¡¨è¾¾å¼è†¨èƒ€å¯¼è‡´æœ€åæƒ…å†µæŒ‡æ•°çº§å¤æ‚åº¦ï¼Œä½†é€šå¸¸æƒ…å†µæ˜¯çº¿æ€§çš„ï¼Œä½†éœ€è¦å­˜å‚¨æ•´ä¸ªè¡¨è¾¾å¼ï¼Œç©ºé—´å¤æ‚åº¦é«˜ã€‚è¿™äº›éœ€è¦è¯¦ç»†è§£é‡Šã€‚\n\u003e\n\u003e ç©ºé—´å¤æ‚åº¦æ–¹é¢ï¼Œæ•°å€¼å¾®åˆ†ä¸éœ€è¦å­˜å‚¨ä¸­é—´å˜é‡ï¼Œæ‰€ä»¥æ˜¯ O(1)ã€‚è‡ªåŠ¨å¾®åˆ†éœ€è¦å­˜å‚¨è®¡ç®—å›¾ä¸­çš„ä¸­é—´ç»“æœï¼Œæ‰€ä»¥æ˜¯ O(n)ã€‚ç¬¦å·å¾®åˆ†éœ€è¦å­˜å‚¨æ•´ä¸ªç¬¦å·è¡¨è¾¾å¼ï¼Œå¯èƒ½éšç€æ±‚å¯¼æ¬¡æ•°å¢åŠ è€Œè†¨èƒ€ï¼Œæ‰€ä»¥ç©ºé—´å¤æ‚åº¦æ˜¯ O(n)ã€‚è¿™é‡Œå¯èƒ½éœ€è¦æ›´å…·ä½“çš„ä¾‹å­è¯´æ˜ã€‚\n\u003e\n\u003e æ•°å€¼ç¨³å®šæ€§æ–¹é¢ï¼Œæ•°å€¼å¾®åˆ†å› ä¸ºä½¿ç”¨äº†æœ‰é™å·®åˆ†ï¼Œå®¹æ˜“å—åˆ°èˆå…¥è¯¯å·®å½±å“ï¼Œå°¤å…¶æ˜¯å½“ h å¾ˆå°æ—¶ã€‚ç¬¦å·å¾®åˆ†å› ä¸ºæ˜¯ç²¾ç¡®æ±‚å¯¼ï¼Œç¨³å®šæ€§å¥½ã€‚è‡ªåŠ¨å¾®åˆ†é€šè¿‡é“¾å¼æ³•åˆ™è®¡ç®—ï¼Œç²¾åº¦ä¸æ•°å­¦æ¨å¯¼ç›¸åŒï¼Œæ‰€ä»¥ç¨³å®šæ€§ä¼˜ç§€ã€‚éœ€è¦è§£é‡Šä¸ºä»€ä¹ˆä¸åŒæ–¹æ³•ä¼šæœ‰ä¸åŒçš„ç¨³å®šæ€§ï¼Œæ¯”å¦‚èˆå…¥è¯¯å·®å’Œè¡¨è¾¾å¼è†¨èƒ€çš„å½±å“ã€‚\n\u003e\n\u003e ç”¨æˆ·å¯èƒ½æ²¡æœ‰å®Œå…¨ç†è§£è¿™äº›å¤æ‚åº¦æ˜¯å¦‚ä½•æ¨å¯¼å‡ºæ¥çš„ï¼Œæ¯”å¦‚ä¸ºä»€ä¹ˆè‡ªåŠ¨å¾®åˆ†çš„æ—¶é—´æ˜¯çº¿æ€§çš„ï¼Œæˆ–è€…ç¬¦å·å¾®åˆ†çš„ç©ºé—´å¤æ‚åº¦å¦‚ä½•ã€‚éœ€è¦åˆ†æ­¥éª¤è§£é‡Šï¼Œå¯èƒ½ç”¨å…·ä½“çš„ä¾‹å­ï¼Œæ¯”å¦‚ä¸€ä¸ªæœ‰ n ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œå¦‚ä½•è®¡ç®—æ¯ç§æ–¹æ³•æ‰€éœ€çš„æ­¥éª¤æ•°ï¼Œä»è€Œå¾—å‡ºæ—¶é—´å¤æ‚åº¦ã€‚\n\u003e\n\u003e æ­¤å¤–ï¼Œç”¨æˆ·å¯èƒ½å¯¹æ•°å€¼ç¨³å®šæ€§çš„è¯„ä¼°æ–¹æ³•ä¸æ¸…æ¥šã€‚éœ€è¦è§£é‡Šæ•°å€¼ç¨³å®šæ€§é€šå¸¸é€šè¿‡è¯¯å·®åˆ†æï¼Œæ¯”å¦‚èˆå…¥è¯¯å·®å’Œæˆªæ–­è¯¯å·®çš„å½±å“ã€‚ä¾‹å¦‚ï¼Œæ•°å€¼å¾®åˆ†çš„è¯¯å·®æ¥æºåŒ…æ‹¬é€‰æ‹© h çš„å¤§å°ï¼Œè¿‡å¤§ä¼šå¯¼è‡´æˆªæ–­è¯¯å·®ï¼Œè¿‡å°å¯¼è‡´èˆå…¥è¯¯å·®ã€‚è€Œç¬¦å·å¾®åˆ†æ²¡æœ‰æ•°å€¼è¯¯å·®ï¼Œè‡ªåŠ¨å¾®åˆ†åˆ™å› ä¸ºä½¿ç”¨æµ®ç‚¹è¿ç®—å¯èƒ½æœ‰èˆå…¥è¯¯å·®ï¼Œä½†ç›¸å¯¹äºæ•°å€¼å¾®åˆ†æ›´ç¨³å®šã€‚\n\u003e\n\u003e éœ€è¦æ³¨æ„ç”¨æˆ·çš„æ•°å­¦èƒŒæ™¯æ˜¯æœ¬ç§‘é«˜ç­‰æ•°å­¦å’Œçº¿æ€§ä»£æ•°ï¼Œæ‰€ä»¥éœ€è¦ç”¨ä»–ä»¬èƒ½ç†è§£çš„è¯­è¨€ï¼Œé¿å…è¿‡äºå¤æ‚çš„æ•°å­¦æ¨å¯¼ï¼Œä½†åˆè¦è¶³å¤Ÿä¸¥è°¨ã€‚å¯èƒ½éœ€è¦ä½¿ç”¨å…·ä½“çš„ä¾‹å­ï¼Œæ¯”å¦‚ä¸€ä¸ªç®€å•çš„å‡½æ•°ï¼Œæ¯”è¾ƒä¸‰ç§æ–¹æ³•åœ¨è®¡ç®—æ¢¯åº¦æ—¶çš„æ­¥éª¤ï¼Œä»è€Œè¯´æ˜æ—¶é—´å¤æ‚åº¦çš„å·®å¼‚ã€‚\n\u003e\n\u003e ä¾‹å¦‚ï¼Œè€ƒè™‘å‡½æ•° f(w)=w1*x1 + w2*x2 + ... + wn\\*xnï¼Œæœ‰ n ä¸ªå‚æ•° w1 åˆ° wnã€‚æ•°å€¼å¾®åˆ†éœ€è¦å¯¹æ¯ä¸ª wi è®¡ç®—ä¸¤æ¬¡ f çš„å€¼ï¼Œæ‰€ä»¥æ€»è®¡ç®—æ¬¡æ•°æ˜¯ 2n æ¬¡ï¼Œæ¯æ¬¡è®¡ç®—éœ€è¦ O(n)æ—¶é—´ï¼ˆå› ä¸ºè®¡ç®—ç‚¹ç§¯ï¼‰ï¼Œæ‰€ä»¥æ€»æ—¶é—´å¤æ‚åº¦æ˜¯ O(n^2)ã€‚è‡ªåŠ¨å¾®åˆ†åˆ™è®¡ç®—ä¸€æ¬¡å‰å‘ä¼ æ’­ï¼ˆO(n)æ—¶é—´ï¼‰ï¼Œåå‘ä¼ æ’­æ¯ä¸ªèŠ‚ç‚¹çš„æ¢¯åº¦è®¡ç®—æ˜¯ O(1)ï¼Œn ä¸ªèŠ‚ç‚¹ï¼Œæ‰€ä»¥æ€»æ—¶é—´æ˜¯ O(n)ã€‚ç¬¦å·å¾®åˆ†åˆ™ç”Ÿæˆå¯¼æ•°è¡¨è¾¾å¼ï¼Œå¯èƒ½æœ‰ n é¡¹ï¼Œæ¯ä¸ªé¡¹æ˜¯ xiï¼Œæ‰€ä»¥å¯¼æ•°æ˜¯ xiï¼Œå­˜å‚¨è¿™äº›éœ€è¦ O(n)ç©ºé—´ï¼Œä½†å¦‚æœæ˜¯æ›´å¤æ‚çš„å‡½æ•°ï¼Œæ¯”å¦‚å¤šå±‚å¤åˆå‡½æ•°ï¼Œç¬¦å·è¡¨è¾¾å¼å¯èƒ½è†¨èƒ€ï¼Œå¯¼è‡´ç©ºé—´å¢åŠ ã€‚\n\u003e\n\u003e åœ¨æ•°å€¼ç¨³å®šæ€§æ–¹é¢ï¼Œæ¯”å¦‚ç”¨æ•°å€¼å¾®åˆ†è®¡ç®— f(w)=sin(w)ï¼Œå½“ w å¾ˆå¤§æ—¶ï¼Œè®¡ç®—å¯¼æ•°æ—¶çš„å°å˜åŒ–å¯èƒ½å¯¼è‡´è¾ƒå¤§çš„èˆå…¥è¯¯å·®ã€‚è€Œè‡ªåŠ¨å¾®åˆ†ç›´æ¥è®¡ç®— cos(w)ï¼Œæ²¡æœ‰è¿™ç§è¯¯å·®ã€‚\n\u003e\n\u003e æ€»ç»“ï¼Œç”¨æˆ·éœ€è¦åˆ†æ­¥éª¤çš„å¤æ‚åº¦æ¨å¯¼è¿‡ç¨‹å’Œæ•°å€¼ç¨³å®šæ€§çš„è¯„ä¼°æ–¹æ³•ï¼Œç»“åˆå…·ä½“ä¾‹å­å’Œæ•°å­¦è§£é‡Šï¼Œç¡®ä¿ä»–ä»¬èƒ½ç†è§£ä¸ºä»€ä¹ˆä¸åŒæ–¹æ³•æœ‰ä¸åŒçš„å¤æ‚åº¦å’Œç¨³å®šæ€§ã€‚åŒæ—¶ï¼Œå¯èƒ½éœ€è¦æŒ‡å‡ºè¿™äº›å¤æ‚åº¦æ˜¯ç†è®ºä¸Šçš„æœ€åæƒ…å†µè¿˜æ˜¯å…¸å‹æƒ…å†µï¼Œæ¯”å¦‚ç¬¦å·å¾®åˆ†çš„è¡¨è¾¾å¼è†¨èƒ€åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½æ›´ä¸¥é‡ã€‚\n\nä»¥ä¸‹æ˜¯å…³äºæ•°å€¼å¾®åˆ†ã€ç¬¦å·å¾®åˆ†å’Œè‡ªåŠ¨å¾®åˆ†çš„æ—¶é—´/ç©ºé—´å¤æ‚åº¦è®¡ç®—åŸç†ï¼Œä»¥åŠæ•°å€¼ç¨³å®šæ€§è¯„ä¼°æ–¹æ³•çš„è¯¦ç»†è§£é‡Šï¼š\n\n---\n\n### ä¸€ã€æ—¶é—´å¤æ‚åº¦è®¡ç®—åŸç†\n\n#### 1. æ•°å€¼å¾®åˆ†ï¼ˆNumerical Differentiationï¼‰\n\n**å®ç°æ–¹å¼**ï¼šé€šè¿‡æœ‰é™å·®åˆ†è¿‘ä¼¼å¯¼æ•°\n$$ f'(x) \\approx \\frac{f(x+h)-f(x-h)}{2h} $$\n\n**æ—¶é—´å¤æ‚åº¦åˆ†æ**ï¼š\n\n- **å•å‚æ•°è®¡ç®—**ï¼šæ¯æ¬¡è®¡ç®—éœ€è¦ **2 æ¬¡å‰å‘ä¼ æ’­**\n- **n ä¸ªå‚æ•°**ï¼šéœ€è¦ **2n æ¬¡å‰å‘ä¼ æ’­**\n- **å‰å‘ä¼ æ’­å¤æ‚åº¦**ï¼šå‡è®¾å•æ¬¡å‰å‘ä¼ æ’­ä¸º $$ O(k) $$ï¼ˆk ä¸ºè®¡ç®—æ­¥éª¤æ•°ï¼‰\n- **æ€»æ—¶é—´å¤æ‚åº¦**ï¼š$$ O(2n \\times k) = O(nk) $$\n\n**å…³é”®ç»“è®º**ï¼šæ—¶é—´å¤æ‚åº¦ä¸å‚æ•°æ•°é‡æˆçº¿æ€§å…³ç³»ï¼Œä½†å‰å‘ä¼ æ’­çš„ $$ k $$ é€šå¸¸ä¸ç½‘ç»œè§„æ¨¡ç›¸å…³ï¼Œå®é™…å¤æ‚åº¦ä¸º $$ O(n^2) $$\n\n\u003e ç¤ºä¾‹ï¼šè®¡ç®— $$ f(w*1,w_2,...,w*{100}) $$ çš„æ¢¯åº¦ï¼Œéœ€è¦ 200 æ¬¡å‰å‘ä¼ æ’­\n\n---\n\n#### 2. ç¬¦å·å¾®åˆ†ï¼ˆSymbolic Differentiationï¼‰\n\n**å®ç°æ–¹å¼**ï¼šé€šè¿‡ä»£æ•°è§„åˆ™æ¨å¯¼é—­å¼è¡¨è¾¾å¼\n\n**æ—¶é—´å¤æ‚åº¦åˆ†æ**ï¼š\n\n- **è¡¨è¾¾å¼è†¨èƒ€**ï¼šå¯¹å¤åˆå‡½æ•° $$ f(g(h(x))) $$ æ±‚å¯¼ä¼šäº§ç”ŸåµŒå¥—ä¹˜ç§¯é¡¹\n- **æœ€åæƒ…å†µ**ï¼šæ¯å±‚æ“ä½œå¯¼è‡´è¡¨è¾¾å¼é•¿åº¦æŒ‡æ•°çº§å¢é•¿ $$ O(2^d) $$ï¼ˆd ä¸ºç½‘ç»œæ·±åº¦ï¼‰\n- **ä¼˜åŒ–æƒ…å†µ**ï¼šç°ä»£ç³»ç»Ÿä¼šè¿›è¡Œè¡¨è¾¾å¼ç®€åŒ–ï¼Œå…¸å‹å¤æ‚åº¦ä¸º $$ O(d) $$\n\n\u003e ç¤ºä¾‹ï¼šå¯¹ $$ f(x) = \\sin(e^{x^2}) $$ æ±‚å¯¼ï¼š\n\u003e $$ f'(x) = \\cos(e^{x^2}) \\cdot e^{x^2} \\cdot 2x $$\n\u003e è¡¨è¾¾å¼é•¿åº¦éšæ±‚å¯¼æ¬¡æ•°çº¿æ€§å¢é•¿\n\n---\n\n#### 3. è‡ªåŠ¨å¾®åˆ†ï¼ˆAutomatic Differentiationï¼‰\n\n**å®ç°æ–¹å¼**ï¼šåŸºäºè®¡ç®—å›¾åˆ†è§£æ±‚å¯¼è¿‡ç¨‹\n\n**æ—¶é—´å¤æ‚åº¦åˆ†æ**ï¼š\n\n- **å‰å‘ä¼ æ’­**ï¼š$$ O(d) $$ï¼ˆd ä¸ºè®¡ç®—å›¾æ·±åº¦ï¼‰\n- **åå‘ä¼ æ’­**ï¼šæ¯ä¸ªèŠ‚ç‚¹æ‰§è¡Œå›ºå®šæ—¶é—´çš„æ¢¯åº¦è®¡ç®—ï¼Œå¤æ‚åº¦ $$ O(d) $$\n- **æ€»æ—¶é—´å¤æ‚åº¦**ï¼š$$ O(d) + O(d) = O(d) $$\n\n**å…³é”®ä¼˜åŒ–**ï¼šè®¡ç®—å›¾èŠ‚ç‚¹æ•°é€šå¸¸ä¸å‚æ•°æ•°é‡ $$ n $$ æˆçº¿æ€§å…³ç³»ï¼Œå› æ­¤å¤æ‚åº¦å¯è¡¨ç¤ºä¸º $$ O(n) $$\n\n\u003e ç¤ºä¾‹ï¼šå…¨è¿æ¥ç½‘ç»œçš„åå‘ä¼ æ’­æ—¶é—´ä¸å‚æ•°æ•°é‡æˆæ­£æ¯”\n\n---\n\n### äºŒã€ç©ºé—´å¤æ‚åº¦è®¡ç®—åŸç†\n\n#### å¯¹æ¯”è¡¨æ ¼\n\n| æ–¹æ³•     | ç©ºé—´å¤æ‚åº¦ | åŸå›                                                        |\n| -------- | ---------- | ---------------------------------------------------------- |\n| æ•°å€¼å¾®åˆ† | $$ O(1) $$ | åªéœ€å­˜å‚¨å½“å‰å‚æ•°å€¼å’Œæ‰°åŠ¨ç»“æœ                               |\n| ç¬¦å·å¾®åˆ† | $$ O(n) $$ | éœ€è¦å­˜å‚¨å®Œæ•´çš„ç¬¦å·è¡¨è¾¾å¼ï¼ˆå¯èƒ½æŒ‡æ•°è†¨èƒ€ï¼Œä½†ä¼˜åŒ–åçº¿æ€§å¢é•¿ï¼‰ |\n| è‡ªåŠ¨å¾®åˆ† | $$ O(n) $$ | éœ€è¦å­˜å‚¨è®¡ç®—å›¾ä¸­æ‰€æœ‰ä¸­é—´å˜é‡çš„å‰å‘å€¼                       |\n\n**è¯¦ç»†è§£é‡Š**ï¼š\n\n- **æ•°å€¼å¾®åˆ†**ï¼šä»…éœ€ä¿æŒåŸå§‹å‚æ•°å’Œæ‰°åŠ¨åçš„å‚æ•°å‰¯æœ¬ï¼Œå†…å­˜å ç”¨æ’å®š\n- **ç¬¦å·å¾®åˆ†**ï¼šå¯¼æ•°çš„ç¬¦å·è¡¨è¾¾å¼å¯èƒ½éå¸¸åºå¤§ï¼Œä¾‹å¦‚ï¼š\n  $$ \\frac{\\partial}{\\partial x} \\prod*{i=1}^n x_i = \\sum*{j=1}^n \\prod\\_{i \\neq j} x_i $$\n  éœ€è¦å­˜å‚¨ $$ n $$ ä¸ªä¹˜ç§¯é¡¹\n- **è‡ªåŠ¨å¾®åˆ†**ï¼šéœ€è¦ä¿å­˜å‰å‘ä¼ æ’­çš„æ‰€æœ‰ä¸­é—´ç»“æœç”¨äºåå‘è®¡ç®—ï¼Œä¾‹å¦‚ï¼š\n  ```python\n  # å‰å‘è®¡ç®—éœ€è¦ä¿å­˜è¿™äº›å€¼\n  a = W1 * x\n  b = a + b1\n  c = relu(b)\n  ```\n\n---\n\n### ä¸‰ã€æ•°å€¼ç¨³å®šæ€§è¯„ä¼°æ–¹æ³•\n\n#### 1. æ•°å€¼å¾®åˆ†ç¨³å®šæ€§\n\n**è¯¯å·®æ¥æº**ï¼š\n\n- **æˆªæ–­è¯¯å·®**ï¼š$$ O(h^2) $$ï¼ˆæ¥è‡ªæ³°å‹’å±•å¼€çš„è¿‘ä¼¼ï¼‰\n- **èˆå…¥è¯¯å·®**ï¼š$$ O(\\epsilon/h) $$ï¼ˆ$$ \\epsilon $$ ä¸ºæœºå™¨ç²¾åº¦ï¼‰\n\n**ç¨³å®šæ€§åˆ†æ**ï¼š\n$$ \\text{æ€»è¯¯å·®} = O(h^2) + O(\\epsilon/h) $$\n\n- **æœ€ä¼˜æ­¥é•¿é€‰æ‹©**ï¼šå½“ $$ h \\approx \\sqrt[3]{\\epsilon} $$ æ—¶è¯¯å·®æœ€å°\n- **å…¸å‹é—®é¢˜**ï¼šå¯¹äºç—…æ€æ¡ä»¶æ•°çš„é—®é¢˜ï¼ˆå¦‚æŒ‡æ•°å‡½æ•°ï¼‰ï¼Œå°æ­¥é•¿ä¼šæ”¾å¤§èˆå…¥è¯¯å·®\n\n\u003e ç¤ºä¾‹ï¼šè®¡ç®— $$ f(x) = e^x $$ åœ¨ $$ x=20 $$ å¤„çš„å¯¼æ•°ï¼š\n\u003e\n\u003e - çœŸå®å¯¼æ•°ï¼š$$ e^{20} \\approx 4.85 \\times 10^8 $$\n\u003e - æ•°å€¼è®¡ç®—å¯èƒ½äº§ç”Ÿæ˜¾è‘—ç›¸å¯¹è¯¯å·®\n\n---\n\n#### 2. ç¬¦å·å¾®åˆ†ç¨³å®šæ€§\n\n**ç‰¹ç‚¹**ï¼š\n\n- **ç²¾ç¡®è®¡ç®—**ï¼šç†è®ºä¸Šæ²¡æœ‰æ•°å€¼è¯¯å·®\n- **å®é™…é™åˆ¶**ï¼š\n  - ç¬¦å·åŒ–ç®€å¯èƒ½å¯¼è‡´æ•°å€¼ä¸ç¨³å®šè¡¨è¾¾å¼\n  - è½¬æ¢ä¸ºæµ®ç‚¹è¿ç®—æ—¶ä»ä¼šå¼•å…¥èˆå…¥è¯¯å·®\n\n**è¯„ä¼°æ–¹æ³•**ï¼š\n\n- **è¡¨è¾¾å¼å¤æ‚åº¦**ï¼šæ£€æŸ¥å¯¼æ•°è¡¨è¾¾å¼æ˜¯å¦åŒ…å«ç—…æ€æ“ä½œï¼ˆå¦‚å¤§æ•°ç›¸å‡ï¼‰\n  $$ \\frac{\\partial}{\\partial x} (e^x - e^{-x}) = e^x + e^{-x} $$\n  ç›´æ¥è®¡ç®—å¯èƒ½åœ¨ $$ x $$ è¾ƒå¤§æ—¶å‡ºç°ç²¾åº¦æŸå¤±\n\n---\n\n#### 3. è‡ªåŠ¨å¾®åˆ†ç¨³å®šæ€§\n\n**è¯¯å·®æ¥æº**ï¼š\n\n- **å‰å‘ä¼ æ’­èˆå…¥è¯¯å·®**ï¼šä¸ç¬¦å·å¾®åˆ†ç›¸åŒé‡çº§\n- **åå‘ä¼ æ’­ç¨³å®šæ€§**ï¼šå–å†³äºæ¢¯åº¦è®¡ç®—è·¯å¾„\n\n**ç¨³å®šæ€§ä¼˜åŠ¿**ï¼š\n\n- **é¿å…è¯¯å·®ç´¯ç§¯**ï¼šé€šè¿‡ä¿æŒåŸå§‹è®¡ç®—è·¯å¾„çš„æ•°å€¼ç‰¹æ€§\n- **å…¸å‹å¯¹æ¯”**ï¼š\n  - ç›´æ¥è®¡ç®— $$ f(x) = \\sqrt{x^2 + 1} - x $$ çš„å¯¼æ•°\n  - ç¬¦å·å¾®åˆ†å¯èƒ½å¾—åˆ°ä¸ç¨³å®šçš„ $$ \\frac{x}{\\sqrt{x^2+1}} - 1 $$\n  - è‡ªåŠ¨å¾®åˆ†åœ¨è®¡ç®—æ—¶ä¿æŒåŸå§‹è¡¨è¾¾å¼ç»“æ„\n\n---\n\n### å››ã€ç»¼åˆå¯¹æ¯”ä¸å·¥ç¨‹é€‰æ‹©\n\n#### 1. æ–¹æ³•é€‰æ‹©å†³ç­–æ ‘\n\n```mermaid\ngraph TD\n    A[éœ€è¦å¾®åˆ†] --\u003e B{å‚æ•°è§„æ¨¡}\n    B --\u003e|\"å°è§„æ¨¡(n\u003c100)\"| C[ç¬¦å·å¾®åˆ†]\n    B --\u003e|ä¸­å¤§è§„æ¨¡| D{æ˜¯å¦éœ€è¦æœ€é«˜ç²¾åº¦}\n    D --\u003e|æ˜¯| E[è‡ªåŠ¨å¾®åˆ†]\n    D --\u003e|å¦| F[æ•°å€¼å¾®åˆ†]\n    C --\u003e G[è·å¾—ç²¾ç¡®è¡¨è¾¾å¼]\n    E --\u003e H[é«˜æ•ˆè®¡ç®—æ¢¯åº¦]\n    F --\u003e I[å¿«é€Ÿä½†ä½ç²¾åº¦]\n```\n\n#### 2. å®é™…æ¡†æ¶å®ç°\n\n- **PyTorch/TensorFlow**ï¼šé‡‡ç”¨è‡ªåŠ¨å¾®åˆ†ï¼ˆåå‘ä¼ æ’­ï¼‰\n- **Mathematica**ï¼šä½¿ç”¨ç¬¦å·å¾®åˆ†\n- **æœ‰é™å·®åˆ†åº“**ï¼šå¸¸ç”¨äºéªŒè¯å…¶ä»–æ–¹æ³•çš„æ­£ç¡®æ€§\n\n---\n\n### äº”ã€æ·±åº¦å­¦ä¹ ä¸­çš„ç‰¹æ®Šè€ƒé‡\n\n#### 1. GPU å†…å­˜ç“¶é¢ˆ\n\n- **è‡ªåŠ¨å¾®åˆ†ä¼˜åŒ–**ï¼šPyTorch çš„ `checkpoint` æœºåˆ¶é€šè¿‡ç‰ºç‰²è®¡ç®—æ¢å†…å­˜\n  ```python\n  # å‡å°‘ä¸­é—´å˜é‡å­˜å‚¨\n  from torch.utils.checkpoint import checkpoint\n  x = checkpoint(layer1, x)\n  x = checkpoint(layer2, x)\n  ```\n\n#### 2. æ··åˆç²¾åº¦è®­ç»ƒ\n\n- **ç¨³å®šæ€§æŒ‘æˆ˜**ï¼šfloat16 ç±»å‹ä¸‹çš„æ¢¯åº¦è®¡ç®—éœ€è¦ç‰¹æ®Šå¤„ç†\n- **è§£å†³æ–¹æ¡ˆ**ï¼šæ¢¯åº¦ç¼©æ”¾ï¼ˆGradient Scalingï¼‰\n  ```python\n  scaler = torch.cuda.amp.GradScaler()\n  with torch.cuda.amp.autocast():\n      output = model(input)\n  scaler.scale(loss).backward()\n  ```\n\n---\n\n### å…­ã€æ•°å­¦è¯æ˜ç¤ºä¾‹\n\n#### æ•°å€¼å¾®åˆ†è¯¯å·®åˆ†æ\n\nè®¾çœŸå®å¯¼æ•°ä¸º $$ f'(x) $$ï¼Œæ•°å€¼è¿‘ä¼¼ä¸ºï¼š\n$$ \\tilde{f}'(x) = \\frac{f(x+h) - f(x-h)}{2h} $$\n\n**æ³°å‹’å±•å¼€**ï¼š\n$$ f(x+h) = f(x) + hf'(x) + \\frac{h^2}{2}f''(x) + \\frac{h^3}{6}f'''(Î¾_1) $$\n$$ f(x-h) = f(x) - hf'(x) + \\frac{h^2}{2}f''(x) - \\frac{h^3}{6}f'''(Î¾_2) $$\n\n**ç›¸å‡å¾—**ï¼š\n$$ \\tilde{f}'(x) = f'(x) + \\frac{h^2}{12}[f'''(Î¾_1) + f'''(Î¾_2)] $$\n\n**è¯¯å·®é¡¹**ï¼š\n$$ \\text{æˆªæ–­è¯¯å·®} = O(h^2) $$\n\n---\n\n### ä¸ƒã€æ€»ç»“ç†è§£\n\n1. **å¤æ‚åº¦è®¡ç®—æœ¬è´¨**ï¼š\n\n   - æ—¶é—´å¤æ‚åº¦ï¼šè®¡ç®—ä»£ä»·éšé—®é¢˜è§„æ¨¡çš„å¢é•¿ç‡\n   - ç©ºé—´å¤æ‚åº¦ï¼šå†…å­˜éœ€æ±‚éšé—®é¢˜è§„æ¨¡çš„å¢é•¿ç‡\n\n2. **ç¨³å®šæ€§è¯„ä¼°æ ¸å¿ƒ**ï¼š\n\n   - å¯¹èˆå…¥è¯¯å·®å’Œæˆªæ–­è¯¯å·®çš„æ•æ„Ÿåº¦\n   - ä¿æŒæ•°å€¼è®¡ç®—ç²¾åº¦çš„èƒ½åŠ›\n\n3. **å·¥ç¨‹å®è·µæŒ‡å¯¼**ï¼š\n   - å°è§„æ¨¡é—®é¢˜ï¼šä¼˜å…ˆç¬¦å·å¾®åˆ†ï¼ˆå¦‚ç‰©ç†ä»¿çœŸï¼‰\n   - å¤§è§„æ¨¡å¯å¾®ç¼–ç¨‹ï¼šå¿…é€‰è‡ªåŠ¨å¾®åˆ†ï¼ˆæ·±åº¦å­¦ä¹ æ¡†æ¶ï¼‰\n   - å¿«é€ŸéªŒè¯ï¼šä½¿ç”¨æ•°å€¼å¾®åˆ†ï¼ˆåŸå‹å¼€å‘é˜¶æ®µï¼‰\n\n\u003e [!NOTE] äº®æ›°ï¼š\n\u003e\n\u003e - æ•°å€¼å¾®åˆ†ï¼šå‚æ•°åš Delta ï¼Œè®¡ç®—æœ€ç»ˆå€¼çš„å·®ï¼Œæ²¡æœ‰åå‘ä¼ æ’­è¿‡ç¨‹\n\u003e - ç¬¦å·å¾®åˆ†ï¼šç›´æ¥æ¨å¯¼å‡ºå¯¼æ•°è¡¨è¾¾å¼ï¼Œå†ä»£å…¥è®¡ç®—ï¼Œè¡¨è¾¾å¼å¤æ‚\n\u003e - è‡ªåŠ¨å¾®åˆ†ï¼šå‰å‘ä¼ æ’­è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„å€¼ï¼Œå†åå‘ä¼ æ’­ç”¨é“¾å¼æ³•åˆ™è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„æ¢¯åº¦ã€‚\n\u003e\n\u003e è‡ªåŠ¨å¾®åˆ†å¯ä»¥ç®—æ˜¯ä¸€ç§åŠ¨æ€è§„åˆ’ï¼Œæš‚å­˜è®¡ç®—ä¸­é‡å¤ç”¨åˆ°çš„ä¸­é—´æ•°æ®ï¼Œç”¨ç©ºé—´æ¢æ—¶é—´ã€‚æ›´è¿›ä¸€æ­¥ï¼Œåå‘ä¼ æ’­æ—¶ï¼Œç”¨å±‚åºéå†è®¡ç®—å›¾ï¼Œå½“èŠ‚ç‚¹çš„æ‰€æœ‰å…¥è¾¹ï¼ˆåå‘æ—¶çš„å‡ºè¾¹ï¼‰éƒ½è®¡ç®—å®Œåï¼Œå³å¯å°†å½“å‰èŠ‚ç‚¹ä»é˜Ÿåˆ—ä¸­ç§»é™¤ï¼Œä»è€ŒèŠ‚çœå†…å­˜ã€‚\n","title":"PyTorch è‡ªåŠ¨å¾®åˆ†ä¸åå‘ä¼ æ’­æœºåˆ¶åŸç†è§£æ","abstract":"\u003e æœ¬æ–‡ä¸ºç”¨æˆ·ä¸ DeepSeek çš„é—®ç­”ã€‚ä¸»é¢˜ä¸º PyTorch çš„åå‘ä¼ æ’­æœºåˆ¶ã€‚æœ¬æ–‡ä»æ•°å­¦åŸç†ã€è®¡ç®—å›¾æœºåˆ¶å’Œå®é™…éœ€æ±‚ä¸‰ä¸ªæ–¹é¢æ·±å…¥è§£é‡Šå…¶å·¥ä½œåŸç†ï¼Œå¹¶ç»“åˆ PyTorch çš„è‡ªåŠ¨å¾®åˆ†ï¼ˆAutogradï¼‰ç³»ç»Ÿè¿›è¡Œè¯´æ˜ã€‚\n\u003e [!query]\n\u003e","length":952,"created_at":"2025-03-06T15:50:00.000Z","updated_at":"2025-03-06T15:50:00.000Z","tags":["PyTorch","æ·±åº¦å­¦ä¹ ","åå‘ä¼ æ’­","è‡ªåŠ¨å¾®åˆ†","å­¦ä¹ ç¬”è®°"],"license":true}},{"pathMapping":{"filePath":"public/content/learn_from_ai/2025-03-05-lora-matrix-initialization-strategy.md","pagePath":"/learn_from_ai/lora-matrix-initialization-strategy","slug":"lora-matrix-initialization-strategy"},"meta":{"content":"\n\u003e æœ¬æ–‡æ˜¯ä¸ Deepseek-R1 æ¨¡å‹+Search çš„å¯¹è¯è®°å½•ï¼Œè¯¦ç»†æ¢è®¨äº† LoRAï¼ˆä½ç§©é€‚åº”ï¼‰å¾®è°ƒæŠ€æœ¯ä¸­çŸ©é˜µåˆå§‹åŒ–ç­–ç•¥çš„æ•°å­¦åŸç†ã€‚æ–‡ç« åˆ†æäº†ä¸ºä»€ä¹ˆåœ¨ LoRA ä¸­çŸ©é˜µ A é‡‡ç”¨éšæœºåˆå§‹åŒ–è€ŒçŸ©é˜µ B é‡‡ç”¨é›¶åˆå§‹åŒ–çš„åŸå› ï¼ŒåŒ…æ‹¬ä¿æŒåˆå§‹æ¨¡å‹ç¨³å®šæ€§ã€ç¡®ä¿æ¢¯åº¦æ›´æ–°æœ‰æ•ˆæ€§ã€å®ç°é€æ­¥å­¦ä¹ çš„ä½ç§©æ›´æ–°ç­‰æ–¹é¢ã€‚åŒæ—¶ï¼Œæ–‡ç« ä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆåå‘åˆå§‹åŒ–ç­–ç•¥ï¼ˆBéšæœºè€ŒAä¸ºé›¶ï¼‰åœ¨ç†è®ºä¸Šå­˜åœ¨é—®é¢˜ï¼Œä¼šå¯¼è‡´æ¢¯åº¦æ¶ˆå¤±å’Œè®­ç»ƒæ•ˆç‡ä¸‹é™ã€‚è¿™äº›åˆ†ææœ‰åŠ©äºç†è§£æ·±åº¦å­¦ä¹ ä¸­å‚æ•°é«˜æ•ˆå¾®è°ƒæŠ€æœ¯çš„è®¾è®¡åŸç†ã€‚\n\n## Q: åˆå§‹åŒ– LoRA æ—¶ï¼Œä¸ºä»€ä¹ˆ A çŸ©é˜µæ˜¯éšæœºåˆå§‹åŒ–è€Œ B çŸ©é˜µæ˜¯ 0 åˆå§‹åŒ–ï¼Ÿ\n\n\u003e [!reasoning]-\n\u003e å—¯ï¼Œè¿™ä¸ªé—®é¢˜æ˜¯å…³äºLoRAï¼ˆä½ç§©é€‚åº”ï¼‰åˆå§‹åŒ–çš„ã€‚ä¸ºä»€ä¹ˆåœ¨åˆå§‹åŒ–çš„æ—¶å€™ï¼ŒçŸ©é˜µAæ˜¯éšæœºåˆå§‹åŒ–çš„ï¼Œè€ŒçŸ©é˜µBæ˜¯é›¶åˆå§‹åŒ–çš„å‘¢ï¼Ÿæˆ‘éœ€è¦ä»”ç»†æ€è€ƒä¸€ä¸‹ã€‚\n\u003e\n\u003e é¦–å…ˆï¼Œæˆ‘åº”è¯¥å›å¿†ä¸€ä¸‹LoRAçš„åŸºæœ¬åŸç†ã€‚LoRAæ˜¯ä¸€ç§ç”¨äºå¾®è°ƒå¤§å‹é¢„è®­ç»ƒæ¨¡å‹çš„æŠ€æœ¯ï¼Œå®ƒé€šè¿‡ä½ç§©åˆ†è§£æ¥å‡å°‘å¯è®­ç»ƒå‚æ•°çš„æ•°é‡ã€‚å…·ä½“æ¥è¯´ï¼Œå¯¹äºé¢„è®­ç»ƒæ¨¡å‹ä¸­çš„æŸä¸ªæƒé‡çŸ©é˜µWï¼ŒLoRAå¼•å…¥ä¸¤ä¸ªè¾ƒå°çš„çŸ©é˜µAå’ŒBï¼Œä½¿å¾—åŸæ¥çš„æƒé‡æ›´æ–°Î”Wå¯ä»¥è¡¨ç¤ºä¸ºBAã€‚è¿™æ ·ï¼Œè®­ç»ƒçš„æ—¶å€™åªéœ€è¦æ›´æ–°Aå’ŒBï¼Œè€Œä¸æ˜¯æ•´ä¸ªWï¼Œä»è€ŒèŠ‚çœäº†è®¡ç®—èµ„æºå’Œå†…å­˜ã€‚\n\u003e\n\u003e é‚£é—®é¢˜æ¥äº†ï¼Œä¸ºä»€ä¹ˆåˆå§‹åŒ–çš„æ—¶å€™ï¼ŒAæ˜¯éšæœºçš„ï¼Œè€ŒBæ˜¯é›¶å‘¢ï¼Ÿå¯èƒ½çš„è§£é‡Šæ˜¯ï¼Œè¿™æ ·åˆå§‹åŒ–åï¼Œåˆå§‹çš„Î”Wï¼ˆå³BAï¼‰æ˜¯é›¶çŸ©é˜µï¼Œè¿™æ ·åœ¨è®­ç»ƒå¼€å§‹æ—¶ï¼Œæ¨¡å‹çš„è¡Œä¸ºå’ŒåŸå§‹é¢„è®­ç»ƒæ¨¡å‹ä¿æŒä¸€è‡´ï¼Œä¸ä¼šå› ä¸ºéšæœºåˆå§‹åŒ–å¸¦æ¥å¤§çš„æ‰°åŠ¨ã€‚å› ä¸ºå¦‚æœBåˆå§‹åŒ–ä¸ºé›¶ï¼Œæ— è®ºAæ˜¯ä»€ä¹ˆï¼ŒBAéƒ½æ˜¯é›¶ï¼Œæ‰€ä»¥Î”Wåˆå§‹ä¸ºé›¶ï¼Œè¿™æ ·æ¨¡å‹çš„åˆå§‹è¾“å‡ºä¸ä¼šæ”¹å˜ï¼Œä¿è¯äº†è®­ç»ƒçš„ç¨³å®šæ€§ã€‚\n\u003e\n\u003e ä¸è¿‡ï¼Œè¿™é‡Œå¯èƒ½æœ‰ä¸€ä¸ªç–‘é—®ï¼šå¦‚æœBåˆå§‹åŒ–ä¸ºé›¶ï¼Œé‚£ä¹ˆåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œæ¢¯åº¦æ˜¯å¦‚ä½•æ›´æ–°çš„å‘¢ï¼Ÿå› ä¸ºå¦‚æœBä¸€å¼€å§‹æ˜¯é›¶ï¼Œé‚£ä¹ˆåœ¨ç¬¬ä¸€æ¬¡åå‘ä¼ æ’­æ—¶ï¼ŒBçš„æ¢¯åº¦å¯èƒ½ä¾èµ–äºAçš„å€¼ã€‚è€ŒAæ˜¯éšæœºåˆå§‹åŒ–çš„ï¼Œæ‰€ä»¥å¯èƒ½æ¢¯åº¦ä¼šæœ‰å˜åŒ–ã€‚ä¸è¿‡ï¼Œå› ä¸ºAæ˜¯éšæœºçš„ï¼Œåˆå§‹çš„BAæ˜¯é›¶ï¼Œè¿™æ ·åœ¨ç¬¬ä¸€æ¬¡å‰å‘ä¼ æ’­æ—¶ï¼ŒÎ”Wä¸å½±å“åŸå§‹æƒé‡ï¼Œå› æ­¤æŸå¤±å‡½æ•°å’ŒåŸå§‹æ¨¡å‹ä¸€æ ·ï¼Œæ¢¯åº¦å¯èƒ½ä»è¯¯å·®ä¿¡å·å¼€å§‹ç´¯ç§¯ï¼Œé€æ­¥è°ƒæ•´Aå’ŒBçš„å‚æ•°ã€‚\n\u003e\n\u003e å¦å¤–ï¼Œå¯èƒ½è¿˜æœ‰å‚æ•°æ›´æ–°çš„è€ƒè™‘ã€‚ä¾‹å¦‚ï¼Œå¦‚æœAæ˜¯éšæœºåˆå§‹åŒ–ï¼ŒBåˆå§‹åŒ–ä¸ºé›¶ï¼Œé‚£ä¹ˆåœ¨è®­ç»ƒå¼€å§‹æ—¶ï¼Œå‚æ•°çš„å˜åŒ–ä»é›¶å¼€å§‹é€æ­¥å¢åŠ ï¼Œè¿™ç±»ä¼¼äºæ®‹å·®è¿æ¥çš„æ€æƒ³ï¼Œå³åˆå§‹æ—¶æ²¡æœ‰æ”¹å˜ï¼Œç„¶åé€æ¸å­¦ä¹ è°ƒæ•´ã€‚è¿™æœ‰åŠ©äºè®­ç»ƒçš„ç¨³å®šæ€§ï¼Œé¿å…äº†åˆå§‹é˜¶æ®µçš„å¤§å¹…åº¦æ³¢åŠ¨ã€‚\n\u003e\n\u003e å†æƒ³ä¸€ä¸‹ï¼Œå¦‚æœåè¿‡æ¥ï¼ŒæŠŠAåˆå§‹åŒ–ä¸ºé›¶ï¼ŒBéšæœºåˆå§‹åŒ–ï¼Œé‚£ä¹ˆÎ”Wä¸€å¼€å§‹å°±æ˜¯é›¶ï¼Œå› ä¸ºAæ˜¯é›¶ï¼Œè¿™æ ·å¯èƒ½æ— æ³•æœ‰æ•ˆè®­ç»ƒï¼Œå› ä¸ºæ— è®ºBå¦‚ä½•å˜åŒ–ï¼Œå¦‚æœAæ˜¯é›¶çš„è¯ï¼ŒÎ”Wå§‹ç»ˆæ˜¯é›¶ï¼Œé™¤éAè¢«æ›´æ–°ã€‚ä½†é€šå¸¸æ¥è¯´ï¼Œå‚æ•°éœ€è¦ä¸€å®šçš„éšæœºæ€§æ¥æ‰“ç ´å¯¹ç§°æ€§ï¼Œä½¿å¾—æ¢¯åº¦å¯ä»¥æœ‰æ•ˆåœ°æ›´æ–°ä¸åŒçš„å‚æ•°ã€‚æ‰€ä»¥å¯èƒ½å¦‚æœAåˆå§‹åŒ–ä¸ºé›¶ï¼Œé‚£ä¹ˆåç»­çš„æ›´æ–°å¯èƒ½ä¼šé‡åˆ°é—®é¢˜ï¼Œå› ä¸ºæ¢¯åº¦å¯èƒ½éœ€è¦åŒæ—¶æ›´æ–°Aå’ŒBæ‰èƒ½æœ‰æ•ˆï¼Œè€Œåˆå§‹æ—¶Açš„æ¢¯åº¦å¯èƒ½å¾ˆå°ï¼Œå¯¼è‡´è®­ç»ƒç¼“æ…¢ã€‚å› æ­¤ï¼Œå°†Aéšæœºåˆå§‹åŒ–ï¼ŒBåˆå§‹åŒ–ä¸ºé›¶ï¼Œå¯ä»¥ç¡®ä¿åˆå§‹çš„Î”Wä¸ºé›¶ï¼ŒåŒæ—¶Açš„éšæœºæ€§å…è®¸æ¢¯åº¦åœ¨åå‘ä¼ æ’­æ—¶æœ‰æ•ˆåœ°æ›´æ–°å‚æ•°ï¼Œè€Œä¸ä¼šå¯¼è‡´åˆå§‹é˜¶æ®µçš„å¤§åå·®ã€‚\n\u003e\n\u003e æ€»ç»“ä¸€ä¸‹ï¼Œå¯èƒ½çš„åŸå› åŒ…æ‹¬ï¼š\n\u003e\n\u003e 1. ä¿æŒåˆå§‹Î”Wä¸ºé›¶ï¼Œä½¿å¾—æ¨¡å‹å¼€å§‹è®­ç»ƒæ—¶å’ŒåŸå§‹é¢„è®­ç»ƒæ¨¡å‹ä¸€è‡´ï¼Œè®­ç»ƒç¨³å®šæ€§ã€‚\n\u003e\n\u003e 2. éšæœºåˆå§‹åŒ–Aå¯ä»¥æ‰“ç ´å¯¹ç§°æ€§ï¼Œå…è®¸æ¢¯åº¦æœ‰æ•ˆæ›´æ–°å‚æ•°ï¼Œè€ŒBåˆå§‹åŒ–ä¸ºé›¶åˆ™ä¿è¯åˆå§‹æ—¶æ²¡æœ‰æ”¹å˜æƒé‡ï¼Œè¿™æ ·è®­ç»ƒå¯ä»¥é€æ­¥è¿›è¡Œã€‚\n\u003e\n\u003e 3. å¦‚æœBåˆå§‹åŒ–ä¸ºéé›¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´åˆå§‹Î”Wä¸ä¸ºé›¶ï¼Œä»è€Œå¼•å…¥ä¸å¿…è¦çš„å™ªå£°ï¼Œå½±å“è®­ç»ƒåˆå§‹é˜¶æ®µçš„ç¨³å®šæ€§ã€‚\n\u003e\n\u003e å¯èƒ½è¿˜æœ‰å…¶ä»–åŸå› ï¼Œæ¯”å¦‚ä¼˜åŒ–å™¨çš„åŠ¨æ€ç‰¹æ€§ã€‚æ¯”å¦‚ï¼Œå¦‚æœä½¿ç”¨Adamè¿™æ ·çš„ä¼˜åŒ–å™¨ï¼Œå‚æ•°çš„åˆå§‹æ­¥é•¿å¯èƒ½ä¼šæ ¹æ®æ¢¯åº¦çš„å†å²è¿›è¡Œè°ƒæ•´ã€‚å¦‚æœBåˆå§‹åŒ–ä¸ºé›¶ï¼Œé‚£ä¹ˆåœ¨æœ€åˆçš„å‡ æ¬¡è¿­ä»£ä¸­ï¼ŒBçš„æ¢¯åº¦å¯èƒ½ä¼šè¾ƒå°ï¼Œä»è€Œè°ƒæ•´å…¶å­¦ä¹ ç‡ï¼Œè€ŒAçš„éšæœºåˆå§‹åŒ–å¯èƒ½æœ‰åŠ©äºæ¢¯åº¦æ–¹å‘çš„å¤šæ ·æ€§ï¼Œä¿ƒè¿›æœ‰æ•ˆçš„å‚æ•°æ›´æ–°ã€‚\n\u003e\n\u003e å¦å¤–ï¼Œè¿˜éœ€è¦è€ƒè™‘çŸ©é˜µä¹˜æ³•çš„é¡ºåºã€‚åœ¨LoRAä¸­ï¼ŒÎ”W = B*Aï¼Œå‡è®¾Açš„ç»´åº¦æ˜¯dÃ—rï¼ŒBçš„ç»´åº¦æ˜¯rÃ—dï¼Œé‚£ä¹ˆBAçš„ä¹˜ç§¯æ˜¯dÃ—dçš„çŸ©é˜µï¼Œä¸åŸæƒé‡çŸ©é˜µWçš„å¤§å°ç›¸åŒã€‚å½“Båˆå§‹åŒ–ä¸ºé›¶æ—¶ï¼Œæ— è®ºAçš„å€¼å¦‚ä½•ï¼ŒÎ”Wéƒ½æ˜¯é›¶ï¼Œè¿™æ ·åˆå§‹çš„æ¨¡å‹è¾“å‡ºä¸ä¼šæ”¹å˜ã€‚ç„¶åï¼Œåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œé€šè¿‡è°ƒæ•´Bå’ŒAæ¥é€æ¸å­¦ä¹ Î”Wã€‚è¿™å¯èƒ½æ¯”åŒæ—¶éšæœºåˆå§‹åŒ–ä¸¤è€…æ›´ç¨³å®šï¼Œå› ä¸ºå¦‚æœä¸¤è€…éƒ½éšæœºåˆå§‹åŒ–ï¼ŒÎ”Wå¯èƒ½ä¼šæœ‰ä¸€ä¸ªè¾ƒå¤§çš„åˆå§‹å€¼ï¼Œå½±å“æ¨¡å‹çš„åˆå§‹è¡¨ç°ã€‚\n\u003e\n\u003e ä¾‹å¦‚ï¼Œå‡è®¾Aå’ŒBéƒ½æ˜¯éšæœºé«˜æ–¯åˆå§‹åŒ–ï¼Œå‡å€¼ä¸º0ï¼Œæ ‡å‡†å·®ä¸ºÏƒã€‚é‚£ä¹ˆBAçš„å…ƒç´ å°†æ˜¯ä¸¤ä¸ªç‹¬ç«‹é«˜æ–¯å˜é‡çš„ä¹˜ç§¯ä¹‹å’Œï¼Œè¿™å¯èƒ½ä¼šæœ‰è¾ƒå¤§çš„æ–¹å·®ï¼Œå¯¼è‡´Î”Wçš„åˆå§‹å€¼è¾ƒå¤§ï¼Œå¯èƒ½å¹²æ‰°é¢„è®­ç»ƒæ¨¡å‹çš„åŸå§‹æƒé‡ï¼Œå¯¼è‡´è®­ç»ƒåˆæœŸçš„ä¸ç¨³å®šã€‚è€Œå°†Båˆå§‹åŒ–ä¸ºé›¶ï¼Œåˆ™é¿å…äº†è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºåˆå§‹æ—¶Î”Wä¸ºé›¶ï¼Œä¹‹åéšç€è®­ç»ƒé€æ¸è°ƒæ•´ï¼Œè¿™æ ·æ›´å®‰å…¨ã€‚\n\u003e\n\u003e æ­¤å¤–ï¼Œè¿™ç§åˆå§‹åŒ–æ–¹å¼å¯èƒ½ç±»ä¼¼äºæ®‹å·®ç½‘ç»œä¸­çš„æ®‹å·®å—åˆå§‹åŒ–ï¼Œå°†æ®‹å·®è·¯å¾„åˆå§‹åŒ–ä¸ºé›¶ï¼Œä½¿å¾—åˆå§‹é˜¶æ®µç½‘ç»œä¸»è¦ä¾èµ–åŸå§‹è·¯å¾„ï¼Œç„¶åé€æ­¥å­¦ä¹ æ®‹å·®è°ƒæ•´ã€‚ç±»ä¼¼çš„æ€è·¯å¯èƒ½è¢«åº”ç”¨åˆ°äº†LoRAä¸­ï¼Œå³åˆå§‹æ—¶ä¸æ”¹å˜åŸæ¨¡å‹ï¼Œé€æ­¥è¿›è¡Œä½ç§©è°ƒæ•´ã€‚\n\u003e\n\u003e è¿˜æœ‰ä¸€ä¸ªè§’åº¦æ˜¯å‚æ•°çš„æ¢¯åº¦è®¡ç®—ã€‚å½“Båˆå§‹åŒ–ä¸ºé›¶æ—¶ï¼Œç¬¬ä¸€æ¬¡å‰å‘ä¼ æ’­ä¸­ï¼ŒBAä¸ºé›¶ï¼Œå› æ­¤åœ¨åå‘ä¼ æ’­æ—¶ï¼ŒæŸå¤±å‡½æ•°å¯¹Bçš„æ¢¯åº¦å°†ä¾èµ–äºAçš„å€¼ã€‚ç”±äºAæ˜¯éšæœºåˆå§‹åŒ–çš„ï¼Œè¿™æ ·Bçš„æ¢¯åº¦ä¼šæœ‰ä¸€å®šçš„æ–¹å‘æ€§ï¼Œä»è€Œå…è®¸Bè¢«æœ‰æ•ˆåœ°æ›´æ–°ã€‚ç›¸åï¼Œå¦‚æœAåˆå§‹åŒ–ä¸ºé›¶ï¼Œé‚£ä¹ˆBçš„æ¢¯åº¦ä¹Ÿä¼šæ˜¯é›¶ï¼Œå¯¼è‡´æ— æ³•æ›´æ–°å‚æ•°ã€‚å› æ­¤ï¼Œå¿…é¡»å°†Aéšæœºåˆå§‹åŒ–ï¼Œä»¥ä¾¿åœ¨ç¬¬ä¸€æ¬¡åå‘ä¼ æ’­æ—¶ï¼ŒBèƒ½å¤Ÿè·å¾—æœ‰æ•ˆçš„æ¢¯åº¦ã€‚\n\u003e\n\u003e ä¾‹å¦‚ï¼Œå‡è®¾æŸå¤±å‡½æ•°Lå¯¹Bçš„æ¢¯åº¦æ˜¯âˆ‚L/âˆ‚B = (âˆ‚L/âˆ‚(BA)) * A^Tã€‚å¦‚æœAåˆå§‹åŒ–ä¸ºé›¶ï¼Œé‚£ä¹ˆæ¢¯åº¦âˆ‚L/âˆ‚Bä¹Ÿä¸ºé›¶ï¼Œå¯¼è‡´Bæ— æ³•è¢«æ›´æ–°ã€‚è€Œå¦‚æœAæ˜¯éšæœºåˆå§‹åŒ–çš„ï¼Œåˆ™æ¢¯åº¦ä¸ä¸ºé›¶ï¼Œå…è®¸Bè¢«æ›´æ–°ã€‚åŒæ—¶ï¼ŒBåˆå§‹åŒ–ä¸ºé›¶ï¼Œé‚£ä¹ˆåœ¨ç¬¬ä¸€æ¬¡æ›´æ–°æ—¶ï¼ŒBçš„å€¼ä¼šæ ¹æ®æ¢¯åº¦è°ƒæ•´ï¼Œè€ŒAä¹Ÿä¼šæ ¹æ®æ¢¯åº¦è¿›è¡Œæ›´æ–°ã€‚è¿™æ ·ï¼Œä¸¤è€…å¯ä»¥ååŒå·¥ä½œï¼Œé€æ¸æ„å»ºå‡ºæœ‰æ•ˆçš„ä½ç§©æ›´æ–°çŸ©é˜µã€‚\n\u003e\n\u003e å› æ­¤ï¼Œæ€»ç»“å¯èƒ½çš„åŸå› ï¼š\n\u003e\n\u003e - ä¿æŒåˆå§‹Î”Wä¸ºé›¶ï¼Œç»´æŒé¢„è®­ç»ƒæ¨¡å‹çš„åˆå§‹è¡¨ç°ï¼Œä¿è¯è®­ç»ƒç¨³å®šæ€§ã€‚\n\u003e\n\u003e - éšæœºåˆå§‹åŒ–Aæ‰“ç ´å¯¹ç§°æ€§ï¼Œå…è®¸æ¢¯åº¦æœ‰æ•ˆæ›´æ–°Bçš„å‚æ•°ã€‚\n\u003e\n\u003e - é¿å…åˆå§‹Î”Wçš„éšæœºæ€§å¸¦æ¥çš„å¹²æ‰°ï¼Œåªé€šè¿‡è®­ç»ƒè¿‡ç¨‹é€æ­¥è°ƒæ•´ã€‚\n\u003e\n\u003e - å¦‚æœAåˆå§‹åŒ–ä¸ºéé›¶è€ŒBä¸ºé›¶ï¼Œè¿™æ ·BAä¸ºé›¶ï¼ŒåŒæ—¶å…è®¸æ¢¯åº¦åœ¨åå‘ä¼ æ’­æ—¶æœ‰æ•ˆä¼ é€’åˆ°Bï¼Œä»è€Œå¯åŠ¨è®­ç»ƒè¿‡ç¨‹ã€‚\n\u003e\n\u003e å¯èƒ½è¿˜æœ‰å…¶ä»–å› ç´ ï¼Œæ¯”å¦‚å®ç°ä¸Šçš„ç®€ä¾¿æ€§ï¼Œæˆ–è€…å®éªŒéªŒè¯è¿‡è¿™ç§åˆå§‹åŒ–æ–¹å¼çš„æ•ˆæœæ›´å¥½ã€‚ä½†æ ¸å¿ƒçš„æ•°å­¦å’Œä¼˜åŒ–åŸå› åº”è¯¥æ˜¯ä¸Šè¿°å‡ ç‚¹ã€‚\n\nåœ¨åˆå§‹åŒ–LoRAï¼ˆä½ç§©é€‚åº”ï¼‰æ—¶ï¼ŒçŸ©é˜µAé‡‡ç”¨éšæœºåˆå§‹åŒ–è€ŒçŸ©é˜µBåˆå§‹åŒ–ä¸ºé›¶ï¼Œä¸»è¦åŸå› å¦‚ä¸‹ï¼š\n\n1. **ä¿æŒåˆå§‹æ¨¡å‹ç¨³å®šæ€§**ï¼š  \n   å½“Båˆå§‹åŒ–ä¸ºé›¶æ—¶ï¼Œæ— è®ºAçš„å€¼å¦‚ä½•ï¼Œä½ç§©æ›´æ–°çŸ©é˜µÎ”W = BAåˆå§‹å€¼ä¸ºé›¶ã€‚è¿™ä½¿å¾—å¾®è°ƒå¼€å§‹æ—¶ï¼Œæ¨¡å‹çš„è¾“å‡ºä¸åŸå§‹é¢„è®­ç»ƒæ¨¡å‹å®Œå…¨ä¸€è‡´ï¼Œé¿å…äº†åˆå§‹é˜¶æ®µå› éšæœºæ‰°åŠ¨å¯¼è‡´çš„æ€§èƒ½æ³¢åŠ¨ï¼Œç¡®ä¿äº†è®­ç»ƒçš„ç¨³å®šæ€§ã€‚\n\n2. **æ¢¯åº¦æ›´æ–°çš„æœ‰æ•ˆæ€§**ï¼š  \n   éšæœºåˆå§‹åŒ–Aèƒ½å¤Ÿæ‰“ç ´å¯¹ç§°æ€§ï¼Œä½¿å¾—åå‘ä¼ æ’­æ—¶Bçš„æ¢¯åº¦ä¾èµ–äºAçš„éšæœºåˆå§‹å€¼ï¼ˆâˆ‚L/âˆ‚B = (âˆ‚L/âˆ‚Î”W) Â· Aáµ€ï¼‰ã€‚è‹¥Aåˆå§‹åŒ–ä¸ºé›¶ï¼ŒBçš„æ¢¯åº¦å°†ä¸ºé›¶ï¼Œå¯¼è‡´è®­ç»ƒæ— æ³•å¯åŠ¨ï¼›è€ŒéšæœºAä¸ºéé›¶ï¼Œä½¿å¾—Bçš„æ¢¯åº¦åœ¨ç¬¬ä¸€æ¬¡æ›´æ–°æ—¶å³å¯æœ‰æ•ˆè°ƒæ•´ã€‚\n\n3. **é€æ­¥å­¦ä¹ ä½ç§©æ›´æ–°**ï¼š  \n   é€šè¿‡Båˆå§‹ä¸ºé›¶ï¼ŒÎ”Wä»é›¶å¼€å§‹é€æ­¥ç§¯ç´¯æ›´æ–°é‡ï¼Œç±»ä¼¼äºæ®‹å·®å­¦ä¹ çš„æ€æƒ³ã€‚è¿™ç§ç­–ç•¥è®©æ¨¡å‹ä¼˜å…ˆä¾èµ–é¢„è®­ç»ƒæƒé‡ï¼Œå†é€æ¸å­¦ä¹ ä½ç§©è°ƒæ•´ï¼Œé¿å…äº†åˆå§‹è¾ƒå¤§çš„éšæœºÎ”Wå¯¹é¢„è®­ç»ƒçŸ¥è¯†çš„å¹²æ‰°ã€‚\n\n4. **ä¼˜åŒ–åŠ¨æ€çš„åˆç†æ€§**ï¼š  \n   è‹¥Aå’ŒBå‡éšæœºåˆå§‹åŒ–ï¼ŒÎ”Wçš„åˆå§‹å€¼å¯èƒ½å…·æœ‰è¾ƒå¤§çš„æ–¹å·®ï¼Œå¼•å…¥ä¸å¿…è¦çš„å™ªå£°ã€‚è€ŒBåˆå§‹ä¸ºé›¶æ—¶ï¼ŒÎ”Wçš„åˆå§‹æ–¹å·®ä¸ºé›¶ï¼Œè®­ç»ƒè¿‡ç¨‹ä¸­é€šè¿‡ååŒä¼˜åŒ–Aå’ŒBé€æ­¥å¼•å…¥æ›´æ–°ï¼Œæ›´ç¬¦åˆä½ç§©é€‚åº”çš„è®¾è®¡ç›®æ ‡ã€‚\n\nç»¼ä¸Šï¼Œè¿™ç§åˆå§‹åŒ–æ–¹å¼åœ¨æ•°å­¦ä¸Šç¡®ä¿äº†è®­ç»ƒçš„é«˜æ•ˆå¯åŠ¨ï¼ŒåŒæ—¶åœ¨å·¥ç¨‹å®è·µä¸­æå‡äº†å¾®è°ƒçš„ç¨³å®šæ€§å’Œæ•ˆæœã€‚\n\n## Q: BçŸ©é˜µéšæœºåˆå§‹åŒ–è€ŒAçŸ©é˜µåˆå§‹åŒ–æ—¶è®¾ä¸º 0 ä¸è¡Œå—ï¼Ÿ\n\n\u003e [!reasoning]-\n\u003e å¥½çš„ï¼Œç”¨æˆ·é—®å¦‚æœBçŸ©é˜µéšæœºåˆå§‹åŒ–è€ŒAçŸ©é˜µåˆå§‹åŒ–ä¸º0è¡Œä¸è¡Œã€‚æˆ‘éœ€è¦ä»”ç»†åˆ†æè¿™ä¸ªé—®é¢˜ã€‚é¦–å…ˆï¼Œå›æƒ³ä¸€ä¸‹ä¹‹å‰çš„å¯¹è¯ï¼Œç”¨æˆ·å·²ç»äº†è§£äº†LoRAåˆå§‹åŒ–æ—¶Aéšæœºï¼ŒBä¸º0çš„åŸå› ã€‚ç°åœ¨ä»–æƒ³åè¿‡æ¥ï¼Œå¯èƒ½æ˜¯åœ¨æ€è€ƒæ˜¯å¦æœ‰å…¶ä»–å¯èƒ½æ€§ã€‚\n\u003e\n\u003e æˆ‘éœ€è¦ä»åŸç†å‡ºå‘ï¼Œè€ƒè™‘è¿™ç§åˆå§‹åŒ–æ–¹å¼å¯¹è®­ç»ƒçš„å½±å“ã€‚å¦‚æœAåˆå§‹åŒ–ä¸º0ï¼Œé‚£ä¹ˆÎ”W = BAå°±ä¼šå˜æˆBä¹˜ä»¥0çŸ©é˜µï¼Œä¹Ÿå°±æ˜¯å…¨0ã€‚è¿™æ ·åœ¨è®­ç»ƒå¼€å§‹æ—¶ï¼Œå¾®è°ƒçš„æ¨¡å—ä¸ä¼šå¯¹åŸæ¨¡å‹äº§ç”Ÿå½±å“ï¼Œå’Œä¹‹å‰çš„æƒ…å†µç±»ä¼¼ã€‚ä½†æ˜¯è¿™é‡Œçš„å…³é”®æ˜¯æ¢¯åº¦å¦‚ä½•ä¼ æ’­ã€‚\n\u003e\n\u003e æ ¹æ®é“¾å¼æ³•åˆ™ï¼Œæ¢¯åº¦ä¼šä»æŸå¤±å‡½æ•°ä¼ åˆ°Î”Wï¼Œç„¶ååˆ†è§£åˆ°Bå’ŒAã€‚å¯¹äºAçš„æ¢¯åº¦æ˜¯Bçš„è½¬ç½®ä¹˜ä»¥Î”Wçš„æ¢¯åº¦ï¼Œè€ŒBçš„æ¢¯åº¦æ˜¯Î”Wçš„æ¢¯åº¦ä¹˜ä»¥Açš„è½¬ç½®ã€‚å¦‚æœAåˆå§‹ä¸º0ï¼Œé‚£ä¹ˆåœ¨ç¬¬ä¸€æ¬¡åå‘ä¼ æ’­æ—¶ï¼ŒBçš„æ¢¯åº¦ä¼šæ˜¯Î”Wçš„æ¢¯åº¦ä¹˜ä»¥0çŸ©é˜µï¼Œå¯¼è‡´Bçš„æ¢¯åº¦ä¸º0ã€‚è¿™æ—¶å€™Bæ— æ³•è¢«æ›´æ–°ï¼Œæ•´ä¸ªè®­ç»ƒå°±å¡ä½äº†ã€‚\n\u003e\n\u003e å¦å¤–ï¼ŒAçš„å‚æ•°å¦‚æœåˆå§‹ä¸º0ï¼Œåœ¨ç¬¬ä¸€æ¬¡å‰å‘æ—¶ï¼ŒÎ”Wæ˜¯0ï¼Œæ‰€ä»¥æ²¡é—®é¢˜ã€‚ä½†æ˜¯ç¬¬ä¸€æ¬¡åå‘ä¼ æ’­æ—¶ï¼ŒAçš„æ¢¯åº¦æ˜¯Bè½¬ç½®ä¹˜ä»¥Î”Wçš„æ¢¯åº¦ã€‚å¦‚æœBæ˜¯éšæœºåˆå§‹åŒ–çš„ï¼Œè¿™æ—¶å€™Açš„æ¢¯åº¦å¯èƒ½ä¼šæœ‰å€¼ï¼Œå¯ä»¥æ›´æ–°Aã€‚ä½†é—®é¢˜åœ¨äºï¼Œå½“Aè¢«æ›´æ–°åï¼Œä¸‹ä¸€æ¬¡å‰å‘æ—¶Î”W = B*Aä¼šæœ‰å˜åŒ–ã€‚ä½†è¿™é‡Œå¯èƒ½æœ‰ä¸€ä¸ªé¡ºåºé—®é¢˜ï¼Œæ¯”å¦‚ç¬¬ä¸€æ¬¡è¿­ä»£æ—¶Aæ˜¯0ï¼Œå¯¼è‡´Î”Wä¸º0ï¼ŒBçš„æ¢¯åº¦æ— æ³•æ›´æ–°ï¼Œè€ŒAçš„æ¢¯åº¦å¯èƒ½æœ‰æ•ˆï¼Œä½†ä¹‹åAè¢«æ›´æ–°åï¼ŒBæ‰ä¼šæœ‰æœºä¼šæ›´æ–°ã€‚è¿™æ—¶å€™æ˜¯å¦ä¼šå¯¼è‡´è®­ç»ƒä¸ç¨³å®šï¼Ÿ\n\u003e\n\u003e å¯èƒ½éœ€è¦æ›´ä»”ç»†åœ°åˆ†ææ¢¯åº¦æµã€‚å‡è®¾Aåˆå§‹ä¸º0ï¼ŒBéšæœºã€‚ç¬¬ä¸€æ¬¡å‰å‘æ—¶ï¼ŒÎ”W=0ï¼Œä¸å½±å“æ¨¡å‹è¾“å‡ºã€‚åå‘ä¼ æ’­æ—¶ï¼Œè®¡ç®—æ¢¯åº¦ï¼Œå¯¹Açš„æ¢¯åº¦æ˜¯âˆ‚L/âˆ‚A = B^T * âˆ‚L/âˆ‚Î”Wã€‚è€ŒBçš„æ¢¯åº¦æ˜¯âˆ‚L/âˆ‚B = âˆ‚L/âˆ‚Î”W * A^Tã€‚å› ä¸ºAåˆå§‹ä¸º0ï¼Œæ‰€ä»¥âˆ‚L/âˆ‚Bä¼šæ˜¯0ï¼Œå¯¼è‡´Båœ¨ç¬¬ä¸€æ¬¡æ›´æ–°æ—¶æ— æ³•è¢«ä¼˜åŒ–ã€‚è€ŒAçš„æ¢¯åº¦åˆ™å–å†³äºBçš„åˆå§‹å€¼å’ŒÎ”Wçš„æ¢¯åº¦ã€‚å¦‚æœBæ˜¯éšæœºåˆå§‹åŒ–çš„ï¼Œé‚£ä¹ˆAçš„æ¢¯åº¦ä¸ä¸º0ï¼Œå¯ä»¥æ›´æ–°Aã€‚è¿™æ ·åœ¨ç¬¬äºŒæ¬¡å‰å‘æ—¶ï¼ŒAå·²ç»ä¸æ˜¯0äº†ï¼ŒÎ”W=B*Aä¼šæœ‰éé›¶å€¼ï¼Œæ­¤æ—¶Bçš„æ¢¯åº¦ä¹Ÿä¼šå¼€å§‹æ›´æ–°ã€‚\n\u003e\n\u003e è¿™æ ·çœ‹èµ·æ¥å¯èƒ½å¯è¡Œï¼Œä½†å­˜åœ¨ä»€ä¹ˆé—®é¢˜å—ï¼Ÿæ¯”å¦‚è®­ç»ƒåˆæœŸçš„ä¸ç¨³å®šï¼Œæˆ–è€…éœ€è¦æ›´å¤šçš„è¿­ä»£æ‰èƒ½å¯åŠ¨ã€‚ä¸è¿‡åŸæ¥çš„æ–¹æ³•ä¸­ï¼ŒBåˆå§‹ä¸º0ï¼ŒAéšæœºï¼Œå¯ä»¥ä¿è¯Î”Wåˆå§‹ä¸º0ï¼ŒåŒæ—¶Bçš„æ¢¯åº¦åœ¨ç¬¬ä¸€æ¬¡æ›´æ–°æ—¶å°±å¯ä»¥é€šè¿‡Açš„éšæœºå€¼å¾—åˆ°æœ‰æ•ˆæ›´æ–°ã€‚è€Œåè¿‡æ¥ï¼ŒAåˆå§‹ä¸º0ï¼ŒBéšæœºï¼Œå¯¼è‡´Î”Wåˆå§‹ä¸º0ï¼Œä½†Bçš„æ¢¯åº¦åœ¨ç¬¬ä¸€æ¬¡æ— æ³•æ›´æ–°ï¼Œè€ŒAå¯ä»¥æ›´æ–°ã€‚è¿™æ ·åœ¨ç¬¬ä¸€æ¬¡è¿­ä»£åï¼ŒAæœ‰äº†æ›´æ–°å€¼ï¼Œç¬¬äºŒæ¬¡Bæ‰èƒ½å¼€å§‹æ›´æ–°ã€‚è¿™æ ·å¯èƒ½éœ€è¦å¤šä¸€ä¸ªæ­¥éª¤æ‰èƒ½è®©ä¸¤ä¸ªçŸ©é˜µéƒ½å¼€å§‹å­¦ä¹ ï¼Œå¯èƒ½å½±å“æ”¶æ•›é€Ÿåº¦ã€‚\n\u003e\n\u003e å¦å¤–ï¼Œå½“Aåˆå§‹ä¸º0ï¼ŒBéšæœºæ—¶ï¼Œè™½ç„¶Î”Wåˆå§‹ä¸º0ï¼Œä½†æ­¤æ—¶Açš„æ¢¯åº¦ä¾èµ–äºBçš„éšæœºå€¼ï¼Œå¯èƒ½å¯¼è‡´Açš„åˆå§‹æ›´æ–°æ–¹å‘å¸¦æœ‰è¾ƒå¤§çš„éšæœºæ€§ï¼Œè€ŒBæœ¬èº«æ²¡æœ‰è¢«è°ƒæ•´ï¼Œè¿™æ ·å¯èƒ½ä¼šå¼•å…¥æ›´å¤šçš„å™ªå£°ï¼Œå½±å“è®­ç»ƒçš„ç¨³å®šæ€§ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒåŸæ¥çš„æ–¹æ³•ä¸­ï¼ŒAéšæœºï¼ŒBä¸º0ï¼Œè¿™æ ·Î”Wåˆå§‹ä¸º0ï¼Œè€ŒBçš„æ¢¯åº¦ç›´æ¥ç”±Açš„éšæœºå€¼å’ŒæŸå¤±æ¢¯åº¦å†³å®šï¼Œå¯èƒ½æ›´æœ‰æ•ˆã€‚\n\u003e\n\u003e å†è€ƒè™‘ä¼˜åŒ–åŠ¨æ€ï¼ŒåŸæ¥çš„æ–¹æ³•ä¸­ï¼ŒBåˆå§‹ä¸º0ï¼Œæ„å‘³ç€åœ¨åˆå§‹é˜¶æ®µï¼Œåªæœ‰Açš„éšæœºæ€§è¢«å¼•å…¥ï¼Œä½†é€šè¿‡æ¢¯åº¦ä¸‹é™ï¼ŒBå¯ä»¥å¿«é€Ÿè°ƒæ•´ã€‚è€Œåè¿‡æ¥ï¼ŒAåˆå§‹ä¸º0ï¼ŒBéšæœºï¼Œè™½ç„¶Î”Wåˆå§‹ä¸º0ï¼Œä½†Açš„æ›´æ–°å¯èƒ½æ›´å¿«åœ°å¼•å…¥å˜åŒ–ï¼Œè€ŒBçš„è°ƒæ•´æ»åï¼Œå¯èƒ½å¯¼è‡´è®­ç»ƒåˆæœŸçš„ä¸ç¨³å®šã€‚\n\u003e\n\u003e æ€»ç»“æ¥è¯´ï¼Œè™½ç„¶ç†è®ºä¸Šå¯èƒ½å­˜åœ¨å¯è¡Œçš„è·¯å¾„ï¼Œä½†å®é™…ä¸­åŸæ¥çš„åˆå§‹åŒ–æ–¹å¼åœ¨æ¢¯åº¦æ›´æ–°æ•ˆç‡å’Œç¨³å®šæ€§ä¸Šæ›´ä¼˜ã€‚å› æ­¤ï¼Œå°†Aéšæœºã€Båˆå§‹åŒ–ä¸º0æ˜¯æ›´åˆç†çš„é€‰æ‹©ï¼Œè€Œåè¿‡æ¥å¯èƒ½å¯¼è‡´è®­ç»ƒæ•ˆç‡ä½ä¸‹æˆ–æ”¶æ•›å›°éš¾ã€‚\n\nå°†çŸ©é˜µ **B** éšæœºåˆå§‹åŒ–è€ŒçŸ©é˜µ **A** åˆå§‹åŒ–ä¸ºé›¶ï¼Œåœ¨ç†è®ºä¸Šè™½ç„¶å¯èƒ½ï¼Œä½†ä¼šå¯¼è‡´è®­ç»ƒæ•ˆç‡æ˜¾è‘—ä¸‹é™ç”šè‡³å¤±è´¥ã€‚ä»¥ä¸‹æ˜¯å…·ä½“åˆ†æï¼š\n\n---\n\n### **1. æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ï¼šåå‘ä¼ æ’­çš„æ•°å­¦é™åˆ¶**\n- **å‰å‘ä¼ æ’­**ï¼šè‹¥ **A** åˆå§‹åŒ–ä¸ºé›¶ï¼Œåˆ™åˆå§‹çš„æƒé‡æ›´æ–°ä¸ºï¼š\n  $$\n  \\Delta W = B \\cdot A = B \\cdot 0 = 0\n  $$\n  æ­¤æ—¶æ¨¡å‹çš„è¾“å‡ºä¸åŸå§‹é¢„è®­ç»ƒæ¨¡å‹ä¸€è‡´ï¼Œä¸æ ‡å‡† LoRA åˆå§‹åŒ–ç±»ä¼¼ã€‚\n\n- **åå‘ä¼ æ’­**ï¼š\n  - **B çš„æ¢¯åº¦**ï¼š  \n    $$\n    \\frac{\\partial L}{\\partial B} = \\frac{\\partial L}{\\partial \\Delta W} \\cdot A^\\top\n    $$\n    ç”±äº **A** åˆå§‹åŒ–ä¸ºé›¶ï¼Œ**B** çš„æ¢¯åº¦åœ¨ç¬¬ä¸€æ¬¡æ›´æ–°æ—¶ç›´æ¥ä¸ºé›¶ï¼Œå¯¼è‡´ **B** æ— æ³•è¢«ä¼˜åŒ–ï¼ˆæ¢¯åº¦æ¶ˆå¤±ï¼‰ã€‚\n\n  - **A çš„æ¢¯åº¦**ï¼š  \n    $$\n    \\frac{\\partial L}{\\partial A} = B^\\top \\cdot \\frac{\\partial L}{\\partial \\Delta W}\n    $$\n    è™½ç„¶ **A** çš„æ¢¯åº¦ä¸ä¸ºé›¶ï¼ˆå–å†³äºéšæœºåˆå§‹åŒ–çš„ **B**ï¼‰ï¼Œä½† **A** çš„æ›´æ–°éœ€è¦ä¸ **B** çš„æ›´æ–°ååŒæ‰èƒ½æœ‰æ•ˆè°ƒæ•´æƒé‡ã€‚ç”±äº **B** åœ¨åˆå§‹é˜¶æ®µæ— æ³•æ›´æ–°ï¼Œ**A** çš„æ›´æ–°æ–¹å‘ä¼šå—é™äºåˆå§‹éšæœºçš„ **B**ï¼Œå¯¼è‡´ä¼˜åŒ–è¿‡ç¨‹ä¸ç¨³å®šã€‚\n\n---\n\n### **2. è®­ç»ƒæ•ˆç‡çš„æ˜¾è‘—ä¸‹é™**\n- **B çš„å»¶è¿Ÿæ›´æ–°**ï¼š  \n  ç”±äº **B** çš„æ¢¯åº¦åœ¨ç¬¬ä¸€æ¬¡è¿­ä»£æ—¶ä¸ºé›¶ï¼Œå¿…é¡»ç­‰å¾… **A** è¢«æ›´æ–°ä¸ºéé›¶å€¼åï¼Œ**B** çš„æ¢¯åº¦æ‰ä¼šå¼€å§‹æœ‰æ•ˆæ›´æ–°ã€‚è¿™ä¼šå¼•å…¥é¢å¤–çš„è®­ç»ƒå»¶è¿Ÿï¼Œæ˜¾è‘—é™ä½æ”¶æ•›é€Ÿåº¦ã€‚\n\n- **å‚æ•°è€¦åˆé—®é¢˜**ï¼š  \n  LoRA çš„æ ¸å¿ƒè®¾è®¡æ˜¯ **ä½ç§©åˆ†è§£**ï¼ˆ$$\\Delta W = BA$$ï¼‰ï¼Œå…¶æœ‰æ•ˆæ€§ä¾èµ–äº **A** å’Œ **B** çš„ååŒä¼˜åŒ–ã€‚è‹¥ **A** åˆå§‹ä¸ºé›¶ï¼Œä¸¤è€…çš„ä¼˜åŒ–åŠ¨æ€è¢«è§£è€¦ï¼š**A** çš„æ›´æ–°ä¾èµ–äºéšæœºåˆå§‹åŒ–çš„ **B**ï¼Œè€Œ **B** çš„æ›´æ–°åˆéœ€è¦ç­‰å¾… **A** è¢«è°ƒæ•´ã€‚è¿™ç§è€¦åˆæ–­è£‚ä¼šå¯¼è‡´è®­ç»ƒè¿‡ç¨‹ä½æ•ˆä¸”ä¸ç¨³å®šã€‚\n\n---\n\n### **3. ä¸æ ‡å‡† LoRA åˆå§‹åŒ–çš„å¯¹æ¯”**\n- **æ ‡å‡†åˆå§‹åŒ–ï¼ˆAéšæœºï¼ŒB=0ï¼‰çš„ä¼˜åŠ¿**ï¼š  \n  - **B çš„æ¢¯åº¦æœ‰æ•ˆå¯åŠ¨**ï¼š  \n    ç”±äº **A** éšæœºåˆå§‹åŒ–ï¼Œ**B** çš„æ¢¯åº¦ $$\\frac{\\partial L}{\\partial B} = \\frac{\\partial L}{\\partial \\Delta W} \\cdot A^\\top$$ åœ¨ç¬¬ä¸€æ¬¡è¿­ä»£æ—¶å³å¯éé›¶ï¼Œç¡®ä¿ **B** ç«‹å³å‚ä¸ä¼˜åŒ–ã€‚\n  - **å¯¹ç§°æ€§æ‰“ç ´**ï¼š  \n    **A** çš„éšæœºæ€§å¤©ç„¶æ‰“ç ´äº†å‚æ•°å¯¹ç§°æ€§ï¼Œé¿å…äº†æ¢¯åº¦å†²çªã€‚\n  - **ç¨³å®šçš„æ®‹å·®å­¦ä¹ **ï¼š  \n    $$\\Delta W$$ ä»é›¶å¼€å§‹é€æ­¥å¢é•¿ï¼Œç¬¦åˆæ®‹å·®å­¦ä¹ çš„ç‰¹æ€§ï¼Œä¿æŠ¤äº†é¢„è®­ç»ƒçŸ¥è¯†ã€‚\n\n- **åè½¬åˆå§‹åŒ–ï¼ˆA=0ï¼ŒBéšæœºï¼‰çš„åŠ£åŠ¿**ï¼š  \n  - **B çš„æ¢¯åº¦æ¶ˆå¤±**ï¼šåˆå§‹é˜¶æ®µ **B** æ— æ³•æ›´æ–°ï¼Œå¯¼è‡´è®­ç»ƒ\"å†·å¯åŠ¨\"ã€‚\n  - **å‚æ•°ä¼˜åŒ–çš„å†²çª**ï¼š**A** çš„æ›´æ–°æ–¹å‘å—é™äºéšæœºåˆå§‹åŒ–çš„ **B**ï¼Œå¯èƒ½å¼•å…¥å™ªå£°ã€‚\n\n---\n\n### **4. å®éªŒè§’åº¦çš„éªŒè¯**\nåœ¨å®é™…ä»»åŠ¡ä¸­ï¼ˆå¦‚å¾®è°ƒ GPT æˆ– BERTï¼‰ï¼Œè‹¥å°† **A** åˆå§‹åŒ–ä¸ºé›¶ä¸” **B** éšæœºï¼Œé€šå¸¸ä¼šå¯¼è‡´ä»¥ä¸‹ç°è±¡ï¼š\n1. **è®­ç»ƒæŸå¤±éœ‡è¡**ï¼šç”±äº **A** å’Œ **B** çš„ä¼˜åŒ–åŠ¨æ€ä¸åŒ¹é…ï¼ŒæŸå¤±å‡½æ•°éš¾ä»¥ç¨³å®šä¸‹é™ã€‚\n2. **æ”¶æ•›é€Ÿåº¦ç¼“æ…¢**ï¼šéœ€è¦æ›´å¤šè¿­ä»£æ¬¡æ•°æ‰èƒ½è¾¾åˆ°ä¸æ ‡å‡†åˆå§‹åŒ–ç›¸å½“çš„æ€§èƒ½ã€‚\n3. **æœ€ç»ˆæ€§èƒ½ä¸‹é™**ï¼šå‚æ•°è€¦åˆé—®é¢˜å¯èƒ½å¯¼è‡´æ¨¡å‹é™·å…¥æ¬¡ä¼˜è§£ã€‚\n\n---\n\n### **ç»“è®ºï¼šä¸ºä»€ä¹ˆä¸èƒ½å°† A åˆå§‹åŒ–ä¸ºé›¶ï¼Ÿ**\n- **æ•°å­¦å±‚é¢**ï¼šæ¢¯åº¦æ¶ˆå¤±é—®é¢˜å¯¼è‡´ **B** æ— æ³•åœ¨åˆå§‹é˜¶æ®µæ›´æ–°ï¼Œç ´åäº†ä½ç§©åˆ†è§£çš„ä¼˜åŒ–åŠ¨æ€ã€‚\n- **å·¥ç¨‹å±‚é¢**ï¼šè®­ç»ƒæ•ˆç‡æ˜¾è‘—ä¸‹é™ï¼Œä¸”å¯èƒ½å¼•å…¥ä¸ç¨³å®šæ€§ã€‚\n- **è®¾è®¡å“²å­¦**ï¼šLoRA çš„ç›®æ ‡æ˜¯\"ä»¥æœ€å°çš„æ‰°åŠ¨é«˜æ•ˆè°ƒæ•´é¢„è®­ç»ƒæ¨¡å‹\"ã€‚æ ‡å‡†åˆå§‹åŒ–ï¼ˆAéšæœºï¼ŒB=0ï¼‰é€šè¿‡æ¢¯åº¦ååŒæ€§å’Œæ®‹å·®å­¦ä¹ çš„ç‰¹æ€§ï¼Œå®Œç¾å¥‘åˆè¿™ä¸€ç›®æ ‡ï¼›è€Œåè½¬åˆå§‹åŒ–è¿èƒŒäº†è¿™ä¸€è®¾è®¡åŸåˆ™ã€‚\n\nå› æ­¤ï¼Œ**A éšæœºåˆå§‹åŒ– + B åˆå§‹åŒ–ä¸ºé›¶**æ˜¯å”¯ä¸€åˆç†çš„åˆå§‹åŒ–ç­–ç•¥ã€‚\n\n","title":"LoRAå¾®è°ƒä¸­çš„çŸ©é˜µåˆå§‹åŒ–ç­–ç•¥ï¼šAéšæœºä¸Bé›¶åˆå§‹åŒ–","abstract":"\u003e æœ¬æ–‡æ˜¯ä¸ Deepseek-R1 æ¨¡å‹+Search çš„å¯¹è¯è®°å½•ï¼Œè¯¦ç»†æ¢è®¨äº† LoRAï¼ˆä½ç§©é€‚åº”ï¼‰å¾®è°ƒæŠ€æœ¯ä¸­çŸ©é˜µåˆå§‹åŒ–ç­–ç•¥çš„æ•°å­¦åŸç†ã€‚æ–‡ç« åˆ†æäº†ä¸ºä»€ä¹ˆåœ¨ LoRA ä¸­çŸ©é˜µ A é‡‡ç”¨éšæœºåˆå§‹åŒ–è€ŒçŸ©é˜µ B é‡‡ç”¨é›¶åˆå§‹åŒ–çš„åŸå› ï¼ŒåŒ…æ‹¬ä¿æŒåˆå§‹æ¨¡å‹ç¨³å®šæ€§ã€ç¡®ä¿æ¢¯åº¦æ›´æ–°æœ‰æ•ˆæ€§ã€å®ç°é€æ­¥å­¦ä¹ çš„ä½ç§©æ›´æ–°ç­‰æ–¹é¢ã€‚åŒæ—¶ï¼Œæ–‡ç« ä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆåå‘åˆå§‹åŒ–ç­–ç•¥ï¼ˆBéšæœºè€ŒAä¸ºé›¶ï¼‰åœ¨ç†è®ºä¸Šå­˜åœ¨é—®é¢˜ï¼Œä¼šå¯¼è‡´æ¢¯åº¦æ¶ˆå¤±å’Œè®­ç»ƒæ•ˆç‡ä¸‹é™ã€‚è¿™äº›åˆ†ææœ‰åŠ©äºç†è§£æ·±åº¦å­¦ä¹ ä¸­å‚æ•°é«˜æ•ˆå¾®è°ƒæŠ€æœ¯çš„è®¾è®¡åŸç†ã€‚\n\u003e [!reasoning]-\n\u003e å—¯ï¼Œè¿™ä¸ªé—®é¢˜æ˜¯å…³äºLoRAï¼ˆä½ç§©é€‚åº”ï¼‰åˆå§‹åŒ–çš„ã€‚ä¸ºä»€ä¹ˆåœ¨åˆå§‹åŒ–çš„æ—¶å€™ï¼ŒçŸ©é˜µAæ˜¯éšæœºåˆå§‹åŒ–çš„ï¼Œè€ŒçŸ©é˜µBæ˜¯é›¶åˆå§‹åŒ–çš„å‘¢ï¼Ÿæˆ‘éœ€è¦ä»”ç»†æ€è€ƒä¸€ä¸‹ã€‚","length":153,"created_at":"2025-03-05T02:00:00.000Z","updated_at":"2025-03-05T02:00:00.000Z","tags":["æ·±åº¦å­¦ä¹ ","LoRA","å‚æ•°é«˜æ•ˆå¾®è°ƒ","æ¨¡å‹è®­ç»ƒ","å­¦ä¹ ç¬”è®°"],"license":true}},{"pathMapping":{"filePath":"public/content/learn_from_ai/2024-12-08-cpp-rvo-and-rust-move-semantics.md","pagePath":"/learn_from_ai/cpp-rvo-and-rust-move-semantics","slug":"cpp-rvo-and-rust-move-semantics"},"meta":{"content":"\n\u003e **å‚è€ƒè¦ç‚¹:**\n\u003e - C++çš„å³å€¼å¼•ç”¨(T\u0026\u0026)ç”¨äºæ•è·ä¸´æ—¶å¯¹è±¡ï¼Œç§»åŠ¨è¯­ä¹‰é€šè¿‡è½¬ç§»èµ„æºæ‰€æœ‰æƒé¿å…ä¸å¿…è¦çš„å¤åˆ¶\n\u003e - è¿”å›å€¼ä¼˜åŒ–(RVO)æ˜¯ç¼–è¯‘å™¨ä¼˜åŒ–æŠ€æœ¯ï¼Œå¯ä»¥ç›´æ¥åœ¨è°ƒç”¨æ–¹æ ˆå¸§æ„é€ å¯¹è±¡ï¼Œé¿å…å¤åˆ¶\n\u003e - ç§»åŠ¨è¯­ä¹‰é€šè¿‡è½¬ç§»èµ„æºæŒ‡é’ˆå¹¶å°†æºå¯¹è±¡æŒ‡é’ˆç½®ç©ºæ¥å®‰å…¨è½¬ç§»èµ„æºæ‰€æœ‰æƒ\n\u003e - Rustä¹Ÿæœ‰ç±»ä¼¼çš„RVOä¼˜åŒ–ï¼Œä½†æ›´ä¾èµ–å…¶æ‰€æœ‰æƒç³»ç»Ÿå®ç°ä¸¥æ ¼çš„ç§»åŠ¨è¯­ä¹‰\n\u003e - Rustçš„å€Ÿç”¨æ£€æŸ¥å™¨ç¡®ä¿å†…å­˜å®‰å…¨ï¼Œé˜²æ­¢æ•°æ®ç«äº‰\n\n## Q:\nä»‹ç»C++çš„å³å€¼å¼•ç”¨å’Œç§»åŠ¨è¯­ä¹‰ï¼Œå¹¶è§£é‡Šå‡½æ•°è¿”å›å³å€¼å¼•ç”¨æ˜¯å¦‚ä½•é¿å…å†…å­˜æ‹·è´çš„ã€‚\n\n## A:\n### C++çš„å³å€¼å¼•ç”¨å’Œç§»åŠ¨è¯­ä¹‰\n\n#### å³å€¼å¼•ç”¨\n\nåœ¨C++ä¸­ï¼Œè¡¨è¾¾å¼å¯ä»¥åˆ†ä¸ºå·¦å€¼ï¼ˆLvalueï¼‰å’Œå³å€¼ï¼ˆRvalueï¼‰ï¼š\n\n- **å·¦å€¼ï¼ˆLvalueï¼‰**ï¼šæœ‰åç§°ä¸”å¯ä»¥æŒä¹…å­˜åœ¨çš„å¯¹è±¡ï¼Œä¾‹å¦‚å˜é‡ã€‚å·¦å€¼å¯ä»¥å–åœ°å€ï¼ˆ\u0026ï¼‰ã€‚\n  ```cpp\n  int a = 10; // a æ˜¯å·¦å€¼\n  ```\n\n- **å³å€¼ï¼ˆRvalueï¼‰**ï¼šæ²¡æœ‰åç§°ä¸”ä¸´æ—¶å¯¹è±¡ï¼Œä¾‹å¦‚å­—é¢é‡æˆ–è¡¨è¾¾å¼çš„ç»“æœã€‚å³å€¼ä¸èƒ½å–åœ°å€ã€‚\n  ```cpp\n  int b = 20 + 5; // 20 + 5 çš„ç»“æœæ˜¯å³å€¼\n  ```\n\n**å³å€¼å¼•ç”¨ï¼ˆT\u0026\u0026ï¼‰** æ˜¯ä¸“é—¨è®¾è®¡ç”¨æ¥æ•è·å³å€¼çš„å¼•ç”¨ç±»å‹ï¼Œå…è®¸æˆ‘ä»¬å®‰å…¨åœ°ä¿®æ”¹æˆ–è½¬ç§»å³å€¼çš„èµ„æºã€‚\n\n#### ç§»åŠ¨è¯­ä¹‰\n\nç§»åŠ¨è¯­ä¹‰æ˜¯C++11å¼•å…¥çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ï¼Œæ—¨åœ¨è§£å†³ä¼ ç»Ÿå¤åˆ¶è¯­ä¹‰çš„æ€§èƒ½é—®é¢˜ã€‚ä¼ ç»Ÿçš„æ·±è´ä¼šåˆ†é…æ–°çš„å†…å­˜ç©ºé—´å¹¶å¤åˆ¶æ•°æ®ï¼Œå¯¼è‡´æ€§èƒ½å¼€é”€è¾ƒå¤§ï¼Œå°¤å…¶æ˜¯å½“å¯¹è±¡åŒ…å«å¤§é‡èµ„æºï¼ˆå¦‚åŠ¨æ€åˆ†é…çš„å†…å­˜ã€å¤§å‹æ•°ç»„æˆ–æ–‡ä»¶å¥æŸ„ï¼‰æ—¶ã€‚\n\n**ç§»åŠ¨è¯­ä¹‰çš„æ ¸å¿ƒæ¦‚å¿µ**ï¼š\n\n1. **ç§»åŠ¨æ„é€ å‡½æ•°**ï¼šé€šè¿‡è½¬ç§»èµ„æºæ‰€æœ‰æƒæ„é€ æ–°å¯¹è±¡ï¼Œè€Œä¸æ˜¯å¤åˆ¶èµ„æºã€‚\n   ```cpp\n   class MyClass {\n   public:\n       MyClass(MyClass\u0026\u0026 other) noexcept { /* è½¬ç§»èµ„æº */ }\n   };\n   ```\n\n2. **ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦**ï¼šé€šè¿‡è½¬ç§»èµ„æºæ‰€æœ‰æƒèµ‹å€¼ï¼Œè€Œä¸æ˜¯å¤åˆ¶èµ„æºã€‚\n   ```cpp\n   class MyClass {\n   public:\n       MyClass\u0026 operator=(MyClass\u0026\u0026 other) noexcept { /* è½¬ç§»èµ„æº */ return *this; }\n   };\n   ```\n\n### å‡½æ•°è¿”å›å³å€¼å¼•ç”¨é¿å…å†…å­˜æ‹·è´\n\nå½“å‡½æ•°è¿”å›ä¸€ä¸ªå³å€¼å¼•ç”¨æ—¶ï¼Œå¯ä»¥é¿å…ä¸å¿…è¦çš„å†…å­˜æ‹·è´ï¼Œä»è€Œæé«˜ç¨‹åºæ€§èƒ½ã€‚è¿™æ˜¯å› ä¸ºå³å€¼å¼•ç”¨å…è®¸ç›´æ¥è½¬ç§»ä¸´æ—¶å¯¹è±¡çš„èµ„æºï¼Œè€Œä¸æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„å‰¯æœ¬ã€‚\n\n#### ç¤ºä¾‹\n\nè€ƒè™‘ä»¥ä¸‹ï¼š\n\n```cpp\n#include \u003ciostream\u003e\n#include \u003cstring\u003e\n\nclass MyClass {\npublic:\n    std::string data;\n\n    MyClass(std::string d) : data(std::move(d)) {\n        std::cout \u003c\u003c \"Constructing MyClass with data: \" \u003c\u003c data \u003c\u003c std::endl;\n    }\n\n    MyClass(MyClass\u0026\u0026 other) noexcept : data(std::move(other.data)) {\n        std::cout \u003c\u003c \"Moving MyClass with data: \" \u003c\u003c data \u003c\u003c std::endl;\n    }\n\n    MyClass\u0026 operator=(MyClass\u0026\u0026 other) noexcept {\n        if (this != \u0026other) {\n            data = std::move(other.data);\n        }\n        return *this;\n    }\n};\n\nMyClass createMyClass() {\n    MyClass temp(\"Temporary\");\n    return temp; // è¿”å›ä¸€ä¸ªå³å€¼\n}\n\nint main() {\n    MyClass obj = createMyClass(); // è§¦å‘ç§»åŠ¨æ„é€ å‡½æ•°\n    return 0;\n}\n```\n\n#### è§£é‡Š\n\n1. **å‡½æ•°è¿”å›å³å€¼**ï¼š\n   ```cpp\n   MyClass createMyClass() {\n       MyClass temp(\"Temporary\");\n       return temp; // è¿”å›ä¸€ä¸ªå³å€¼\n   }\n   ```\n\n   åœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼Œ`temp`æ˜¯ä¸€ä¸ªå±€éƒ¨å¯¹è±¡ï¼Œå½“å‡½æ•°è¿”å›æ—¶ï¼Œ`temp`ä¼šè¢«è§†ä¸ºä¸€ä¸ªå³å€¼ã€‚\n\n2. **ç§»åŠ¨æ„é€ å‡½æ•°è¢«è°ƒç”¨**ï¼š\n   ```cpp\n   MyClass obj = createMyClass(); // è§¦å‘ç§»åŠ¨æ„é€ å‡½æ•°\n   ```\n\n   ç”±äº`createMyClass()`è¿”å›çš„æ˜¯ä¸€ä¸ªå³å€¼ï¼Œç¼–è¯‘å™¨ä¼šä¼˜å…ˆé€‰æ‹©ç§»åŠ¨æ„é€ å‡½æ•°æ¥æ„é€ `obj`ï¼Œè€Œä¸æ˜¯å¤åˆ¶æ„é€ å‡½æ•°ã€‚\n\n3. **èµ„æºè½¬ç§»** ï¼š\n   åœ¨ç§»åŠ¨æ„é€ å‡½æ•°ä¸­ï¼Œèµ„æºçš„æ‰€æœ‰æƒè¢«è½¬ç§»ï¼Œè€Œä¸æ˜¯å¤åˆ¶ï¼š\n   ```cpp\n   MyClass(MyClass\u0026\u0026 other) noexcept : data(std::move(other.data)) {\n       std::cout \u003c\u003c \"Moving MyClass with data: \" \u003c\u003c data \u003c\u003c std::endl;\n   }\n   ```\n\n   è¿™é‡Œä½¿ç”¨`std::move`å°†`other.data`çš„èµ„æºè½¬ç§»åˆ°æ–°å¯¹è±¡ä¸­ï¼Œé¿å…äº†å†…å­˜æ‹·è´ã€‚\n\n### æ€»ç»“\n\né€šè¿‡ä½¿ç”¨å³å€¼å¼•ç”¨å’Œç§»åŠ¨è¯­ä¹‰ï¼ŒC++èƒ½å¤Ÿæœ‰æ•ˆåœ°é¿å…ä¸å¿…è¦çš„æ‹·è´ï¼Œæé«˜ç¨‹åºçš„æ€§èƒ½ã€‚å‡½æ•°è¿”å›å³å€¼å¼•ç”¨æ—¶ï¼Œå¯ä»¥ç›´æ¥åˆ©ç”¨ç§»åŠ¨æ„é€ å‡½æ•°è½¬ç§»èµ„æºï¼Œä»è€Œé¿å…äº†æ·±æ‹·è´çš„å¼€é”€ã€‚è¿™å¯¹äºåŒ…å«å¤§é‡èµ„æºçš„å¯¹è±¡å°¤ä¸ºé‡è¦ã€‚\n\n\n## Q:\n\nåœ¨ä½ çš„ä¾‹å­é‡Œï¼Œä¸ºä»€ä¹ˆ temp è¿”å›æ—¶èµ‹å€¼ç»™ obj å¯ä»¥ä¸å‘ç”Ÿå¤åˆ¶ï¼Ÿ temp åº”è¯¥åœ¨æ ˆä¸Šä¸æ˜¯å—ï¼Ÿå‡½æ•°å‡ºæ ˆæ—¶å¦‚æœä¸å‘ç”Ÿå¤åˆ¶ï¼Œtempä¸ä¼šè¢«å›æ”¶å—ï¼Ÿ\n\n## A:\n\nä½ æå‡ºçš„é—®é¢˜éå¸¸å…³é”®ï¼Œå®ƒæ¶‰åŠåˆ°C++ä¸­ä¸€ä¸ªé‡è¦çš„ä¼˜åŒ–æœºåˆ¶â€”â€”**è¿”å›å€¼ä¼˜åŒ–ï¼ˆReturn Value Optimization, RVOï¼‰**å’Œ**ç§»åŠ¨è¯­ä¹‰**ã€‚\n\n### è¿”å›å€¼ä¼˜åŒ–ï¼ˆRVOï¼‰\n\nåœ¨C++ä¸­ï¼Œç¼–è¯‘å™¨é€šå¸¸ä¼šè¿›è¡Œä¸€ç§ç§°ä¸ºè¿”å›å€¼ä¼˜åŒ–çš„ä¼˜åŒ–ï¼Œä»¥å‡å°‘ä¸å¿…è¦çš„å¤åˆ¶ã€‚å½“å‡½æ•°è¿”å›ä¸€ä¸ªå±€éƒ¨å¯¹è±¡æ—¶ï¼Œç¼–è¯‘å™¨å¯ä»¥ä¼˜åŒ–ä»£ç ï¼Œé¿å…å®é™…çš„å¤åˆ¶æ“ä½œã€‚\n\n#### RVOçš„å·¥ä½œåŸç†\n\nè€ƒè™‘ä»¥ä¸‹å‡½æ•°ï¼š\n\n```cpp\nMyClass createMyClass() {\n    MyClass temp(\"Temporary\");\n    return temp;\n}\n```\n\nåœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼Œ`temp`ç¡®å®æ˜¯ä¸€ä¸ªå±€éƒ¨å¯¹è±¡ï¼Œå­˜å‚¨åœ¨æ ˆä¸Šã€‚æŒ‰ç…§å¸¸è§„é€»è¾‘ï¼Œå½“å‡½æ•°è¿”å›æ—¶ï¼Œ`temp`ä¼šè¢«é”€æ¯ã€‚ç„¶è€Œï¼Œç¼–è¯‘å™¨å¯ä»¥åº”ç”¨RVOæ¥ä¼˜åŒ–è¿™ä¸€è¿‡ç¨‹ï¼š\n\n1. **ç¼–è¯‘å™¨ä¼˜åŒ–**ï¼šç¼–è¯‘å™¨åœ¨ç”Ÿæˆæœºå™¨ä»£ç æ—¶ï¼Œå¯ä»¥å†³å®šç›´æ¥åœ¨è°ƒç”¨æ–¹åˆ†é…`temp`æ‰€éœ€çš„å†…å­˜ï¼Œè€Œä¸æ˜¯åœ¨å‡½æ•°å†…éƒ¨åˆ†é…ã€‚è¿™æ ·ï¼Œtemp`çš„æ„é€ å®é™…ä¸Šå‘ç”Ÿåœ¨è°ƒç”¨æ–¹çš„æ ˆå¸§ä¸Šã€‚\n\n2. **é¿å…å¤åˆ¶**ï¼šç”±äº`temp`çš„æ„é€ ç›´æ¥å‘ç”Ÿåœ¨è°ƒç”¨æ–¹çš„æ ˆå¸§ä¸Šï¼Œè¿”å›æ—¶ä¸éœ€è¦è¿›è¡Œå¤åˆ¶æ“ä½œã€‚è¿™æ ·ï¼Œ`temp`çš„ç”Ÿå‘½å‘¨æœŸè‡ªç„¶å»¶ç»­åˆ°è°ƒç”¨æ–¹çš„ä½œç”¨åŸŸä¸­ã€‚\n\n### ç§»åŠ¨è¯­ä¹‰\n\nå³ä½¿æ²¡æœ‰RVOï¼ŒC++11å¼•å…¥çš„ç§»åŠ¨è¯­ä¹‰ä¹Ÿèƒ½æ˜¾è‘—å‡å°‘å¤åˆ¶çš„å¼€é”€ã€‚\n\n#### ç§»åŠ¨æ„é€ å‡½æ•°çš„ä½œç”¨\n\nåœ¨æ²¡æœ‰RVOçš„æƒ…å†µä¸‹ï¼Œå‡½æ•°è¿”å›å±€éƒ¨å¯¹è±¡æ—¶ï¼Œä¼šè§¦å‘æ„é€ å‡½æ•°ï¼ˆè€Œä¸æ˜¯å¤åˆ¶æ„é€ å‡½æ•°ï¼‰ï¼Œä»è€Œé¿å…æ·±æ‹·è´ï¼š\n\n```cpp\nMyClass obj = createMyClass();\n```\n\nè¿™é‡Œï¼Œ`createMyClass()`è¿”å›çš„æ˜¯ä¸€ä¸ªå³å€¼ï¼ˆä¸´æ—¶å¯¹è±¡ï¼‰ï¼Œå› æ­¤ç¼–è¯‘å™¨ä¼šè°ƒç”¨`MyClass`çš„ç§»åŠ¨æ„é€ å‡½æ•°æ¥æ„é€ `obj`ï¼š\n\n```cpp\nMyClass(MyClass\u0026\u0026 other) noexcept : data(std::move(other.data)) {\n    std::cout \u003c\u003c \"Moving MyClass with data: \" \u003c\u003c data \u003c\u003c std::endl;\n}\n```\n\nåœ¨æ„é€ å‡½æ•°ä¸­ï¼Œèµ„æºçš„æ‰€æœ‰æƒè¢«è½¬ç§»ï¼Œè€Œä¸æ˜¯å¤åˆ¶ã€‚è¿™æ ·ï¼Œå³ä½¿`temp`åœ¨`createMyClass()`å‡½æ•°ç»“æŸæ—¶è¢«é”€æ¯ï¼Œå…¶èµ„æºå·²ç»å®‰å…¨åœ°è½¬ç§»åˆ°äº†`obj`ä¸­ï¼Œé¿å…äº†å†…å­˜æ³„æ¼ã€‚\n\n### ç»“åˆRVOå’Œç§»åŠ¨è¯­ä¹‰\n\nåœ¨å®é™…åº”ç”¨ä¸­ï¼Œç¼–è¯‘å™¨ä¼šä¼˜å…ˆåº”ç”¨RVOæ¥é¿å…å¤åˆ¶ã€‚å¦‚æœRVOä¸å¯ç”¨æˆ–æœªèƒ½åº”ç”¨ï¼Œç¼–è¯‘å™¨ä¼šé€€è€Œæ±‚å…¶æ¬¡ï¼Œä½¿ç”¨ç§»åŠ¨è¯­ä¹‰æ¥å‡å°‘å¼€é”€ã€‚\n\n#### ç¤ºä¾‹ä»£ç ä¼˜åŒ–\n\nè€ƒè™‘ä»¥ä¸‹ç¤ºä¾‹ï¼š\n\n```cpp\n#include \u003ciostream\u003e\n#include \u003cstring\u003e\n\nclass MyClass {\npublic:\n    std::string data;\n\n    MyClass(std::string d) : data(std::move(d)) {\n        std::cout \u003c\u003c \"Constructing MyClass with data: \" \u003c\u003c data \u003c\u003c std::endl;\n    }\n\n    MyClass(MyClass\u0026\u0026 other) noexcept : data(std::move(other.data)) {\n        std::cout \u003c\u003c \"Moving MyClass with data: \" \u003c\u003c data \u003c\u003c std::endl;\n    }\n\n    MyClass\u0026 operator=(MyClass\u0026\u0026 other) noexcept {\n        if (this != \u0026other) {\n            data = std::move(other.data);\n        }\n        return *this;\n    }\n};\n\nMyClass createMyClass() {\n    MyClass temp(\"Temporary\");\n    return temp; // å¯èƒ½è§¦å‘RVOæˆ–ç§»åŠ¨æ„é€ \n}\n\nint main() {\n    MyClass obj = createMyClass(); // è§¦å‘RVOæˆ–ç§»åŠ¨æ„é€ \n    return 0;\n}\n```\n\nåœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼š\n\n1. **RVOä¼˜åŒ–**ï¼šç¼–è¯‘å™¨å¯èƒ½ä¼šåº”ç”¨RVOï¼Œç›´æ¥åœ¨`main`å‡½æ•°çš„æ ˆå¸§ä¸Šæ„é€ `temp`ï¼Œé¿å…å¤åˆ¶ã€‚\n2. **ç§»åŠ¨è¯­ä¹‰**ï¼šå¦‚æœRVOæœªåº”ç”¨ï¼Œ`createMyClass()`è¿”å›çš„ä¸´æ—¶å¯¹è±¡ä¼šè§¦å‘ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œè½¬ç§»èµ„æºã€‚\n\n### æ€»ç»“\n\n- **RVO**ï¼šç¼–è¯‘å™¨ä¼˜åŒ–ï¼Œç›´æ¥åœ¨è°ƒç”¨æ–¹åˆ†é…å†…å­˜ï¼Œé¿å…å¤åˆ¶ã€‚\n- **ç§»åŠ¨è¯­ä¹‰**ï¼šåœ¨æ²¡æœ‰RVOçš„æƒ…å†µä¸‹ï¼Œé€šè¿‡ç§»åŠ¨æ„é€ å‡½æ•°è½¬ç§»èµ„æºï¼Œå‡å°‘å¤åˆ¶å¼€é”€ã€‚\n\né€šè¿‡è¿™ä¸¤ç§æœºåˆ¶ï¼ŒC++èƒ½å¤Ÿæœ‰æ•ˆåœ°é¿å…å†…å­˜æ‹·è´ï¼Œæé«˜ç¨‹åºæ€§èƒ½ã€‚å³ä½¿å±€éƒ¨å¯¹è±¡åœ¨å‡½æ•°ç»“æŸæ—¶è¢«é”€æ¯ï¼Œå…¶èµ„æºå·²ç»å®‰å…¨åœ°è½¬ç§»åˆ°äº†è°ƒç”¨æ–¹ï¼Œé¿å…äº†èµ„æºæ³„æ¼ã€‚\n\n## Q:\n\nè§£é‡Šä¸€ä¸‹ä½ è¯´çš„â€œåœ¨æ²¡æœ‰RVOæƒ…å†µä¸‹ï¼Œå³ä½¿ `temp` åœ¨ `createMyClass()` å‡½æ•°ç»“æŸæ—¶è¢«é”€æ¯ï¼Œå…¶èµ„æºå·²ç»å®‰å…¨åœ°è½¬ç§»åˆ°äº† `obj` ä¸­ã€‚â€ åœ¨æˆ‘ç†è§£é‡Œï¼Œæ—¢ç„¶ `temp` åœ¨æ ˆä¸Šï¼Œé‚£ä»–çš„æ‰€æœ‰éæŒ‡é’ˆéå¼•ç”¨æˆå‘˜ä¹Ÿéƒ½ä¼šåœ¨æ ˆä¸Šï¼Œé‚£å‡½æ•°å‡ºæ ˆæ—¶ä¹Ÿéƒ½ä¼šè¢«å›æ”¶ã€‚é‚£è¿™äº›èµ„æºæ˜¯æ€ä¹ˆè½¬ç§»åˆ° `obj` ä¸­è€Œä¸å‘ç”Ÿå¤åˆ¶çš„ï¼Ÿ\n\n## A:\n\nä½ çš„ç–‘é—®éå¸¸åˆç†ï¼Œæ¶‰åŠåˆ°C++ä¸­èµ„æºç®¡ç†çš„æ ¸å¿ƒæ¦‚å¿µã€‚è®©æˆ‘ä»¬æ·±å…¥æ¢è®¨ä¸€ä¸‹åœ¨æ²¡æœ‰RVOçš„æƒ…å†µä¸‹ï¼Œå¦‚ä½•é€šè¿‡ç§»åŠ¨è¯­ä¹‰å®ç°èµ„æºçš„è½¬ç§»ï¼Œè€Œä¸ä»…ä»…æ˜¯ç®€å•çš„æ ˆä¸Šå†…å­˜æ‹·è´ã€‚\n\n### æ ˆä¸Šå¯¹è±¡å’Œèµ„æºç®¡ç†\n\né¦–å…ˆï¼Œæ˜ç¡®ä¸€ç‚¹ï¼šæ ˆä¸Šå¯¹è±¡çš„éæŒ‡é’ˆéå¼•ç”¨æˆå‘˜ç¡®å®æ˜¯åœ¨æ ˆä¸Šåˆ†é…çš„ï¼Œå¹¶ä¸”ä¼šåœ¨å‡½æ•°ç»“æŸæ—¶è¢«è‡ªåŠ¨é”€æ¯ã€‚ç„¶è€Œï¼Œå¯¹äºåŒ…å«åŠ¨æ€èµ„æºï¼ˆå¦‚åŠ¨æ€åˆ†é…çš„å†…å­˜ã€æ–‡ä»¶å¥æŸ„ç­‰ï¼‰ï¼Œèµ„æºçš„å®é™…ç®¡ç†æ˜¯é€šè¿‡æŒ‡é’ˆæˆ–å¼•ç”¨æ¥å®ç°çš„ã€‚\n\n### ç§»åŠ¨è¯­ä¹‰çš„æ ¸å¿ƒ\n\nç§»åŠ¨è¯­ä¹‰çš„æ ¸å¿ƒåœ¨äº**è½¬ç§»èµ„æºçš„æ‰€æœ‰æƒ**ï¼Œè€Œä¸æ˜¯å¤åˆ¶èµ„æºã€‚å¯¹äºåŒ…å«åŠ¨æ€èµ„æºçš„å¯¹è±¡ï¼Œç§»åŠ¨æ“ä½œé€šå¸¸æ¶‰åŠä»¥ä¸‹æ­¥éª¤ï¼š\n\n1. **å°†æºå¯¹è±¡çš„èµ„æºæŒ‡é’ˆèµ‹å€¼ç»™ç›®æ ‡å¯¹è±¡**ã€‚\n2. **å°†æºå¯¹è±¡çš„èµ„æºæŒ‡é’ˆç½®ä¸º`nullptr`**ï¼Œä»¥é˜²æ­¢å…¶ææ„æ—¶é‡Šæ”¾èµ„æºã€‚\n\nè¿™æ ·ï¼Œèµ„æºçš„æ‰€æœ‰æƒå°±ä»æºå¯¹è±¡è½¬ç§»åˆ°äº†ç›®æ ‡å¯¹è±¡ï¼Œè€Œæ— éœ€è¿›è¡Œå®é™…çš„å¤åˆ¶ã€‚\n\n### ç¤ºä¾‹è§£é‡Š\n\nè€ƒè™‘ä»¥ä¸‹ç¤ºä¾‹ï¼š\n\n```cpp\n#include \u003ciostream\u003e\n#include \u003cstring\u003e\n\nclass MyClass {\npublic:\n    std::string data;\n\n    MyClass(std::string d) : data(std::move(d)) {\n        std::cout \u003c\u003c \"Constructing MyClass with data: \" \u003c\u003c data \u003c\u003c std::endl;\n    }\n\n    // ç§»åŠ¨æ„é€ å‡½æ•°\n    MyClass(MyClass\u0026\u0026 other) noexcept : data(std::move(other.data)) {\n        std::cout \u003c\u003c \"Moving MyClass with data: \" \u003c\u003c data \u003c\u003c std::endl;\n    }\n\n    // ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦\n    MyClass\u0026 operator=(MyClass\u0026\u0026 other) noexcept {\n        if (this != \u0026other) {\n            data = std::move(other.data);\n        }\n        return *this;\n    }\n};\n\nMyClass createMyClass() {\n    MyClass temp(\"Temporary\");\n    return temp; // è¿”å›ä¸€ä¸ªå³å€¼\n}\n\nint main() {\n    MyClass obj = createMyClass(); // è§¦å‘ç§»åŠ¨æ„é€ å‡½æ•°\n    return 0;\n}\n```\n\n#### è¯¦ç»†æ­¥éª¤\n\n1. **æ„é€ å¯¹è±¡**ï¼š\n   ```cpp\n   MyClass temp(\"Temporary\");\n   ```\n   è¿™é‡Œï¼Œ`temp`æ˜¯ä¸€ä¸ªå±€éƒ¨å¯¹è±¡ï¼Œå…¶`data`æˆå‘˜æ˜¯ä¸€ä¸ª`std::string`ï¼Œå¯èƒ½åŒ…å«åŠ¨æ€åˆ†é…çš„å†…å­˜ã€‚\n\n2. **è¿”å›ä¸´æ—¶å¯¹è±¡**ï¼š\n   ```cpp\n   return temp;\n   ```\n   ç”±äº`temp`æ˜¯ä¸€ä¸ªå³å€¼ï¼Œç¼–è¯‘å™¨ä¼šä¼˜å…ˆé€‰æ‹©ç§»åŠ¨æ„é€ å‡½æ•°æ¥æ„é€ è¿”å›å€¼ã€‚\n\n3. **ç§»åŠ¨æ„é€ å‡½æ•°è¢«è°ƒç”¨**ï¼š\n   ```cpp\n   MyClass(MyClass\u0026\u0026 other) noexcept : data(std::move(other.data)) {\n       std::cout \u003c\u003c \"Moving MyClass with data: \" \u003c\u003c data \u003c\u003c std::endl;\n   }\n   ```\n   åœ¨ç§»åŠ¨æ„é€ å‡½æ•°ä¸­ï¼Œ`std::move(other.data)`å°†`other.data`çš„èµ„æºæ‰€æœ‰æƒè½¬ç§»ç»™`data`ã€‚å…·ä½“æ¥è¯´ï¼Œ`std::move`ä¼šå°†`other.data`å†…éƒ¨çš„æŒ‡é’ˆç›´æ¥èµ‹å€¼ç»™`data`ï¼Œå¹¶å°†`other.data`å†…éƒ¨çš„æŒ‡é’ˆç½®ä¸º`nullptr`ã€‚\n\n4. **èµ„æºè½¬ç§»** - `data`ç°åœ¨æ‹¥æœ‰åŸæ¥`temp.data`çš„èµ„æºã€‚\n   - `temp.data`è¢«ç½®ä¸º`nullptr`ï¼Œåœ¨å…¶ææ„æ—¶ä¸ä¼šé‡Šæ”¾èµ„æºã€‚\n\n5. **å‡½æ•°ç»“æŸæ—¶`temp`è¢«é”€æ¯**ï¼š\n   å½“`createMyClass()`å‡½æ•°ç»“æŸæ—¶ï¼Œ`temp`ä¼šè¢«é”€æ¯ã€‚ä½†ç”±äºå…¶`data`æˆå‘˜çš„æŒ‡é’ˆå·²ç»è¢«ç½®ä¸º`nullptr`ï¼Œææ„æ—¶ä¸ä¼šé‡Šæ”¾å®é™…èµ„æºã€‚\n\n6. **`obj`æ‹¥æœ‰èµ„æº**ï¼š\n   ```\n   MyClass obj = createMyClass();\n   ```\n   `obj`é€šè¿‡ç§»åŠ¨æ„é€ å‡½æ•°è·å¾—äº†`temp`çš„èµ„æºï¼Œé¿å…äº†æ·±æ‹·è´ã€‚\n\n### æ€»ç»“\n\nåœ¨æ²¡æœ‰RVOçš„æƒ…å†µä¸‹ï¼Œç§»åŠ¨è¯­ä¹‰é€šè¿‡ä»¥ä¸‹æ–¹å¼é¿å…å¤åˆ¶ï¼š\n\n- **è½¬ç§»èµ„æºæŒ‡é’ˆ**ï¼šå°†æºå¯¹è±¡çš„èµ„æºæŒ‡é’ˆç›´æ¥èµ‹å€¼ç»™ç›®æ ‡å¯¹è±¡ã€‚\n- **ç½®ç©ºæºå¯¹è±¡æŒ‡é’ˆ**ï¼šå°†æºå¯¹è±¡çš„èµ„æºæŒ‡é’ˆç½®ä¸º`nullptr`ï¼Œé˜²æ­¢å…¶ææ„æ—¶é‡Šæ”¾èµ„æºã€‚\n\nè¿™æ ·ï¼Œèµ„æºçš„æ‰€æœ‰æƒä»æºå¯¹è±¡å®‰å…¨åœ°åˆ°äº†ç›®æ ‡å¯¹è±¡ï¼Œè€Œæ— éœ€è¿›è¡Œå®é™…çš„èµ„æºå¤åˆ¶ã€‚å³ä½¿æºå¯¹è±¡åœ¨æ ˆä¸Šå¹¶åœ¨å‡½æ•°ç»“æŸæ—¶è¢«é”€æ¯ï¼Œå…¶èµ„æºå·²ç»è½¬ç§»åˆ°äº†ç›®æ ‡å¯¹è±¡ä¸­ï¼Œä¸ä¼šå‘ç”Ÿèµ„æºæ³„æ¼ã€‚\n\n### å…³é”®ç‚¹\n\n- **åŠ¨æ€èµ„æºç®¡ç†**ï¼šé€šè¿‡æŒ‡é’ˆæˆ–å¼•ç”¨ç®¡ç†åŠ¨æ€èµ„æºã€‚\n- **ç§»åŠ¨æ“ä½œ**ï¼šè½¬ç§»èµ„æºæ‰€æœ‰æƒï¼Œè€Œä¸æ˜¯å¤åˆ¶èµ„æºã€‚\n- **å®‰å…¨è½¬ç§»**ï¼šç¡®ä¿æºå¯¹è±¡åœ¨ææ„æ—¶ä¸ä¼šé‡Šæ”¾å·²è½¬ç§»çš„èµ„æºã€‚\n\né€šè¿‡è¿™ç§æ–¹å¼ï¼ŒC++å®ç°äº†é«˜æ•ˆä¸”å®‰å…¨çš„èµ„æºç®¡ç†ï¼Œæ˜¾è‘—æé«˜äº†æ€§èƒ½ã€‚\n\n## Q:\n\nåœ¨ Rust ä¸­ï¼Œæœ‰æ²¡æœ‰ç±»ä¼¼çš„ RVO ä¼˜åŒ–æˆ–ç§»åŠ¨è¯­ä¹‰ï¼Ÿ\n\n## A:\n\nåœ¨Rustä¸­ï¼Œç¡®å®å­˜åœ¨ç±»ä¼¼äºC++ä¸­çš„è¿”å›å€¼ä¼˜åŒ–ï¼ˆRVOï¼‰å’Œç§»åŠ¨è¯­ä¹‰çš„æœºåˆ¶ï¼Œä½†Rustçš„å®ç°æ–¹å¼å’Œæœ¯è¯­æœ‰æ‰€ä¸åŒã€‚Rustçš„è®¾è®¡ç†å¿µå¼ºè°ƒå†…å­˜å®‰å…¨å’Œæ€§èƒ½ï¼Œå› æ­¤å®ƒå†…ç½®äº†è®¸å¤šä¼˜åŒ–æœºåˆ¶æ¥é¿å…ä¸å¿…è¦çš„å†…å­˜æ‹·è´ã€‚\n\n### Rustä¸­çš„RVOä¼˜åŒ–\n\nRustç¼–è¯‘å™¨ï¼ˆå¦‚`rustc`ï¼‰ä¹Ÿä¼šè¿›è¡Œè¿”å›å€¼ä¼˜åŒ–ï¼ˆRVOï¼‰ï¼Œå°½ç®¡Rustç¤¾åŒºä¸ç»å¸¸ä½¿ç”¨â€œRVOâ€è¿™ä¸ªæœ¯è¯­ã€‚ustçš„ç¼–è¯‘å™¨ä¼šå°½é‡å‡å°‘ä¸å¿…è¦çš„å¤åˆ¶ï¼Œå°¤å…¶æ˜¯åœ¨å‡½æ•°è¿”å›å€¼æ—¶ã€‚\n\n#### ç¤ºä¾‹\n\nè€ƒè™‘ä»¥ä¸‹Rustä»£ç ï¼š\n\n```rust\nstruct MyStruct {\n    data: String,\n}\n\nimpl MyStruct {\n    fn new(data: String) -\u003e MyStruct {\n        MyStruct { data }\n    }\n}\n\nfn create_my_struct() -\u003e MyStruct {\n    MyStruct::new(\"Temporary\".to_string())\n}\n\nfn main() {\n    let obj = create_my_struct();\n}\n```\n\nåœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ`create_my_struct`å‡½æ•°è¿”å›ä¸€ä¸ª`My`å®ä¾‹ã€‚Rustç¼–è¯‘å™¨å¯èƒ½ä¼šåº”ç”¨RVOä¼˜åŒ–ï¼Œç›´æ¥åœ¨`main`å‡½æ•°çš„æ ˆå¸§ä¸Šæ„é€ `MyStruct`å®ä¾‹ï¼Œé¿å…ä¸å¿…è¦çš„å¤åˆ¶ã€‚\n\n### Rustä¸­çš„ç§»åŠ¨è¯­ä¹‰\n\nRustçš„ç§»åŠ¨è¯­ä¹‰æ˜¯å…¶æ‰€æœ‰æƒç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºé«˜æ•ˆåœ°ç®¡ç†èµ„æºã€‚Rustä¸­çš„ç§»åŠ¨è¯­ä¹‰æ¯”C++æ›´ä¸ºä¸¥æ ¼å’Œæ˜¾å¼ã€‚\n\n#### ç§»åŠ¨è¯­ä¹‰çš„å·¥ä½œåŸç†\n\nåœ¨Rustä¸­ï¼Œå½“ä¸€ä¸ªå€¼è¢«ç§»åŠ¨åˆ°å¦ä¸€ä¸ªå˜é‡æ—¶ï¼ŒåŸå˜é‡å°†ä¸å†æœ‰æ•ˆï¼Œé˜²æ­¢äº†å‚å¼•ç”¨ã€‚\n\n#### ç¤ºä¾‹\n\n```rust\nfn main() {\n    let x = String::from(\"hello\");\n    let y = x; // x çš„æ‰€æœ‰æƒç§»åŠ¨åˆ° yï¼Œx ä¸å†æœ‰æ•ˆ\n\n    // ä¸‹é¢çš„ä»£ç ä¼šæŠ¥é”™ï¼Œå› ä¸º x å·²ç»ä¸å†æœ‰æ•ˆ\n    // println!(\"x: {}\", x);\n    println!(\"y: {}\", y);\n}\n```\n\nåœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ`x`çš„æ‰€æœ‰æƒç§»åŠ¨åˆ°`y`ï¼Œä¹‹å`x`ä¸å†æœ‰æ•ˆã€‚è¿™ç§æœºåˆ¶ç¡®ä¿äº†å†…å­˜ï¼Œé¿å…äº†æ‚¬å‚å¼•ç”¨ã€‚\n\n### Rustä¸­çš„ç§»åŠ¨æ„é€ \n\nRustçš„ç§»åŠ¨æ„é€ æ˜¯é€šè¿‡æ‰€æœ‰æƒè½¬ç§»å®ç°çš„ã€‚å½“ä¸€ä¸ªå¯¹è±¡è¢«ç§»åŠ¨æ—¶ï¼Œå…¶å†…éƒ¨èµ„æºçš„æ‰€æœ‰æƒä¹Ÿä¼šéšä¹‹è½¬ç§»ã€‚\n\n#### ç¤ºä¾‹\n\n```rust\nstruct MyStruct {\n    data: String,\n}\n\nimpl MyStruct {\n    fn new(data: String) -\u003e MyStruct {\n        MyStruct { data }\n    }\n}\n\nfn main() {\n    let a = MyStruct::new(\"Temporary\".to_string());\n    let b = a; // a çš„æ‰€æœ‰æƒç§»åŠ¨åˆ° bï¼Œ ä¸å†æœ‰æ•ˆ\n\n    // ä¸‹é¢çš„ä»£ç ä¼šæŠ¥é”™ï¼Œå› ä¸º a å·²ç»ä¸å†æœ‰æ•ˆ\n    // println!(\"a: {:?}\", a);\n    println!(\"b: {:?}\", b);\n}\n```\n\nåœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ`a`çš„æ‰€æœ‰æƒç§»åŠ¨åˆ°`b`ï¼Œ`a`ä¸å†æœ‰æ•ˆã€‚`MyStruct`çš„`data`æˆå‘˜ï¼ˆä¸€ä¸ª`String`ï¼‰çš„æ‰€æœ‰æƒä¹Ÿéšä¹‹è½¬ç§»ã€‚\n\n### Rustä¸­çš„å€Ÿç”¨æ£€æŸ¥\n\nRustçš„å€Ÿç”¨æ£€æŸ¥å™¨ç¡®ä¿åœ¨ä»»æ„æ—¶åˆ»ï¼Œè¦ä¹ˆåªæœ‰ä¸€ä¸ªå¯å˜å¼•ç”¨ï¼Œæœ‰å¤šä¸ªä¸å¯å˜å¼•ç”¨ï¼Œä»è€Œé˜²æ­¢æ•°æ®ç«äº‰ã€‚\n\n#### ç¤ºä¾‹\n\n```rust\nfn main() {\n    let mut x = String::from(\"hello\");\n    let y = \u0026x; // ä¸å¯å˜å€Ÿç”¨\n    let z = \u0026mut x; // å¯å˜å€Ÿç”¨ï¼Œéœ€è¦å…ˆé‡Šæ”¾ y çš„å€Ÿç”¨\n\n    println!(\"y: {}\", y);\n    println!(\"z: {}\", z);\n}\n```\n\nåœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ`y`æ˜¯å¯¹`x`çš„ä¸å¯å˜å€Ÿç”¨ï¼Œ`z`æ˜¯å¯¹x`çš„å¯å˜å€Ÿç”¨ã€‚Rustçš„å€Ÿç”¨æ£€æŸ¥å™¨ç¡®ä¿åœ¨`z`çš„å¯å˜å€Ÿç”¨ç”Ÿæ•ˆå‰ï¼Œ`y`çš„å€Ÿç”¨å·²ç»è¢«é‡Šæ”¾ã€‚\n\n### æ€»ç»“\n\n- **RVOä¼˜åŒ–**ï¼šRustç¼–è¯‘å™¨ä¼šè¿›è¡Œç±»ä¼¼çš„è¿”å›å€¼ä¼˜åŒ–ï¼Œå‡å°‘ä¸å¿…è¦çš„å¤åˆ¶ã€‚\n- **ç§»åŠ¨è¯­ä¹‰**ï¼šRusté€šè¿‡æ‰€æœ‰æƒç³»ç»Ÿå®ç°ä¸¥æ ¼çš„ç§»åŠ¨è¯­ä¹‰ï¼Œç¡®ä¿å†…å­˜å®‰å…¨ã€‚\n- **å€Ÿç”¨æ£€æŸ¥**ï¼šRustçš„å€Ÿç”¨æ£€æŸ¥å™¨é˜²æ­¢æ•°æ®ç«äº‰ï¼Œç¡®ä¿å†…å­˜å®‰å…¨ã€‚\n\nRustçš„è¿™äº›å…±åŒä½œç”¨ï¼Œæä¾›äº†é«˜æ•ˆä¸”å®‰å…¨çš„èµ„æºç®¡ç†ï¼Œé¿å…äº†ä¸å¿…è¦çš„å†…å­˜æ‹·è´ï¼ŒåŒæ—¶ç¡®ä¿äº†ç¨‹åºçš„å†…å­˜å®‰å…¨æ€§ã€‚\n\n","title":"C++å³å€¼å¼•ç”¨ä¸Rustç§»åŠ¨è¯­ä¹‰","abstract":"\u003e **å‚è€ƒè¦ç‚¹:**\n\u003e - C++çš„å³å€¼å¼•ç”¨(T\u0026\u0026)ç”¨äºæ•è·ä¸´æ—¶å¯¹è±¡ï¼Œç§»åŠ¨è¯­ä¹‰é€šè¿‡è½¬ç§»èµ„æºæ‰€æœ‰æƒé¿å…ä¸å¿…è¦çš„å¤åˆ¶\n\u003e - è¿”å›å€¼ä¼˜åŒ–(RVO)æ˜¯ç¼–è¯‘å™¨ä¼˜åŒ–æŠ€æœ¯ï¼Œå¯ä»¥ç›´æ¥åœ¨è°ƒç”¨æ–¹æ ˆå¸§æ„é€ å¯¹è±¡ï¼Œé¿å…å¤åˆ¶","length":466,"created_at":"2024-12-08T12:00:00.000Z","updated_at":"2024-12-08T12:00:00.000Z","tags":["C++","Rust","ç¼–ç¨‹è¯­è¨€"],"license":true}},{"pathMapping":{"filePath":"public/content/learn_from_ai/2024-12-08-executable-file-formats.md","pagePath":"/learn_from_ai/executable-file-formats","slug":"executable-file-formats"},"meta":{"content":"\n\u003e æœ¬æ–‡ä»‹ç»äº†å‡ ç§ä¸»è¦çš„å¯æ‰§è¡Œæ–‡ä»¶æ ¼å¼ï¼ŒåŒ…æ‹¬Linuxç³»ç»Ÿä½¿ç”¨çš„ELFæ ¼å¼ã€Windowsç³»ç»Ÿä½¿ç”¨çš„PEæ ¼å¼ã€ä»¥åŠmacOSç³»ç»Ÿä½¿ç”¨çš„Mach-Oæ ¼å¼ç­‰ã€‚æ–‡ç« è¯¦ç»†è®¨è®ºäº†æ¯ç§æ ¼å¼çš„ç‰¹ç‚¹ã€ä½¿ç”¨å¹³å°å’Œå†å²æ¼”å˜ï¼Œå¸®åŠ©è¯»è€…ç†è§£ä¸åŒæ“ä½œç³»ç»Ÿä¸­äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼çš„å·®å¼‚ã€‚\n\n## Q: è§£é‡Š: ELF æ‰§è¡Œæ–‡ä»¶\n\nELFï¼ˆExecutable and Linkable Formatï¼‰æ‰§è¡Œæ–‡ä»¶æ˜¯ä¸€ç§ç”¨äºLinuxå’Œç±»Unixæ“ä½œç³»ç»Ÿçš„æ ‡å‡†äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼ã€‚å®ƒåŒ…å«äº†å¯æ‰§è¡Œç¨‹åºã€å…±äº«åº“ã€ç›®æ ‡æ–‡ä»¶å’Œæ ¸å¿ƒè½¬å‚¨æ–‡ä»¶ã€‚ELFæ–‡ä»¶æ ¼å¼è®¾è®¡çµæ´»ã€å¯æ‰©å±•ï¼Œå¹¶ä¸”å¯ç§»æ¤ï¼Œå®ƒå®šä¹‰äº†ç¨‹åºä»£ç çš„åŠ è½½å’Œæ‰§è¡Œæ–¹å¼ï¼ŒåŒ…æ‹¬ä»£ç æ®µã€æ•°æ®æ®µã€ç¬¦å·è¡¨å’Œé‡å®šä½ä¿¡æ¯ç­‰ã€‚æ“ä½œç³»ç»Ÿæ ¹æ®ELFæ–‡ä»¶ä¸­çš„è¿™äº›ä¿¡æ¯æ¥å’Œæ‰§è¡Œç¨‹åºã€‚ELFæ ¼å¼ä¹Ÿå…è®¸ç¨‹åºå…±äº«åº“ï¼Œå³å¤šä¸ªç¨‹åºå¯ä»¥å…±äº«åŒä¸€æ®µä»£ç ï¼Œä»è€Œå‡å°‘å†…å­˜å ç”¨å¹¶æé«˜æ•ˆç‡ã€‚åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­ï¼ŒELFæ–‡ä»¶ä½œä¸ºç›®æ ‡æ–‡ä»¶æ ¼å¼åœ¨ç¼–è¯‘æ—¶ç”Ÿæˆï¼Œå¹¶æœ€ç»ˆç”±é“¾æ¥å™¨ç»„åˆå½¢æˆå¯æ‰§è¡Œæ–‡ä»¶æˆ–å…±äº«åº“ã€‚\n\n## Q: æœ‰ä¸ ELF ç›¸å¹¶åˆ—çš„å¦å¤–çš„ä¸€äº›äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼å—ï¼Ÿ\n\næ˜¯çš„ï¼Œé™¤äº†ELFï¼ˆExecutable and Linking Formatï¼‰ä¹‹å¤–ï¼Œè¿˜æœ‰å…¶ä»–å‡ ç§å¸¸è§çš„äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼ï¼Œå®ƒä»¬åœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿå’Œå¹³å°ä¸Šè¢«å¹¿æ³›ä½¿ç”¨ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ä¸»è¦çš„äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼ï¼š\n\n1. **PEï¼ˆPortable Executableï¼‰**ï¼š\n   - **ä½¿ç”¨å¹³å°**ï¼šä¸»è¦åœ¨Windowsæ“ä½œç³»ç»Ÿä¸Šä½¿ç”¨ã€‚\n   - **ç‰¹ç‚¹**ï¼šPEæ ¼å¼æ˜¯COFFï¼ˆCommon Object File Formatï¼‰çš„æ‰©å±•ï¼Œç”¨äºå¯æ‰§è¡Œæ–‡ä»¶ã€ç›®æ ‡æ–‡ä»¶ã€åŠ¨æ€é“¾æ¥åº“DLLsï¼‰å’Œé©±åŠ¨ç¨‹åºç­‰ã€‚PEæ–‡ä»¶åŒ…å«ä¸€ä¸ªå¤´éƒ¨ï¼ˆPE headerï¼‰ã€èŠ‚è¡¨ï¼ˆsection tableï¼‰å’Œå„ä¸ªèŠ‚ï¼ˆsectionsï¼‰ï¼Œå¦‚ä»£ç èŠ‚ã€æ•°æ®èŠ‚ç­‰ã€‚\n\n2. **Mach-Oï¼ˆMach Objectï¼‰**ï¼š\n   - **ä½¿ç”¨å¹³å°**ï¼šä¸»è¦åœ¨Appleçš„macOSå’ŒiOSæ“ä½œç³»ç»Ÿä¸Šä½¿ç”¨ã€‚\n   - **ç‰¹ç‚¹**ï¼šMach-Oæ ¼å¼ç”¨äºå­˜å‚¨å¯æ‰§è¡Œæ–‡ä»¶ã€ç›®æ ‡æ–‡ä»¶å’ŒåŠ¨æ€åº“ã€‚å®ƒåŒ…å«å¤šä¸ªæ®µï¼ˆsegmentså’ŒèŠ‚ï¼ˆsectionsï¼‰ï¼Œæ”¯æŒå¤šç§æ¶æ„ï¼Œå¹¶ä¸”å¯ä»¥åŒ…å«å¤šä¸ªæ¶æ„çš„ä»£ç ï¼ˆç§°ä¸º\"fat binary\"ï¼‰ã€‚\n\n3. **COFFï¼ˆCommon Object File Formatï¼‰**ï¼š\n   - **ä½¿ç”¨å¹³å°**ï¼šæ—©æœŸåœ¨Unix System Vå’ŒWindows NTä¸Šä½¿ç”¨ã€‚\n   - **ç‰¹ç‚¹**ï¼šCOFFæ ¼å¼æ˜¯ä¸€ç§é€šç”¨çš„ç›®æ ‡æ–‡ä»¶æ ¼å¼ï¼ŒåŒ…å«ä»£ç ã€æ•°æ®å’Œé‡å®šä½ä¿¡æ¯ã€‚è™½ç„¶ç°åœ¨è¾ƒå°‘ç›´æ¥ä½¿ç”¨ï¼Œä½†å®ƒçš„è®¸å¤šæ¦‚å¿µå’Œç»“æ„è¢«PEå’ŒELFç»§æ‰¿ã€‚\n\n4. **a.outï¼ˆAssembler Outputï¼‰**ï¼š\n   - **ä½¿ç”¨å¹³å°**ï¼šæ—©æœŸUnixç³»ç»Ÿä¸Šä½¿ç”¨ã€‚\n   - **ç‰¹ç‚¹**ï¼ša.outæ˜¯ä¸€ç§è¾ƒç®€å•çš„äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼ï¼ŒåŒ…å«å¯æ‰§è¡Œä»£ç ã€æ•°æ®å’Œç¬¦å·è¡¨ã€‚éšç€ELFæ ¼å¼çš„å‡ºç°ï¼Œa.outé€æ¸è¢«æ·˜æ±°ã€‚\n\n5. **DOS MZï¼ˆMark Zbikowskiï¼‰**ï¼š\n   - **ä½¿ç”¨å¹³å°**ï¼šæ—©æœŸDOSå’ŒWindowsç³»ç»Ÿä¸Šä½¿ç”¨ã€‚\n   - **ç‰¹ç‚¹**ï¼šDOSZæ ¼å¼æ˜¯DOSå¯æ‰§è¡Œæ–‡ä»¶çš„æ ¼å¼ï¼Œä»¥\"MZ\"ï¼ˆå¼€å‘è€…Mark Zbikowskiçš„é¦–å­—æ¯ï¼‰ä½œä¸ºæ–‡ä»¶å¤´éƒ¨çš„æ ‡è¯†ã€‚å®ƒè¢«åæ¥çš„PEæ ¼å¼æ‰€å–ä»£ã€‚\n\n6. **COMæ–‡ä»¶**ï¼š\n   - **ä½¿ç”¨å¹³å°**ï¼šæ—©æœŸDOSç³»ç»Ÿä¸Šä½¿ç”¨ã€‚\n   - **ç‰¹ç‚¹**ï¼šCOMæ–‡ä»¶æ˜¯ä¸€ç§éå¸¸ç®€å•çš„å¯æ‰§è¡Œæ–‡ä»¶æ ¼å¼ï¼Œä»…åŒ…å«ä»£ç å’Œæ•°æ®ï¼Œæ²¡æœ‰å¤´éƒ¨ä¿¡æ¯ï¼Œå¤§å°é™åˆ¶ä¸º64KBã€‚\n\nè¿™äº›äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼å„æœ‰ç‰¹ç‚¹ï¼Œé€‚ç”¨äºä¸åŒçš„å’Œåœºæ™¯ã€‚å®ƒä»¬åœ¨æ–‡ä»¶ç»“æ„ã€åŠ è½½æœºåˆ¶å’ŒåŠŸèƒ½æ”¯æŒä¸Šæœ‰æ‰€ä¸åŒï¼Œä½†éƒ½æ—¨åœ¨å®ç°ç¨‹åºä»£ç çš„æœ‰æ•ˆå­˜å‚¨å’Œæ‰§è¡Œã€‚\n\n","title":"å¯æ‰§è¡Œæ–‡ä»¶æ ¼å¼å¯¹æ¯”ï¼šELFã€PEã€Mach-Oç­‰","abstract":"\u003e æœ¬æ–‡ä»‹ç»äº†å‡ ç§ä¸»è¦çš„å¯æ‰§è¡Œæ–‡ä»¶æ ¼å¼ï¼ŒåŒ…æ‹¬Linuxç³»ç»Ÿä½¿ç”¨çš„ELFæ ¼å¼ã€Windowsç³»ç»Ÿä½¿ç”¨çš„PEæ ¼å¼ã€ä»¥åŠmacOSç³»ç»Ÿä½¿ç”¨çš„Mach-Oæ ¼å¼ç­‰ã€‚æ–‡ç« è¯¦ç»†è®¨è®ºäº†æ¯ç§æ ¼å¼çš„ç‰¹ç‚¹ã€ä½¿ç”¨å¹³å°å’Œå†å²æ¼”å˜ï¼Œå¸®åŠ©è¯»è€…ç†è§£ä¸åŒæ“ä½œç³»ç»Ÿä¸­äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼çš„å·®å¼‚ã€‚\nELFï¼ˆExecutable and Linkable Formatï¼‰æ‰§è¡Œæ–‡ä»¶æ˜¯ä¸€ç§ç”¨äºLinuxå’Œç±»Unixæ“ä½œç³»ç»Ÿçš„æ ‡å‡†äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼ã€‚å®ƒåŒ…å«äº†å¯æ‰§è¡Œç¨‹åºã€å…±äº«åº“ã€ç›®æ ‡æ–‡ä»¶å’Œæ ¸å¿ƒè½¬å‚¨æ–‡ä»¶ã€‚ELFæ–‡ä»¶æ ¼å¼è®¾è®¡çµæ´»ã€å¯æ‰©å±•ï¼Œå¹¶ä¸”å¯ç§»æ¤ï¼Œå®ƒå®šä¹‰äº†ç¨‹åºä»£ç çš„åŠ è½½å’Œæ‰§è¡Œæ–¹å¼ï¼ŒåŒ…æ‹¬ä»£ç æ®µã€æ•°æ®æ®µã€ç¬¦å·è¡¨å’Œé‡å®šä½ä¿¡æ¯ç­‰ã€‚æ“ä½œç³»ç»Ÿæ ¹æ®ELFæ–‡ä»¶ä¸­çš„è¿™äº›ä¿¡æ¯æ¥å’Œæ‰§è¡Œç¨‹åºã€‚ELFæ ¼å¼ä¹Ÿå…è®¸ç¨‹åºå…±äº«åº“ï¼Œå³å¤šä¸ªç¨‹åºå¯ä»¥å…±äº«åŒä¸€æ®µä»£ç ï¼Œä»è€Œå‡å°‘å†…å­˜å ç”¨å¹¶æé«˜æ•ˆç‡ã€‚åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­ï¼ŒELFæ–‡ä»¶ä½œä¸ºç›®æ ‡æ–‡ä»¶æ ¼å¼åœ¨ç¼–è¯‘æ—¶ç”Ÿæˆï¼Œå¹¶æœ€ç»ˆç”±é“¾æ¥å™¨ç»„åˆå½¢æˆå¯æ‰§è¡Œæ–‡ä»¶æˆ–å…±äº«åº“ã€‚\næ˜¯çš„ï¼Œé™¤äº†ELFï¼ˆExecutable and Linking Formatï¼‰ä¹‹å¤–ï¼Œè¿˜æœ‰å…¶ä»–å‡ ç§å¸¸è§çš„äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼ï¼Œå®ƒä»¬åœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿå’Œå¹³å°ä¸Šè¢«å¹¿æ³›ä½¿ç”¨ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ä¸»è¦çš„äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼ï¼š","length":38,"created_at":"2024-12-08T02:00:00.000Z","updated_at":"2024-12-08T02:00:00.000Z","tags":["Linux","Windows","macOS","å¯æ‰§è¡Œæ–‡ä»¶","å­¦ä¹ ç¬”è®°"],"license":true}},{"pathMapping":{"filePath":"public/content/learn_from_ai/2024-11-29-opencv-coordinate-system-conventions.md","pagePath":"/learn_from_ai/opencv-coordinate-system-conventions","slug":"opencv-coordinate-system-conventions"},"meta":{"content":"\n\u003e ğŸ“ æœ¬æ–‡æ˜¯æˆ‘åœ¨å­¦ä¹  OpenCV æ—¶é‡åˆ°çš„ä¸€ä¸ªé—®é¢˜ã€‚é—®é¢˜çš„è§£ç­”å’Œä¸­æ–‡ç¿»è¯‘å‡ç”± AI ç”Ÿæˆã€‚\n\n## OpenCV åæ ‡è¡¨ç¤ºï¼šç†è§£ (y, x) ä¸ (x, y) çš„åŒºåˆ«\n\n## Q\n\nWhy sometimes opencv represent a point coordinate as (y,x) (e.g. the result of cv2.findContours) , and sometimes it represent as (x, y) (e.g. the arg `center` of cv2.circle)?\n\n\u003e ä¸ºä»€ä¹ˆ OpenCV æœ‰æ—¶ç”¨ (y,x) è¡¨ç¤ºåæ ‡ç‚¹ï¼ˆæ¯”å¦‚ cv2.findContours çš„è¿”å›å€¼ï¼‰ï¼Œæœ‰æ—¶åˆç”¨ (x,y) è¡¨ç¤ºï¼ˆæ¯”å¦‚ cv2.circle å‡½æ•°çš„ `center` å‚æ•°ï¼‰ï¼Ÿ\n\n## A\n\nOpenCV uses different conventions for different functions based on their specific requirements and historical reasons:\n\n\u003e OpenCV åŸºäºä¸åŒå‡½æ•°çš„å…·ä½“éœ€æ±‚å’Œå†å²åŸå› ï¼Œä½¿ç”¨äº†ä¸åŒçš„åæ ‡è¡¨ç¤ºçº¦å®šï¼š\n\n1. **(y, x) Convention**: This is often used when dealing with image matrices directly. In image processing, images are typically represented as 2D arrays where the first dimension is the row (height, y-coordinate) and the second dimension is the column (width, x-coordinate). Functions like `cv2.findContours` return coordinates in this order to match the array indexing.\n\n\u003e 1. **(y, x) çº¦å®š**ï¼šè¿™ç§è¡¨ç¤ºæ–¹æ³•é€šå¸¸ç”¨äºç›´æ¥å¤„ç†å›¾åƒçŸ©é˜µæ—¶ã€‚åœ¨å›¾åƒå¤„ç†ä¸­ï¼Œå›¾åƒé€šå¸¸è¡¨ç¤ºä¸ºäºŒç»´æ•°ç»„ï¼Œå…¶ä¸­ç¬¬ä¸€ç»´æ˜¯è¡Œï¼ˆé«˜åº¦ï¼Œy åæ ‡ï¼‰ï¼Œç¬¬äºŒç»´æ˜¯åˆ—ï¼ˆå®½åº¦ï¼Œx åæ ‡ï¼‰ã€‚åƒ `cv2.findContours` è¿™æ ·çš„å‡½æ•°è¿”å›è¿™ç§é¡ºåºçš„åæ ‡æ˜¯ä¸ºäº†åŒ¹é…æ•°ç»„ç´¢å¼•æ–¹å¼ã€‚\n\n2. **(x, y) Convention**: This is used in functions that deal with geometric shapes or points in a more traditional Cartesian coordinate system, where `x` is the horizontal axis and `y` is the vertical axis. Functions like `cv2.circle` use this convention to specify the center of the circle.\n\n\u003e 2. **(x, y) çº¦å®š**ï¼šè¿™ç§è¡¨ç¤ºæ–¹æ³•ç”¨äºå¤„ç†å‡ ä½•å›¾å½¢æˆ–åœ¨ä¼ ç»Ÿç¬›å¡å°”åæ ‡ç³»ä¸­çš„ç‚¹ï¼Œå…¶ä¸­ `x` æ˜¯æ°´å¹³è½´ï¼Œ`y` æ˜¯å‚ç›´è½´ã€‚åƒ `cv2.circle` è¿™æ ·çš„å‡½æ•°ä½¿ç”¨è¿™ç§çº¦å®šæ¥æŒ‡å®šåœ†å¿ƒä½ç½®ã€‚\n\nThe inconsistency arises because OpenCV aims to balance between image matrix operations and geometric operations, each having their own conventional coordinate systems.\n\n\u003e è¿™ç§ä¸ä¸€è‡´æ€§çš„å‡ºç°æ˜¯å› ä¸º OpenCV éœ€è¦åœ¨å›¾åƒçŸ©é˜µè¿ç®—å’Œå‡ ä½•è¿ç®—ä¹‹é—´å–å¾—å¹³è¡¡ï¼Œè€Œè¿™ä¸¤ç§è¿ç®—å„è‡ªæœ‰å…¶ä¼ ç»Ÿçš„åæ ‡ç³»ç»Ÿè¡¨ç¤ºæ–¹æ³•ã€‚\n","title":"OpenCV åæ ‡è¡¨ç¤ºï¼šç†è§£ (y, x) ä¸ (x, y) çš„åŒºåˆ«","abstract":"\u003e ğŸ“ æœ¬æ–‡æ˜¯æˆ‘åœ¨å­¦ä¹  OpenCV æ—¶é‡åˆ°çš„ä¸€ä¸ªé—®é¢˜ã€‚é—®é¢˜çš„è§£ç­”å’Œä¸­æ–‡ç¿»è¯‘å‡ç”± AI ç”Ÿæˆã€‚\nWhy sometimes opencv represent a point coordinate as (y,x) (e.g. the result of cv2.findContours) , and sometimes it represent as (x, y) (e.g. the arg `center` of cv2.circle)?\n\u003e ä¸ºä»€ä¹ˆ OpenCV æœ‰æ—¶ç”¨ (y,x) è¡¨ç¤ºåæ ‡ç‚¹ï¼ˆæ¯”å¦‚ cv2.findContours çš„è¿”å›å€¼ï¼‰ï¼Œæœ‰æ—¶åˆç”¨ (x,y) è¡¨ç¤ºï¼ˆæ¯”å¦‚ cv2.circle å‡½æ•°çš„ `center` å‚æ•°ï¼‰ï¼Ÿ","length":29,"created_at":"2024-11-29T03:00:00.000Z","updated_at":"2024-11-29T03:00:00.000Z","tags":["OpenCV","å›¾åƒå¤„ç†","å­¦ä¹ ç¬”è®°"],"license":true}},{"pathMapping":{"filePath":"public/content/learn_from_ai/2024-11-29-deep-learning-model-formats.md","pagePath":"/learn_from_ai/deep-learning-model-formats","slug":"deep-learning-model-formats"},"meta":{"content":"\n\u003e æœ¬é¡µé¢ä»‹ç»äº†ä¸‰ç§æœºå™¨å­¦ä¹ æ¨¡å‹æ–‡ä»¶æ ¼å¼ï¼š.pthã€.safetensor å’Œ .onnxã€‚ä¸»è¦å†…å®¹åŒ…æ‹¬æ¯ç§æ ¼å¼çš„å®šä¹‰ã€ä¿å­˜çš„å†…å®¹ã€ç”¨é€”ä»¥åŠå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«å’Œè½¬æ¢æ–¹æ³•ã€‚\n\n## pytorch ä¿å­˜çš„ .pth æ–‡ä»¶é‡Œéƒ½ä¿å­˜äº†äº›ä»€ä¹ˆä¸œè¥¿ï¼Ÿ\n\nPyTorch ä¸­çš„`.pth`æ–‡ä»¶é€šå¸¸ç”¨äºä¿å­˜æ¨¡å‹çš„æƒé‡ï¼ˆparametersï¼‰å’Œè®­ç»ƒè¿‡ç¨‹ä¸­çš„ä¼˜åŒ–å™¨çŠ¶æ€ï¼ˆoptimizer stateï¼‰ã€‚å…·ä½“æ¥è¯´ï¼Œä¸€ä¸ª`.pth`æ–‡ä»¶å¯èƒ½åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š\n\n1. **æ¨¡å‹çŠ¶æ€å­—å…¸ï¼ˆModel state dictionaryï¼‰**ï¼š\n   - è¿™æ˜¯`.pth`æ–‡ä»¶ä¸­æœ€ä¸»è¦çš„éƒ¨åˆ†ï¼Œå®ƒåŒ…å«äº†æ¨¡å‹çš„æ‰€æœ‰æƒé‡ï¼ˆå³ç¥ç»ç½‘ç»œçš„å‚æ•°ï¼‰ï¼ŒåŒ…æ‹¬å·ç§¯å±‚çš„æ»¤æ³¢å™¨ã€å…¨è¿æ¥å±‚çš„æƒé‡å’Œåç½®ç­‰ã€‚\n   - çŠ¶æ€å­—å…¸æ˜¯ä¸€ä¸ªç®€å•çš„ Python å­—å…¸å¯¹è±¡ï¼Œå…¶é”®æ˜¯å±‚çš„åå­—ï¼Œå€¼æ˜¯ç›¸åº”çš„å‚æ•°å¼ é‡ã€‚\n2. **ä¼˜åŒ–å™¨çŠ¶æ€å­—å…¸ï¼ˆOptimizer state dictionaryï¼‰**ï¼š\n   - å½“ä¿å­˜æ¨¡å‹æ—¶ï¼Œé€šå¸¸ä¹Ÿä¼šä¿å­˜ä¼˜åŒ–å™¨çš„çŠ¶æ€ï¼Œè¿™æ ·å¯ä»¥åœ¨æ¨¡å‹è®­ç»ƒä¸­æ–­åï¼Œä»ä¸Šæ¬¡åœæ­¢çš„åœ°æ–¹ç»§ç»­è®­ç»ƒã€‚\n   - ä¼˜åŒ–å™¨çŠ¶æ€å­—å…¸é€šå¸¸åŒ…å«æ¯ä¸ªå‚æ•°çš„æ¢¯åº¦ã€åŠ¨é‡ï¼ˆmomentumï¼‰å’Œå…¶ä»–ä¸ä¼˜åŒ–å™¨ç›¸å…³çš„çŠ¶æ€ä¿¡æ¯ï¼ˆä¾‹å¦‚ Adam ä¼˜åŒ–å™¨çš„çŸ©ä¼°è®¡ï¼‰ã€‚\n3. **å…¶ä»–å¯é€‰ä¿¡æ¯**ï¼š\n   - æœ‰æ—¶å€™ï¼Œ`.pth`æ–‡ä»¶å¯èƒ½è¿˜ä¼šåŒ…å«å…¶ä»–è¾…åŠ©ä¿¡æ¯ï¼Œæ¯”å¦‚è®­ç»ƒçš„æŸå¤±å€¼ã€é¢å¤–çš„å…ƒæ•°æ®æˆ–è€…æ‰¹å¤„ç†å¤§å°ç­‰ï¼Œä½†è¿™äº›ä¿¡æ¯ä¸æ˜¯å¿…é¡»çš„ã€‚\n     ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå±•ç¤ºå¦‚ä½•åœ¨ PyTorch ä¸­ä¿å­˜å’ŒåŠ è½½`.pth`æ–‡ä»¶ï¼š\n\n```python\n# ä¿å­˜æ¨¡å‹å’Œä¼˜åŒ–å™¨çŠ¶æ€\ntorch.save({\n    'epoch': epoch,\n    'model_state_dict': model.state_dict(),\n    'optimizer_state_dict': optimizer.state_dict(),\n    'loss': loss,\n    ...\n}, 'model.pth')\n# åŠ è½½æ¨¡å‹å’Œä¼˜åŒ–å™¨çŠ¶æ€\ncheckpoint = torch.load('model.pth')\nmodel.load_state_dict(checkpoint['model_state_dict'])\noptimizer.load_state_dict(checkpoint['optimizer_state_dict'])\nepoch = checkpoint['epoch']\nloss = checkpoint['loss']\n...\n```\n\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`model`æ˜¯ä½ è¦ä¿å­˜çš„æ¨¡å‹å¯¹è±¡ï¼Œ`optimizer`æ˜¯è®­ç»ƒè¯¥æ¨¡å‹ä½¿ç”¨çš„ä¼˜åŒ–å™¨ã€‚é€šè¿‡`torch.save`å‡½æ•°ï¼Œä½ å¯ä»¥å°†æ¨¡å‹çš„çŠ¶æ€å­—å…¸å’Œä¼˜åŒ–å™¨çš„çŠ¶æ€å­—å…¸ä¿å­˜åˆ°æ–‡ä»¶ä¸­ã€‚ä¹‹åï¼Œå¯ä»¥ä½¿ç”¨`torch.load`å‡½æ•°æ¥æ¢å¤è¿™äº›çŠ¶æ€ï¼Œä»¥ä¾¿ç»§ç»­è®­ç»ƒæˆ–è€…è¿›è¡Œæ¨ç†ã€‚\n\n## .safetensor æ–‡ä»¶ä¸­åˆä¿å­˜äº†ä»€ä¹ˆä¸œè¥¿ï¼Ÿ\n\n`.safetensor` æ–‡ä»¶æ ¼å¼æ˜¯ç”± Hugging Face çš„ Safety Checker å·¥å…·å¼•å…¥çš„ï¼Œå®ƒæ˜¯ä¸ºäº†åœ¨æ¨¡å‹æ¨ç†æ—¶æä¾›ä¸€ä¸ªé¢å¤–çš„å®‰å…¨å±‚ã€‚`.safetensor` æ–‡ä»¶ä¸­ä¿å­˜çš„å†…å®¹ä¸»è¦åŒ…æ‹¬ï¼š\n\n1. **æ¨¡å‹æƒé‡**ï¼š\n   - è¿™æ˜¯æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œä¸ PyTorch çš„ `.pth` æ–‡ä»¶ç±»ä¼¼ï¼Œ`.safetensor` æ–‡ä»¶ä¹Ÿä¿å­˜äº†æ¨¡å‹çš„æƒé‡ï¼Œå³ç¥ç»ç½‘ç»œä¸­çš„å‚æ•°ã€‚\n2. **å…ƒæ•°æ®**ï¼š\n   - `.safetensor` æ–‡ä»¶åŒ…å«äº†ä¸€äº›å…ƒæ•°æ®ï¼Œè¿™äº›æ•°æ®æè¿°äº†æ¨¡å‹çš„æ¶æ„ã€æƒé‡å½¢çŠ¶ã€æ•°æ®ç±»å‹ç­‰ä¿¡æ¯ï¼Œè¿™æ ·å¯ä»¥åœ¨åŠ è½½æ¨¡å‹æ—¶è¿›è¡ŒéªŒè¯å’Œé€‚é…ã€‚\n3. **å®‰å…¨æ€§ä¿¡æ¯**ï¼š\n   - `.safetensor` æ–‡ä»¶å¯èƒ½ä¼šåŒ…å«ä¸æ¨¡å‹å®‰å…¨æ€§ç›¸å…³çš„ä¿¡æ¯ï¼Œä¾‹å¦‚å“ªäº›å±‚æˆ–å‚æ•°å¯èƒ½éœ€è¦ç‰¹åˆ«çš„å®‰å…¨æ£€æŸ¥ï¼Œä»¥åŠå¯èƒ½çš„é˜ˆå€¼è®¾ç½®ç­‰ã€‚\n     å…·ä½“æ¥è¯´ï¼Œ`.safetensor` æ–‡ä»¶çš„å†…å®¹ç»“æ„å¯èƒ½å¦‚ä¸‹ï¼š\n\n- `weights`: åŒ…å«æ¨¡å‹æƒé‡çš„å­—å…¸ï¼Œé€šå¸¸æ˜¯ä»¥å¼ é‡çš„å½¢å¼å­˜å‚¨ã€‚\n- `metadata`: åŒ…å«æ¨¡å‹çš„å…ƒæ•°æ®ï¼Œå¦‚ç‰ˆæœ¬å·ã€æ¶æ„ä¿¡æ¯ç­‰ã€‚\n- `config`: åŒ…å«æ¨¡å‹é…ç½®ä¿¡æ¯ï¼Œå¦‚æ¨¡å‹ç±»å‹ã€ç±»åç­‰ã€‚\n- `safety`: åŒ…å«æ¨¡å‹å®‰å…¨æ€§ç›¸å…³çš„ä¿¡æ¯ã€‚\n  ä½¿ç”¨ `.safetensor` æ–‡ä»¶çš„ç›®çš„ä¹‹ä¸€æ˜¯ä¸ºäº†ç¡®ä¿åœ¨æ¨¡å‹éƒ¨ç½²æ—¶èƒ½å¤Ÿè¿›è¡Œæœ‰æ•ˆçš„å®‰å…¨æ£€æŸ¥ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†ç”Ÿæˆå‹æ¨¡å‹ï¼ˆå¦‚æ–‡æœ¬ç”Ÿæˆã€å›¾åƒç”Ÿæˆç­‰ï¼‰æ—¶ï¼Œå¯ä»¥é˜²æ­¢ç”Ÿæˆä¸é€‚å½“çš„å†…å®¹ã€‚\n  è¯·æ³¨æ„ï¼Œ`.safetensor` æ–‡ä»¶æ ¼å¼å¹¶ä¸æ˜¯ PyTorch çš„æ ‡å‡†ä¿å­˜æ ¼å¼ï¼Œè€Œæ˜¯ Hugging Face çš„ç‰¹å®šå®ç°ã€‚å› æ­¤ï¼Œå®ƒå¯èƒ½ä¸å¦‚ `.pth` æ–‡ä»¶é‚£æ ·è¢«å¹¿æ³›ä½¿ç”¨ã€‚å¦‚æœä½ åœ¨ä½¿ç”¨ Hugging Face çš„æ¨¡å‹å’Œå·¥å…·ï¼Œå¯èƒ½ä¼šé‡åˆ° `.safetensor` æ–‡ä»¶ã€‚åœ¨ä½¿ç”¨æ—¶ï¼Œéœ€è¦ç¡®ä¿ä½ çš„ç¯å¢ƒæ”¯æŒè¿™ç§æ ¼å¼ã€‚\n\n## .onnx æ–‡ä»¶ä¸­åˆä¿å­˜äº†ä»€ä¹ˆä¿¡æ¯ï¼Ÿ\n\n`.onnx`ï¼ˆOpen Neural Network Exchangeï¼‰æ–‡ä»¶æ˜¯ä¸€ä¸ªå¼€æ”¾æ ¼å¼ï¼Œç”¨äºè¡¨ç¤ºæœºå™¨å­¦ä¹ æ¨¡å‹ã€‚å®ƒæ—¨åœ¨æä¾›ä¸€ç§æ ‡å‡†çš„æ–¹å¼æ¥è¡¨ç¤ºæ·±åº¦å­¦ä¹ æ¨¡å‹ï¼Œä½¿å¾—æ¨¡å‹å¯ä»¥åœ¨ä¸åŒçš„æ¡†æ¶å’Œå·¥å…·ä¹‹é—´è¿›è¡Œè½¬æ¢å’Œäº’æ“ä½œã€‚ä¸€ä¸ª`.onnx`æ–‡ä»¶ä¸­é€šå¸¸åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š\n\n1. **æ¨¡å‹å›¾ï¼ˆModel Graphï¼‰**ï¼š\n   - æ¨¡å‹å›¾å®šä¹‰äº†æ¨¡å‹çš„è®¡ç®—æµç¨‹ï¼Œå®ƒç”±èŠ‚ç‚¹ï¼ˆnodesï¼‰å’Œè¾¹ï¼ˆedgesï¼‰ç»„æˆã€‚\n   - èŠ‚ç‚¹ä»£è¡¨è®¡ç®—æ“ä½œï¼Œå¦‚å·ç§¯ã€çŸ©é˜µä¹˜æ³•ã€æ¿€æ´»å‡½æ•°ç­‰ã€‚\n   - è¾¹ä»£è¡¨èŠ‚ç‚¹ä¹‹é—´çš„æ•°æ®æµï¼Œå³å¼ é‡ï¼ˆtensorsï¼‰çš„æµåŠ¨ã€‚\n2. **åˆå§‹å€¼ï¼ˆInitializersï¼‰**ï¼š\n   - åˆå§‹å€¼åŒ…å«äº†æ¨¡å‹çš„æƒé‡ã€åç½®ç­‰å‚æ•°çš„å€¼ã€‚\n   - è¿™äº›å‚æ•°æ˜¯åœ¨æ¨¡å‹å›¾æ‰§è¡Œä¹‹å‰å°±å·²ç»ç¡®å®šçš„ã€‚\n3. **æ¨¡å‹å±æ€§ï¼ˆAttributesï¼‰**ï¼š\n   - æ¯ä¸ªèŠ‚ç‚¹å¯èƒ½æœ‰ä¸ä¹‹å…³è”çš„å±æ€§ï¼Œè¿™äº›å±æ€§å®šä¹‰äº†èŠ‚ç‚¹çš„å…·ä½“è¡Œä¸ºï¼Œä¾‹å¦‚å·ç§¯æ“ä½œä¸­çš„æ­¥é•¿ï¼ˆstrideï¼‰å’Œå¡«å……ï¼ˆpaddingï¼‰ã€‚\n4. **è¾“å…¥å’Œè¾“å‡ºï¼ˆInputs and Outputsï¼‰**ï¼š\n   - å®šä¹‰äº†æ¨¡å‹çš„è¾“å…¥å’Œè¾“å‡ºå¼ é‡çš„åç§°ã€æ•°æ®ç±»å‹å’Œå½¢çŠ¶ã€‚\n   - è¿™æœ‰åŠ©äºç†è§£æ¨¡å‹æœŸæœ›çš„è¾“å…¥æ ¼å¼ä»¥åŠå®ƒå°†äº§ç”Ÿçš„è¾“å‡ºæ ¼å¼ã€‚\n5. **å…ƒæ•°æ®ï¼ˆMetadataï¼‰**ï¼š\n   - åŒ…æ‹¬æ¨¡å‹çš„åç§°ã€ç‰ˆæœ¬ã€ä½œè€…ã€ç”Ÿäº§æ—¥æœŸç­‰ä¿¡æ¯ã€‚\n   - è¿™äº›ä¿¡æ¯æœ‰åŠ©äºæ¨¡å‹çš„è¿½è¸ªå’Œç®¡ç†ã€‚\n6. **ä¼˜åŒ–ä¿¡æ¯ï¼ˆOptimization Informationï¼‰**ï¼ˆå¯é€‰ï¼‰ï¼š\n   - ä¸€äº›`.onnx`æ–‡ä»¶å¯èƒ½åŒ…å«ç”¨äºä¼˜åŒ–æ¨¡å‹æ‰§è¡Œçš„é¢å¤–ä¿¡æ¯ï¼Œå¦‚èåˆæ“ä½œæˆ–ç‰¹å®šç¡¬ä»¶ä¸Šçš„ä¼˜åŒ–æŒ‡ä»¤ã€‚\n     `.onnx`æ–‡ä»¶çš„ç»“æ„å¤§è‡´å¦‚ä¸‹ï¼š\n\n- `ir_version`: ONNX æ ¼å¼çš„ç‰ˆæœ¬å·ã€‚\n- `opset_import`: æ¨¡å‹ä½¿ç”¨çš„æ“ä½œé›†ç‰ˆæœ¬ã€‚\n- `producer_name`: ç”Ÿæˆè¯¥ ONNX æ¨¡å‹çš„å·¥å…·æˆ–åº“çš„åç§°ã€‚\n- `producer_version`: ç”Ÿæˆè¯¥ ONNX æ¨¡å‹çš„å·¥å…·æˆ–åº“çš„ç‰ˆæœ¬ã€‚\n- `graph`: åŒ…å«æ¨¡å‹å›¾çš„ç»“æ„å’Œå±æ€§ã€‚\n  - `node`: è®¡ç®—èŠ‚ç‚¹åˆ—è¡¨ã€‚\n  - `input`: è¾“å…¥åˆ—è¡¨ã€‚\n  - `output`: è¾“å‡ºåˆ—è¡¨ã€‚\n  - `initializer`: åˆå§‹åŒ–å‚æ•°åˆ—è¡¨ã€‚\n  - `value_info`: æä¾›é¢å¤–çš„å¼ é‡ä¿¡æ¯ã€‚\n    ä½¿ç”¨`.onnx`æ–‡ä»¶ï¼Œå¯ä»¥è½»æ¾åœ°å°†æ¨¡å‹ä» PyTorchã€TensorFlowã€Caffe2 ç­‰æ¡†æ¶è½¬æ¢åˆ° ONNX æ ¼å¼ï¼Œç„¶åå†éƒ¨ç½²åˆ°ä¸åŒçš„æ¨ç†å¼•æ“æˆ–ç¡¬ä»¶å¹³å°ä¸Šï¼Œä¾‹å¦‚ä½¿ç”¨ ONNX Runtime è¿›è¡Œæ¨ç†ã€‚è¿™ç§æ ¼å¼æé«˜äº†æ¨¡å‹çš„ä¾¿æºæ€§å’Œäº’æ“ä½œæ€§ã€‚\n\n## ç®€è¿° .pth ï¼Œ .safetensor ï¼Œ .onnx ä¿å­˜çš„ä¿¡æ¯ä¸­ï¼Œæœ‰å“ªäº›æ˜¯ç›¸åŒçš„ï¼Ÿæœ‰å“ªäº›æœ‰åŒºåˆ«ï¼Ÿ\n\n.pth, .safetensor, å’Œ .onnx æ–‡ä»¶æ ¼å¼éƒ½ç”¨äºä¿å­˜æœºå™¨å­¦ä¹ æ¨¡å‹çš„ç›¸å…³ä¿¡æ¯ï¼Œä½†å®ƒä»¬çš„è®¾è®¡ç›®çš„ã€å…¼å®¹æ€§å’ŒåŒ…å«çš„å…·ä½“å†…å®¹æœ‰æ‰€ä¸åŒã€‚ä»¥ä¸‹æ˜¯å®ƒä»¬ä¹‹é—´ç›¸åŒç‚¹å’ŒåŒºåˆ«çš„æ¦‚è¿°ï¼š\n**ç›¸åŒç‚¹ï¼š**\n\n1. **æ¨¡å‹å‚æ•°/æƒé‡**ï¼š\n   - æ‰€æœ‰ä¸‰ç§æ ¼å¼éƒ½ä¿å­˜äº†æ¨¡å‹çš„å‚æ•°æˆ–æƒé‡ï¼Œè¿™äº›æ˜¯è®­ç»ƒè¿‡ç¨‹ä¸­å­¦ä¹ åˆ°çš„æ•°å€¼ï¼Œå¯¹äºæ¨¡å‹çš„é¢„æµ‹èƒ½åŠ›è‡³å…³é‡è¦ã€‚\n2. **å…ƒæ•°æ®**ï¼š\n   - å®ƒä»¬éƒ½å¯èƒ½åŒ…å«ä¸€äº›å…ƒæ•°æ®ï¼Œå¦‚æ¨¡å‹çš„ç‰ˆæœ¬ã€åˆ›å»ºæ—¥æœŸæˆ–å…¶ä»–æè¿°æ€§ä¿¡æ¯ï¼Œå°½ç®¡å…·ä½“çš„å…ƒæ•°æ®å†…å®¹å’Œæ ¼å¼å¯èƒ½æœ‰æ‰€ä¸åŒã€‚\n     **åŒºåˆ«ï¼š**\n3. **æ ¼å¼å’Œå…¼å®¹æ€§**ï¼š\n   - `.pth` æ˜¯ PyTorch çš„åŸç”Ÿæ ¼å¼ï¼Œä¸“é—¨ç”¨äºä¿å­˜å’ŒåŠ è½½ PyTorch æ¨¡å‹çš„çŠ¶æ€å­—å…¸ï¼ŒåŒ…æ‹¬æ¨¡å‹æƒé‡å’Œä¼˜åŒ–å™¨çŠ¶æ€ã€‚\n   - `.safetensor` æ˜¯ Hugging Face çš„ Safety Checker å·¥å…·ä½¿ç”¨çš„æ ¼å¼ï¼Œé™¤äº†æ¨¡å‹æƒé‡ï¼Œè¿˜åŒ…å«äº†å®‰å…¨æ€§ç›¸å…³çš„ä¿¡æ¯ã€‚\n   - `.onnx` æ˜¯ä¸€ä¸ªå¼€æ”¾çš„ã€è·¨æ¡†æ¶çš„æ ¼å¼ï¼Œç”¨äºåœ¨ä¸åŒçš„æ·±åº¦å­¦ä¹ æ¡†æ¶ä¹‹é—´äº¤æ¢æ¨¡å‹ï¼Œä¸ä»…åŒ…å«æ¨¡å‹ç»“æ„å’Œå‚æ•°ï¼Œè¿˜å®šä¹‰äº†æ¨¡å‹è®¡ç®—å›¾ã€‚\n4. **åŒ…å«å†…å®¹**ï¼š\n   - `.pth` æ–‡ä»¶é€šå¸¸åŒ…å«æ¨¡å‹çš„çŠ¶æ€å­—å…¸å’Œä¼˜åŒ–å™¨çš„çŠ¶æ€å­—å…¸ï¼Œä»¥åŠå¯é€‰çš„å…¶ä»–è®­ç»ƒä¿¡æ¯ï¼ˆå¦‚æŸå¤±å€¼ã€è¿­ä»£æ¬¡æ•°ç­‰ï¼‰ã€‚\n   - `.safetensor` æ–‡ä»¶åŒ…å«æ¨¡å‹æƒé‡ã€å…ƒæ•°æ®ä»¥åŠä¸æ¨¡å‹å®‰å…¨æ€§ç›¸å…³çš„ä¿¡æ¯ã€‚\n   - `.onnx` æ–‡ä»¶åŒ…å«æ¨¡å‹è®¡ç®—å›¾ã€èŠ‚ç‚¹å®šä¹‰ã€è¾¹çš„è¿æ¥ã€åˆå§‹å€¼ï¼ˆæ¨¡å‹æƒé‡ï¼‰ã€è¾“å…¥è¾“å‡ºå®šä¹‰ä»¥åŠå¯é€‰çš„ä¼˜åŒ–ä¿¡æ¯ã€‚\n5. **ä½¿ç”¨åœºæ™¯**ï¼š\n   - `.pth` æ–‡ä»¶ä¸»è¦ç”¨äº PyTorch æ¨¡å‹çš„è®­ç»ƒå’Œæ¨ç†ã€‚\n   - `.safetensor` æ–‡ä»¶ç”¨äºåœ¨ Hugging Face çš„ç”Ÿæ€ç³»ç»Ÿä¸­è¿›è¡Œæ¨¡å‹çš„å®‰å…¨æ£€æŸ¥ã€‚\n   - `.onnx` æ–‡ä»¶ç”¨äºæ¨¡å‹åœ¨ä¸åŒæ¡†æ¶ä¹‹é—´çš„è½¬æ¢å’Œéƒ¨ç½²ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦è·¨å¹³å°æˆ–ç¡¬ä»¶ä¼˜åŒ–çš„åœºæ™¯ä¸­ã€‚\n6. **å¼€æ”¾æ€§å’Œäº’æ“ä½œæ€§**ï¼š\n   - `.onnx` æ ¼å¼çš„è®¾è®¡é‡ç‚¹åœ¨äºå¼€æ”¾æ€§å’Œäº’æ“ä½œæ€§ï¼Œä½¿å…¶æˆä¸ºä¸åŒæ¡†æ¶å’Œå·¥å…·ä¹‹é—´æ¨¡å‹äº¤æ¢çš„æ¡¥æ¢ã€‚\n   - `.pth` å’Œ `.safetensor` æ›´ä¸“æ³¨äºç‰¹å®šæ¡†æ¶æˆ–å·¥å…·é“¾å†…çš„ä½¿ç”¨ã€‚\n     æ€»ç»“æ¥è¯´ï¼Œè¿™ä¸‰ç§æ ¼å¼éƒ½ç”¨äºä¿å­˜æ¨¡å‹æƒé‡ï¼Œä½†å®ƒä»¬åœ¨æ ¼å¼å…¼å®¹æ€§ã€åŒ…å«çš„é¢å¤–ä¿¡æ¯å’Œä½¿ç”¨åœºæ™¯ä¸Šå­˜åœ¨æ˜æ˜¾å·®å¼‚ã€‚`.onnx` æ ¼å¼æ›´åŠ å¼€æ”¾å’Œé€šç”¨ï¼Œè€Œ `.pth` å’Œ `.safetensor` æ›´ä¸“æ³¨äºç‰¹å®šçš„æ¡†æ¶æˆ–åº”ç”¨éœ€æ±‚ã€‚\n\n## ç®€è¿° .pth ï¼Œ .safetensor ï¼Œ .onnx ä¿å­˜çš„ä¿¡æ¯ä¸­æœ‰å“ªäº›æ˜¯ç›¸åŒçš„ï¼Ÿä¿å­˜çš„ä¿¡æ¯ä¸­åˆæœ‰å“ªäº›æœ‰åŒºåˆ«ï¼Ÿ\n\n.pthã€.safetensor å’Œ.onnx æ–‡ä»¶æ ¼å¼è™½ç„¶éƒ½æ˜¯ä¸ºäº†ä¿å­˜æœºå™¨å­¦ä¹ æ¨¡å‹çš„ç›¸å…³ä¿¡æ¯ï¼Œä½†å®ƒä»¬åœ¨ä¿å­˜çš„å†…å®¹ä¸Šå­˜åœ¨ç›¸åŒç‚¹å’Œå·®å¼‚ã€‚\n**ç›¸åŒç‚¹ï¼š**\n\n1. **æ¨¡å‹å‚æ•°/æƒé‡**ï¼šè¿™ä¸‰ç§æ–‡ä»¶æ ¼å¼éƒ½ä¼šä¿å­˜æ¨¡å‹çš„å‚æ•°æˆ–æƒé‡ï¼Œè¿™äº›æƒé‡æ˜¯æ¨¡å‹åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­å­¦ä¹ åˆ°çš„ï¼Œå¯¹æ¨¡å‹çš„é¢„æµ‹èƒ½åŠ›è‡³å…³é‡è¦ã€‚\n2. **å…ƒæ•°æ®**ï¼šå®ƒä»¬éƒ½å¯èƒ½åŒ…å«ä¸€äº›å…ƒæ•°æ®ï¼Œä¾‹å¦‚æ¨¡å‹çš„ç‰ˆæœ¬ã€åˆ›å»ºæ—¥æœŸæˆ–å…¶ä»–æè¿°æ€§ä¿¡æ¯ï¼Œå°½ç®¡å…·ä½“çš„å…ƒæ•°æ®å’Œæ ¼å¼å¯èƒ½å› æ–‡ä»¶æ ¼å¼è€Œå¼‚ã€‚\n   **åŒºåˆ«ï¼š**\n3. **æ ¼å¼å’Œå…¼å®¹æ€§**ï¼š\n   - .pth æ–‡ä»¶æ˜¯ PyTorch çš„åŸç”Ÿæ ¼å¼ï¼Œä¸»è¦ç”¨äºä¿å­˜å’ŒåŠ è½½ PyTorch æ¨¡å‹çš„çŠ¶æ€å­—å…¸ï¼ŒåŒ…æ‹¬æ¨¡å‹æƒé‡å’Œä¼˜åŒ–å™¨çŠ¶æ€ã€‚\n   - .safetensor æ–‡ä»¶æ˜¯ Hugging Face çš„ Safety Checker å·¥å…·ä½¿ç”¨çš„æ ¼å¼ï¼Œé™¤äº†æ¨¡å‹æƒé‡ï¼Œè¿˜åŒ…æ‹¬å®‰å…¨æ€§ç›¸å…³çš„ä¿¡æ¯ã€‚\n   - .onnx æ–‡ä»¶æ˜¯ä¸€ç§å¼€æ”¾çš„ã€è·¨æ¡†æ¶çš„æ ¼å¼ï¼Œç”¨äºåœ¨ä¸åŒæ·±åº¦å­¦ä¹ æ¡†æ¶ä¹‹é—´äº¤æ¢æ¨¡å‹ï¼ŒåŒ…å«æ¨¡å‹ç»“æ„å’Œå‚æ•°ä»¥åŠæ¨¡å‹è®¡ç®—å›¾ã€‚\n4. **åŒ…å«å†…å®¹**ï¼š\n   - .pth æ–‡ä»¶é€šå¸¸åŒ…å«æ¨¡å‹çš„çŠ¶æ€å­—å…¸å’Œä¼˜åŒ–å™¨çš„çŠ¶æ€å­—å…¸ï¼Œå¯èƒ½è¿˜åŒ…æ‹¬å…¶ä»–è®­ç»ƒä¿¡æ¯ï¼Œå¦‚æŸå¤±å€¼ã€è¿­ä»£æ¬¡æ•°ç­‰ã€‚\n   - .safetensor æ–‡ä»¶åŒ…å«æ¨¡å‹æƒé‡ã€å…ƒæ•°æ®ä»¥åŠä¸æ¨¡å‹å®‰å…¨æ€§ç›¸å…³çš„ä¿¡æ¯ã€‚\n   - .onnx æ–‡ä»¶åŒ…å«æ¨¡å‹è®¡ç®—å›¾ã€èŠ‚ç‚¹å®šä¹‰ã€è¾¹çš„è¿æ¥ã€åˆå§‹å€¼ï¼ˆæ¨¡å‹æƒé‡ï¼‰ã€è¾“å…¥è¾“å‡ºå®šä¹‰ä»¥åŠå¯é€‰çš„ä¼˜åŒ–ä¿¡æ¯ã€‚\n5. **ä½¿ç”¨åœºæ™¯**ï¼š\n   - .pth æ–‡ä»¶ä¸»è¦ç”¨äº PyTorch æ¨¡å‹çš„è®­ç»ƒå’Œæ¨ç†ã€‚\n   - .safetensor æ–‡ä»¶ç”¨äº Hugging Face ç”Ÿæ€ç³»ç»Ÿä¸­çš„æ¨¡å‹å®‰å…¨æ£€æŸ¥ã€‚\n   - .onnx æ–‡ä»¶ç”¨äºæ¨¡å‹åœ¨ä¸åŒæ¡†æ¶ä¹‹é—´çš„è½¬æ¢å’Œéƒ¨ç½²ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦è·¨å¹³å°æˆ–ç¡¬ä»¶ä¼˜åŒ–çš„åœºæ™¯ä¸­ã€‚\n6. **å¼€æ”¾æ€§å’Œäº’æ“ä½œæ€§**ï¼š\n   - .onnx æ ¼å¼é‡ç‚¹åœ¨äºå¼€æ”¾æ€§å’Œäº’æ“ä½œæ€§ï¼Œä¾¿äºä¸åŒæ¡†æ¶å’Œå·¥å…·ä¹‹é—´æ¨¡å‹äº¤æ¢ã€‚\n   - .pth å’Œ.safetensor æ–‡ä»¶æ›´ä¸“æ³¨äºç‰¹å®šæ¡†æ¶æˆ–å·¥å…·é“¾å†…çš„ä½¿ç”¨ã€‚\n     æ€»ç»“æ¥è¯´ï¼Œè¿™ä¸‰ç§æ–‡ä»¶æ ¼å¼éƒ½ä¿å­˜æ¨¡å‹æƒé‡ï¼Œä½†åœ¨æ ¼å¼å…¼å®¹æ€§ã€åŒ…å«çš„é¢å¤–ä¿¡æ¯å’Œä½¿ç”¨åœºæ™¯ä¸Šå­˜åœ¨æ˜æ˜¾å·®å¼‚ã€‚.onnx æ ¼å¼æ›´å¼€æ”¾å’Œé€šç”¨ï¼Œè€Œ.pth å’Œ.safetensor åˆ™æ›´ä¸“æ³¨äºç‰¹å®šæ¡†æ¶æˆ–åº”ç”¨éœ€æ±‚ã€‚\n\n## .pth ï¼Œ .safetensor ï¼Œ .onnx ä¸‰ç§æ ¼å¼ï¼Œå„è‡ªèƒ½å¦ç”¨äºæ¨¡å‹çš„ finetunning ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ\n\n.pthã€.safetensor å’Œ .onnx ä¸‰ç§æ ¼å¼åœ¨æ¨¡å‹å¾®è°ƒï¼ˆfinetuningï¼‰æ–¹é¢çš„é€‚ç”¨æ€§å„æœ‰ä¸åŒï¼Œä»¥ä¸‹æ˜¯å„è‡ªçš„é€‚ç”¨æ€§åˆ†æï¼š\n**.pth æ ¼å¼ï¼š**\n.pth æ–‡ä»¶å¯ä»¥ç”¨äºæ¨¡å‹çš„å¾®è°ƒã€‚åŸå› å¦‚ä¸‹ï¼š\n\n- .pth æ–‡ä»¶æ˜¯ PyTorch çš„åŸç”Ÿæ ¼å¼ï¼Œå®ƒä¿å­˜äº†æ¨¡å‹çš„çŠ¶æ€å­—å…¸ï¼ŒåŒ…æ‹¬æ¨¡å‹çš„æƒé‡å’Œå¯é€‰çš„ä¼˜åŒ–å™¨çŠ¶æ€ã€‚\n- åœ¨å¾®è°ƒè¿‡ç¨‹ä¸­ï¼Œå¯ä»¥åŠ è½½ .pth æ–‡ä»¶ä¸­çš„æ¨¡å‹æƒé‡ï¼Œç„¶åæ ¹æ®æ–°çš„æ•°æ®é›†å¯¹æ¨¡å‹è¿›è¡Œè¿›ä¸€æ­¥çš„è®­ç»ƒã€‚\n- å¦‚æœ .pth æ–‡ä»¶ä¸­åŒ…å«äº†ä¼˜åŒ–å™¨çŠ¶æ€ï¼Œé‚£ä¹ˆå¯ä»¥ä»ä¸­æ–­ç‚¹ç»§ç»­è®­ç»ƒï¼Œè¿™å¯¹äºå¾®è°ƒè¿‡ç¨‹æ˜¯æœ‰å¸®åŠ©çš„ã€‚\n  **.safetensor æ ¼å¼ï¼š**\n  .safetensor æ–‡ä»¶ä¹Ÿå¯ä»¥ç”¨äºæ¨¡å‹çš„å¾®è°ƒï¼Œä½†æœ‰ä¸€äº›é™åˆ¶ï¼š\n- .safetensor æ–‡ä»¶ä¸»è¦æ˜¯ç”± Hugging Face çš„ Safety Checker å·¥å…·ä½¿ç”¨çš„ï¼Œå®ƒä¿å­˜äº†æ¨¡å‹æƒé‡å’Œä¸å®‰å…¨æ€§ç›¸å…³çš„ä¿¡æ¯ã€‚\n- è™½ç„¶è¿™ä¸ªæ ¼å¼ä¸»è¦ç”¨äºå®‰å…¨æ£€æŸ¥ï¼Œä½†å®ƒä»ç„¶åŒ…å«äº†æ¨¡å‹æƒé‡ï¼Œå› æ­¤ç†è®ºä¸Šå¯ä»¥ç”¨äºå¾®è°ƒã€‚\n- ä½†æ˜¯ï¼Œç”±äº .safetensor æ–‡ä»¶æ ¼å¼å¯èƒ½ä¸å¦‚ .pth é‚£æ ·è¢«å¹¿æ³›æ”¯æŒï¼Œå› æ­¤åœ¨å¾®è°ƒæ—¶å¯èƒ½éœ€è¦é¢å¤–çš„æ­¥éª¤æ¥è½¬æ¢æ ¼å¼æˆ–åŠ è½½æƒé‡ã€‚\n  **.onnx æ ¼å¼ï¼š**\n  .onnx æ–‡ä»¶åœ¨å¾®è°ƒæ–¹é¢çš„é€‚ç”¨æ€§è¾ƒä½ï¼ŒåŸå› å¦‚ä¸‹ï¼š\n- .onnx æ–‡ä»¶æ˜¯ä¸€ä¸ªå¼€æ”¾çš„ã€è·¨æ¡†æ¶çš„æ ¼å¼ï¼Œå®ƒä¸ä»…åŒ…å«æ¨¡å‹æƒé‡ï¼Œè¿˜å®šä¹‰äº†æ¨¡å‹è®¡ç®—å›¾ã€‚\n- è™½ç„¶ .onnx æ ¼å¼æ”¯æŒåœ¨ä¸åŒçš„æ¡†æ¶ä¹‹é—´è½¬æ¢æ¨¡å‹ï¼Œä½†å®ƒä¸æ˜¯ä¸ºäº†å¾®è°ƒè€Œè®¾è®¡çš„ã€‚è®¡ç®—å›¾æ˜¯å›ºå®šçš„ï¼Œä¸æ˜“äºä¿®æ”¹ã€‚\n- å¦‚æœéœ€è¦å¾®è°ƒ .onnx æ ¼å¼çš„æ¨¡å‹ï¼Œé€šå¸¸éœ€è¦å…ˆå°†æ¨¡å‹è½¬æ¢å›åŸå§‹æ¡†æ¶ï¼ˆå¦‚ PyTorch æˆ– TensorFlowï¼‰ï¼Œç„¶åå†è¿›è¡Œå¾®è°ƒã€‚\n- å› æ­¤ï¼Œç›´æ¥åœ¨ .onnx æ ¼å¼ä¸Šè¿›è¡Œå¾®è°ƒé€šå¸¸ä¸åˆ‡å®é™…ï¼Œé™¤éæœ‰ç‰¹å®šçš„å·¥å…·æˆ–åº“æ”¯æŒè¿™ç§æ“ä½œã€‚\n  æ€»ç»“æ¥è¯´ï¼Œ.pth æ ¼å¼æœ€é€‚åˆç”¨äº PyTorch æ¨¡å‹çš„å¾®è°ƒï¼Œå› ä¸ºå®ƒç›´æ¥ä¸ PyTorch çš„è®­ç»ƒå’Œæ¨ç†æµç¨‹å…¼å®¹ã€‚.safetensor æ ¼å¼ä¹Ÿå¯ä»¥ç”¨äºå¾®è°ƒï¼Œä½†å¯èƒ½éœ€è¦é¢å¤–çš„æ­¥éª¤æ¥å¤„ç†ã€‚è€Œ .onnx æ ¼å¼é€šå¸¸ä¸ç›´æ¥ç”¨äºå¾®è°ƒï¼Œéœ€è¦è½¬æ¢ä¸ºå…¶ä»–æ¡†æ¶æ ¼å¼åæ‰èƒ½è¿›è¡Œå¾®è°ƒã€‚\n\n## .pth ï¼Œ .safetensor ï¼Œ .onnx ä¸‰ç§æ ¼å¼ï¼Œå„è‡ªèƒ½å¦ç”¨äºè®­ç»ƒ LoRA ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ\n\nLoRAï¼ˆLow-Rank Adaptationï¼‰æ˜¯ä¸€ç§ç”¨äºå¾®è°ƒå¤§å‹é¢„è®­ç»ƒæ¨¡å‹çš„æŠ€æœ¯ï¼Œå®ƒé€šè¿‡å¼•å…¥ä½ç§©åˆ†è§£æ¥å‡å°‘å¾®è°ƒæ‰€éœ€çš„å‚æ•°æ•°é‡ï¼Œä»è€Œå‡å°‘å­˜å‚¨å’Œè®¡ç®—éœ€æ±‚ã€‚ä»¥ä¸‹æ˜¯å…³äº .pthã€.safetensor å’Œ .onnx æ ¼å¼åœ¨è®­ç»ƒ LoRA æ—¶çš„é€‚ç”¨æ€§åˆ†æï¼š\n**.pth æ ¼å¼ï¼š**\n.pth æ–‡ä»¶å¯ä»¥ç”¨äºè®­ç»ƒ LoRAã€‚åŸå› å¦‚ä¸‹ï¼š\n\n- .pth æ–‡ä»¶æ˜¯ PyTorch çš„åŸç”Ÿæ ¼å¼ï¼Œå¯ä»¥ç›´æ¥ä¿å­˜å’ŒåŠ è½½æ¨¡å‹çš„æƒé‡ï¼ŒåŒ…æ‹¬ LoRA å¼•å…¥çš„ä½ç§©çŸ©é˜µã€‚\n- åœ¨è®­ç»ƒ LoRA æ—¶ï¼Œé€šå¸¸éœ€è¦åœ¨åŸå§‹é¢„è®­ç»ƒæ¨¡å‹çš„åŸºç¡€ä¸Šæ·»åŠ é¢å¤–çš„å‚æ•°ï¼ˆå³ä½ç§©çŸ©é˜µï¼‰ï¼Œè¿™äº›å‚æ•°å¯ä»¥åœ¨ PyTorch ä¸­é€šè¿‡è‡ªå®šä¹‰å±‚æˆ–ä¿®æ”¹ç°æœ‰å±‚æ¥å®ç°ã€‚\n- ç”±äº .pth æ–‡ä»¶ä¸ PyTorch æ¡†æ¶ç´§å¯†é›†æˆï¼Œå› æ­¤å¯ä»¥è½»æ¾åœ°ä¿å­˜å’ŒåŠ è½½ LoRA çš„å‚æ•°ï¼Œå¹¶è¿›è¡Œè®­ç»ƒã€‚\n  **.safetensor æ ¼å¼ï¼š**\n  .safetensor æ–‡ä»¶ä¹Ÿå¯ä»¥ç”¨äºè®­ç»ƒ LoRAï¼Œä½†å¯èƒ½æœ‰ä¸€äº›é™åˆ¶ï¼š\n- .safetensor æ–‡ä»¶æ˜¯ä¸ºäº†æé«˜æ¨¡å‹ä½¿ç”¨çš„å®‰å…¨æ€§è€Œè®¾è®¡çš„ï¼Œå®ƒä¿å­˜äº†æ¨¡å‹æƒé‡å’Œå…¶ä»–ä¸å®‰å…¨æ€§ç›¸å…³çš„ä¿¡æ¯ã€‚\n- å¦‚æœ LoRA çš„å‚æ•°è¢«åŒ…å«åœ¨ .safetensor æ–‡ä»¶ä¸­ï¼Œé‚£ä¹ˆç†è®ºä¸Šå¯ä»¥ç”¨äºè®­ç»ƒã€‚\n- ç„¶è€Œï¼Œç”±äº .safetensor æ–‡ä»¶æ ¼å¼å¯èƒ½ä¸å¦‚ .pth é‚£æ ·è¢«å¹¿æ³›æ”¯æŒï¼Œå› æ­¤åœ¨è®­ç»ƒ LoRA æ—¶å¯èƒ½éœ€è¦é¢å¤–çš„æ­¥éª¤æ¥å¤„ç†æ–‡ä»¶æ ¼å¼ã€‚\n  **.onnx æ ¼å¼ï¼š**\n  .onnx æ–‡ä»¶åœ¨è®­ç»ƒ LoRA æ–¹é¢é€šå¸¸ä¸é€‚ç”¨ã€‚åŸå› å¦‚ä¸‹ï¼š\n- .onnx æ–‡ä»¶å®šä¹‰äº†æ¨¡å‹çš„è®¡ç®—å›¾å’Œæƒé‡ï¼Œä½†å®ƒæ˜¯ä¸€ä¸ªé™æ€çš„æ¨¡å‹æè¿°æ ¼å¼ï¼Œä¸é€‚åˆåŠ¨æ€ä¿®æ”¹æ¨¡å‹ç»“æ„ï¼Œå¦‚æ·»åŠ  LoRA å±‚ã€‚\n- LoRA éœ€è¦åœ¨é¢„è®­ç»ƒæ¨¡å‹çš„ç‰¹å®šå±‚ä¸­æ’å…¥ä½ç§©çŸ©é˜µï¼Œè¿™é€šå¸¸éœ€è¦å¯¹æ¨¡å‹ç»“æ„è¿›è¡Œä¿®æ”¹ï¼Œè€Œ .onnx æ ¼å¼ä¸æ”¯æŒè¿™ç§ä¿®æ”¹ã€‚\n- å¦‚æœéœ€è¦ä½¿ç”¨ .onnx æ–‡ä»¶ä¸­çš„æ¨¡å‹æ¥è®­ç»ƒ LoRAï¼Œé€šå¸¸éœ€è¦å…ˆå°†æ¨¡å‹è½¬æ¢å› PyTorch æˆ–å…¶ä»–æ”¯æŒåŠ¨æ€å›¾ä¿®æ”¹çš„æ¡†æ¶ï¼Œç„¶åå†è¿›è¡Œè®­ç»ƒã€‚\n  æ€»ç»“æ¥è¯´ï¼Œ.pth æ ¼å¼æœ€é€‚åˆç”¨äºè®­ç»ƒ LoRAï¼Œå› ä¸ºå®ƒä¸ PyTorch æ¡†æ¶ç´§å¯†é›†æˆï¼Œæ”¯æŒåŠ¨æ€å›¾å’Œè‡ªå®šä¹‰å±‚çš„æ·»åŠ ã€‚.safetensor æ ¼å¼åœ¨ç†è®ºä¸Šä¹Ÿæ˜¯å¯è¡Œçš„ï¼Œä½†å¯èƒ½éœ€è¦é¢å¤–çš„å¤„ç†æ­¥éª¤ã€‚è€Œ .onnx æ ¼å¼ç”±äºä¸æ”¯æŒåŠ¨æ€ä¿®æ”¹æ¨¡å‹ç»“æ„ï¼Œå› æ­¤ä¸é€‚åˆç›´æ¥ç”¨äºè®­ç»ƒ LoRAã€‚\n\n## pth ï¼Œ safetensor ï¼Œ onnx ï¼Œä¸‰ç§æ ¼å¼å¦‚ä½•ä¸¤ä¸¤è½¬æ¢ï¼Ÿ\n\n.pthã€.safetensor å’Œ .onnx æ–‡ä»¶æ ¼å¼ä¹‹é—´çš„è½¬æ¢é€šå¸¸éœ€è¦é€šè¿‡ç‰¹å®šçš„å·¥å…·å’Œåº“æ¥å®ç°ã€‚ä»¥ä¸‹æ˜¯å¦‚ä½•åœ¨è¿™ä¸‰ç§æ ¼å¼ä¹‹é—´è¿›è¡Œä¸¤ä¸¤è½¬æ¢çš„æ¦‚è¿°ï¼š\n\n### .pth åˆ° .safetensor çš„è½¬æ¢\n\nç›®å‰ï¼Œå¹¶æ²¡æœ‰ç›´æ¥çš„æ ‡å‡†å·¥å…·æ¥å°† .pth æ–‡ä»¶è½¬æ¢ä¸º .safetensor æ–‡ä»¶ã€‚ä½†æ˜¯ï¼Œå¯ä»¥æ‰‹åŠ¨åŠ è½½ .pth æ–‡ä»¶ä¸­çš„æƒé‡ï¼Œå¹¶å°†å…¶ä¿å­˜ä¸º .safetensor æ ¼å¼ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹æ­¥éª¤ï¼š\n\n1. ä½¿ç”¨ PyTorch åŠ è½½ .pth æ–‡ä»¶ã€‚\n2. æå–æ¨¡å‹æƒé‡ã€‚\n3. ä½¿ç”¨ Hugging Face çš„ `transformers` åº“æˆ–å…¶ä»–ç›¸å…³å·¥å…·å°†æƒé‡ä¿å­˜ä¸º .safetensor æ–‡ä»¶ã€‚\n\n### .safetensor åˆ° .pth çš„è½¬æ¢\n\nåŒæ ·åœ°ï¼Œå°† .safetensor æ–‡ä»¶è½¬æ¢ä¸º .pth æ–‡ä»¶ä¹Ÿæ²¡æœ‰ç›´æ¥çš„è½¬æ¢å·¥å…·ã€‚ä»¥ä¸‹æ˜¯æ‰‹åŠ¨è½¬æ¢çš„æ­¥éª¤ï¼š\n\n1. ä½¿ç”¨ Hugging Face çš„ `transformers` åº“æˆ–å…¶ä»–ç›¸å…³å·¥å…·åŠ è½½ .safetensor æ–‡ä»¶ã€‚\n2. æå–æ¨¡å‹æƒé‡ã€‚\n3. ä½¿ç”¨ PyTorch å°†æƒé‡ä¿å­˜ä¸º .pth æ–‡ä»¶ã€‚\n\n### .pth åˆ° .onnx çš„è½¬æ¢\n\nPyTorch æä¾›äº†ç›´æ¥å°†æ¨¡å‹è½¬æ¢ä¸º .onnx æ ¼å¼çš„å·¥å…·ï¼š\n\n```python\nimport torch\nimport torch.onnx\n# å‡è®¾ model æ˜¯ä¸€ä¸ª PyTorch æ¨¡å‹\nmodel = ...  # åŠ è½½æˆ–å®šä¹‰æ¨¡å‹\n# å‡è®¾è¾“å…¥æ˜¯ä¸€ä¸ªå¼ é‡ï¼Œå…¶å½¢çŠ¶ä¸æ¨¡å‹è¾“å…¥å…¼å®¹\ninput_sample = torch.randn(batch_size, channels, height, width)\n# å°†æ¨¡å‹è½¬æ¢ä¸º ONNX æ ¼å¼\ntorch.onnx.export(model,               # æ¨¡å‹\n                  input_sample,        # æ¨¡å‹è¾“å…¥ï¼ˆæˆ–ä¸€ä¸ªåŒ…å«è¾“å…¥çš„å…ƒç»„ï¼‰\n                  \"model.onnx\",       # è¾“å‡ºæ–‡ä»¶å\n                  export_params=True,  # æ˜¯å¦å¯¼å‡ºå‚æ•°\n                  opset_version=10,    # ONNX ç®—å­é›†ç‰ˆæœ¬\n                  do_constant_folding=True,  # æ˜¯å¦æ‰§è¡Œå¸¸é‡æŠ˜å ä¼˜åŒ–\n                  input_names=['input'],   # è¾“å…¥å\n                  output_names=['output'], # è¾“å‡ºå\n                  dynamic_axes={'input': {0: 'batch_size'},  # åŠ¨æ€è½´\n                                'output': {0: 'batch_size'}})\n```\n\n### .onnx åˆ° .pth çš„è½¬æ¢\n\nå°† .onnx æ–‡ä»¶è½¬æ¢ä¸º .pth æ–‡ä»¶é€šå¸¸ä¸ç›´æ¥è¿›è¡Œï¼Œå› ä¸º .onnx æ–‡ä»¶åŒ…å«äº†æ¨¡å‹çš„ç»“æ„ä¿¡æ¯ï¼Œè€Œ .pth æ–‡ä»¶åªåŒ…å«æƒé‡ã€‚å¦‚æœéœ€è¦ï¼Œå¯ä»¥é‡æ–°åˆ›å»º PyTorch æ¨¡å‹ç»“æ„ï¼Œç„¶ååŠ è½½ .onnx æ–‡ä»¶ä¸­çš„æƒé‡ï¼š\n\n1. å®šä¹‰ä¸ .onnx æ–‡ä»¶å¯¹åº”çš„ PyTorch æ¨¡å‹ç»“æ„ã€‚\n2. ä½¿ç”¨ `onnx.load` åŠ è½½ .onnx æ–‡ä»¶ã€‚\n3. æå–æƒé‡å¹¶å°†å…¶åŠ è½½åˆ° PyTorch æ¨¡å‹ä¸­ã€‚\n\n### .safetensor åˆ° .onnx çš„è½¬æ¢\n\nç›®å‰æ²¡æœ‰ç›´æ¥çš„æ–¹æ³•å°† .safetensor æ–‡ä»¶è½¬æ¢ä¸º .onnx æ–‡ä»¶ã€‚å¦‚æœéœ€è¦ï¼Œå¯ä»¥å…ˆå°† .safetensor æ–‡ä»¶è½¬æ¢ä¸º .pth æ–‡ä»¶ï¼Œç„¶åå†æŒ‰ç…§ä¸Šè¿°æ–¹æ³•å°† .pth æ–‡ä»¶è½¬æ¢ä¸º .onnx æ–‡ä»¶ã€‚\n\n### .onnx åˆ° .safetensor çš„è½¬æ¢\n\nåŒæ ·åœ°ï¼Œå°† .onnx æ–‡ä»¶è½¬æ¢ä¸º .safetensor æ–‡ä»¶ä¹Ÿæ²¡æœ‰ç›´æ¥çš„è½¬æ¢å·¥å…·ã€‚å¦‚æœéœ€è¦ï¼Œå¯ä»¥å…ˆå°† .onnx æ–‡ä»¶è½¬æ¢ä¸º .pth æ–‡ä»¶ï¼Œç„¶åå†å°† .pth æ–‡ä»¶è½¬æ¢ä¸º .safetensor æ–‡ä»¶ã€‚\nåœ¨è¿›è¡Œè¿™äº›è½¬æ¢æ—¶ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè½¬æ¢è¿‡ç¨‹ä¸­å¯èƒ½ä¼šä¸¢å¤±ä¸€äº›ç‰¹å®šçš„ä¿¡æ¯ï¼Œå¦‚ä¼˜åŒ–å™¨çŠ¶æ€æˆ–æ¨¡å‹é…ç½®ï¼Œå› æ­¤åœ¨è½¬æ¢åå¯èƒ½éœ€è¦é¢å¤–çš„æ­¥éª¤æ¥ç¡®ä¿æ¨¡å‹çš„å®Œæ•´æ€§å’Œæ­£ç¡®æ€§ã€‚\n\n## æˆ‘æœ‰ä¸€ä¸ªä»ç½‘ç»œä¸Šä¸‹è½½çš„ .pth æ–‡ä»¶ `001.pth` ã€‚ç»™æˆ‘ Python ä»£ç ï¼Œå°†å…¶è½¬æ¢ä¸º onnx æ ¼å¼ã€‚\n\nè¦å°†ä¸€ä¸ª `.pth` æ–‡ä»¶è½¬æ¢ä¸º `.onnx` æ ¼å¼ï¼Œä½ éœ€è¦é¦–å…ˆåŠ è½½ `.pth` æ–‡ä»¶ä¸­çš„æ¨¡å‹ï¼Œç„¶åä½¿ç”¨ PyTorch çš„ `torch.onnx.export` å‡½æ•°æ¥è¿›è¡Œè½¬æ¢ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ª Python ä»£ç ç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•è¿›è¡Œè¿™ä¸€è½¬æ¢è¿‡ç¨‹ã€‚å‡è®¾ä½ å·²ç»æœ‰äº†å¯¹åº”çš„ PyTorch æ¨¡å‹å®šä¹‰ï¼Œå¹¶ä¸” `.pth` æ–‡ä»¶ä¸­åŒ…å«çš„æ˜¯è¯¥æ¨¡å‹çš„æƒé‡ã€‚\nè¯·æ³¨æ„ï¼Œä»¥ä¸‹ä»£ç å‡è®¾ä½ çš„æ¨¡å‹æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ PyTorch æ¨¡å‹ï¼Œå¹¶ä¸”ä½ çŸ¥é“æ¨¡å‹çš„è¾“å…¥å°º ï¿½ï¿½ã€‚ä½ éœ€è¦æ ¹æ®ä½ çš„æ¨¡å‹å®é™…æƒ…å†µæ¥è°ƒæ•´è¾“å…¥å°ºå¯¸å’Œæ¨¡å‹ç»“æ„ã€‚\n\n```python\nimport torch\nimport torch.onnx\n# å‡è®¾æ¨¡å‹ç»“æ„å’Œè¾“å…¥å°ºå¯¸å·²çŸ¥\n# è¿™é‡Œæ˜¯ç¤ºä¾‹æ¨¡å‹ç»“æ„å’Œè¾“å…¥å°ºå¯¸ï¼Œä½ éœ€è¦æ ¹æ®ä½ çš„æ¨¡å‹è¿›è¡Œä¿®æ”¹\nclass MyModel(torch.nn.Module):\n    def __init__(self):\n        super(MyModel, self).__init__()\n        # å®šä¹‰æ¨¡å‹ç»“æ„\n        self.conv1 = torch.nn.Conv2d(3, 16, kernel_size=3, stride=1, padding=1)\n        self.relu = torch.nn.ReLU()\n        self.pool = torch.nn.MaxPool2d(kernel_size=2, stride=2, padding=0)\n        # ... æ·»åŠ æ›´å¤šå±‚ ...\n    def forward(self, x):\n        # å®šä¹‰å‰å‘ä¼ æ’­\n        x = self.conv1(x)\n        x = self.relu(x)\n        x = self.pool(x)\n        # ... åº”ç”¨æ›´å¤šå±‚ ...\n        return x\n# åˆ›å»ºæ¨¡å‹å®ä¾‹\nmodel = MyModel()\n# åŠ è½½.pthæ–‡ä»¶ä¸­çš„æƒé‡\nmodel.load_state_dict(torch.load('001.pth'))\n# è®¾ç½®æ¨¡å‹ä¸ºè¯„ä¼°æ¨¡å¼ï¼ˆå¦‚æœé€‚ç”¨ï¼‰\nmodel.eval()\n# åˆ›å»ºä¸€ä¸ªç¬¦åˆæ¨¡å‹è¾“å…¥å°ºå¯¸çš„ç¤ºä¾‹è¾“å…¥\n# å‡è®¾è¾“å…¥æ˜¯å•å¼ å›¾ç‰‡ï¼Œé€šé“æ•°ä¸º3ï¼Œé«˜å’Œå®½åˆ†åˆ«ä¸º224å’Œ224\n# ä½ éœ€è¦æ ¹æ®ä½ çš„æ¨¡å‹è°ƒæ•´è¾“å…¥å°ºå¯¸\ninput_sample = torch.randn(1, 3, 224, 224)\n# æŒ‡å®šONNXæ¨¡å‹çš„è¾“å‡ºæ–‡ä»¶å\noutput_file = 'model.onnx'\n# å¯¼å‡ºæ¨¡å‹ä¸ºONNXæ ¼å¼\ntorch.onnx.export(model,               # æ¨¡å‹\n                  input_sample,        # æ¨¡å‹è¾“å…¥ï¼ˆæˆ–ä¸€ä¸ªåŒ…å«è¾“å…¥çš„å…ƒç»„ï¼‰\n                  output_file,         # è¾“å‡ºæ–‡ä»¶å\n                  export_params=True,  # æ˜¯å¦å¯¼å‡ºå‚æ•°\n                  opset_version=10,    # ONNX ç®—å­é›†ç‰ˆæœ¬\n                  do_constant_folding=True,  # æ˜¯å¦æ‰§è¡Œå¸¸é‡æŠ˜å ä¼˜åŒ–\n                  input_names=['input'],   # è¾“å…¥å\n                  output_names=['output'], # è¾“å‡ºå\n                  dynamic_axes={'input': {0: 'batch_size'},  # åŠ¨æ€è½´\n                                'output': {0: 'batch_size'}})\n```\n\nåœ¨è¿è¡Œè¿™æ®µä»£ç ä¹‹å‰ï¼Œè¯·ç¡®ä¿ï¼š\n\n- ä½ çš„ç¯å¢ƒä¸­å·²ç»å®‰è£…äº† PyTorch å’Œ onnxã€‚\n- ä½ å·²ç»æ ¹æ®ä½ çš„æ¨¡å‹ç»“æ„æ­£ç¡®åœ°å®šä¹‰äº† `MyModel` ç±»ã€‚\n- ä½ å·²ç»æ ¹æ®ä½ çš„æ¨¡å‹è¾“å…¥å°ºå¯¸æ­£ç¡®åœ°è®¾ç½®äº† `input_sample`ã€‚\n  è¿è¡Œä¸Šè¿°ä»£ç åï¼Œä½ åº”è¯¥ä¼šåœ¨å½“å‰ç›®å½•ä¸‹å¾—åˆ°ä¸€ä¸ªåä¸º `model.onnx` çš„æ–‡ä»¶ï¼Œè¿™å°±æ˜¯è½¬æ¢åçš„ ONNX æ ¼å¼çš„æ¨¡å‹ã€‚\n\n## æˆ‘æ²¡æœ‰å¯¹åº”çš„ PyTorch æ¨¡å‹å®šä¹‰ã€‚æˆ‘è¦å¦‚ä½•è·å¾—ï¼Ÿ\n\nå¦‚æœä½ æ²¡æœ‰æ¨¡å‹çš„ PyTorch å®šä¹‰ï¼Œä½†ä½ æœ‰ä¸€ä¸ª `.pth` æ–‡ä»¶ï¼Œä½ å¯ä»¥å°è¯•ä»¥ä¸‹å‡ ç§æ–¹æ³•æ¥è·å–æˆ–é‡å»ºæ¨¡å‹çš„ç»“æ„ï¼š\n\n### 1. ä½¿ç”¨ PyTorch çš„ `torch.jit.load`\n\nå¦‚æœä½ çš„ `.pth` æ–‡ä»¶æ˜¯ä¸€ä¸ª JIT traced çš„æ¨¡å‹ï¼Œä½ å¯ä»¥ä½¿ç”¨ `torch.jit.load` æ¥åŠ è½½å®ƒï¼Œè¿™æ ·å°±ä¸éœ€è¦åŸå§‹çš„æ¨¡å‹å®šä¹‰ã€‚\n\n```python\nimport torch\n# åŠ è½½JIT tracedæ¨¡å‹\ntraced_model = torch.jit.load('001.pth')\n# ä½¿ç”¨æ¨¡å‹ï¼ˆä¾‹å¦‚è¿›è¡Œæ¨ç†ï¼‰\n# input_sample = ...  # åˆ›å»ºä¸€ä¸ªç¬¦åˆæ¨¡å‹è¾“å…¥å°ºå¯¸çš„ç¤ºä¾‹è¾“å…¥\n# output = traced_model(input_sample)\n```\n\n### 2. æŸ¥æ‰¾æ¨¡å‹çš„æ–‡æ¡£æˆ–ä»£ç \n\nå¦‚æœæ¨¡å‹æ˜¯ä»æŸä¸ªçŸ¥åçš„ä»£ç åº“æˆ–è®ºæ–‡ä¸­è·å¾—çš„ï¼Œä½ å¯ä»¥å°è¯•æŸ¥æ‰¾åŸå§‹çš„æ¨¡å‹å®šä¹‰ä»£ç ã€‚é€šå¸¸ï¼Œè®ºæ–‡çš„é™„å½•æˆ–ä»£ç åº“çš„ README æ–‡ä»¶ä¼šåŒ…å«æ¨¡å‹çš„å®šä¹‰ã€‚\n\n### 3. ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“\n\næœ‰äº›ç¬¬ä¸‰æ–¹åº“å¯èƒ½æä¾›äº†é¢„å®šä¹‰çš„æ¨¡å‹ç»“æ„ï¼Œä½ å¯ä»¥å°è¯•ä½¿ç”¨è¿™äº›åº“æ¥åŠ è½½æ¨¡å‹ã€‚\nä¾‹å¦‚ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªåœ¨ torchvision ä¸­å®šä¹‰çš„æ¨¡å‹ï¼Œä½ å¯ä»¥è¿™æ ·åšï¼š\n\n```python\nimport torch\nimport torchvision.models as models\n# å‡è®¾ä½ çŸ¥é“æ¨¡å‹æ˜¯ torchvision ä¸­çš„æŸä¸ªæ¨¡å‹\nmodel = models.resnet50(pretrained=False)\n# åŠ è½½æƒé‡\nmodel.load_state_dict(torch.load('001.pth'))\n```\n\n### 4. ååºåˆ—åŒ–çŠ¶æ€å­—å…¸\n\nå¦‚æœä½ åªæ˜¯ä¸¢å¤±äº†æ¨¡å‹å®šä¹‰ï¼Œä½†ä½ æœ‰çŠ¶æ€å­—å…¸ï¼Œä½ å¯ä»¥å°è¯•ååºåˆ—åŒ–çŠ¶æ€å­—å…¸æ¥é‡å»ºæ¨¡å‹ç»“æ„ã€‚\n\n```python\nimport torch\n# åŠ è½½çŠ¶æ€å­—å…¸\nstate_dict = torch.load('001.pth')\n# å‡è®¾ä½ çŸ¥é“æ¨¡å‹ç»“æ„ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªç©ºçš„æ¨¡å‹å®ä¾‹ï¼Œç„¶ååŠ è½½çŠ¶æ€å­—å…¸\n# model = ...  # åˆ›å»ºæ¨¡å‹å®ä¾‹\n# model.load_state_dict(state_dict)\n```\n\n### 5. ä½¿ç”¨æ¨¡å‹æ¶æ„æœç´¢å·¥å…·\n\næœ‰ä¸€äº›å·¥å…·å’Œåº“å¯ä»¥å¸®åŠ©ä½ æ ¹æ®æƒé‡æ–‡ä»¶æ¨æ–­å‡ºæ¨¡å‹ç»“æ„ã€‚ä¾‹å¦‚ï¼Œ`netron` æ˜¯ä¸€ä¸ªå¯è§†åŒ–ç¥ç»ç½‘ç»œå·¥å…·ï¼Œå¯ä»¥æ˜¾ç¤º `.pth` æ–‡ä»¶ä¸­çš„æ¨¡å‹ç»“æ„ã€‚\n\n```bash\n# å®‰è£… netron\npip install netron\n# ä½¿ç”¨ netron å¯è§†åŒ–æ¨¡å‹\nnetron start 001.pth\n```\n\né€šè¿‡è¿™äº›æ–¹æ³•ï¼Œä½ åº”è¯¥èƒ½å¤Ÿæ‰¾åˆ°æˆ–é‡å»ºæ¨¡å‹çš„ç»“æ„ã€‚ä¸€æ—¦ä½ æœ‰äº†æ¨¡å‹å®šä¹‰ï¼Œä½ å¯ä»¥ä½¿ç”¨å‰é¢æä¾›çš„ä»£ç ç¤ºä¾‹æ¥å°† `.pth` æ–‡ä»¶è½¬æ¢ä¸º `.onnx` æ ¼å¼ã€‚å¦‚æœä½ æ— æ³•ç¡®å®šæ¨¡å‹ç»“æ„ï¼Œä½ å¯èƒ½éœ€è¦è”ç³»æ¨¡å‹çš„åŸå§‹ä½œè€…æˆ–æŸ¥æ‰¾ç›¸å…³çš„æ–‡æ¡£æ¥è·å–æ¨¡å‹å®šä¹‰ã€‚\n","title":"æ·±åº¦å­¦ä¹ æ¨¡å‹æ–‡ä»¶æ ¼å¼å¯¹æ¯”ï¼špthã€safetensor ä¸ onnx","abstract":"\u003e æœ¬é¡µé¢ä»‹ç»äº†ä¸‰ç§æœºå™¨å­¦ä¹ æ¨¡å‹æ–‡ä»¶æ ¼å¼ï¼š.pthã€.safetensor å’Œ .onnxã€‚ä¸»è¦å†…å®¹åŒ…æ‹¬æ¯ç§æ ¼å¼çš„å®šä¹‰ã€ä¿å­˜çš„å†…å®¹ã€ç”¨é€”ä»¥åŠå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«å’Œè½¬æ¢æ–¹æ³•ã€‚\nPyTorch ä¸­çš„`.pth`æ–‡ä»¶é€šå¸¸ç”¨äºä¿å­˜æ¨¡å‹çš„æƒé‡ï¼ˆparametersï¼‰å’Œè®­ç»ƒè¿‡ç¨‹ä¸­çš„ä¼˜åŒ–å™¨çŠ¶æ€ï¼ˆoptimizer stateï¼‰ã€‚å…·ä½“æ¥è¯´ï¼Œä¸€ä¸ª`.pth`æ–‡ä»¶å¯èƒ½åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š\n1. **æ¨¡å‹çŠ¶æ€å­—å…¸ï¼ˆModel state dictionaryï¼‰**ï¼š","length":365,"created_at":"2024-11-29T02:00:00.000Z","updated_at":"2024-11-29T02:00:00.000Z","tags":["PyTorch","ONNX","æ·±åº¦å­¦ä¹ ","æ¨¡å‹éƒ¨ç½²","å­¦ä¹ ç¬”è®°"],"license":true}}],"allTags":[{"tag":"æ‚æŠ€","slug":"æ‚æŠ€","path":"/tags/æ‚æŠ€","postSlugs":[{"postType":"articles","postPagePath":"/articles/Building-this-blog"},{"postType":"articles","postPagePath":"/articles/hello-world"},{"postType":"articles","postPagePath":"/articles/the-using-in-cpp"}]},{"tag":"Blog","slug":"blog","path":"/tags/blog","postSlugs":[{"postType":"articles","postPagePath":"/articles/Building-this-blog"},{"postType":"articles","postPagePath":"/articles/init-a-new-hexo-project"},{"postType":"articles","postPagePath":"/articles/create-blog-cicd-by-github"},{"postType":"articles","postPagePath":"/articles/use-paste-image-and-vscode-memo"},{"postType":"ideas","postPagePath":"/ideas/blog-in-next"},{"postType":"ideas","postPagePath":"/ideas/blog-syntax"}]},{"tag":"æ‚è°ˆ","slug":"æ‚è°ˆ","path":"/tags/æ‚è°ˆ","postSlugs":[{"postType":"articles","postPagePath":"/articles/hello-world"},{"postType":"articles","postPagePath":"/articles/try-cursor-and-thinking"}]},{"tag":"C++","slug":"c++","path":"/tags/c++","postSlugs":[{"postType":"articles","postPagePath":"/articles/the-using-in-cpp"},{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/cpp-rvo-and-rust-move-semantics"}]},{"tag":"Python","slug":"python","path":"/tags/python","postSlugs":[{"postType":"articles","postPagePath":"/articles/python-dict"}]},{"tag":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","path":"/tags/æ•°æ®ç»“æ„","postSlugs":[{"postType":"articles","postPagePath":"/articles/python-dict"},{"postType":"articles","postPagePath":"/articles/Sort-algorithm"},{"postType":"articles","postPagePath":"/articles/Handy-heap-cheat-sheet"}]},{"tag":"ç®—æ³•","slug":"ç®—æ³•","path":"/tags/ç®—æ³•","postSlugs":[{"postType":"articles","postPagePath":"/articles/Sort-algorithm"},{"postType":"articles","postPagePath":"/articles/Handy-heap-cheat-sheet"}]},{"tag":"æ’åº","slug":"æ’åº","path":"/tags/æ’åº","postSlugs":[{"postType":"articles","postPagePath":"/articles/Sort-algorithm"}]},{"tag":"ç®—æ³•ç«èµ›","slug":"ç®—æ³•ç«èµ›","path":"/tags/ç®—æ³•ç«èµ›","postSlugs":[{"postType":"articles","postPagePath":"/articles/Handy-heap-cheat-sheet"}]},{"tag":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","path":"/tags/è®¾è®¡æ¨¡å¼","postSlugs":[{"postType":"articles","postPagePath":"/articles/The-beauty-of-design-parten"}]},{"tag":"ç¬”è®°","slug":"ç¬”è®°","path":"/tags/ç¬”è®°","postSlugs":[{"postType":"articles","postPagePath":"/articles/The-beauty-of-design-parten"}]},{"tag":"GitHub","slug":"github","path":"/tags/github","postSlugs":[{"postType":"articles","postPagePath":"/articles/create-blog-cicd-by-github"}]},{"tag":"AWS","slug":"aws","path":"/tags/aws","postSlugs":[{"postType":"articles","postPagePath":"/articles/create-blog-cicd-by-github"}]},{"tag":"CI/CD","slug":"ci-cd","path":"/tags/ci-cd","postSlugs":[{"postType":"articles","postPagePath":"/articles/create-blog-cicd-by-github"}]},{"tag":"IaC","slug":"iac","path":"/tags/iac","postSlugs":[{"postType":"articles","postPagePath":"/articles/create-blog-cicd-by-github"}]},{"tag":"DevOps","slug":"devops","path":"/tags/devops","postSlugs":[{"postType":"articles","postPagePath":"/articles/create-blog-cicd-by-github"},{"postType":"articles","postPagePath":"/articles/introduction-for-k8s"},{"postType":"articles","postPagePath":"/articles/introduction-for-k8s-2"},{"postType":"ideas","postPagePath":"/ideas/newest"}]},{"tag":"VSCode","slug":"vscode","path":"/tags/vscode","postSlugs":[{"postType":"articles","postPagePath":"/articles/use-paste-image-and-vscode-memo"}]},{"tag":"Hexo","slug":"hexo","path":"/tags/hexo","postSlugs":[{"postType":"articles","postPagePath":"/articles/use-paste-image-and-vscode-memo"}]},{"tag":"JavaScript","slug":"javascript","path":"/tags/javascript","postSlugs":[{"postType":"articles","postPagePath":"/articles/use-paste-image-and-vscode-memo"}]},{"tag":"Kubernetes","slug":"kubernetes","path":"/tags/kubernetes","postSlugs":[{"postType":"articles","postPagePath":"/articles/introduction-for-k8s"},{"postType":"articles","postPagePath":"/articles/introduction-for-k8s-2"},{"postType":"ideas","postPagePath":"/ideas/newest"}]},{"tag":"Docker","slug":"docker","path":"/tags/docker","postSlugs":[{"postType":"articles","postPagePath":"/articles/introduction-for-k8s"},{"postType":"articles","postPagePath":"/articles/introduction-for-k8s-2"},{"postType":"ideas","postPagePath":"/ideas/newest"}]},{"tag":"Cloud Native","slug":"cloud-native","path":"/tags/cloud-native","postSlugs":[{"postType":"articles","postPagePath":"/articles/introduction-for-k8s"},{"postType":"articles","postPagePath":"/articles/introduction-for-k8s-2"},{"postType":"ideas","postPagePath":"/ideas/newest"}]},{"tag":"Cursor","slug":"cursor","path":"/tags/cursor","postSlugs":[{"postType":"articles","postPagePath":"/articles/try-cursor-and-thinking"}]},{"tag":"å¯è§†åŒ–","slug":"å¯è§†åŒ–","path":"/tags/å¯è§†åŒ–","postSlugs":[{"postType":"ideas","postPagePath":"/ideas/blog ç”»å›¾ Iframe æµ‹è¯•"}]},{"tag":"æ•°å­¦","slug":"æ•°å­¦","path":"/tags/æ•°å­¦","postSlugs":[{"postType":"ideas","postPagePath":"/ideas/blog ç”»å›¾ Iframe æµ‹è¯•"}]},{"tag":"å·¥å…·","slug":"å·¥å…·","path":"/tags/å·¥å…·","postSlugs":[{"postType":"ideas","postPagePath":"/ideas/blog ç”»å›¾ Iframe æµ‹è¯•"}]},{"tag":"Nextjs","slug":"nextjs","path":"/tags/nextjs","postSlugs":[{"postType":"ideas","postPagePath":"/ideas/blog-in-next"},{"postType":"ideas","postPagePath":"/ideas/blog-syntax"}]},{"tag":"Linux","slug":"linux","path":"/tags/linux","postSlugs":[{"postType":"ideas","postPagePath":"/ideas/Linux Systemd"},{"postType":"ideas","postPagePath":"/ideas/Linux ä¿¡å·å¤„ç† â€”â€” Signal"},{"postType":"ideas","postPagePath":"/ideas/Linux å†…å­˜ â€”â€” å†…å­˜åˆ†é¡µã€åˆ†æ®µ"},{"postType":"ideas","postPagePath":"/ideas/Linux å†…å­˜ â€”â€” å †å’Œæ ˆ"},{"postType":"ideas","postPagePath":"/ideas/Linux å†…å­˜ â€”â€” è™šæ‹Ÿå†…å­˜"},{"postType":"ideas","postPagePath":"/ideas/Linux è°ƒåº¦ â€”â€” è¿›ç¨‹ä¸çº¿ç¨‹"},{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/executable-file-formats"}]},{"tag":"systemctl","slug":"systemctl","path":"/tags/systemctl","postSlugs":[{"postType":"ideas","postPagePath":"/ideas/Linux Systemd"}]},{"tag":"journalctl","slug":"journalctl","path":"/tags/journalctl","postSlugs":[{"postType":"ideas","postPagePath":"/ideas/Linux Systemd"}]},{"tag":"timedatectl","slug":"timedatectl","path":"/tags/timedatectl","postSlugs":[{"postType":"ideas","postPagePath":"/ideas/Linux Systemd"}]},{"tag":"BasicKnowledge","slug":"basicknowledge","path":"/tags/basicknowledge","postSlugs":[{"postType":"ideas","postPagePath":"/ideas/Linux Systemd"},{"postType":"ideas","postPagePath":"/ideas/Linux ä¿¡å·å¤„ç† â€”â€” Signal"},{"postType":"ideas","postPagePath":"/ideas/Linux å†…å­˜ â€”â€” å†…å­˜åˆ†é¡µã€åˆ†æ®µ"},{"postType":"ideas","postPagePath":"/ideas/Linux å†…å­˜ â€”â€” å †å’Œæ ˆ"},{"postType":"ideas","postPagePath":"/ideas/Linux å†…å­˜ â€”â€” è™šæ‹Ÿå†…å­˜"},{"postType":"ideas","postPagePath":"/ideas/Linux è°ƒåº¦ â€”â€” è¿›ç¨‹ä¸çº¿ç¨‹"}]},{"tag":"Operation","slug":"operation","path":"/tags/operation","postSlugs":[{"postType":"ideas","postPagePath":"/ideas/Linux Systemd"},{"postType":"ideas","postPagePath":"/ideas/Linux ä¿¡å·å¤„ç† â€”â€” Signal"},{"postType":"ideas","postPagePath":"/ideas/Linux å†…å­˜ â€”â€” å†…å­˜åˆ†é¡µã€åˆ†æ®µ"},{"postType":"ideas","postPagePath":"/ideas/Linux å†…å­˜ â€”â€” è™šæ‹Ÿå†…å­˜"}]},{"tag":"Signal","slug":"signal","path":"/tags/signal","postSlugs":[{"postType":"ideas","postPagePath":"/ideas/Linux ä¿¡å·å¤„ç† â€”â€” Signal"}]},{"tag":"memory","slug":"memory","path":"/tags/memory","postSlugs":[{"postType":"ideas","postPagePath":"/ideas/Linux å†…å­˜ â€”â€” å†…å­˜åˆ†é¡µã€åˆ†æ®µ"},{"postType":"ideas","postPagePath":"/ideas/Linux å†…å­˜ â€”â€” å †å’Œæ ˆ"},{"postType":"ideas","postPagePath":"/ideas/Linux å†…å­˜ â€”â€” è™šæ‹Ÿå†…å­˜"}]},{"tag":"schedule","slug":"schedule","path":"/tags/schedule","postSlugs":[{"postType":"ideas","postPagePath":"/ideas/Linux è°ƒåº¦ â€”â€” è¿›ç¨‹ä¸çº¿ç¨‹"}]},{"tag":"Cloud Computing","slug":"cloud-computing","path":"/tags/cloud-computing","postSlugs":[{"postType":"ideas","postPagePath":"/ideas/newest"}]},{"tag":"PyTorch","slug":"pytorch","path":"/tags/pytorch","postSlugs":[{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/deep-learning-model-formats"},{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/pytorch-backpropagation-mechanism"},{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/pytorch-model-save-and-load"}]},{"tag":"ONNX","slug":"onnx","path":"/tags/onnx","postSlugs":[{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/deep-learning-model-formats"}]},{"tag":"æ·±åº¦å­¦ä¹ ","slug":"æ·±åº¦å­¦ä¹ ","path":"/tags/æ·±åº¦å­¦ä¹ ","postSlugs":[{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/deep-learning-model-formats"},{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/lora-matrix-initialization-strategy"},{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/pytorch-backpropagation-mechanism"}]},{"tag":"æ¨¡å‹éƒ¨ç½²","slug":"æ¨¡å‹éƒ¨ç½²","path":"/tags/æ¨¡å‹éƒ¨ç½²","postSlugs":[{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/deep-learning-model-formats"}]},{"tag":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","path":"/tags/å­¦ä¹ ç¬”è®°","postSlugs":[{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/deep-learning-model-formats"},{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/opencv-coordinate-system-conventions"},{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/executable-file-formats"},{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/lora-matrix-initialization-strategy"},{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/pytorch-backpropagation-mechanism"}]},{"tag":"OpenCV","slug":"opencv","path":"/tags/opencv","postSlugs":[{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/opencv-coordinate-system-conventions"}]},{"tag":"å›¾åƒå¤„ç†","slug":"å›¾åƒå¤„ç†","path":"/tags/å›¾åƒå¤„ç†","postSlugs":[{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/opencv-coordinate-system-conventions"}]},{"tag":"Rust","slug":"rust","path":"/tags/rust","postSlugs":[{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/cpp-rvo-and-rust-move-semantics"}]},{"tag":"ç¼–ç¨‹è¯­è¨€","slug":"ç¼–ç¨‹è¯­è¨€","path":"/tags/ç¼–ç¨‹è¯­è¨€","postSlugs":[{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/cpp-rvo-and-rust-move-semantics"}]},{"tag":"Windows","slug":"windows","path":"/tags/windows","postSlugs":[{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/executable-file-formats"}]},{"tag":"macOS","slug":"macos","path":"/tags/macos","postSlugs":[{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/executable-file-formats"}]},{"tag":"å¯æ‰§è¡Œæ–‡ä»¶","slug":"å¯æ‰§è¡Œæ–‡ä»¶","path":"/tags/å¯æ‰§è¡Œæ–‡ä»¶","postSlugs":[{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/executable-file-formats"}]},{"tag":"LoRA","slug":"lora","path":"/tags/lora","postSlugs":[{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/lora-matrix-initialization-strategy"}]},{"tag":"å‚æ•°é«˜æ•ˆå¾®è°ƒ","slug":"å‚æ•°é«˜æ•ˆå¾®è°ƒ","path":"/tags/å‚æ•°é«˜æ•ˆå¾®è°ƒ","postSlugs":[{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/lora-matrix-initialization-strategy"}]},{"tag":"æ¨¡å‹è®­ç»ƒ","slug":"æ¨¡å‹è®­ç»ƒ","path":"/tags/æ¨¡å‹è®­ç»ƒ","postSlugs":[{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/lora-matrix-initialization-strategy"}]},{"tag":"åå‘ä¼ æ’­","slug":"åå‘ä¼ æ’­","path":"/tags/åå‘ä¼ æ’­","postSlugs":[{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/pytorch-backpropagation-mechanism"}]},{"tag":"è‡ªåŠ¨å¾®åˆ†","slug":"è‡ªåŠ¨å¾®åˆ†","path":"/tags/è‡ªåŠ¨å¾®åˆ†","postSlugs":[{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/pytorch-backpropagation-mechanism"}]},{"tag":"GoLang","slug":"golang","path":"/tags/golang","postSlugs":[{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/golang-new-and-memory-management"}]},{"tag":"Memory Management","slug":"memory-management","path":"/tags/memory-management","postSlugs":[{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/golang-new-and-memory-management"}]},{"tag":"Deep Learning","slug":"deep-learning","path":"/tags/deep-learning","postSlugs":[{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/pytorch-model-save-and-load"},{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/resnet-math-and-gradient-vanishing"}]},{"tag":"Model Management","slug":"model-management","path":"/tags/model-management","postSlugs":[{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/pytorch-model-save-and-load"}]},{"tag":"Neural Networks","slug":"neural-networks","path":"/tags/neural-networks","postSlugs":[{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/resnet-math-and-gradient-vanishing"}]},{"tag":"ResNet","slug":"resnet","path":"/tags/resnet","postSlugs":[{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/resnet-math-and-gradient-vanishing"}]},{"tag":"Mathematics","slug":"mathematics","path":"/tags/mathematics","postSlugs":[{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/resnet-math-and-gradient-vanishing"}]},{"tag":"test","slug":"test","path":"/tags/test","postSlugs":[{"postType":"testwiki","postPagePath":"/testwiki/page1"},{"postType":"testwiki","postPagePath":"/testwiki/page1/subpage1"},{"postType":"testwiki","postPagePath":"/testwiki/page2"},{"postType":"testwiki","postPagePath":"/testwiki/page2/subpage2"},{"postType":"testwiki","postPagePath":"/testwiki/page2/subpage3"},{"postType":"testwiki","postPagePath":"/testwiki/page2/subpage3/subpage34"},{"postType":"testwiki","postPagePath":"/testwiki/page3/subpage1"},{"postType":"testwiki","postPagePath":"/testwiki/page3/subpage2"},{"postType":"testwiki","postPagePath":"/testwiki/page3/subpage3"}]},{"tag":"wiki","slug":"wiki","path":"/tags/wiki","postSlugs":[{"postType":"testwiki","postPagePath":"/testwiki/page1"},{"postType":"testwiki","postPagePath":"/testwiki/page1/subpage1"},{"postType":"testwiki","postPagePath":"/testwiki/page2"},{"postType":"testwiki","postPagePath":"/testwiki/page2/subpage2"},{"postType":"testwiki","postPagePath":"/testwiki/page2/subpage3"},{"postType":"testwiki","postPagePath":"/testwiki/page2/subpage3/subpage34"},{"postType":"testwiki","postPagePath":"/testwiki/page3/subpage1"},{"postType":"testwiki","postPagePath":"/testwiki/page3/subpage2"},{"postType":"testwiki","postPagePath":"/testwiki/page3/subpage3"}]},{"tag":"page1","slug":"page1","path":"/tags/page1","postSlugs":[{"postType":"testwiki","postPagePath":"/testwiki/page1"},{"postType":"testwiki","postPagePath":"/testwiki/page1/subpage1"}]},{"tag":"subpage1","slug":"subpage1","path":"/tags/subpage1","postSlugs":[{"postType":"testwiki","postPagePath":"/testwiki/page1/subpage1"},{"postType":"testwiki","postPagePath":"/testwiki/page3/subpage1"}]},{"tag":"page2","slug":"page2","path":"/tags/page2","postSlugs":[{"postType":"testwiki","postPagePath":"/testwiki/page2"},{"postType":"testwiki","postPagePath":"/testwiki/page2/subpage2"},{"postType":"testwiki","postPagePath":"/testwiki/page2/subpage3"},{"postType":"testwiki","postPagePath":"/testwiki/page2/subpage3/subpage34"}]},{"tag":"subpage2","slug":"subpage2","path":"/tags/subpage2","postSlugs":[{"postType":"testwiki","postPagePath":"/testwiki/page2/subpage2"},{"postType":"testwiki","postPagePath":"/testwiki/page3/subpage2"}]},{"tag":"subpage3","slug":"subpage3","path":"/tags/subpage3","postSlugs":[{"postType":"testwiki","postPagePath":"/testwiki/page2/subpage3"},{"postType":"testwiki","postPagePath":"/testwiki/page2/subpage3/subpage34"},{"postType":"testwiki","postPagePath":"/testwiki/page3/subpage3"}]},{"tag":"subpage34","slug":"subpage34","path":"/tags/subpage34","postSlugs":[{"postType":"testwiki","postPagePath":"/testwiki/page2/subpage3/subpage34"}]},{"tag":"page3","slug":"page3","path":"/tags/page3","postSlugs":[{"postType":"testwiki","postPagePath":"/testwiki/page3/subpage1"},{"postType":"testwiki","postPagePath":"/testwiki/page3/subpage2"},{"postType":"testwiki","postPagePath":"/testwiki/page3/subpage3"}]}]},"__N_SSG":true},"page":"/learn_from_ai","query":{},"buildId":"UNqxw3V2eZQs6bqVXGorK","assetPrefix":"/blog-next","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>