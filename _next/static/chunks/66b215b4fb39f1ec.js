(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,47055,t=>{"use strict";var e=t.i(97294),r=t.i(52002),a=t.i(97300),n=t.i(76086),i=t.i(44115),l=t.i(44270),o=t.i(18885),s=t.i(7827);t.i(31345);var d=t.i(34731),c=t.i(78973),h=t.i(38373),p=t.i(46461),u=t.i(79990),f=t.i(85870),g=t.i(9903),m=t.i(13353),y=t.i(40088),_=t.i(73747),x=t.i(54069),b=t.i(44437),k=t.i(29593),w=t.i(12638),M=t.i(43226),v=(0,s.__name)((t,e,r,a,n,i)=>{e.arrowTypeStart&&L(t,"start",e.arrowTypeStart,r,a,n,i),e.arrowTypeEnd&&L(t,"end",e.arrowTypeEnd,r,a,n,i)},"addEdgeMarkers"),$={arrow_cross:{type:"cross",fill:!1},arrow_point:{type:"point",fill:!0},arrow_barb:{type:"barb",fill:!0},arrow_circle:{type:"circle",fill:!1},aggregation:{type:"aggregation",fill:!1},extension:{type:"extension",fill:!1},composition:{type:"composition",fill:!0},dependency:{type:"dependency",fill:!0},lollipop:{type:"lollipop",fill:!1},only_one:{type:"onlyOne",fill:!1},zero_or_one:{type:"zeroOrOne",fill:!1},one_or_more:{type:"oneOrMore",fill:!1},zero_or_more:{type:"zeroOrMore",fill:!1},requirement_arrow:{type:"requirement_arrow",fill:!1},requirement_contains:{type:"requirement_contains",fill:!1}},L=(0,s.__name)((t,e,r,a,n,i,l)=>{let o=$[r];if(!o)return void s.log.warn(`Unknown arrow type: ${r}`);let d=o.type,c=`${n}_${i}-${d}${"start"===e?"Start":"End"}`;if(l&&""!==l.trim()){let r=l.replace(/[^\dA-Za-z]/g,"_"),n=`${c}_${r}`;if(!document.getElementById(n)){let t=document.getElementById(c);if(t){let e=t.cloneNode(!0);e.id=n,e.querySelectorAll("path, circle, line").forEach(t=>{t.setAttribute("stroke",l),o.fill&&t.setAttribute("fill",l)}),t.parentNode?.appendChild(e)}}t.attr(`marker-${e}`,`url(${a}#${n})`)}else t.attr(`marker-${e}`,`url(${a}#${c})`)},"addEdgeMarker"),S=new Map,C=new Map,E=(0,s.__name)(()=>{S.clear(),C.clear()},"clear"),O=(0,s.__name)(t=>t?t.reduce((t,e)=>t+";"+e,""):"","getLabelStyles"),R=(0,s.__name)(async(t,e)=>{let a,l=(0,o.evaluate)((0,o.getConfig2)().flowchart.htmlLabels),{labelStyles:d}=(0,n.styles2String)(e);e.labelStyle=d;let c=await (0,i.createText)(t,e.label,{style:e.labelStyle,useHtmlLabels:l,addSvgBackground:!0,isNode:!1});s.log.info("abc82",e,e.labelType);let h=t.insert("g").attr("class","edgeLabel"),p=h.insert("g").attr("class","label").attr("data-id",e.id);p.node().appendChild(c);let u=c.getBBox();if(l){let t=c.children[0],e=(0,w.select)(c);u=t.getBoundingClientRect(),e.attr("width",u.width),e.attr("height",u.height)}if(p.attr("transform","translate("+-u.width/2+", "+-u.height/2+")"),S.set(e.id,h),e.width=u.width,e.height=u.height,e.startLabelLeft){let n=await (0,r.createLabel_default)(e.startLabelLeft,O(e.labelStyle)),i=t.insert("g").attr("class","edgeTerminals"),l=i.insert("g").attr("class","inner");a=l.node().appendChild(n);let o=n.getBBox();l.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),C.get(e.id)||C.set(e.id,{}),C.get(e.id).startLeft=i,T(a,e.startLabelLeft)}if(e.startLabelRight){let n=await (0,r.createLabel_default)(e.startLabelRight,O(e.labelStyle)),i=t.insert("g").attr("class","edgeTerminals"),l=i.insert("g").attr("class","inner");a=i.node().appendChild(n),l.node().appendChild(n);let o=n.getBBox();l.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),C.get(e.id)||C.set(e.id,{}),C.get(e.id).startRight=i,T(a,e.startLabelRight)}if(e.endLabelLeft){let n=await (0,r.createLabel_default)(e.endLabelLeft,O(e.labelStyle)),i=t.insert("g").attr("class","edgeTerminals"),l=i.insert("g").attr("class","inner");a=l.node().appendChild(n);let o=n.getBBox();l.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),i.node().appendChild(n),C.get(e.id)||C.set(e.id,{}),C.get(e.id).endLeft=i,T(a,e.endLabelLeft)}if(e.endLabelRight){let n=await (0,r.createLabel_default)(e.endLabelRight,O(e.labelStyle)),i=t.insert("g").attr("class","edgeTerminals"),l=i.insert("g").attr("class","inner");a=l.node().appendChild(n);let o=n.getBBox();l.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),i.node().appendChild(n),C.get(e.id)||C.set(e.id,{}),C.get(e.id).endRight=i,T(a,e.endLabelRight)}return c},"insertEdgeLabel");function T(t,e){(0,o.getConfig2)().flowchart.htmlLabels&&t&&(t.style.width=9*e.length+"px",t.style.height="12px")}(0,s.__name)(T,"setTerminalWidth");var A=(0,s.__name)((t,e)=>{s.log.debug("Moving label abc88 ",t.id,t.label,S.get(t.id),e);let r=e.updatedPath?e.updatedPath:e.originalPath,n=(0,o.getConfig2)(),{subGraphTitleTotalMargin:i}=(0,a.getSubGraphTitleMargins)(n);if(t.label){let a=S.get(t.id),n=t.x,o=t.y;if(r){let a=l.utils_default.calcLabelPosition(r);s.log.debug("Moving label "+t.label+" from (",n,",",o,") to (",a.x,",",a.y,") abc88"),e.updatedPath&&(n=a.x,o=a.y)}a.attr("transform",`translate(${n}, ${o+i/2})`)}if(t.startLabelLeft){let e=C.get(t.id).startLeft,a=t.x,n=t.y;if(r){let e=l.utils_default.calcTerminalLabelPosition(10*!!t.arrowTypeStart,"start_left",r);a=e.x,n=e.y}e.attr("transform",`translate(${a}, ${n})`)}if(t.startLabelRight){let e=C.get(t.id).startRight,a=t.x,n=t.y;if(r){let e=l.utils_default.calcTerminalLabelPosition(10*!!t.arrowTypeStart,"start_right",r);a=e.x,n=e.y}e.attr("transform",`translate(${a}, ${n})`)}if(t.endLabelLeft){let e=C.get(t.id).endLeft,a=t.x,n=t.y;if(r){let e=l.utils_default.calcTerminalLabelPosition(10*!!t.arrowTypeEnd,"end_left",r);a=e.x,n=e.y}e.attr("transform",`translate(${a}, ${n})`)}if(t.endLabelRight){let e=C.get(t.id).endRight,a=t.x,n=t.y;if(r){let e=l.utils_default.calcTerminalLabelPosition(10*!!t.arrowTypeEnd,"end_right",r);a=e.x,n=e.y}e.attr("transform",`translate(${a}, ${n})`)}},"positionEdgeLabel"),B=(0,s.__name)((t,e)=>{let r=t.x,a=t.y,n=Math.abs(e.x-r),i=Math.abs(e.y-a),l=t.width/2,o=t.height/2;return n>=l||i>=o},"outsideNode"),W=(0,s.__name)((t,e,r)=>{s.log.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(e)}
  insidePoint : ${JSON.stringify(r)}
  node        : x:${t.x} y:${t.y} w:${t.width} h:${t.height}`);let a=t.x,n=t.y,i=Math.abs(a-r.x),l=t.width/2,o=r.x<e.x?l-i:l+i,d=t.height/2,c=Math.abs(e.y-r.y),h=Math.abs(e.x-r.x);if(Math.abs(n-e.y)*l>Math.abs(a-e.x)*d){let t=r.y<e.y?e.y-d-n:n-d-e.y;o=h*t/c;let a={x:r.x<e.x?r.x+o:r.x-h+o,y:r.y<e.y?r.y+c-t:r.y-c+t};return 0===o&&(a.x=e.x,a.y=e.y),0===h&&(a.x=e.x),0===c&&(a.y=e.y),s.log.debug(`abc89 top/bottom calc, Q ${c}, q ${t}, R ${h}, r ${o}`,a),a}{let t=c*(o=r.x<e.x?e.x-l-a:a-l-e.x)/h,n=r.x<e.x?r.x+h-o:r.x-h+o,i=r.y<e.y?r.y+t:r.y-t;return s.log.debug(`sides calc abc89, Q ${c}, q ${t}, R ${h}, r ${o}`,{_x:n,_y:i}),0===o&&(n=e.x,i=e.y),0===h&&(n=e.x),0===c&&(i=e.y),{x:n,y:i}}},"intersection"),P=(0,s.__name)((t,e)=>{s.log.warn("abc88 cutPathAtIntersect",t,e);let r=[],a=t[0],n=!1;return t.forEach(t=>{if(s.log.info("abc88 checking point",t,e),B(e,t)||n)s.log.warn("abc88 outside",t,a),a=t,n||r.push(t);else{let i=W(e,a,t);s.log.debug("abc88 inside",t,a,i),s.log.debug("abc88 intersection",i,e);let l=!1;r.forEach(t=>{l=l||t.x===i.x&&t.y===i.y}),r.some(t=>t.x===i.x&&t.y===i.y)?s.log.warn("abc88 no intersect",i,r):r.push(i),n=!0}}),s.log.debug("returning points",r),r},"cutPathAtIntersect");function N(t){let e=[],r=[];for(let a=1;a<t.length-1;a++){let n=t[a-1],i=t[a],l=t[a+1];n.x===i.x&&i.y===l.y&&Math.abs(i.x-l.x)>5&&Math.abs(i.y-n.y)>5?(e.push(i),r.push(a)):n.y===i.y&&i.x===l.x&&Math.abs(i.x-n.x)>5&&Math.abs(i.y-l.y)>5&&(e.push(i),r.push(a))}return{cornerPoints:e,cornerPointPositions:r}}(0,s.__name)(N,"extractCornerPoints");var H=(0,s.__name)(function(t,e,r){let a=e.x-t.x,n=e.y-t.y,i=r/Math.sqrt(a*a+n*n);return{x:e.x-i*a,y:e.y-i*n}},"findAdjacentPoint"),U=(0,s.__name)(function(t){let{cornerPointPositions:e}=N(t),r=[];for(let a=0;a<t.length;a++)if(e.includes(a)){let e=t[a-1],n=t[a+1],i=t[a],l=H(e,i,5),o=H(n,i,5),d=o.x-l.x,c=o.y-l.y;r.push(l);let h=2*Math.sqrt(2),p={x:i.x,y:i.y};Math.abs(n.x-e.x)>10&&Math.abs(n.y-e.y)>=10?(s.log.debug("Corner point fixing",Math.abs(n.x-e.x),Math.abs(n.y-e.y)),p=i.x===l.x?{x:d<0?l.x-5+h:l.x+5-h,y:c<0?l.y-h:l.y+h}:{x:d<0?l.x-h:l.x+h,y:c<0?l.y-5+h:l.y+5-h}):s.log.debug("Corner point skipping fixing",Math.abs(n.x-e.x),Math.abs(n.y-e.y)),r.push(p,o)}else r.push(t[a]);return r},"fixCorners"),X=(0,s.__name)((t,e,r)=>{let a=Array(Math.floor((t-e-r)/4)).fill("2 2").join(" ");return`0 ${e} ${a} ${r}`},"generateDashArray"),Y=(0,s.__name)(function(t,r,a,i,$,L,S,C=!1){let E,O,{handDrawnSeed:R}=(0,o.getConfig2)(),T=r.points,A=!1,B=[];for(let t in r.cssCompiledStyles)(0,n.isLabelStyle)(t)||B.push(r.cssCompiledStyles[t]);s.log.debug("UIO intersect check",r.points,L.x,$.x),L.intersect&&$.intersect&&!C&&((T=T.slice(1,r.points.length-1)).unshift($.intersect(T[0])),s.log.debug("Last point UIO",r.start,"-->",r.end,T[T.length-1],L,L.intersect(T[T.length-1])),T.push(L.intersect(T[T.length-1])));let W=btoa(JSON.stringify(T));r.toCluster&&(s.log.info("to cluster abc88",a.get(r.toCluster)),T=P(r.points,a.get(r.toCluster).node),A=!0),r.fromCluster&&(s.log.debug("from cluster abc88",a.get(r.fromCluster),JSON.stringify(T,null,2)),T=P(T.reverse(),a.get(r.fromCluster).node).reverse(),A=!0);let N=T.filter(t=>!Number.isNaN(t.y));N=U(N);let H=d.curveBasis;switch(H=c.curveLinear,r.curve){case"linear":H=c.curveLinear;break;case"basis":default:H=d.curveBasis;break;case"cardinal":H=h.curveCardinal;break;case"bumpX":H=p.curveBumpX;break;case"bumpY":H=u.curveBumpY;break;case"catmullRom":H=f.curveCatmullRom;break;case"monotoneX":H=g.curveMonotoneX;break;case"monotoneY":H=m.curveMonotoneY;break;case"natural":H=y.curveNatural;break;case"step":H=_.curveStep;break;case"stepAfter":H=x.curveStepAfter;break;case"stepBefore":H=b.curveStepBefore}let{x:Y,y:F}=(0,e.getLineFunctionsWithOffset)(r),I=(0,k.line)().x(Y).y(F).curve(H);switch(r.thickness){case"normal":default:E="edge-thickness-normal";break;case"thick":E="edge-thickness-thick";break;case"invisible":E="edge-thickness-invisible"}switch(r.pattern){case"solid":default:E+=" edge-pattern-solid";break;case"dotted":E+=" edge-pattern-dotted";break;case"dashed":E+=" edge-pattern-dashed"}let D="rounded"===r.curve?z(j(N,r),5):I(N),q=Array.isArray(r.style)?r.style:[r.style],Z=q.find(t=>t?.startsWith("stroke:")),Q=!1;if("handDrawn"===r.look){let e=M.default.svg(t);Object.assign([],N);let a=e.path(D,{roughness:.3,seed:R});E+=" transition";let n=(O=(0,w.select)(a).select("path").attr("id",r.id).attr("class"," "+E+(r.classes?" "+r.classes:"")).attr("style",q?q.reduce((t,e)=>t+";"+e,""):"")).attr("d");O.attr("d",n),t.node().appendChild(O.node())}else{let a=B.join(";"),n=q?q.reduce((t,e)=>t+e+";",""):"",i="";r.animate&&(i=" edge-animation-fast"),r.animation&&(i=" edge-animation-"+r.animation);let l=(a?a+";"+n+";":n)+";"+(q?q.reduce((t,e)=>t+";"+e,""):"");O=t.append("path").attr("d",D).attr("id",r.id).attr("class"," "+E+(r.classes?" "+r.classes:"")+(i??"")).attr("style",l),Z=l.match(/stroke:([^;]+)/)?.[1],Q=!0===r.animate||!!r.animation||a.includes("animation");let o=O.node(),s="function"==typeof o.getTotalLength?o.getTotalLength():0,d=e.markerOffsets2[r.arrowTypeStart]||0,c=e.markerOffsets2[r.arrowTypeEnd]||0;if("neo"===r.look&&!Q){let t="dotted"===r.pattern||"dashed"===r.pattern?X(s,d,c):`0 ${d} ${s-d-c} ${c}`,e=`stroke-dasharray: ${t}; stroke-dashoffset: 0;`;O.attr("style",e+O.attr("style"))}}O.attr("data-edge",!0),O.attr("data-et","edge"),O.attr("data-id",r.id),O.attr("data-points",W),r.showPoints&&N.forEach(e=>{t.append("circle").style("stroke","red").style("fill","red").attr("r",1).attr("cx",e.x).attr("cy",e.y)});let G="";((0,o.getConfig2)().flowchart.arrowMarkerAbsolute||(0,o.getConfig2)().state.arrowMarkerAbsolute)&&(G=(G=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search).replace(/\(/g,"\\(").replace(/\)/g,"\\)")),s.log.info("arrowTypeStart",r.arrowTypeStart),s.log.info("arrowTypeEnd",r.arrowTypeEnd),v(O,r,G,S,i,Z);let K=Math.floor(T.length/2),J=T[K];l.utils_default.isLabelCoordinateInPath(J,O.attr("d"))||(A=!0);let V={};return A&&(V.updatedPath=T),V.originalPath=r.points,V},"insertEdge");function z(t,e){if(t.length<2)return"";let r="",a=t.length;for(let n=0;n<a;n++){let i=t[n],l=t[n-1],o=t[n+1];if(0===n)r+=`M${i.x},${i.y}`;else if(n===a-1)r+=`L${i.x},${i.y}`;else{let t=i.x-l.x,a=i.y-l.y,n=o.x-i.x,s=o.y-i.y,d=Math.hypot(t,a),c=Math.hypot(n,s);if(d<1e-5||c<1e-5){r+=`L${i.x},${i.y}`;continue}let h=t/d,p=a/d,u=n/c,f=s/c,g=Math.acos(Math.max(-1,Math.min(1,h*u+p*f)));if(g<1e-5||1e-5>Math.abs(Math.PI-g)){r+=`L${i.x},${i.y}`;continue}let m=Math.min(e/Math.sin(g/2),d/2,c/2),y=i.x-h*m,_=i.y-p*m,x=i.x+u*m,b=i.y+f*m;r+=`L${y},${_}Q${i.x},${i.y} ${x},${b}`}}return r}function F(t,e){if(!t||!e)return{angle:0,deltaX:0,deltaY:0};let r=e.x-t.x,a=e.y-t.y;return{angle:Math.atan2(a,r),deltaX:r,deltaY:a}}function j(t,r){let a=t.map(t=>({...t}));if(t.length>=2&&e.markerOffsets[r.arrowTypeStart]){let n=e.markerOffsets[r.arrowTypeStart],i=t[0],{angle:l}=F(i,t[1]),o=n*Math.cos(l),s=n*Math.sin(l);a[0].x=i.x+o,a[0].y=i.y+s}let n=t.length;if(n>=2&&e.markerOffsets[r.arrowTypeEnd]){let i=e.markerOffsets[r.arrowTypeEnd],l=t[n-1],{angle:o}=F(t[n-2],l),s=i*Math.cos(o),d=i*Math.sin(o);a[n-1].x=l.x-s,a[n-1].y=l.y-d}return a}(0,s.__name)(z,"generateRoundedPath"),(0,s.__name)(F,"calculateDeltaAndAngle"),(0,s.__name)(j,"applyMarkerOffsetsToPoints");var I=(0,s.__name)((t,e,r,a)=>{e.forEach(e=>{ti[e](t,r,a)})},"insertMarkers"),D=(0,s.__name)((t,e,r)=>{s.log.trace("Making markers for ",r),t.append("defs").append("marker").attr("id",r+"_"+e+"-extensionStart").attr("class","marker extension "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-extensionEnd").attr("class","marker extension "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),q=(0,s.__name)((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-compositionStart").attr("class","marker composition "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-compositionEnd").attr("class","marker composition "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),Z=(0,s.__name)((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-aggregationStart").attr("class","marker aggregation "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-aggregationEnd").attr("class","marker aggregation "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),Q=(0,s.__name)((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-dependencyStart").attr("class","marker dependency "+e).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-dependencyEnd").attr("class","marker dependency "+e).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),G=(0,s.__name)((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-lollipopStart").attr("class","marker lollipop "+e).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),t.append("defs").append("marker").attr("id",r+"_"+e+"-lollipopEnd").attr("class","marker lollipop "+e).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),K=(0,s.__name)((t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-pointEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-pointStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),J=(0,s.__name)((t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-circleEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-circleStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),V=(0,s.__name)((t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-crossEnd").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-crossStart").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),tt=(0,s.__name)((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),te=(0,s.__name)((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-onlyOneStart").attr("class","marker onlyOne "+e).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M9,0 L9,18 M15,0 L15,18"),t.append("defs").append("marker").attr("id",r+"_"+e+"-onlyOneEnd").attr("class","marker onlyOne "+e).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M3,0 L3,18 M9,0 L9,18")},"only_one"),tr=(0,s.__name)((t,e,r)=>{let a=t.append("defs").append("marker").attr("id",r+"_"+e+"-zeroOrOneStart").attr("class","marker zeroOrOne "+e).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");a.append("circle").attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),a.append("path").attr("d","M9,0 L9,18");let n=t.append("defs").append("marker").attr("id",r+"_"+e+"-zeroOrOneEnd").attr("class","marker zeroOrOne "+e).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");n.append("circle").attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),n.append("path").attr("d","M21,0 L21,18")},"zero_or_one"),ta=(0,s.__name)((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-oneOrMoreStart").attr("class","marker oneOrMore "+e).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),t.append("defs").append("marker").attr("id",r+"_"+e+"-oneOrMoreEnd").attr("class","marker oneOrMore "+e).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18")},"one_or_more"),tn=(0,s.__name)((t,e,r)=>{let a=t.append("defs").append("marker").attr("id",r+"_"+e+"-zeroOrMoreStart").attr("class","marker zeroOrMore "+e).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");a.append("circle").attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),a.append("path").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18");let n=t.append("defs").append("marker").attr("id",r+"_"+e+"-zeroOrMoreEnd").attr("class","marker zeroOrMore "+e).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");n.append("circle").attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),n.append("path").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},"zero_or_more"),ti={extension:D,composition:q,aggregation:Z,dependency:Q,lollipop:G,point:K,circle:J,cross:V,barb:tt,only_one:te,zero_or_one:tr,one_or_more:ta,zero_or_more:tn,requirement_arrow:(0,s.__name)((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-requirement_arrowEnd").attr("refX",20).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("path").attr("d",`M0,0
      L20,10
      M20,10
      L0,20`)},"requirement_arrow"),requirement_contains:(0,s.__name)((t,e,r)=>{let a=t.append("defs").append("marker").attr("id",r+"_"+e+"-requirement_containsStart").attr("refX",0).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("g");a.append("circle").attr("cx",10).attr("cy",10).attr("r",9).attr("fill","none"),a.append("line").attr("x1",1).attr("x2",19).attr("y1",10).attr("y2",10),a.append("line").attr("y1",1).attr("y2",19).attr("x1",10).attr("x2",10)},"requirement_contains")};t.s(["clear",()=>E,"insertEdge",()=>Y,"insertEdgeLabel",()=>R,"markers_default",()=>I,"positionEdgeLabel",()=>A])},72301,80696,t=>{"use strict";t.s(["default",0,function(t){return function(){return t}}],72301);let e=Math.PI,r=2*e,a=r-1e-6;function n(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}class i{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?n:function(t){let e=Math.floor(t);if(!(e>=0))throw Error(`invalid digits: ${t}`);if(e>15)return n;let r=10**e;return function(t){this._+=t[0];for(let e=1,a=t.length;e<a;++e)this._+=Math.round(arguments[e]*r)/r+t[e]}}(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,r,a){this._append`Q${+t},${+e},${this._x1=+r},${this._y1=+a}`}bezierCurveTo(t,e,r,a,n,i){this._append`C${+t},${+e},${+r},${+a},${this._x1=+n},${this._y1=+i}`}arcTo(t,r,a,n,i){if(t*=1,r*=1,a*=1,n*=1,(i*=1)<0)throw Error(`negative radius: ${i}`);let l=this._x1,o=this._y1,s=a-t,d=n-r,c=l-t,h=o-r,p=c*c+h*h;if(null===this._x1)this._append`M${this._x1=t},${this._y1=r}`;else if(p>1e-6)if(Math.abs(h*s-d*c)>1e-6&&i){let u=a-l,f=n-o,g=s*s+d*d,m=Math.sqrt(g),y=Math.sqrt(p),_=i*Math.tan((e-Math.acos((g+p-(u*u+f*f))/(2*m*y)))/2),x=_/y,b=_/m;Math.abs(x-1)>1e-6&&this._append`L${t+x*c},${r+x*h}`,this._append`A${i},${i},0,0,${+(h*u>c*f)},${this._x1=t+b*s},${this._y1=r+b*d}`}else this._append`L${this._x1=t},${this._y1=r}`}arc(t,n,i,l,o,s){if(t*=1,n*=1,i*=1,s=!!s,i<0)throw Error(`negative radius: ${i}`);let d=i*Math.cos(l),c=i*Math.sin(l),h=t+d,p=n+c,u=1^s,f=s?l-o:o-l;null===this._x1?this._append`M${h},${p}`:(Math.abs(this._x1-h)>1e-6||Math.abs(this._y1-p)>1e-6)&&this._append`L${h},${p}`,i&&(f<0&&(f=f%r+r),f>a?this._append`A${i},${i},0,1,${u},${t-d},${n-c}A${i},${i},0,1,${u},${this._x1=h},${this._y1=p}`:f>1e-6&&this._append`A${i},${i},0,${+(f>=e)},${u},${this._x1=t+i*Math.cos(o)},${this._y1=n+i*Math.sin(o)}`)}rect(t,e,r,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${r*=1}v${+a}h${-r}Z`}toString(){return this._}}function l(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(null==r)e=null;else{let t=Math.floor(r);if(!(t>=0))throw RangeError(`invalid digits: ${r}`);e=t}return t},()=>new i(e)}i.prototype,t.s(["withPath",()=>l],80696)},21776,t=>{"use strict";Array.prototype.slice,t.s(["default",0,function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}])},29593,t=>{"use strict";var e=t.i(21776),r=t.i(72301),a=t.i(73422),n=t.i(80696);function i(t){return t[0]}function l(t){return t[1]}t.s(["line",0,function(t,o){var s=(0,r.default)(!0),d=null,c=a.default,h=null,p=(0,n.withPath)(u);function u(r){var a,n,i,l=(r=(0,e.default)(r)).length,u=!1;for(null==d&&(h=c(i=p())),a=0;a<=l;++a)!(a<l&&s(n=r[a],a,r))===u&&((u=!u)?h.lineStart():h.lineEnd()),u&&h.point(+t(n,a,r),+o(n,a,r));if(i)return h=null,i+""||null}return t="function"==typeof t?t:void 0===t?i:(0,r.default)(t),o="function"==typeof o?o:void 0===o?l:(0,r.default)(o),u.x=function(e){return arguments.length?(t="function"==typeof e?e:(0,r.default)(+e),u):t},u.y=function(t){return arguments.length?(o="function"==typeof t?t:(0,r.default)(+t),u):o},u.defined=function(t){return arguments.length?(s="function"==typeof t?t:(0,r.default)(!!t),u):s},u.curve=function(t){return arguments.length?(c=t,null!=d&&(h=c(d)),u):c},u.context=function(t){return arguments.length?(null==t?d=h=null:h=c(d=t),u):d},u}],29593)},97294,t=>{"use strict";var e=t.i(7827),r={aggregation:17.25,extension:17.25,composition:17.25,dependency:6,lollipop:13.5,arrow_point:4},a={arrow_point:9,arrow_cross:12.5,arrow_circle:12.5};function n(t,e){if(void 0===t||void 0===e)return{angle:0,deltaX:0,deltaY:0};t=i(t),e=i(e);let[r,a]=[t.x,t.y],[n,l]=[e.x,e.y],o=n-r,s=l-a;return{angle:Math.atan(s/o),deltaX:o,deltaY:s}}(0,e.__name)(n,"calculateDeltaAndAngle");var i=(0,e.__name)(t=>Array.isArray(t)?{x:t[0],y:t[1]}:t,"pointTransformer"),l=(0,e.__name)(t=>({x:(0,e.__name)(function(e,a,l){let o=0,s=i(l[0]).x<i(l[l.length-1]).x?"left":"right";if(0===a&&Object.hasOwn(r,t.arrowTypeStart)){let{angle:e,deltaX:a}=n(l[0],l[1]);o=r[t.arrowTypeStart]*Math.cos(e)*(a>=0?1:-1)}else if(a===l.length-1&&Object.hasOwn(r,t.arrowTypeEnd)){let{angle:e,deltaX:a}=n(l[l.length-1],l[l.length-2]);o=r[t.arrowTypeEnd]*Math.cos(e)*(a>=0?1:-1)}let d=Math.abs(i(e).x-i(l[l.length-1]).x),c=Math.abs(i(e).y-i(l[l.length-1]).y),h=Math.abs(i(e).x-i(l[0]).x),p=Math.abs(i(e).y-i(l[0]).y),u=r[t.arrowTypeStart],f=r[t.arrowTypeEnd];if(d<f&&d>0&&c<f){let t=f+1-d;t*="right"===s?-1:1,o-=t}if(h<u&&h>0&&p<u){let t=u+1-h;t*="right"===s?-1:1,o+=t}return i(e).x+o},"x"),y:(0,e.__name)(function(e,a,l){let o=0,s=i(l[0]).y<i(l[l.length-1]).y?"down":"up";if(0===a&&Object.hasOwn(r,t.arrowTypeStart)){let{angle:e,deltaY:a}=n(l[0],l[1]);o=r[t.arrowTypeStart]*Math.abs(Math.sin(e))*(a>=0?1:-1)}else if(a===l.length-1&&Object.hasOwn(r,t.arrowTypeEnd)){let{angle:e,deltaY:a}=n(l[l.length-1],l[l.length-2]);o=r[t.arrowTypeEnd]*Math.abs(Math.sin(e))*(a>=0?1:-1)}let d=Math.abs(i(e).y-i(l[l.length-1]).y),c=Math.abs(i(e).x-i(l[l.length-1]).x),h=Math.abs(i(e).y-i(l[0]).y),p=Math.abs(i(e).x-i(l[0]).x),u=r[t.arrowTypeStart],f=r[t.arrowTypeEnd];if(d<f&&d>0&&c<f){let t=f+1-d;t*="up"===s?-1:1,o-=t}if(h<u&&h>0&&p<u){let t=u+1-h;t*="up"===s?-1:1,o+=t}return i(e).y+o},"y")}),"getLineFunctionsWithOffset");t.s(["getLineFunctionsWithOffset",()=>l,"markerOffsets",()=>r,"markerOffsets2",()=>a])},76086,t=>{"use strict";var e=t.i(18885),r=t.i(7827),a=(0,r.__name)(t=>{let{handDrawnSeed:r}=(0,e.getConfig2)();return{fill:t,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:t,seed:r}},"solidStateFill"),n=(0,r.__name)(t=>{let e=i([...t.cssCompiledStyles||[],...t.cssStyles||[],...t.labelStyle||[]]);return{stylesMap:e,stylesArray:[...e]}},"compileStyles"),i=(0,r.__name)(t=>{let e=new Map;return t.forEach(t=>{let[r,a]=t.split(":");e.set(r.trim(),a?.trim())}),e},"styles2Map"),l=(0,r.__name)(t=>"color"===t||"font-size"===t||"font-family"===t||"font-weight"===t||"font-style"===t||"text-decoration"===t||"text-align"===t||"text-transform"===t||"line-height"===t||"letter-spacing"===t||"word-spacing"===t||"text-shadow"===t||"text-overflow"===t||"white-space"===t||"word-wrap"===t||"word-break"===t||"overflow-wrap"===t||"hyphens"===t,"isLabelStyle"),o=(0,r.__name)(t=>{let{stylesArray:e}=n(t),r=[],a=[],i=[],o=[];return e.forEach(t=>{let e=t[0];l(e)?r.push(t.join(":")+" !important"):(a.push(t.join(":")+" !important"),e.includes("stroke")&&i.push(t.join(":")+" !important"),"fill"===e&&o.push(t.join(":")+" !important"))}),{labelStyles:r.join(";"),nodeStyles:a.join(";"),stylesArray:e,borderStyles:i,backgroundStyles:o}},"styles2String"),s=(0,r.__name)((t,r)=>{let{themeVariables:a,handDrawnSeed:i}=(0,e.getConfig2)(),{nodeBorder:l,mainBkg:o}=a,{stylesMap:s}=n(t);return Object.assign({roughness:.7,fill:s.get("fill")||o,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:s.get("stroke")||l,seed:i,strokeWidth:s.get("stroke-width")?.replace("px","")||1.3,fillLineDash:[0,0],strokeLineDash:d(s.get("stroke-dasharray"))},r)},"userNodeOverrides"),d=(0,r.__name)(t=>{if(!t)return[0,0];let e=t.trim().split(/\s+/).map(Number);if(1===e.length){let t=isNaN(e[0])?0:e[0];return[t,t]}return[isNaN(e[0])?0:e[0],isNaN(e[1])?0:e[1]]},"getStrokeDashArray");t.s(["compileStyles",()=>n,"isLabelStyle",()=>l,"solidStateFill",()=>a,"styles2String",()=>o,"userNodeOverrides",()=>s])},7827,t=>{"use strict";var e=t.i(94834),r=Object.defineProperty,a=(t,e)=>r(t,"name",{value:e,configurable:!0}),n=(t,e)=>{for(var a in e)r(t,a,{get:e[a],enumerable:!0})},i={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},l={trace:a((...t)=>{},"trace"),debug:a((...t)=>{},"debug"),info:a((...t)=>{},"info"),warn:a((...t)=>{},"warn"),error:a((...t)=>{},"error"),fatal:a((...t)=>{},"fatal")},o=a(function(t="fatal"){let e=i.fatal;"string"==typeof t?t.toLowerCase()in i&&(e=i[t]):"number"==typeof t&&(e=t),l.trace=()=>{},l.debug=()=>{},l.info=()=>{},l.warn=()=>{},l.error=()=>{},l.fatal=()=>{},e<=i.fatal&&(l.fatal=console.error?console.error.bind(console,s("FATAL"),"color: orange"):console.log.bind(console,"\x1b[35m",s("FATAL"))),e<=i.error&&(l.error=console.error?console.error.bind(console,s("ERROR"),"color: orange"):console.log.bind(console,"\x1b[31m",s("ERROR"))),e<=i.warn&&(l.warn=console.warn?console.warn.bind(console,s("WARN"),"color: orange"):console.log.bind(console,`\x1b[33m`,s("WARN"))),e<=i.info&&(l.info=console.info?console.info.bind(console,s("INFO"),"color: lightblue"):console.log.bind(console,"\x1b[34m",s("INFO"))),e<=i.debug&&(l.debug=console.debug?console.debug.bind(console,s("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1b[32m",s("DEBUG"))),e<=i.trace&&(l.trace=console.debug?console.debug.bind(console,s("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1b[32m",s("TRACE")))},"setLogLevel"),s=a(t=>{let r=(0,e.default)().format("ss.SSS");return`%c${r} : ${t} : `},"format");t.s(["__export",()=>n,"__name",()=>a,"log",()=>l,"setLogLevel",()=>o])},26364,(t,e,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BLANK_URL=r.relativeFirstCharacters=r.whitespaceEscapeCharsRegex=r.urlSchemeRegex=r.ctrlCharactersRegex=r.htmlCtrlEntityRegex=r.htmlEntitiesRegex=r.invalidProtocolRegex=void 0,r.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,r.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,r.htmlCtrlEntityRegex=/&(newline|tab);/gi,r.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,r.urlSchemeRegex=/^.+(:|&colon;)/gim,r.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g,r.relativeFirstCharacters=[".","/"],r.BLANK_URL="about:blank"},14942,(t,e,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.sanitizeUrl=void 0;var a=t.r(26364);function n(t){try{return decodeURIComponent(t)}catch(e){return t}}r.sanitizeUrl=function(t){if(!t)return a.BLANK_URL;var e,r=n(t.trim());do e=(r=n(r=r.replace(a.ctrlCharactersRegex,"").replace(a.htmlEntitiesRegex,function(t,e){return String.fromCharCode(e)}).replace(a.htmlCtrlEntityRegex,"").replace(a.ctrlCharactersRegex,"").replace(a.whitespaceEscapeCharsRegex,"").trim())).match(a.ctrlCharactersRegex)||r.match(a.htmlEntitiesRegex)||r.match(a.htmlCtrlEntityRegex)||r.match(a.whitespaceEscapeCharsRegex);while(e&&e.length>0)var i=r;if(!i)return a.BLANK_URL;if(a.relativeFirstCharacters.indexOf(i[0])>-1)return i;var l=i.trimStart(),o=l.match(a.urlSchemeRegex);if(!o)return i;var s=o[0].toLowerCase().trim();if(a.invalidProtocolRegex.test(s))return a.BLANK_URL;var d=l.replace(/\\/g,"/");if("mailto:"===s||s.includes("://"))return d;if("http:"===s||"https:"===s){if(!URL.canParse(d))return a.BLANK_URL;var c=new URL(d);return c.protocol=c.protocol.toLowerCase(),c.hostname=c.hostname.toLowerCase(),c.toString()}return d}},44270,t=>{"use strict";var e,r=t.i(18885),a=t.i(7827),n=t.i(14942);t.i(31345);var i=t.i(34731),l=t.i(50574),o=t.i(23588),s=t.i(46461),d=t.i(79990),c=t.i(9692),h=t.i(83142),p=t.i(11938),u=t.i(38373),f=t.i(79254),g=t.i(50346),m=t.i(85870),y=t.i(78973),_=t.i(4591),x=t.i(9903),b=t.i(13353),k=t.i(40088),w=t.i(73747),M=t.i(54069),v=t.i(44437),$=t.i(12638),L=t.i(473),S=t.i(85209),C={curveBasis:i.curveBasis,curveBasisClosed:l.curveBasisClosed,curveBasisOpen:o.curveBasisOpen,curveBumpX:s.curveBumpX,curveBumpY:d.curveBumpY,curveBundle:c.curveBundle,curveCardinalClosed:h.curveCardinalClosed,curveCardinalOpen:p.curveCardinalOpen,curveCardinal:u.curveCardinal,curveCatmullRomClosed:f.curveCatmullRomClosed,curveCatmullRomOpen:g.curveCatmullRomOpen,curveCatmullRom:m.curveCatmullRom,curveLinear:y.curveLinear,curveLinearClosed:_.curveLinearClosed,curveMonotoneX:x.curveMonotoneX,curveMonotoneY:b.curveMonotoneY,curveNatural:k.curveNatural,curveStep:w.curveStep,curveStepAfter:M.curveStepAfter,curveStepBefore:v.curveStepBefore},E=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,O=(0,a.__name)(function(t,e){let a=R(t,/(?:init\b)|(?:initialize\b)/),n={};if(Array.isArray(a)){let t=a.map(t=>t.args);(0,r.sanitizeDirective)(t),n=(0,r.assignWithDepth_default)(n,[...t])}else n=a.args;if(!n)return;let i=(0,r.detectType)(t,e),l="config";return void 0!==n[l]&&("flowchart-v2"===i&&(i="flowchart"),n[i]=n[l],delete n[l]),n},"detectInit"),R=(0,a.__name)(function(t,e=null){try{let n,i=RegExp(`[%]{2}(?![{]${E.source})(?=[}][%]{2}).*
`,"ig");t=t.trim().replace(i,"").replace(/'/gm,'"'),a.log.debug(`Detecting diagram directive${null!==e?" type:"+e:""} based on the text:${t}`);let l=[];for(;null!==(n=r.directiveRegex.exec(t));)if(n.index===r.directiveRegex.lastIndex&&r.directiveRegex.lastIndex++,n&&!e||e&&n[1]?.match(e)||e&&n[2]?.match(e)){let t=n[1]?n[1]:n[2],e=n[3]?n[3].trim():n[4]?JSON.parse(n[4].trim()):null;l.push({type:t,args:e})}if(0===l.length)return{type:t,args:null};return 1===l.length?l[0]:l}catch(r){return a.log.error(`ERROR: ${r.message} - Unable to parse directive type: '${e}' based on the text: '${t}'`),{type:void 0,args:null}}},"detectDirective"),T=(0,a.__name)(function(t){return t.replace(r.directiveRegex,"")},"removeDirectives"),A=(0,a.__name)(function(t,e){for(let[r,a]of e.entries())if(a.match(t))return r;return -1},"isSubstringInArray");function B(t,e){return t?C[`curve${t.charAt(0).toUpperCase()+t.slice(1)}`]??e:e}function W(t,e){let r=t.trim();if(r)return"loose"!==e.securityLevel?(0,n.sanitizeUrl)(r):r}(0,a.__name)(B,"interpolateToCurve"),(0,a.__name)(W,"formatUrl");var P=(0,a.__name)((t,...e)=>{let r=t.split("."),n=r.length-1,i=r[n],l=window;for(let e=0;e<n;e++)if(!(l=l[r[e]]))return void a.log.error(`Function name: ${t} not found in window`);l[i](...e)},"runFunc");function N(t,e){return t&&e?Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)):0}function H(t){let e,r=0;return t.forEach(t=>{r+=N(t,e),e=t}),Y(t,r/2)}function U(t){return 1===t.length?t[0]:H(t)}(0,a.__name)(N,"distance"),(0,a.__name)(H,"traverseEdge"),(0,a.__name)(U,"calcLabelPosition");var X=(0,a.__name)((t,e=2)=>{let r=Math.pow(10,e);return Math.round(t*r)/r},"roundNumber"),Y=(0,a.__name)((t,e)=>{let r,a=e;for(let e of t){if(r){let t=N(e,r);if(0===t)return r;if(t<a)a-=t;else{let n=a/t;if(n<=0)return r;if(n>=1)return{x:e.x,y:e.y};if(n>0&&n<1)return{x:X((1-n)*r.x+n*e.x,5),y:X((1-n)*r.y+n*e.y,5)}}}r=e}throw Error("Could not find a suitable point for the given distance")},"calculatePoint"),z=(0,a.__name)((t,e,r)=>{a.log.info(`our points ${JSON.stringify(e)}`),e[0]!==r&&(e=e.reverse());let n=Y(e,25),i=t?10:5,l=Math.atan2(e[0].y-n.y,e[0].x-n.x),o={x:0,y:0};return o.x=Math.sin(l)*i+(e[0].x+n.x)/2,o.y=-Math.cos(l)*i+(e[0].y+n.y)/2,o},"calcCardinalityPosition");function F(t,e,r){let n=structuredClone(r);a.log.info("our points",n),"start_left"!==e&&"start_right"!==e&&n.reverse();let i=Y(n,25+t),l=10+.5*t,o=Math.atan2(n[0].y-i.y,n[0].x-i.x),s={x:0,y:0};return"start_left"===e?(s.x=Math.sin(o+Math.PI)*l+(n[0].x+i.x)/2,s.y=-Math.cos(o+Math.PI)*l+(n[0].y+i.y)/2):"end_right"===e?(s.x=Math.sin(o-Math.PI)*l+(n[0].x+i.x)/2-5,s.y=-Math.cos(o-Math.PI)*l+(n[0].y+i.y)/2-5):"end_left"===e?(s.x=Math.sin(o)*l+(n[0].x+i.x)/2-5,s.y=-Math.cos(o)*l+(n[0].y+i.y)/2-5):(s.x=Math.sin(o)*l+(n[0].x+i.x)/2,s.y=-Math.cos(o)*l+(n[0].y+i.y)/2),s}function j(t){let e="",r="";for(let a of t)void 0!==a&&(a.startsWith("color:")||a.startsWith("text-align:")?r=r+a+";":e=e+a+";");return{style:e,labelStyle:r}}(0,a.__name)(F,"calcTerminalLabelPosition"),(0,a.__name)(j,"getStylesFromArray");var I=0,D=(0,a.__name)(()=>(I++,"id-"+Math.random().toString(36).substr(2,12)+"-"+I),"generateId");function q(t){let e="",r="0123456789abcdef",a=r.length;for(let n=0;n<t;n++)e+=r.charAt(Math.floor(Math.random()*a));return e}(0,a.__name)(q,"makeRandomHex");var Z=(0,a.__name)(t=>q(t.length),"random"),Q=(0,a.__name)(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),G=(0,a.__name)(function(t,e){let a=e.text.replace(r.common_default.lineBreakRegex," "),[,n]=tl(e.fontSize),i=t.append("text");i.attr("x",e.x),i.attr("y",e.y),i.style("text-anchor",e.anchor),i.style("font-family",e.fontFamily),i.style("font-size",n),i.style("font-weight",e.fontWeight),i.attr("fill",e.fill),void 0!==e.class&&i.attr("class",e.class);let l=i.append("tspan");return l.attr("x",e.x+2*e.textMargin),l.attr("fill",e.fill),l.text(a),i},"drawSimpleText"),K=(0,L.default)((t,e,a)=>{if(!t||(a=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},a),r.common_default.lineBreakRegex.test(t)))return t;let n=t.split(" ").filter(Boolean),i=[],l="";return n.forEach((t,r)=>{let o=tt(`${t} `,a),s=tt(l,a);if(o>e){let{hyphenatedStrings:r,remainingWord:n}=J(t,e,"-",a);i.push(l,...r),l=n}else s+o>=e?(i.push(l),l=t):l=[l,t].filter(Boolean).join(" ");r+1===n.length&&i.push(l)}),i.filter(t=>""!==t).join(a.joinWith)},(t,e,r)=>`${t}${e}${r.fontSize}${r.fontWeight}${r.fontFamily}${r.joinWith}`),J=(0,L.default)((t,e,r="-",a)=>{a=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},a);let n=[...t],i=[],l="";return n.forEach((t,o)=>{let s=`${l}${t}`;if(tt(s,a)>=e){let t=n.length===o+1,e=`${s}${r}`;i.push(t?s:e),l=""}else l=s}),{hyphenatedStrings:i,remainingWord:l}},(t,e,r="-",a)=>`${t}${e}${r}${a.fontSize}${a.fontWeight}${a.fontFamily}`);function V(t,e){return te(t,e).height}function tt(t,e){return te(t,e).width}(0,a.__name)(V,"calculateTextHeight"),(0,a.__name)(tt,"calculateTextWidth");var te=(0,L.default)((t,e)=>{let{fontSize:a=12,fontFamily:n="Arial",fontWeight:i=400}=e;if(!t)return{width:0,height:0};let[,l]=tl(a),o=t.split(r.common_default.lineBreakRegex),s=[],d=(0,$.select)("body");if(!d.remove)return{width:0,height:0,lineHeight:0};let c=d.append("svg");for(let t of["sans-serif",n]){let e=0,r={width:0,height:0,lineHeight:0};for(let a of o){let n=Q();n.text=a||"​";let o=G(c,n).style("font-size",l).style("font-weight",i).style("font-family",t),s=(o._groups||o)[0][0].getBBox();if(0===s.width&&0===s.height)throw Error("svg element not in render tree");r.width=Math.round(Math.max(r.width,s.width)),e=Math.round(s.height),r.height+=e,r.lineHeight=Math.round(Math.max(r.lineHeight,e))}s.push(r)}c.remove();let h=isNaN(s[1].height)||isNaN(s[1].width)||isNaN(s[1].lineHeight)||s[0].height>s[1].height&&s[0].width>s[1].width&&s[0].lineHeight>s[1].lineHeight?0:1;return s[h]},(t,e)=>`${t}${e.fontSize}${e.fontWeight}${e.fontFamily}`),tr=class{constructor(t=!1,e){this.count=0,this.count=e?e.length:0,this.next=t?()=>this.count++:()=>Date.now()}static{(0,a.__name)(this,"InitIDGenerator")}},ta=(0,a.__name)(function(t){return e=e||document.createElement("div"),t=escape(t).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),e.innerHTML=t,unescape(e.textContent)},"entityDecode");function tn(t){return"str"in t}(0,a.__name)(tn,"isDetailedError");var ti=(0,a.__name)((t,e,r,a)=>{if(!a)return;let n=t.node()?.getBBox();n&&t.append("text").text(a).attr("text-anchor","middle").attr("x",n.x+n.width/2).attr("y",-r).attr("class",e)},"insertTitle"),tl=(0,a.__name)(t=>{if("number"==typeof t)return[t,t+"px"];let e=parseInt(t??"",10);return Number.isNaN(e)?[void 0,void 0]:t===String(e)?[e,t+"px"]:[e,t]},"parseFontSize");function to(t,e){return(0,S.default)({},t,e)}(0,a.__name)(to,"cleanAndMerge");var ts={assignWithDepth:r.assignWithDepth_default,wrapLabel:K,calculateTextHeight:V,calculateTextWidth:tt,calculateTextDimensions:te,cleanAndMerge:to,detectInit:O,detectDirective:R,isSubstringInArray:A,interpolateToCurve:B,calcLabelPosition:U,calcCardinalityPosition:z,calcTerminalLabelPosition:F,formatUrl:W,getStylesFromArray:j,generateId:D,random:Z,runFunc:P,entityDecode:ta,insertTitle:ti,isLabelCoordinateInPath:tu,parseFontSize:tl,InitIDGenerator:tr},td=(0,a.__name)(function(t){let e=t;return(e=(e=e.replace(/style.*:\S*#.*;/g,function(t){return t.substring(0,t.length-1)})).replace(/classDef.*:\S*#.*;/g,function(t){return t.substring(0,t.length-1)})).replace(/#\w+;/g,function(t){let e=t.substring(1,t.length-1);return/^\+?\d+$/.test(e)?"ﬂ°°"+e+"¶ß":"ﬂ°"+e+"¶ß"})},"encodeEntities"),tc=(0,a.__name)(function(t){return t.replace(/ﬂ°°/g,"&#").replace(/ﬂ°/g,"&").replace(/¶ß/g,";")},"decodeEntities"),th=(0,a.__name)((t,e,{counter:r=0,prefix:a,suffix:n},i)=>i||`${a?`${a}_`:""}${t}_${e}_${r}${n?`_${n}`:""}`,"getEdgeId");function tp(t){return t??null}function tu(t,e){let r=Math.round(t.x),a=Math.round(t.y),n=e.replace(/(\d+\.\d+)/g,t=>Math.round(parseFloat(t)).toString());return n.includes(r.toString())||n.includes(a.toString())}(0,a.__name)(tp,"handleUndefinedAttr"),(0,a.__name)(tu,"isLabelCoordinateInPath"),t.s(["ZERO_WIDTH_SPACE",()=>"​","calculateTextHeight",()=>V,"calculateTextWidth",()=>tt,"cleanAndMerge",()=>to,"decodeEntities",()=>tc,"encodeEntities",()=>td,"generateId",()=>D,"getEdgeId",()=>th,"getStylesFromArray",()=>j,"handleUndefinedAttr",()=>tp,"interpolateToCurve",()=>B,"isDetailedError",()=>tn,"parseFontSize",()=>tl,"random",()=>Z,"removeDirectives",()=>T,"utils_default",()=>ts,"wrapLabel",()=>K])},97300,t=>{"use strict";var e=(0,t.i(7827).__name)(({flowchart:t})=>{let e=t?.subGraphTitleMargin?.top??0,r=t?.subGraphTitleMargin?.bottom??0;return{subGraphTitleTopMargin:e,subGraphTitleBottomMargin:r,subGraphTitleTotalMargin:e+r}},"getSubGraphTitleMargins");t.s(["getSubGraphTitleMargins",()=>e])}]);