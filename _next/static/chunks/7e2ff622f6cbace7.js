(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,67066,63641,17660,t=>{"use strict";var e=t.i(22749);t.s(["constant",()=>e.default],67066);var r=t.i(72766);t.s(["each",()=>r.default],63641);var a=t.i(34020),i=t.i(93332),s=t.i(25735),n=t.i(67402),l=(0,i.default)(function(t){return(0,s.default)((0,a.default)(t,1,n.default,!0))});t.s(["union",0,l],17660)},26754,14447,t=>{"use strict";var e=t.i(43005),r=t.i(67066),a=t.i(84076),i=t.i(17047),s=t.i(97143),n=t.i(69924),l=t.i(63641),d=t.i(89325),h=t.i(17660),o=t.i(13588),c=t.i(63278);class p{constructor(t={}){this._isDirected=!e.has(t,"directed")||t.directed,this._isMultigraph=!!e.has(t,"multigraph")&&t.multigraph,this._isCompound=!!e.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=r.constant(void 0),this._defaultEdgeLabelFn=r.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(t){return this._label=t,this}graph(){return this._label}setDefaultNodeLabel(t){return a.isFunction(t)||(t=r.constant(t)),this._defaultNodeLabelFn=t,this}nodeCount(){return this._nodeCount}nodes(){return i.keys(this._nodes)}sources(){var t=this;return s.filter(this.nodes(),function(e){return n.isEmpty(t._in[e])})}sinks(){var t=this;return s.filter(this.nodes(),function(e){return n.isEmpty(t._out[e])})}setNodes(t,e){var r=arguments,a=this;return l.each(t,function(t){r.length>1?a.setNode(t,e):a.setNode(t)}),this}setNode(t,r){return e.has(this._nodes,t)?arguments.length>1&&(this._nodes[t]=r):(this._nodes[t]=arguments.length>1?r:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]="\0",this._children[t]={},this._children["\0"][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount),this}node(t){return this._nodes[t]}hasNode(t){return e.has(this._nodes,t)}removeNode(t){var r=this;if(e.has(this._nodes,t)){var a=function(t){r.removeEdge(r._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],l.each(this.children(t),function(t){r.setParent(t)}),delete this._children[t]),l.each(i.keys(this._in[t]),a),delete this._in[t],delete this._preds[t],l.each(i.keys(this._out[t]),a),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this}setParent(t,e){if(!this._isCompound)throw Error("Cannot set parent in a non-compound graph");if(d.isUndefined(e))e="\0";else{e+="";for(var r=e;!d.isUndefined(r);r=this.parent(r))if(r===t)throw Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this}_removeFromParentsChildList(t){delete this._children[this._parent[t]][t]}parent(t){if(this._isCompound){var e=this._parent[t];if("\0"!==e)return e}}children(t){if(d.isUndefined(t)&&(t="\0"),this._isCompound){var e=this._children[t];if(e)return i.keys(e)}else if("\0"===t)return this.nodes();else if(this.hasNode(t))return[]}predecessors(t){var e=this._preds[t];if(e)return i.keys(e)}successors(t){var e=this._sucs[t];if(e)return i.keys(e)}neighbors(t){var e=this.predecessors(t);if(e)return h.union(e,this.successors(t))}isLeaf(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length}filterNodes(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var r=this;l.each(this._nodes,function(r,a){t(a)&&e.setNode(a,r)}),l.each(this._edgeObjs,function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,r.edge(t))});var a={};return this._isCompound&&l.each(e.nodes(),function(t){e.setParent(t,function t(i){var s=r.parent(i);return void 0===s||e.hasNode(s)?(a[i]=s,s):s in a?a[s]:t(s)}(t))}),e}setDefaultEdgeLabel(t){return a.isFunction(t)||(t=r.constant(t)),this._defaultEdgeLabelFn=t,this}edgeCount(){return this._edgeCount}edges(){return o.values(this._edgeObjs)}setPath(t,e){var r=this,a=arguments;return c.reduce(t,function(t,i){return a.length>1?r.setEdge(t,i,e):r.setEdge(t,i),i}),this}setEdge(){var t,r,a,i,s=!1,n=arguments[0];"object"==typeof n&&null!==n&&"v"in n?(t=n.v,r=n.w,a=n.name,2==arguments.length&&(i=arguments[1],s=!0)):(t=n,r=arguments[1],a=arguments[3],arguments.length>2&&(i=arguments[2],s=!0)),t=""+t,r=""+r,d.isUndefined(a)||(a=""+a);var l=u(this._isDirected,t,r,a);if(e.has(this._edgeLabels,l))return s&&(this._edgeLabels[l]=i),this;if(!d.isUndefined(a)&&!this._isMultigraph)throw Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(r),this._edgeLabels[l]=s?i:this._defaultEdgeLabelFn(t,r,a);var h=function(t,e,r,a){var i=""+e,s=""+r;if(!t&&i>s){var n=i;i=s,s=n}var l={v:i,w:s};return a&&(l.name=a),l}(this._isDirected,t,r,a);return t=h.v,r=h.w,Object.freeze(h),this._edgeObjs[l]=h,y(this._preds[r],t),y(this._sucs[t],r),this._in[r][l]=h,this._out[t][l]=h,this._edgeCount++,this}edge(t,e,r){var a=1==arguments.length?f(this._isDirected,arguments[0]):u(this._isDirected,t,e,r);return this._edgeLabels[a]}hasEdge(t,r,a){var i=1==arguments.length?f(this._isDirected,arguments[0]):u(this._isDirected,t,r,a);return e.has(this._edgeLabels,i)}removeEdge(t,e,r){var a=1==arguments.length?f(this._isDirected,arguments[0]):u(this._isDirected,t,e,r),i=this._edgeObjs[a];return i&&(t=i.v,e=i.w,delete this._edgeLabels[a],delete this._edgeObjs[a],g(this._preds[e],t),g(this._sucs[t],e),delete this._in[e][a],delete this._out[t][a],this._edgeCount--),this}inEdges(t,e){var r=this._in[t];if(r){var a=o.values(r);return e?s.filter(a,function(t){return t.v===e}):a}}outEdges(t,e){var r=this._out[t];if(r){var a=o.values(r);return e?s.filter(a,function(t){return t.w===e}):a}}nodeEdges(t,e){var r=this.inEdges(t,e);if(r)return r.concat(this.outEdges(t,e))}}function y(t,e){t[e]?t[e]++:t[e]=1}function g(t,e){--t[e]||delete t[e]}function u(t,e,r,a){var i=""+e,s=""+r;if(!t&&i>s){var n=i;i=s,s=n}return i+"\x01"+s+"\x01"+(d.isUndefined(a)?"\0":a)}function f(t,e){return u(t,e.v,e.w,e.name)}p.prototype._nodeCount=0,p.prototype._edgeCount=0,t.s(["Graph",()=>p],14447),t.s(["version",()=>"2.1.9-pre"],26754)},44787,t=>{"use strict";var e=t.i(34599);t.i(31345);var r=t.i(12638),a=t.i(29593),i=t.i(34731),s=t.i(28284);let n={extension:(t,r,a)=>{e.l.trace("Making markers for ",a),t.append("defs").append("marker").attr("id",a+"_"+r+"-extensionStart").attr("class","marker extension "+r).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",a+"_"+r+"-extensionEnd").attr("class","marker extension "+r).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},composition:(t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-compositionStart").attr("class","marker composition "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-compositionEnd").attr("class","marker composition "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},aggregation:(t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-aggregationStart").attr("class","marker aggregation "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-aggregationEnd").attr("class","marker aggregation "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},dependency:(t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-dependencyStart").attr("class","marker dependency "+e).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-dependencyEnd").attr("class","marker dependency "+e).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},lollipop:(t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-lollipopStart").attr("class","marker lollipop "+e).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),t.append("defs").append("marker").attr("id",r+"_"+e+"-lollipopEnd").attr("class","marker lollipop "+e).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},point:(t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-pointEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",6).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-pointStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},circle:(t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-circleEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-circleStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},cross:(t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-crossEnd").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-crossStart").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},barb:(t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")}},l=(t,e,r,a)=>{e.forEach(e=>{n[e](t,r,a)})},d=(t,a,i,s)=>{let n=t||"";if("object"==typeof n&&(n=n[0]),(0,e.m)((0,e.c)().flowchart.htmlLabels)){var l,d;let t,i,h,o;return n=n.replace(/\\n|\n/g,"<br />"),e.l.debug("vertexText"+n),l={isNode:s,label:(0,e.M)(n).replace(/fa[blrs]?:fa-[\w-]+/g,t=>`<i class='${t.replace(":"," ")}'></i>`),labelStyle:a.replace("fill:","color:")},i=(t=(0,r.select)(document.createElementNS("http://www.w3.org/2000/svg","foreignObject"))).append("xhtml:div"),h=l.label,o=l.isNode?"nodeLabel":"edgeLabel",i.html('<span class="'+o+'" '+(l.labelStyle?'style="'+l.labelStyle+'"':"")+">"+h+"</span>"),(d=l.labelStyle)&&i.attr("style",d),i.style("display","inline-block"),i.style("white-space","nowrap"),i.attr("xmlns","http://www.w3.org/1999/xhtml"),t.node()}{let t=document.createElementNS("http://www.w3.org/2000/svg","text");t.setAttribute("style",a.replace("color:","fill:"));for(let e of"string"==typeof n?n.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(n)?n:[]){let r=document.createElementNS("http://www.w3.org/2000/svg","tspan");r.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),r.setAttribute("dy","1em"),r.setAttribute("x","0"),i?r.setAttribute("class","title-row"):r.setAttribute("class","row"),r.textContent=e.trim(),t.appendChild(r)}return t}},h=async(t,a,i,n)=>{let l,h,o=a.useHtmlLabels||(0,e.m)((0,e.c)().flowchart.htmlLabels),c=t.insert("g").attr("class",i||"node default").attr("id",a.domId||a.id),p=c.insert("g").attr("class","label").attr("style",a.labelStyle);l=void 0===a.labelText?"":"string"==typeof a.labelText?a.labelText:a.labelText[0];let y=p.node(),g=(h="markdown"===a.labelType?(0,s.a)(p,(0,e.d)((0,e.M)(l),(0,e.c)()),{useHtmlLabels:o,width:a.width||(0,e.c)().flowchart.wrappingWidth,classes:"markdown-node-label"}):y.appendChild(d((0,e.d)((0,e.M)(l),(0,e.c)()),a.labelStyle,!1,n))).getBBox(),u=a.padding/2;if((0,e.m)((0,e.c)().flowchart.htmlLabels)){let t=h.children[0],a=(0,r.select)(h),i=t.getElementsByTagName("img");if(i){let t=""===l.replace(/<img[^>]*>/g,"").trim();await Promise.all([...i].map(r=>new Promise(a=>{function i(){if(r.style.display="flex",r.style.flexDirection="column",t){let t=5*parseInt((0,e.c)().fontSize?(0,e.c)().fontSize:window.getComputedStyle(document.body).fontSize,10)+"px";r.style.minWidth=t,r.style.maxWidth=t}else r.style.width="100%";a(r)}setTimeout(()=>{r.complete&&i()}),r.addEventListener("error",i),r.addEventListener("load",i)})))}g=t.getBoundingClientRect(),a.attr("width",g.width),a.attr("height",g.height)}return o?p.attr("transform","translate("+-g.width/2+", "+-g.height/2+")"):p.attr("transform","translate(0, "+-g.height/2+")"),a.centerLabel&&p.attr("transform","translate("+-g.width/2+", "+-g.height/2+")"),p.insert("rect",":first-child"),{shapeSvg:c,bbox:g,halfPadding:u,label:p}},o=(t,e)=>{let r=e.node().getBBox();t.width=r.width,t.height=r.height};function c(t,e,r,a){return t.insert("polygon",":first-child").attr("points",a.map(function(t){return t.x+","+t.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+r/2+")")}let p=(t,e)=>{var r,a,i=t.x,s=t.y,n=e.x-i,l=e.y-s,d=t.width/2,h=t.height/2;return Math.abs(l)*d>Math.abs(n)*h?(l<0&&(h=-h),r=0===l?0:h*n/l,a=h):(n<0&&(d=-d),r=d,a=0===n?0:d*l/n),{x:i+r,y:s+a}},y=function(t,e,r){var a,i,s,n,l,d,h,o,c,p,y;return a=t,i=e,s=e,n=r,l=a.x,d=a.y,h=l-n.x,c=Math.sqrt(i*i*(o=d-n.y)*o+s*s*h*h),p=Math.abs(i*s*h/c),n.x<l&&(p=-p),y=Math.abs(i*s*o/c),n.y<d&&(y=-y),{x:l+p,y:d+y}},g=function(t,e,r){var a=t.x,i=t.y,s=[],n=1/0,l=1/0;"function"==typeof e.forEach?e.forEach(function(t){n=Math.min(n,t.x),l=Math.min(l,t.y)}):(n=Math.min(n,e.x),l=Math.min(l,e.y));for(var d=a-t.width/2-n,h=i-t.height/2-l,o=0;o<e.length;o++){var c=e[o],p=e[o<e.length-1?o+1:0],y=function(t,e,r,a){var i,s,n,l,d,h,o,c,p,y,g,u,f;if(i=e.y-t.y,n=t.x-e.x,d=e.x*t.y-t.x*e.y,p=i*r.x+n*r.y+d,y=i*a.x+n*a.y+d,0===p||0===y||!(p*y>0)){if((s=a.y-r.y,l=r.x-a.x,h=a.x*r.y-r.x*a.y,o=s*t.x+l*t.y+h,c=s*e.x+l*e.y+h,!(0!==o&&0!==c&&o*c>0))&&0!=(g=i*l-s*n))return u=Math.abs(g/2),{x:(f=n*h-l*d)<0?(f-u)/g:(f+u)/g,y:(f=s*d-i*h)<0?(f-u)/g:(f+u)/g}}}(t,r,{x:d+c.x,y:h+c.y},{x:d+p.x,y:h+p.y});y&&s.push(y)}return s.length?(s.length>1&&s.sort(function(t,e){var a=t.x-r.x,i=t.y-r.y,s=Math.sqrt(a*a+i*i),n=e.x-r.x,l=e.y-r.y,d=Math.sqrt(n*n+l*l);return s<d?-1:+(s!==d)}),s[0]):t},u=t=>t?" "+t:"",f=(t,e)=>`${e||"node default"}${u(t.classes)} ${u(t.class)}`,x=async(t,r)=>{let{shapeSvg:a,bbox:i}=await h(t,r,f(r,void 0),!0),s=i.width+r.padding+(i.height+r.padding),n=[{x:s/2,y:0},{x:s,y:-s/2},{x:s/2,y:-s},{x:0,y:-s/2}];e.l.info("Question main (Circle)");let l=c(a,s,s,n);return l.attr("style",r.style),o(r,l),r.intersect=function(t){return e.l.warn("Intersect called"),g(r,n,t)},a};function w(t,r,a,i){let s=[],n=t=>{s.push(t,0)},l=t=>{s.push(0,t)};r.includes("t")?(e.l.debug("add top border"),n(a)):l(a),r.includes("r")?(e.l.debug("add right border"),n(i)):l(i),r.includes("b")?(e.l.debug("add bottom border"),n(a)):l(a),r.includes("l")?(e.l.debug("add left border"),n(i)):l(i),t.attr("stroke-dasharray",s.join(" "))}let m=(t,e,r)=>{let a=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),i=70,s=10;return"LR"===r&&(i=10,s=70),o(e,a.append("rect").attr("x",-1*i/2).attr("y",-1*s/2).attr("width",i).attr("height",s).attr("class","fork-join")),e.height=e.height+e.padding/2,e.width=e.width+e.padding/2,e.intersect=function(t){return p(e,t)},a},b={rhombus:x,composite:async(t,r)=>{let{shapeSvg:a,bbox:i,halfPadding:s}=await h(t,r,"node "+r.classes,!0),n=a.insert("rect",":first-child"),l=r.positioned?r.width:i.width+r.padding,d=r.positioned?r.height:i.height+r.padding,c=r.positioned?-l/2:-i.width/2-s,y=r.positioned?-d/2:-i.height/2-s;if(n.attr("class","basic cluster composite label-container").attr("style",r.style).attr("rx",r.rx).attr("ry",r.ry).attr("x",c).attr("y",y).attr("width",l).attr("height",d),r.props){let t=new Set(Object.keys(r.props));r.props.borders&&(w(n,r.props.borders,l,d),t.delete("borders")),t.forEach(t=>{e.l.warn(`Unknown node property ${t}`)})}return o(r,n),r.intersect=function(t){return p(r,t)},a},question:x,rect:async(t,r)=>{let{shapeSvg:a,bbox:i,halfPadding:s}=await h(t,r,"node "+r.classes+" "+r.class,!0),n=a.insert("rect",":first-child"),l=r.positioned?r.width:i.width+r.padding,d=r.positioned?r.height:i.height+r.padding,c=r.positioned?-l/2:-i.width/2-s,y=r.positioned?-d/2:-i.height/2-s;if(n.attr("class","basic label-container").attr("style",r.style).attr("rx",r.rx).attr("ry",r.ry).attr("x",c).attr("y",y).attr("width",l).attr("height",d),r.props){let t=new Set(Object.keys(r.props));r.props.borders&&(w(n,r.props.borders,l,d),t.delete("borders")),t.forEach(t=>{e.l.warn(`Unknown node property ${t}`)})}return o(r,n),r.intersect=function(t){return p(r,t)},a},labelRect:async(t,r)=>{let{shapeSvg:a}=await h(t,r,"label",!0);e.l.trace("Classes = ",r.class);let i=a.insert("rect",":first-child");if(i.attr("width",0).attr("height",0),a.attr("class","label edgeLabel"),r.props){let t=new Set(Object.keys(r.props));r.props.borders&&(w(i,r.props.borders,0,0),t.delete("borders")),t.forEach(t=>{e.l.warn(`Unknown node property ${t}`)})}return o(r,i),r.intersect=function(t){return p(r,t)},a},rectWithTitle:(t,a)=>{let i;i=a.classes?"node "+a.classes:"node default";let s=t.insert("g").attr("class",i).attr("id",a.domId||a.id),n=s.insert("rect",":first-child"),l=s.insert("line"),h=s.insert("g").attr("class","label"),c=a.labelText.flat?a.labelText.flat():a.labelText,y="";y="object"==typeof c?c[0]:c,e.l.info("Label text abc79",y,c,"object"==typeof c);let g=h.node().appendChild(d(y,a.labelStyle,!0,!0)),u={width:0,height:0};if((0,e.m)((0,e.c)().flowchart.htmlLabels)){let t=g.children[0],e=(0,r.select)(g);u=t.getBoundingClientRect(),e.attr("width",u.width),e.attr("height",u.height)}e.l.info("Text 2",c);let f=c.slice(1,c.length),x=g.getBBox(),w=h.node().appendChild(d(f.join?f.join("<br/>"):f,a.labelStyle,!0,!0));if((0,e.m)((0,e.c)().flowchart.htmlLabels)){let t=w.children[0],e=(0,r.select)(w);u=t.getBoundingClientRect(),e.attr("width",u.width),e.attr("height",u.height)}let m=a.padding/2;return(0,r.select)(w).attr("transform","translate( "+(u.width>x.width?0:(x.width-u.width)/2)+", "+(x.height+m+5)+")"),(0,r.select)(g).attr("transform","translate( "+(u.width<x.width?0:-(x.width-u.width)/2)+", 0)"),u=h.node().getBBox(),h.attr("transform","translate("+-u.width/2+", "+(-u.height/2-m+3)+")"),n.attr("class","outer title-state").attr("x",-u.width/2-m).attr("y",-u.height/2-m).attr("width",u.width+a.padding).attr("height",u.height+a.padding),l.attr("class","divider").attr("x1",-u.width/2-m).attr("x2",u.width/2+m).attr("y1",-u.height/2-m+x.height+m).attr("y2",-u.height/2-m+x.height+m),o(a,n),a.intersect=function(t){return p(a,t)},s},choice:(t,e)=>{let r=t.insert("g").attr("class","node default").attr("id",e.domId||e.id);return r.insert("polygon",":first-child").attr("points",[{x:0,y:14},{x:14,y:0},{x:0,y:-14},{x:-14,y:0}].map(function(t){return t.x+","+t.y}).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),e.width=28,e.height=28,e.intersect=function(t){return y(e,14,t)},r},circle:async(t,r)=>{let{shapeSvg:a,bbox:i,halfPadding:s}=await h(t,r,f(r,void 0),!0),n=a.insert("circle",":first-child");return n.attr("style",r.style).attr("rx",r.rx).attr("ry",r.ry).attr("r",i.width/2+s).attr("width",i.width+r.padding).attr("height",i.height+r.padding),e.l.info("Circle main"),o(r,n),r.intersect=function(t){return e.l.info("Circle intersect",r,i.width/2+s,t),y(r,i.width/2+s,t)},a},doublecircle:async(t,r)=>{let{shapeSvg:a,bbox:i,halfPadding:s}=await h(t,r,f(r,void 0),!0),n=a.insert("g",":first-child"),l=n.insert("circle"),d=n.insert("circle");return n.attr("class",r.class),l.attr("style",r.style).attr("rx",r.rx).attr("ry",r.ry).attr("r",i.width/2+s+5).attr("width",i.width+r.padding+10).attr("height",i.height+r.padding+10),d.attr("style",r.style).attr("rx",r.rx).attr("ry",r.ry).attr("r",i.width/2+s).attr("width",i.width+r.padding).attr("height",i.height+r.padding),e.l.info("DoubleCircle main"),o(r,l),r.intersect=function(t){return e.l.info("DoubleCircle intersect",r,i.width/2+s+5,t),y(r,i.width/2+s+5,t)},a},stadium:async(t,e)=>{let{shapeSvg:r,bbox:a}=await h(t,e,f(e,void 0),!0),i=a.height+e.padding,s=a.width+i/4+e.padding,n=r.insert("rect",":first-child").attr("style",e.style).attr("rx",i/2).attr("ry",i/2).attr("x",-s/2).attr("y",-i/2).attr("width",s).attr("height",i);return o(e,n),e.intersect=function(t){return p(e,t)},r},hexagon:async(t,e)=>{let{shapeSvg:r,bbox:a}=await h(t,e,f(e,void 0),!0),i=a.height+e.padding,s=i/4,n=a.width+2*s+e.padding,l=[{x:s,y:0},{x:n-s,y:0},{x:n,y:-i/2},{x:n-s,y:-i},{x:s,y:-i},{x:0,y:-i/2}],d=c(r,n,i,l);return d.attr("style",e.style),o(e,d),e.intersect=function(t){return g(e,l,t)},r},block_arrow:async(t,e)=>{var r;let a,i,s,n,l,{shapeSvg:d,bbox:p}=await h(t,e,void 0,!0),y=p.height+2*e.padding,u=y/2,f=p.width+2*u+e.padding,x=(r=e.directions,a=(t=>{let e=new Set;for(let r of t)switch(r){case"x":e.add("right"),e.add("left");break;case"y":e.add("up"),e.add("down");break;default:e.add(r)}return e})(r),s=(i=p.height+2*e.padding)/2,n=p.width+2*s+e.padding,l=e.padding/2,a.has("right")&&a.has("left")&&a.has("up")&&a.has("down")?[{x:0,y:0},{x:s,y:0},{x:n/2,y:2*l},{x:n-s,y:0},{x:n,y:0},{x:n,y:-i/3},{x:n+2*l,y:-i/2},{x:n,y:-2*i/3},{x:n,y:-i},{x:n-s,y:-i},{x:n/2,y:-i-2*l},{x:s,y:-i},{x:0,y:-i},{x:0,y:-2*i/3},{x:-2*l,y:-i/2},{x:0,y:-i/3}]:a.has("right")&&a.has("left")&&a.has("up")?[{x:s,y:0},{x:n-s,y:0},{x:n,y:-i/2},{x:n-s,y:-i},{x:s,y:-i},{x:0,y:-i/2}]:a.has("right")&&a.has("left")&&a.has("down")?[{x:0,y:0},{x:s,y:-i},{x:n-s,y:-i},{x:n,y:0}]:a.has("right")&&a.has("up")&&a.has("down")?[{x:0,y:0},{x:n,y:-s},{x:n,y:-i+s},{x:0,y:-i}]:a.has("left")&&a.has("up")&&a.has("down")?[{x:n,y:0},{x:0,y:-s},{x:0,y:-i+s},{x:n,y:-i}]:a.has("right")&&a.has("left")?[{x:s,y:0},{x:s,y:-l},{x:n-s,y:-l},{x:n-s,y:0},{x:n,y:-i/2},{x:n-s,y:-i},{x:n-s,y:-i+l},{x:s,y:-i+l},{x:s,y:-i},{x:0,y:-i/2}]:a.has("up")&&a.has("down")?[{x:n/2,y:0},{x:0,y:-l},{x:s,y:-l},{x:s,y:-i+l},{x:0,y:-i+l},{x:n/2,y:-i},{x:n,y:-i+l},{x:n-s,y:-i+l},{x:n-s,y:-l},{x:n,y:-l}]:a.has("right")&&a.has("up")?[{x:0,y:0},{x:n,y:-s},{x:0,y:-i}]:a.has("right")&&a.has("down")?[{x:0,y:0},{x:n,y:0},{x:0,y:-i}]:a.has("left")&&a.has("up")?[{x:n,y:0},{x:0,y:-s},{x:n,y:-i}]:a.has("left")&&a.has("down")?[{x:n,y:0},{x:0,y:0},{x:n,y:-i}]:a.has("right")?[{x:s,y:-l},{x:s,y:-l},{x:n-s,y:-l},{x:n-s,y:0},{x:n,y:-i/2},{x:n-s,y:-i},{x:n-s,y:-i+l},{x:s,y:-i+l},{x:s,y:-i+l}]:a.has("left")?[{x:s,y:0},{x:s,y:-l},{x:n-s,y:-l},{x:n-s,y:-i+l},{x:s,y:-i+l},{x:s,y:-i},{x:0,y:-i/2}]:a.has("up")?[{x:s,y:-l},{x:s,y:-i+l},{x:0,y:-i+l},{x:n/2,y:-i},{x:n,y:-i+l},{x:n-s,y:-i+l},{x:n-s,y:-l}]:a.has("down")?[{x:n/2,y:0},{x:0,y:-l},{x:s,y:-l},{x:s,y:-i+l},{x:n-s,y:-i+l},{x:n-s,y:-l},{x:n,y:-l}]:[{x:0,y:0}]),w=c(d,f,y,x);return w.attr("style",e.style),o(e,w),e.intersect=function(t){return g(e,x,t)},d},rect_left_inv_arrow:async(t,e)=>{let{shapeSvg:r,bbox:a}=await h(t,e,f(e,void 0),!0),i=a.width+e.padding,s=a.height+e.padding,n=[{x:-s/2,y:0},{x:i,y:0},{x:i,y:-s},{x:-s/2,y:-s},{x:0,y:-s/2}];return c(r,i,s,n).attr("style",e.style),e.width=i+s,e.height=s,e.intersect=function(t){return g(e,n,t)},r},lean_right:async(t,e)=>{let{shapeSvg:r,bbox:a}=await h(t,e,f(e),!0),i=a.width+e.padding,s=a.height+e.padding,n=[{x:-2*s/6,y:0},{x:i-s/6,y:0},{x:i+2*s/6,y:-s},{x:s/6,y:-s}],l=c(r,i,s,n);return l.attr("style",e.style),o(e,l),e.intersect=function(t){return g(e,n,t)},r},lean_left:async(t,e)=>{let{shapeSvg:r,bbox:a}=await h(t,e,f(e,void 0),!0),i=a.width+e.padding,s=a.height+e.padding,n=[{x:2*s/6,y:0},{x:i+s/6,y:0},{x:i-2*s/6,y:-s},{x:-s/6,y:-s}],l=c(r,i,s,n);return l.attr("style",e.style),o(e,l),e.intersect=function(t){return g(e,n,t)},r},trapezoid:async(t,e)=>{let{shapeSvg:r,bbox:a}=await h(t,e,f(e,void 0),!0),i=a.width+e.padding,s=a.height+e.padding,n=[{x:-2*s/6,y:0},{x:i+2*s/6,y:0},{x:i-s/6,y:-s},{x:s/6,y:-s}],l=c(r,i,s,n);return l.attr("style",e.style),o(e,l),e.intersect=function(t){return g(e,n,t)},r},inv_trapezoid:async(t,e)=>{let{shapeSvg:r,bbox:a}=await h(t,e,f(e,void 0),!0),i=a.width+e.padding,s=a.height+e.padding,n=[{x:s/6,y:0},{x:i-s/6,y:0},{x:i+2*s/6,y:-s},{x:-2*s/6,y:-s}],l=c(r,i,s,n);return l.attr("style",e.style),o(e,l),e.intersect=function(t){return g(e,n,t)},r},rect_right_inv_arrow:async(t,e)=>{let{shapeSvg:r,bbox:a}=await h(t,e,f(e,void 0),!0),i=a.width+e.padding,s=a.height+e.padding,n=[{x:0,y:0},{x:i+s/2,y:0},{x:i,y:-s/2},{x:i+s/2,y:-s},{x:0,y:-s}],l=c(r,i,s,n);return l.attr("style",e.style),o(e,l),e.intersect=function(t){return g(e,n,t)},r},cylinder:async(t,e)=>{let{shapeSvg:r,bbox:a}=await h(t,e,f(e,void 0),!0),i=a.width+e.padding,s=i/2,n=s/(2.5+i/50),l=a.height+n+e.padding,d="M 0,"+n+" a "+s+","+n+" 0,0,0 "+i+" 0 a "+s+","+n+" 0,0,0 "+-i+" 0 l 0,"+l+" a "+s+","+n+" 0,0,0 "+i+" 0 l 0,"+-l,c=r.attr("label-offset-y",n).insert("path",":first-child").attr("style",e.style).attr("d",d).attr("transform","translate("+-i/2+","+-(l/2+n)+")");return o(e,c),e.intersect=function(t){let r=p(e,t),a=r.x-e.x;if(0!=s&&(Math.abs(a)<e.width/2||Math.abs(a)==e.width/2&&Math.abs(r.y-e.y)>e.height/2-n)){let i=n*n*(1-a*a/(s*s));0!=i&&(i=Math.sqrt(i)),i=n-i,t.y-e.y>0&&(i=-i),r.y+=i}return r},r},start:(t,e)=>{let r=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),a=r.insert("circle",":first-child");return a.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),o(e,a),e.intersect=function(t){return y(e,7,t)},r},end:(t,e)=>{let r=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),a=r.insert("circle",":first-child"),i=r.insert("circle",":first-child");return i.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),a.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),o(e,i),e.intersect=function(t){return y(e,7,t)},r},note:async(t,r)=>{r.useHtmlLabels||(0,e.c)().flowchart.htmlLabels||(r.centerLabel=!0);let{shapeSvg:a,bbox:i,halfPadding:s}=await h(t,r,"node "+r.classes,!0);e.l.info("Classes = ",r.classes);let n=a.insert("rect",":first-child");return n.attr("rx",r.rx).attr("ry",r.ry).attr("x",-i.width/2-s).attr("y",-i.height/2-s).attr("width",i.width+r.padding).attr("height",i.height+r.padding),o(r,n),r.intersect=function(t){return p(r,t)},a},subroutine:async(t,e)=>{let{shapeSvg:r,bbox:a}=await h(t,e,f(e,void 0),!0),i=a.width+e.padding,s=a.height+e.padding,n=[{x:0,y:0},{x:i,y:0},{x:i,y:-s},{x:0,y:-s},{x:0,y:0},{x:-8,y:0},{x:i+8,y:0},{x:i+8,y:-s},{x:-8,y:-s},{x:-8,y:0}],l=c(r,i,s,n);return l.attr("style",e.style),o(e,l),e.intersect=function(t){return g(e,n,t)},r},fork:m,join:m,class_box:(t,a)=>{let i,s=a.padding/2;i=a.classes?"node "+a.classes:"node default";let n=t.insert("g").attr("class",i).attr("id",a.domId||a.id),l=n.insert("rect",":first-child"),h=n.insert("line"),c=n.insert("line"),y=0,g=4,u=n.insert("g").attr("class","label"),f=0,x=a.classData.annotations&&a.classData.annotations[0],w=a.classData.annotations[0]?"«"+a.classData.annotations[0]+"»":"",m=u.node().appendChild(d(w,a.labelStyle,!0,!0)),b=m.getBBox();if((0,e.m)((0,e.c)().flowchart.htmlLabels)){let t=m.children[0],e=(0,r.select)(m);b=t.getBoundingClientRect(),e.attr("width",b.width),e.attr("height",b.height)}a.classData.annotations[0]&&(g+=b.height+4,y+=b.width);let _=a.classData.label;void 0!==a.classData.type&&""!==a.classData.type&&((0,e.c)().flowchart.htmlLabels?_+="&lt;"+a.classData.type+"&gt;":_+="<"+a.classData.type+">");let k=u.node().appendChild(d(_,a.labelStyle,!0,!0));(0,r.select)(k).attr("class","classTitle");let v=k.getBBox();if((0,e.m)((0,e.c)().flowchart.htmlLabels)){let t=k.children[0],e=(0,r.select)(k);v=t.getBoundingClientRect(),e.attr("width",v.width),e.attr("height",v.height)}g+=v.height+4,v.width>y&&(y=v.width);let L=[];a.classData.members.forEach(t=>{let i=t.getDisplayDetails(),s=i.displayText;(0,e.c)().flowchart.htmlLabels&&(s=s.replace(/</g,"&lt;").replace(/>/g,"&gt;"));let n=u.node().appendChild(d(s,i.cssStyle?i.cssStyle:a.labelStyle,!0,!0)),l=n.getBBox();if((0,e.m)((0,e.c)().flowchart.htmlLabels)){let t=n.children[0],e=(0,r.select)(n);l=t.getBoundingClientRect(),e.attr("width",l.width),e.attr("height",l.height)}l.width>y&&(y=l.width),g+=l.height+4,L.push(n)}),g+=8;let M=[];if(a.classData.methods.forEach(t=>{let i=t.getDisplayDetails(),s=i.displayText;(0,e.c)().flowchart.htmlLabels&&(s=s.replace(/</g,"&lt;").replace(/>/g,"&gt;"));let n=u.node().appendChild(d(s,i.cssStyle?i.cssStyle:a.labelStyle,!0,!0)),l=n.getBBox();if((0,e.m)((0,e.c)().flowchart.htmlLabels)){let t=n.children[0],e=(0,r.select)(n);l=t.getBoundingClientRect(),e.attr("width",l.width),e.attr("height",l.height)}l.width>y&&(y=l.width),g+=l.height+4,M.push(n)}),g+=8,x){let t=(y-b.width)/2;(0,r.select)(m).attr("transform","translate( "+(-1*y/2+t)+", "+-1*g/2+")"),f=b.height+4}let C=(y-v.width)/2;return(0,r.select)(k).attr("transform","translate( "+(-1*y/2+C)+", "+(-1*g/2+f)+")"),f+=v.height+4,h.attr("class","divider").attr("x1",-y/2-s).attr("x2",y/2+s).attr("y1",-g/2-s+8+f).attr("y2",-g/2-s+8+f),f+=8,L.forEach(t=>{(0,r.select)(t).attr("transform","translate( "+-y/2+", "+(-1*g/2+f+4)+")");let e=null==t?void 0:t.getBBox();f+=((null==e?void 0:e.height)??0)+4}),f+=8,c.attr("class","divider").attr("x1",-y/2-s).attr("x2",y/2+s).attr("y1",-g/2-s+8+f).attr("y2",-g/2-s+8+f),f+=8,M.forEach(t=>{(0,r.select)(t).attr("transform","translate( "+-y/2+", "+(-1*g/2+f)+")");let e=null==t?void 0:t.getBBox();f+=((null==e?void 0:e.height)??0)+4}),l.attr("style",a.style).attr("class","outer title-state").attr("x",-y/2-s).attr("y",-(g/2)-s).attr("width",y+a.padding).attr("height",g+a.padding),o(a,l),a.intersect=function(t){return p(a,t)},n}},_={},k=async(t,r,a)=>{let i,s;if(r.link){let n;"sandbox"===(0,e.c)().securityLevel?n="_top":r.linkTarget&&(n=r.linkTarget||"_blank"),i=t.insert("svg:a").attr("xlink:href",r.link).attr("target",n),s=await b[r.shape](i,r,a)}else i=s=await b[r.shape](t,r,a);return r.tooltip&&s.attr("title",r.tooltip),r.class&&s.attr("class","node default "+r.class),i.attr("data-node","true"),i.attr("data-id",r.id),_[r.id]=i,r.haveCallback&&_[r.id].attr("class",_[r.id].attr("class")+" clickable"),i},v=(t,e)=>{_[e.id]=t},L=()=>{_={}},M=t=>{let r=_[t.id];e.l.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");let a=t.diff||0;return t.clusterNode?r.attr("transform","translate("+(t.x+a-t.width/2)+", "+(t.y-t.height/2-8)+")"):r.attr("transform","translate("+t.x+", "+t.y+")"),a},C=({flowchart:t})=>{var e,r;let a=(null==(e=null==t?void 0:t.subGraphTitleMargin)?void 0:e.top)??0,i=(null==(r=null==t?void 0:t.subGraphTitleMargin)?void 0:r.bottom)??0;return{subGraphTitleTopMargin:a,subGraphTitleBottomMargin:i,subGraphTitleTotalMargin:a+i}},S={aggregation:18,extension:18,composition:18,dependency:6,lollipop:13.5,arrow_point:5.3};function E(t,e){if(void 0===t||void 0===e)return{angle:0,deltaX:0,deltaY:0};t=T(t),e=T(e);let[r,a]=[t.x,t.y],[i,s]=[e.x,e.y],n=i-r,l=s-a;return{angle:Math.atan(l/n),deltaX:n,deltaY:l}}let T=t=>Array.isArray(t)?{x:t[0],y:t[1]}:t,B=t=>({x:function(e,r,a){let i=0;if(0===r&&Object.hasOwn(S,t.arrowTypeStart)){let{angle:e,deltaX:r}=E(a[0],a[1]);i=S[t.arrowTypeStart]*Math.cos(e)*(r>=0?1:-1)}else if(r===a.length-1&&Object.hasOwn(S,t.arrowTypeEnd)){let{angle:e,deltaX:r}=E(a[a.length-1],a[a.length-2]);i=S[t.arrowTypeEnd]*Math.cos(e)*(r>=0?1:-1)}return T(e).x+i},y:function(e,r,a){let i=0;if(0===r&&Object.hasOwn(S,t.arrowTypeStart)){let{angle:e,deltaY:r}=E(a[0],a[1]);i=S[t.arrowTypeStart]*Math.abs(Math.sin(e))*(r>=0?1:-1)}else if(r===a.length-1&&Object.hasOwn(S,t.arrowTypeEnd)){let{angle:e,deltaY:r}=E(a[a.length-1],a[a.length-2]);i=S[t.arrowTypeEnd]*Math.abs(Math.sin(e))*(r>=0?1:-1)}return T(e).y+i}}),$=(t,e,r,a,i)=>{e.arrowTypeStart&&N(t,"start",e.arrowTypeStart,r,a,i),e.arrowTypeEnd&&N(t,"end",e.arrowTypeEnd,r,a,i)},D={arrow_cross:"cross",arrow_point:"point",arrow_barb:"barb",arrow_circle:"circle",aggregation:"aggregation",extension:"extension",composition:"composition",dependency:"dependency",lollipop:"lollipop"},N=(t,r,a,i,s,n)=>{let l=D[a];l?t.attr(`marker-${r}`,`url(${i}#${s}_${n}-${l}${"start"===r?"Start":"End"})`):e.l.warn(`Unknown arrow type: ${a}`)},P={},O={},j=()=>{P={},O={}},R=(t,a)=>{let i,n=(0,e.m)((0,e.c)().flowchart.htmlLabels),l="markdown"===a.labelType?(0,s.a)(t,a.label,{style:a.labelStyle,useHtmlLabels:n,addSvgBackground:!0}):d(a.label,a.labelStyle),h=t.insert("g").attr("class","edgeLabel"),o=h.insert("g").attr("class","label");o.node().appendChild(l);let c=l.getBBox();if(n){let t=l.children[0],e=(0,r.select)(l);c=t.getBoundingClientRect(),e.attr("width",c.width),e.attr("height",c.height)}if(o.attr("transform","translate("+-c.width/2+", "+-c.height/2+")"),P[a.id]=h,a.width=c.width,a.height=c.height,a.startLabelLeft){let e=d(a.startLabelLeft,a.labelStyle),r=t.insert("g").attr("class","edgeTerminals"),s=r.insert("g").attr("class","inner");i=s.node().appendChild(e);let n=e.getBBox();s.attr("transform","translate("+-n.width/2+", "+-n.height/2+")"),O[a.id]||(O[a.id]={}),O[a.id].startLeft=r,U(i,a.startLabelLeft)}if(a.startLabelRight){let e=d(a.startLabelRight,a.labelStyle),r=t.insert("g").attr("class","edgeTerminals"),s=r.insert("g").attr("class","inner");i=r.node().appendChild(e),s.node().appendChild(e);let n=e.getBBox();s.attr("transform","translate("+-n.width/2+", "+-n.height/2+")"),O[a.id]||(O[a.id]={}),O[a.id].startRight=r,U(i,a.startLabelRight)}if(a.endLabelLeft){let e=d(a.endLabelLeft,a.labelStyle),r=t.insert("g").attr("class","edgeTerminals"),s=r.insert("g").attr("class","inner");i=s.node().appendChild(e);let n=e.getBBox();s.attr("transform","translate("+-n.width/2+", "+-n.height/2+")"),r.node().appendChild(e),O[a.id]||(O[a.id]={}),O[a.id].endLeft=r,U(i,a.endLabelLeft)}if(a.endLabelRight){let e=d(a.endLabelRight,a.labelStyle),r=t.insert("g").attr("class","edgeTerminals"),s=r.insert("g").attr("class","inner");i=s.node().appendChild(e);let n=e.getBBox();s.attr("transform","translate("+-n.width/2+", "+-n.height/2+")"),r.node().appendChild(e),O[a.id]||(O[a.id]={}),O[a.id].endRight=r,U(i,a.endLabelRight)}return l};function U(t,r){(0,e.c)().flowchart.htmlLabels&&t&&(t.style.width=9*r.length+"px",t.style.height="12px")}let W=(t,r)=>{e.l.debug("Moving label abc88 ",t.id,t.label,P[t.id],r);let a=r.updatedPath?r.updatedPath:r.originalPath,{subGraphTitleTotalMargin:i}=C((0,e.c)());if(t.label){let s=P[t.id],n=t.x,l=t.y;if(a){let i=e.u.calcLabelPosition(a);e.l.debug("Moving label "+t.label+" from (",n,",",l,") to (",i.x,",",i.y,") abc88"),r.updatedPath&&(n=i.x,l=i.y)}s.attr("transform",`translate(${n}, ${l+i/2})`)}if(t.startLabelLeft){let r=O[t.id].startLeft,i=t.x,s=t.y;if(a){let r=e.u.calcTerminalLabelPosition(10*!!t.arrowTypeStart,"start_left",a);i=r.x,s=r.y}r.attr("transform",`translate(${i}, ${s})`)}if(t.startLabelRight){let r=O[t.id].startRight,i=t.x,s=t.y;if(a){let r=e.u.calcTerminalLabelPosition(10*!!t.arrowTypeStart,"start_right",a);i=r.x,s=r.y}r.attr("transform",`translate(${i}, ${s})`)}if(t.endLabelLeft){let r=O[t.id].endLeft,i=t.x,s=t.y;if(a){let r=e.u.calcTerminalLabelPosition(10*!!t.arrowTypeEnd,"end_left",a);i=r.x,s=r.y}r.attr("transform",`translate(${i}, ${s})`)}if(t.endLabelRight){let r=O[t.id].endRight,i=t.x,s=t.y;if(a){let r=e.u.calcTerminalLabelPosition(10*!!t.arrowTypeEnd,"end_right",a);i=r.x,s=r.y}r.attr("transform",`translate(${i}, ${s})`)}},H=(t,r)=>{e.l.debug("abc88 cutPathAtIntersect",t,r);let a=[],i=t[0],s=!1;return t.forEach(t=>{let n,l,d,h,o,c;if(n=r.x,l=r.y,d=Math.abs(t.x-n),h=Math.abs(t.y-l),o=r.width/2,c=r.height/2,d>=o||h>=c||s)i=t,s||a.push(t);else{let n=((t,r,a)=>{e.l.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(r)}
  insidePoint : ${JSON.stringify(a)}
  node        : x:${t.x} y:${t.y} w:${t.width} h:${t.height}`);let i=t.x,s=t.y,n=Math.abs(i-a.x),l=t.width/2,d=a.x<r.x?l-n:l+n,h=t.height/2,o=Math.abs(r.y-a.y),c=Math.abs(r.x-a.x);if(Math.abs(s-r.y)*l>Math.abs(i-r.x)*h){let t=a.y<r.y?r.y-h-s:s-h-r.y;d=c*t/o;let i={x:a.x<r.x?a.x+d:a.x-c+d,y:a.y<r.y?a.y+o-t:a.y-o+t};return 0===d&&(i.x=r.x,i.y=r.y),0===c&&(i.x=r.x),0===o&&(i.y=r.y),e.l.debug(`abc89 topp/bott calc, Q ${o}, q ${t}, R ${c}, r ${d}`,i),i}{let t=o*(d=a.x<r.x?r.x-l-i:i-l-r.x)/c,s=a.x<r.x?a.x+c-d:a.x-c+d,n=a.y<r.y?a.y+t:a.y-t;return e.l.debug(`sides calc abc89, Q ${o}, q ${t}, R ${c}, r ${d}`,{_x:s,_y:n}),0===d&&(s=r.x,n=r.y),0===c&&(s=r.x),0===o&&(n=r.y),{x:s,y:n}}})(r,i,t),l=!1;a.forEach(t=>{l=l||t.x===n.x&&t.y===n.y}),a.some(t=>t.x===n.x&&t.y===n.y)||a.push(n),s=!0}}),a},X=function(t,r,s,n,l,d,h){let o,c=s.points;e.l.debug("abc88 InsertEdge: edge=",s,"e=",r);let p=!1,y=d.node(r.v);var g=d.node(r.w);(null==g?void 0:g.intersect)&&(null==y?void 0:y.intersect)&&((c=c.slice(1,s.points.length-1)).unshift(y.intersect(c[0])),c.push(g.intersect(c[c.length-1]))),s.toCluster&&(e.l.debug("to cluster abc88",n[s.toCluster]),c=H(s.points,n[s.toCluster].node),p=!0),s.fromCluster&&(e.l.debug("from cluster abc88",n[s.fromCluster]),c=H(c.reverse(),n[s.fromCluster].node).reverse(),p=!0);let u=c.filter(t=>!Number.isNaN(t.y)),f=i.curveBasis;s.curve&&("graph"===l||"flowchart"===l)&&(f=s.curve);let{x,y:w}=B(s),m=(0,a.line)().x(x).y(w).curve(f);switch(s.thickness){case"normal":o="edge-thickness-normal";break;case"thick":case"invisible":o="edge-thickness-thick";break;default:o=""}switch(s.pattern){case"solid":o+=" edge-pattern-solid";break;case"dotted":o+=" edge-pattern-dotted";break;case"dashed":o+=" edge-pattern-dashed"}let b=t.append("path").attr("d",m(u)).attr("id",s.id).attr("class"," "+o+(s.classes?" "+s.classes:"")).attr("style",s.style),_="";((0,e.c)().flowchart.arrowMarkerAbsolute||(0,e.c)().state.arrowMarkerAbsolute)&&(_=(_=(_=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search).replace(/\(/g,"\\(")).replace(/\)/g,"\\)")),$(b,s,_,h,l);let k={};return p&&(k.updatedPath=c),k.originalPath=s.points,k};t.s(["a",()=>l,"b",()=>L,"c",()=>d,"d",()=>j,"e",()=>k,"f",()=>R,"g",()=>C,"h",()=>X,"i",()=>p,"j",()=>W,"k",()=>B,"l",()=>h,"m",()=>$,"p",()=>M,"s",()=>v,"u",()=>o])}]);