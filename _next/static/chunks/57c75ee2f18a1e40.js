(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,72301,80696,t=>{"use strict";t.s(["default",0,function(t){return function(){return t}}],72301);let e=Math.PI,r=2*e,a=r-1e-6;function i(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}class n{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?i:function(t){let e=Math.floor(t);if(!(e>=0))throw Error(`invalid digits: ${t}`);if(e>15)return i;let r=10**e;return function(t){this._+=t[0];for(let e=1,a=t.length;e<a;++e)this._+=Math.round(arguments[e]*r)/r+t[e]}}(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,r,a){this._append`Q${+t},${+e},${this._x1=+r},${this._y1=+a}`}bezierCurveTo(t,e,r,a,i,n){this._append`C${+t},${+e},${+r},${+a},${this._x1=+i},${this._y1=+n}`}arcTo(t,r,a,i,n){if(t*=1,r*=1,a*=1,i*=1,(n*=1)<0)throw Error(`negative radius: ${n}`);let s=this._x1,l=this._y1,d=a-t,o=i-r,h=s-t,c=l-r,u=h*h+c*c;if(null===this._x1)this._append`M${this._x1=t},${this._y1=r}`;else if(u>1e-6)if(Math.abs(c*d-o*h)>1e-6&&n){let f=a-s,g=i-l,p=d*d+o*o,y=Math.sqrt(p),w=Math.sqrt(u),x=n*Math.tan((e-Math.acos((p+u-(f*f+g*g))/(2*y*w)))/2),m=x/w,b=x/y;Math.abs(m-1)>1e-6&&this._append`L${t+m*h},${r+m*c}`,this._append`A${n},${n},0,0,${+(c*f>h*g)},${this._x1=t+b*d},${this._y1=r+b*o}`}else this._append`L${this._x1=t},${this._y1=r}`}arc(t,i,n,s,l,d){if(t*=1,i*=1,n*=1,d=!!d,n<0)throw Error(`negative radius: ${n}`);let o=n*Math.cos(s),h=n*Math.sin(s),c=t+o,u=i+h,f=1^d,g=d?s-l:l-s;null===this._x1?this._append`M${c},${u}`:(Math.abs(this._x1-c)>1e-6||Math.abs(this._y1-u)>1e-6)&&this._append`L${c},${u}`,n&&(g<0&&(g=g%r+r),g>a?this._append`A${n},${n},0,1,${f},${t-o},${i-h}A${n},${n},0,1,${f},${this._x1=c},${this._y1=u}`:g>1e-6&&this._append`A${n},${n},0,${+(g>=e)},${f},${this._x1=t+n*Math.cos(l)},${this._y1=i+n*Math.sin(l)}`)}rect(t,e,r,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${r*=1}v${+a}h${-r}Z`}toString(){return this._}}function s(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(null==r)e=null;else{let t=Math.floor(r);if(!(t>=0))throw RangeError(`invalid digits: ${r}`);e=t}return t},()=>new n(e)}n.prototype,t.s(["withPath",()=>s],80696)},21776,t=>{"use strict";Array.prototype.slice,t.s(["default",0,function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}])},29593,t=>{"use strict";var e=t.i(21776),r=t.i(72301),a=t.i(73422),i=t.i(80696);function n(t){return t[0]}function s(t){return t[1]}t.s(["line",0,function(t,l){var d=(0,r.default)(!0),o=null,h=a.default,c=null,u=(0,i.withPath)(f);function f(r){var a,i,n,s=(r=(0,e.default)(r)).length,f=!1;for(null==o&&(c=h(n=u())),a=0;a<=s;++a)!(a<s&&d(i=r[a],a,r))===f&&((f=!f)?c.lineStart():c.lineEnd()),f&&c.point(+t(i,a,r),+l(i,a,r));if(n)return c=null,n+""||null}return t="function"==typeof t?t:void 0===t?n:(0,r.default)(t),l="function"==typeof l?l:void 0===l?s:(0,r.default)(l),f.x=function(e){return arguments.length?(t="function"==typeof e?e:(0,r.default)(+e),f):t},f.y=function(t){return arguments.length?(l="function"==typeof t?t:(0,r.default)(+t),f):l},f.defined=function(t){return arguments.length?(d="function"==typeof t?t:(0,r.default)(!!t),f):d},f.curve=function(t){return arguments.length?(h=t,null!=o&&(c=h(o)),f):h},f.context=function(t){return arguments.length?(null==t?o=c=null:c=h(o=t),f):o},f}],29593)},67066,63641,17660,t=>{"use strict";var e=t.i(22749);t.s(["constant",()=>e.default],67066);var r=t.i(72766);t.s(["each",()=>r.default],63641);var a=t.i(34020),i=t.i(93332),n=t.i(25735),s=t.i(67402),l=(0,i.default)(function(t){return(0,n.default)((0,a.default)(t,1,s.default,!0))});t.s(["union",0,l],17660)},44041,23909,54583,44611,96726,79851,62376,12329,19046,13401,49403,76757,47034,76824,63933,63984,t=>{"use strict";var e,r=t.i(48554),a=0;t.s(["uniqueId",0,function(t){var e=++a;return(0,r.default)(t)+e}],44041);var i=Math.ceil,n=Math.max;let s=function(t,e,r,a){for(var s=-1,l=n(i((e-t)/(r||1)),0),d=Array(l);l--;)d[a?l:++s]=t,t+=r;return d};var l=t.i(95854),d=t.i(90300);t.s(["range",0,function(t,e,r){return r&&"number"!=typeof r&&(0,l.default)(t,e,r)&&(e=r=void 0),t=(0,d.default)(t),void 0===e?(e=t,t=0):e=(0,d.default)(e),r=void 0===r?t<e?1:-1:(0,d.default)(r),s(t,e,r,void 0)}],23909);var o=t.i(85209);t.s(["merge",()=>o.default],54583);var h=t.i(46975),c=t.i(23323),u=t.i(7005),f=t.i(71097),g=t.i(77478),p=(e=function(t,e){return null==t?{}:(0,h.default)(t,e,function(e,r){return(0,c.default)(t,r)})},(0,g.default)((0,f.default)(e,void 0,u.default),e+""));t.s(["pick",0,p],44611);var y=t.i(16938);let w=function(t,e){return t>e};var x=t.i(55920);t.s(["max",0,function(t){return t&&t.length?(0,y.default)(t,x.default,w):void 0}],96726);var m=t.i(32236),b=t.i(65892),v=t.i(40889);t.s(["mapValues",0,function(t,e){var r={};return e=(0,v.default)(e,3),(0,b.default)(t,function(t,a,i){(0,m.default)(r,a,e(t,a,i))}),r}],79851);var _=t.i(27961);let k=function(t,e,r){for(var a=-1,i=t.length,n=e.length,s={};++a<i;){var l=a<n?e[a]:void 0;r(s,t[a],l)}return s};t.s(["zipObject",0,function(t,e){return k(t||[],e||[],_.default)}],62376);var L=t.i(41867);t.s(["min",()=>L.default],12329);var C=t.i(69314);t.s(["now",0,function(){return C.default.Date.now()}],19046);var $=t.i(69786);t.s(["minBy",0,function(t,e){return t&&t.length?(0,y.default)(t,(0,v.default)(e,2),$.default):void 0}],13401);var E=t.i(55128),M=t.i(93819),S=t.i(41068),T=t.i(46315),B=t.i(87227),N=t.i(62211),D=t.i(76061),X=t.i(23547);t.s(["transform",0,function(t,e,r){var a=(0,T.default)(t),i=a||(0,B.default)(t)||(0,X.default)(t);if(e=(0,v.default)(e,4),null==r){var n=t&&t.constructor;r=i?a?new n:[]:(0,D.default)(t)&&(0,N.default)(n)?(0,M.default)((0,S.default)(t)):{}}return(i?E.default:b.default)(t,function(t,a,i){return e(r,t,a,i)}),r}],49403);var O=t.i(83445),P=t.i(76025),j=t.i(74086),R=t.i(12031),U=(0,t.i(52098).default)("length"),I=t.i(40533),A="\ud800-\udfff",W="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",F="\ud83c[\udffb-\udfff]",H="[^"+A+"]",Y="(?:\ud83c[\udde6-\uddff]){2}",G="[\ud800-\udbff][\udc00-\udfff]",J="(?:"+W+"|"+F+")?",z="[\\ufe0e\\ufe0f]?",Z="(?:\\u200d(?:"+[H,Y,G].join("|")+")"+z+J+")*",q=RegExp(F+"(?="+F+")|"+("(?:"+[H+W+"?",W,Y,G,"["+A+"]"].join("|"))+")"+(z+J+Z),"g");let Q=function(t){for(var e=q.lastIndex=0;q.test(t);)++e;return e};t.s(["size",0,function(t){if(null==t)return 0;if((0,j.default)(t))return(0,R.default)(t)?(0,I.default)(t)?Q(t):U(t):t.length;var e=(0,P.default)(t);return"[object Map]"==e||"[object Set]"==e?t.size:(0,O.default)(t).length}],76757);var V=t.i(44869);t.s(["cloneDeep",0,function(t){return(0,V.default)(t,5)}],47034);var K=t.i(34020),tt=t.i(2705),te=t.i(88943),tr=t.i(70257);let ta=function(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t};var ti=t.i(32893),tn=t.i(71211);let ts=function(t,e){if(t!==e){var r=void 0!==t,a=null===t,i=t==t,n=(0,tn.default)(t),s=void 0!==e,l=null===e,d=e==e,o=(0,tn.default)(e);if(!l&&!o&&!n&&t>e||n&&s&&d&&!l&&!o||a&&s&&d||!r&&d||!i)return 1;if(!a&&!n&&!o&&t<e||o&&r&&i&&!a&&!n||l&&r&&i||!s&&i||!d)return -1}return 0},tl=function(t,e,r){for(var a=-1,i=t.criteria,n=e.criteria,s=i.length,l=r.length;++a<s;){var d=ts(i[a],n[a]);if(d){if(a>=l)return d;return d*("desc"==r[a]?-1:1)}}return t.index-e.index},td=function(t,e,r){e=e.length?(0,tt.default)(e,function(t){return(0,T.default)(t)?function(e){return(0,te.default)(e,1===t.length?t[0]:t)}:t}):[x.default];var a=-1;return e=(0,tt.default)(e,(0,ti.default)(v.default)),ta((0,tr.default)(t,function(t,r,i){return{criteria:(0,tt.default)(e,function(e){return e(t)}),index:++a,value:t}}),function(t,e){return tl(t,e,r)})};var to=(0,t.i(93332).default)(function(t,e){if(null==t)return[];var r=e.length;return r>1&&(0,l.default)(t,e[0],e[1])?e=[]:r>2&&(0,l.default)(e[0],e[1],e[2])&&(e=[e[0]]),td(t,(0,K.default)(e,1),[])});t.s(["sortBy",0,to],76824);var th=t.i(8907);t.s(["forOwn",0,function(t,e){return t&&(0,b.default)(t,(0,th.default)(e))}],63933);var tc=t.i(11861),tu=t.i(21869);t.s(["forIn",0,function(t,e){return null==t?t:(0,tc.default)(t,(0,th.default)(e),tu.default)}],63984)},26754,14447,t=>{"use strict";var e=t.i(43005),r=t.i(67066),a=t.i(84076),i=t.i(17047),n=t.i(97143),s=t.i(69924),l=t.i(63641),d=t.i(89325),o=t.i(17660),h=t.i(13588),c=t.i(63278);class u{constructor(t={}){this._isDirected=!e.has(t,"directed")||t.directed,this._isMultigraph=!!e.has(t,"multigraph")&&t.multigraph,this._isCompound=!!e.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=r.constant(void 0),this._defaultEdgeLabelFn=r.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(t){return this._label=t,this}graph(){return this._label}setDefaultNodeLabel(t){return a.isFunction(t)||(t=r.constant(t)),this._defaultNodeLabelFn=t,this}nodeCount(){return this._nodeCount}nodes(){return i.keys(this._nodes)}sources(){var t=this;return n.filter(this.nodes(),function(e){return s.isEmpty(t._in[e])})}sinks(){var t=this;return n.filter(this.nodes(),function(e){return s.isEmpty(t._out[e])})}setNodes(t,e){var r=arguments,a=this;return l.each(t,function(t){r.length>1?a.setNode(t,e):a.setNode(t)}),this}setNode(t,r){return e.has(this._nodes,t)?arguments.length>1&&(this._nodes[t]=r):(this._nodes[t]=arguments.length>1?r:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]="\0",this._children[t]={},this._children["\0"][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount),this}node(t){return this._nodes[t]}hasNode(t){return e.has(this._nodes,t)}removeNode(t){var r=this;if(e.has(this._nodes,t)){var a=function(t){r.removeEdge(r._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],l.each(this.children(t),function(t){r.setParent(t)}),delete this._children[t]),l.each(i.keys(this._in[t]),a),delete this._in[t],delete this._preds[t],l.each(i.keys(this._out[t]),a),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this}setParent(t,e){if(!this._isCompound)throw Error("Cannot set parent in a non-compound graph");if(d.isUndefined(e))e="\0";else{e+="";for(var r=e;!d.isUndefined(r);r=this.parent(r))if(r===t)throw Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this}_removeFromParentsChildList(t){delete this._children[this._parent[t]][t]}parent(t){if(this._isCompound){var e=this._parent[t];if("\0"!==e)return e}}children(t){if(d.isUndefined(t)&&(t="\0"),this._isCompound){var e=this._children[t];if(e)return i.keys(e)}else if("\0"===t)return this.nodes();else if(this.hasNode(t))return[]}predecessors(t){var e=this._preds[t];if(e)return i.keys(e)}successors(t){var e=this._sucs[t];if(e)return i.keys(e)}neighbors(t){var e=this.predecessors(t);if(e)return o.union(e,this.successors(t))}isLeaf(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length}filterNodes(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var r=this;l.each(this._nodes,function(r,a){t(a)&&e.setNode(a,r)}),l.each(this._edgeObjs,function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,r.edge(t))});var a={};return this._isCompound&&l.each(e.nodes(),function(t){e.setParent(t,function t(i){var n=r.parent(i);return void 0===n||e.hasNode(n)?(a[i]=n,n):n in a?a[n]:t(n)}(t))}),e}setDefaultEdgeLabel(t){return a.isFunction(t)||(t=r.constant(t)),this._defaultEdgeLabelFn=t,this}edgeCount(){return this._edgeCount}edges(){return h.values(this._edgeObjs)}setPath(t,e){var r=this,a=arguments;return c.reduce(t,function(t,i){return a.length>1?r.setEdge(t,i,e):r.setEdge(t,i),i}),this}setEdge(){var t,r,a,i,n=!1,s=arguments[0];"object"==typeof s&&null!==s&&"v"in s?(t=s.v,r=s.w,a=s.name,2==arguments.length&&(i=arguments[1],n=!0)):(t=s,r=arguments[1],a=arguments[3],arguments.length>2&&(i=arguments[2],n=!0)),t=""+t,r=""+r,d.isUndefined(a)||(a=""+a);var l=p(this._isDirected,t,r,a);if(e.has(this._edgeLabels,l))return n&&(this._edgeLabels[l]=i),this;if(!d.isUndefined(a)&&!this._isMultigraph)throw Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(r),this._edgeLabels[l]=n?i:this._defaultEdgeLabelFn(t,r,a);var o=function(t,e,r,a){var i=""+e,n=""+r;if(!t&&i>n){var s=i;i=n,n=s}var l={v:i,w:n};return a&&(l.name=a),l}(this._isDirected,t,r,a);return t=o.v,r=o.w,Object.freeze(o),this._edgeObjs[l]=o,f(this._preds[r],t),f(this._sucs[t],r),this._in[r][l]=o,this._out[t][l]=o,this._edgeCount++,this}edge(t,e,r){var a=1==arguments.length?y(this._isDirected,arguments[0]):p(this._isDirected,t,e,r);return this._edgeLabels[a]}hasEdge(t,r,a){var i=1==arguments.length?y(this._isDirected,arguments[0]):p(this._isDirected,t,r,a);return e.has(this._edgeLabels,i)}removeEdge(t,e,r){var a=1==arguments.length?y(this._isDirected,arguments[0]):p(this._isDirected,t,e,r),i=this._edgeObjs[a];return i&&(t=i.v,e=i.w,delete this._edgeLabels[a],delete this._edgeObjs[a],g(this._preds[e],t),g(this._sucs[t],e),delete this._in[e][a],delete this._out[t][a],this._edgeCount--),this}inEdges(t,e){var r=this._in[t];if(r){var a=h.values(r);return e?n.filter(a,function(t){return t.v===e}):a}}outEdges(t,e){var r=this._out[t];if(r){var a=h.values(r);return e?n.filter(a,function(t){return t.w===e}):a}}nodeEdges(t,e){var r=this.inEdges(t,e);if(r)return r.concat(this.outEdges(t,e))}}function f(t,e){t[e]?t[e]++:t[e]=1}function g(t,e){--t[e]||delete t[e]}function p(t,e,r,a){var i=""+e,n=""+r;if(!t&&i>n){var s=i;i=n,n=s}return i+"\x01"+n+"\x01"+(d.isUndefined(a)?"\0":a)}function y(t,e){return p(t,e.v,e.w,e.name)}u.prototype._nodeCount=0,u.prototype._edgeCount=0,t.s(["Graph",()=>u],14447),t.s(["version",()=>"2.1.9-pre"],26754)},44787,t=>{"use strict";var e=t.i(34599);t.i(31345);var r=t.i(12638),a=t.i(29593),i=t.i(34731),n=t.i(28284);let s={extension:(t,r,a)=>{e.l.trace("Making markers for ",a),t.append("defs").append("marker").attr("id",a+"_"+r+"-extensionStart").attr("class","marker extension "+r).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",a+"_"+r+"-extensionEnd").attr("class","marker extension "+r).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},composition:(t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-compositionStart").attr("class","marker composition "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-compositionEnd").attr("class","marker composition "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},aggregation:(t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-aggregationStart").attr("class","marker aggregation "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-aggregationEnd").attr("class","marker aggregation "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},dependency:(t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-dependencyStart").attr("class","marker dependency "+e).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-dependencyEnd").attr("class","marker dependency "+e).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},lollipop:(t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-lollipopStart").attr("class","marker lollipop "+e).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),t.append("defs").append("marker").attr("id",r+"_"+e+"-lollipopEnd").attr("class","marker lollipop "+e).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},point:(t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-pointEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",6).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-pointStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},circle:(t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-circleEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-circleStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},cross:(t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-crossEnd").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-crossStart").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},barb:(t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")}},l=(t,e,r,a)=>{e.forEach(e=>{s[e](t,r,a)})},d=(t,a,i,n)=>{let s=t||"";if("object"==typeof s&&(s=s[0]),(0,e.m)((0,e.c)().flowchart.htmlLabels)){var l,d;let t,i,o,h;return s=s.replace(/\\n|\n/g,"<br />"),e.l.debug("vertexText"+s),l={isNode:n,label:(0,e.M)(s).replace(/fa[blrs]?:fa-[\w-]+/g,t=>`<i class='${t.replace(":"," ")}'></i>`),labelStyle:a.replace("fill:","color:")},i=(t=(0,r.select)(document.createElementNS("http://www.w3.org/2000/svg","foreignObject"))).append("xhtml:div"),o=l.label,h=l.isNode?"nodeLabel":"edgeLabel",i.html('<span class="'+h+'" '+(l.labelStyle?'style="'+l.labelStyle+'"':"")+">"+o+"</span>"),(d=l.labelStyle)&&i.attr("style",d),i.style("display","inline-block"),i.style("white-space","nowrap"),i.attr("xmlns","http://www.w3.org/1999/xhtml"),t.node()}{let t=document.createElementNS("http://www.w3.org/2000/svg","text");t.setAttribute("style",a.replace("color:","fill:"));for(let e of"string"==typeof s?s.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(s)?s:[]){let r=document.createElementNS("http://www.w3.org/2000/svg","tspan");r.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),r.setAttribute("dy","1em"),r.setAttribute("x","0"),i?r.setAttribute("class","title-row"):r.setAttribute("class","row"),r.textContent=e.trim(),t.appendChild(r)}return t}},o=async(t,a,i,s)=>{let l,o,h=a.useHtmlLabels||(0,e.m)((0,e.c)().flowchart.htmlLabels),c=t.insert("g").attr("class",i||"node default").attr("id",a.domId||a.id),u=c.insert("g").attr("class","label").attr("style",a.labelStyle);l=void 0===a.labelText?"":"string"==typeof a.labelText?a.labelText:a.labelText[0];let f=u.node(),g=(o="markdown"===a.labelType?(0,n.a)(u,(0,e.d)((0,e.M)(l),(0,e.c)()),{useHtmlLabels:h,width:a.width||(0,e.c)().flowchart.wrappingWidth,classes:"markdown-node-label"}):f.appendChild(d((0,e.d)((0,e.M)(l),(0,e.c)()),a.labelStyle,!1,s))).getBBox(),p=a.padding/2;if((0,e.m)((0,e.c)().flowchart.htmlLabels)){let t=o.children[0],a=(0,r.select)(o),i=t.getElementsByTagName("img");if(i){let t=""===l.replace(/<img[^>]*>/g,"").trim();await Promise.all([...i].map(r=>new Promise(a=>{function i(){if(r.style.display="flex",r.style.flexDirection="column",t){let t=5*parseInt((0,e.c)().fontSize?(0,e.c)().fontSize:window.getComputedStyle(document.body).fontSize,10)+"px";r.style.minWidth=t,r.style.maxWidth=t}else r.style.width="100%";a(r)}setTimeout(()=>{r.complete&&i()}),r.addEventListener("error",i),r.addEventListener("load",i)})))}g=t.getBoundingClientRect(),a.attr("width",g.width),a.attr("height",g.height)}return h?u.attr("transform","translate("+-g.width/2+", "+-g.height/2+")"):u.attr("transform","translate(0, "+-g.height/2+")"),a.centerLabel&&u.attr("transform","translate("+-g.width/2+", "+-g.height/2+")"),u.insert("rect",":first-child"),{shapeSvg:c,bbox:g,halfPadding:p,label:u}},h=(t,e)=>{let r=e.node().getBBox();t.width=r.width,t.height=r.height};function c(t,e,r,a){return t.insert("polygon",":first-child").attr("points",a.map(function(t){return t.x+","+t.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+r/2+")")}let u=(t,e)=>{var r,a,i=t.x,n=t.y,s=e.x-i,l=e.y-n,d=t.width/2,o=t.height/2;return Math.abs(l)*d>Math.abs(s)*o?(l<0&&(o=-o),r=0===l?0:o*s/l,a=o):(s<0&&(d=-d),r=d,a=0===s?0:d*l/s),{x:i+r,y:n+a}},f=function(t,e,r){var a,i,n,s,l,d,o,h,c,u,f;return a=t,i=e,n=e,s=r,l=a.x,d=a.y,o=l-s.x,c=Math.sqrt(i*i*(h=d-s.y)*h+n*n*o*o),u=Math.abs(i*n*o/c),s.x<l&&(u=-u),f=Math.abs(i*n*h/c),s.y<d&&(f=-f),{x:l+u,y:d+f}},g=function(t,e,r){var a=t.x,i=t.y,n=[],s=1/0,l=1/0;"function"==typeof e.forEach?e.forEach(function(t){s=Math.min(s,t.x),l=Math.min(l,t.y)}):(s=Math.min(s,e.x),l=Math.min(l,e.y));for(var d=a-t.width/2-s,o=i-t.height/2-l,h=0;h<e.length;h++){var c=e[h],u=e[h<e.length-1?h+1:0],f=function(t,e,r,a){var i,n,s,l,d,o,h,c,u,f,g,p,y;if(i=e.y-t.y,s=t.x-e.x,d=e.x*t.y-t.x*e.y,u=i*r.x+s*r.y+d,f=i*a.x+s*a.y+d,0===u||0===f||!(u*f>0)){if((n=a.y-r.y,l=r.x-a.x,o=a.x*r.y-r.x*a.y,h=n*t.x+l*t.y+o,c=n*e.x+l*e.y+o,!(0!==h&&0!==c&&h*c>0))&&0!=(g=i*l-n*s))return p=Math.abs(g/2),{x:(y=s*o-l*d)<0?(y-p)/g:(y+p)/g,y:(y=n*d-i*o)<0?(y-p)/g:(y+p)/g}}}(t,r,{x:d+c.x,y:o+c.y},{x:d+u.x,y:o+u.y});f&&n.push(f)}return n.length?(n.length>1&&n.sort(function(t,e){var a=t.x-r.x,i=t.y-r.y,n=Math.sqrt(a*a+i*i),s=e.x-r.x,l=e.y-r.y,d=Math.sqrt(s*s+l*l);return n<d?-1:+(n!==d)}),n[0]):t},p=t=>t?" "+t:"",y=(t,e)=>`${e||"node default"}${p(t.classes)} ${p(t.class)}`,w=async(t,r)=>{let{shapeSvg:a,bbox:i}=await o(t,r,y(r,void 0),!0),n=i.width+r.padding+(i.height+r.padding),s=[{x:n/2,y:0},{x:n,y:-n/2},{x:n/2,y:-n},{x:0,y:-n/2}];e.l.info("Question main (Circle)");let l=c(a,n,n,s);return l.attr("style",r.style),h(r,l),r.intersect=function(t){return e.l.warn("Intersect called"),g(r,s,t)},a};function x(t,r,a,i){let n=[],s=t=>{n.push(t,0)},l=t=>{n.push(0,t)};r.includes("t")?(e.l.debug("add top border"),s(a)):l(a),r.includes("r")?(e.l.debug("add right border"),s(i)):l(i),r.includes("b")?(e.l.debug("add bottom border"),s(a)):l(a),r.includes("l")?(e.l.debug("add left border"),s(i)):l(i),t.attr("stroke-dasharray",n.join(" "))}let m=(t,e,r)=>{let a=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),i=70,n=10;return"LR"===r&&(i=10,n=70),h(e,a.append("rect").attr("x",-1*i/2).attr("y",-1*n/2).attr("width",i).attr("height",n).attr("class","fork-join")),e.height=e.height+e.padding/2,e.width=e.width+e.padding/2,e.intersect=function(t){return u(e,t)},a},b={rhombus:w,composite:async(t,r)=>{let{shapeSvg:a,bbox:i,halfPadding:n}=await o(t,r,"node "+r.classes,!0),s=a.insert("rect",":first-child"),l=r.positioned?r.width:i.width+r.padding,d=r.positioned?r.height:i.height+r.padding,c=r.positioned?-l/2:-i.width/2-n,f=r.positioned?-d/2:-i.height/2-n;if(s.attr("class","basic cluster composite label-container").attr("style",r.style).attr("rx",r.rx).attr("ry",r.ry).attr("x",c).attr("y",f).attr("width",l).attr("height",d),r.props){let t=new Set(Object.keys(r.props));r.props.borders&&(x(s,r.props.borders,l,d),t.delete("borders")),t.forEach(t=>{e.l.warn(`Unknown node property ${t}`)})}return h(r,s),r.intersect=function(t){return u(r,t)},a},question:w,rect:async(t,r)=>{let{shapeSvg:a,bbox:i,halfPadding:n}=await o(t,r,"node "+r.classes+" "+r.class,!0),s=a.insert("rect",":first-child"),l=r.positioned?r.width:i.width+r.padding,d=r.positioned?r.height:i.height+r.padding,c=r.positioned?-l/2:-i.width/2-n,f=r.positioned?-d/2:-i.height/2-n;if(s.attr("class","basic label-container").attr("style",r.style).attr("rx",r.rx).attr("ry",r.ry).attr("x",c).attr("y",f).attr("width",l).attr("height",d),r.props){let t=new Set(Object.keys(r.props));r.props.borders&&(x(s,r.props.borders,l,d),t.delete("borders")),t.forEach(t=>{e.l.warn(`Unknown node property ${t}`)})}return h(r,s),r.intersect=function(t){return u(r,t)},a},labelRect:async(t,r)=>{let{shapeSvg:a}=await o(t,r,"label",!0);e.l.trace("Classes = ",r.class);let i=a.insert("rect",":first-child");if(i.attr("width",0).attr("height",0),a.attr("class","label edgeLabel"),r.props){let t=new Set(Object.keys(r.props));r.props.borders&&(x(i,r.props.borders,0,0),t.delete("borders")),t.forEach(t=>{e.l.warn(`Unknown node property ${t}`)})}return h(r,i),r.intersect=function(t){return u(r,t)},a},rectWithTitle:(t,a)=>{let i;i=a.classes?"node "+a.classes:"node default";let n=t.insert("g").attr("class",i).attr("id",a.domId||a.id),s=n.insert("rect",":first-child"),l=n.insert("line"),o=n.insert("g").attr("class","label"),c=a.labelText.flat?a.labelText.flat():a.labelText,f="";f="object"==typeof c?c[0]:c,e.l.info("Label text abc79",f,c,"object"==typeof c);let g=o.node().appendChild(d(f,a.labelStyle,!0,!0)),p={width:0,height:0};if((0,e.m)((0,e.c)().flowchart.htmlLabels)){let t=g.children[0],e=(0,r.select)(g);p=t.getBoundingClientRect(),e.attr("width",p.width),e.attr("height",p.height)}e.l.info("Text 2",c);let y=c.slice(1,c.length),w=g.getBBox(),x=o.node().appendChild(d(y.join?y.join("<br/>"):y,a.labelStyle,!0,!0));if((0,e.m)((0,e.c)().flowchart.htmlLabels)){let t=x.children[0],e=(0,r.select)(x);p=t.getBoundingClientRect(),e.attr("width",p.width),e.attr("height",p.height)}let m=a.padding/2;return(0,r.select)(x).attr("transform","translate( "+(p.width>w.width?0:(w.width-p.width)/2)+", "+(w.height+m+5)+")"),(0,r.select)(g).attr("transform","translate( "+(p.width<w.width?0:-(w.width-p.width)/2)+", 0)"),p=o.node().getBBox(),o.attr("transform","translate("+-p.width/2+", "+(-p.height/2-m+3)+")"),s.attr("class","outer title-state").attr("x",-p.width/2-m).attr("y",-p.height/2-m).attr("width",p.width+a.padding).attr("height",p.height+a.padding),l.attr("class","divider").attr("x1",-p.width/2-m).attr("x2",p.width/2+m).attr("y1",-p.height/2-m+w.height+m).attr("y2",-p.height/2-m+w.height+m),h(a,s),a.intersect=function(t){return u(a,t)},n},choice:(t,e)=>{let r=t.insert("g").attr("class","node default").attr("id",e.domId||e.id);return r.insert("polygon",":first-child").attr("points",[{x:0,y:14},{x:14,y:0},{x:0,y:-14},{x:-14,y:0}].map(function(t){return t.x+","+t.y}).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),e.width=28,e.height=28,e.intersect=function(t){return f(e,14,t)},r},circle:async(t,r)=>{let{shapeSvg:a,bbox:i,halfPadding:n}=await o(t,r,y(r,void 0),!0),s=a.insert("circle",":first-child");return s.attr("style",r.style).attr("rx",r.rx).attr("ry",r.ry).attr("r",i.width/2+n).attr("width",i.width+r.padding).attr("height",i.height+r.padding),e.l.info("Circle main"),h(r,s),r.intersect=function(t){return e.l.info("Circle intersect",r,i.width/2+n,t),f(r,i.width/2+n,t)},a},doublecircle:async(t,r)=>{let{shapeSvg:a,bbox:i,halfPadding:n}=await o(t,r,y(r,void 0),!0),s=a.insert("g",":first-child"),l=s.insert("circle"),d=s.insert("circle");return s.attr("class",r.class),l.attr("style",r.style).attr("rx",r.rx).attr("ry",r.ry).attr("r",i.width/2+n+5).attr("width",i.width+r.padding+10).attr("height",i.height+r.padding+10),d.attr("style",r.style).attr("rx",r.rx).attr("ry",r.ry).attr("r",i.width/2+n).attr("width",i.width+r.padding).attr("height",i.height+r.padding),e.l.info("DoubleCircle main"),h(r,l),r.intersect=function(t){return e.l.info("DoubleCircle intersect",r,i.width/2+n+5,t),f(r,i.width/2+n+5,t)},a},stadium:async(t,e)=>{let{shapeSvg:r,bbox:a}=await o(t,e,y(e,void 0),!0),i=a.height+e.padding,n=a.width+i/4+e.padding,s=r.insert("rect",":first-child").attr("style",e.style).attr("rx",i/2).attr("ry",i/2).attr("x",-n/2).attr("y",-i/2).attr("width",n).attr("height",i);return h(e,s),e.intersect=function(t){return u(e,t)},r},hexagon:async(t,e)=>{let{shapeSvg:r,bbox:a}=await o(t,e,y(e,void 0),!0),i=a.height+e.padding,n=i/4,s=a.width+2*n+e.padding,l=[{x:n,y:0},{x:s-n,y:0},{x:s,y:-i/2},{x:s-n,y:-i},{x:n,y:-i},{x:0,y:-i/2}],d=c(r,s,i,l);return d.attr("style",e.style),h(e,d),e.intersect=function(t){return g(e,l,t)},r},block_arrow:async(t,e)=>{var r;let a,i,n,s,l,{shapeSvg:d,bbox:u}=await o(t,e,void 0,!0),f=u.height+2*e.padding,p=f/2,y=u.width+2*p+e.padding,w=(r=e.directions,a=(t=>{let e=new Set;for(let r of t)switch(r){case"x":e.add("right"),e.add("left");break;case"y":e.add("up"),e.add("down");break;default:e.add(r)}return e})(r),n=(i=u.height+2*e.padding)/2,s=u.width+2*n+e.padding,l=e.padding/2,a.has("right")&&a.has("left")&&a.has("up")&&a.has("down")?[{x:0,y:0},{x:n,y:0},{x:s/2,y:2*l},{x:s-n,y:0},{x:s,y:0},{x:s,y:-i/3},{x:s+2*l,y:-i/2},{x:s,y:-2*i/3},{x:s,y:-i},{x:s-n,y:-i},{x:s/2,y:-i-2*l},{x:n,y:-i},{x:0,y:-i},{x:0,y:-2*i/3},{x:-2*l,y:-i/2},{x:0,y:-i/3}]:a.has("right")&&a.has("left")&&a.has("up")?[{x:n,y:0},{x:s-n,y:0},{x:s,y:-i/2},{x:s-n,y:-i},{x:n,y:-i},{x:0,y:-i/2}]:a.has("right")&&a.has("left")&&a.has("down")?[{x:0,y:0},{x:n,y:-i},{x:s-n,y:-i},{x:s,y:0}]:a.has("right")&&a.has("up")&&a.has("down")?[{x:0,y:0},{x:s,y:-n},{x:s,y:-i+n},{x:0,y:-i}]:a.has("left")&&a.has("up")&&a.has("down")?[{x:s,y:0},{x:0,y:-n},{x:0,y:-i+n},{x:s,y:-i}]:a.has("right")&&a.has("left")?[{x:n,y:0},{x:n,y:-l},{x:s-n,y:-l},{x:s-n,y:0},{x:s,y:-i/2},{x:s-n,y:-i},{x:s-n,y:-i+l},{x:n,y:-i+l},{x:n,y:-i},{x:0,y:-i/2}]:a.has("up")&&a.has("down")?[{x:s/2,y:0},{x:0,y:-l},{x:n,y:-l},{x:n,y:-i+l},{x:0,y:-i+l},{x:s/2,y:-i},{x:s,y:-i+l},{x:s-n,y:-i+l},{x:s-n,y:-l},{x:s,y:-l}]:a.has("right")&&a.has("up")?[{x:0,y:0},{x:s,y:-n},{x:0,y:-i}]:a.has("right")&&a.has("down")?[{x:0,y:0},{x:s,y:0},{x:0,y:-i}]:a.has("left")&&a.has("up")?[{x:s,y:0},{x:0,y:-n},{x:s,y:-i}]:a.has("left")&&a.has("down")?[{x:s,y:0},{x:0,y:0},{x:s,y:-i}]:a.has("right")?[{x:n,y:-l},{x:n,y:-l},{x:s-n,y:-l},{x:s-n,y:0},{x:s,y:-i/2},{x:s-n,y:-i},{x:s-n,y:-i+l},{x:n,y:-i+l},{x:n,y:-i+l}]:a.has("left")?[{x:n,y:0},{x:n,y:-l},{x:s-n,y:-l},{x:s-n,y:-i+l},{x:n,y:-i+l},{x:n,y:-i},{x:0,y:-i/2}]:a.has("up")?[{x:n,y:-l},{x:n,y:-i+l},{x:0,y:-i+l},{x:s/2,y:-i},{x:s,y:-i+l},{x:s-n,y:-i+l},{x:s-n,y:-l}]:a.has("down")?[{x:s/2,y:0},{x:0,y:-l},{x:n,y:-l},{x:n,y:-i+l},{x:s-n,y:-i+l},{x:s-n,y:-l},{x:s,y:-l}]:[{x:0,y:0}]),x=c(d,y,f,w);return x.attr("style",e.style),h(e,x),e.intersect=function(t){return g(e,w,t)},d},rect_left_inv_arrow:async(t,e)=>{let{shapeSvg:r,bbox:a}=await o(t,e,y(e,void 0),!0),i=a.width+e.padding,n=a.height+e.padding,s=[{x:-n/2,y:0},{x:i,y:0},{x:i,y:-n},{x:-n/2,y:-n},{x:0,y:-n/2}];return c(r,i,n,s).attr("style",e.style),e.width=i+n,e.height=n,e.intersect=function(t){return g(e,s,t)},r},lean_right:async(t,e)=>{let{shapeSvg:r,bbox:a}=await o(t,e,y(e),!0),i=a.width+e.padding,n=a.height+e.padding,s=[{x:-2*n/6,y:0},{x:i-n/6,y:0},{x:i+2*n/6,y:-n},{x:n/6,y:-n}],l=c(r,i,n,s);return l.attr("style",e.style),h(e,l),e.intersect=function(t){return g(e,s,t)},r},lean_left:async(t,e)=>{let{shapeSvg:r,bbox:a}=await o(t,e,y(e,void 0),!0),i=a.width+e.padding,n=a.height+e.padding,s=[{x:2*n/6,y:0},{x:i+n/6,y:0},{x:i-2*n/6,y:-n},{x:-n/6,y:-n}],l=c(r,i,n,s);return l.attr("style",e.style),h(e,l),e.intersect=function(t){return g(e,s,t)},r},trapezoid:async(t,e)=>{let{shapeSvg:r,bbox:a}=await o(t,e,y(e,void 0),!0),i=a.width+e.padding,n=a.height+e.padding,s=[{x:-2*n/6,y:0},{x:i+2*n/6,y:0},{x:i-n/6,y:-n},{x:n/6,y:-n}],l=c(r,i,n,s);return l.attr("style",e.style),h(e,l),e.intersect=function(t){return g(e,s,t)},r},inv_trapezoid:async(t,e)=>{let{shapeSvg:r,bbox:a}=await o(t,e,y(e,void 0),!0),i=a.width+e.padding,n=a.height+e.padding,s=[{x:n/6,y:0},{x:i-n/6,y:0},{x:i+2*n/6,y:-n},{x:-2*n/6,y:-n}],l=c(r,i,n,s);return l.attr("style",e.style),h(e,l),e.intersect=function(t){return g(e,s,t)},r},rect_right_inv_arrow:async(t,e)=>{let{shapeSvg:r,bbox:a}=await o(t,e,y(e,void 0),!0),i=a.width+e.padding,n=a.height+e.padding,s=[{x:0,y:0},{x:i+n/2,y:0},{x:i,y:-n/2},{x:i+n/2,y:-n},{x:0,y:-n}],l=c(r,i,n,s);return l.attr("style",e.style),h(e,l),e.intersect=function(t){return g(e,s,t)},r},cylinder:async(t,e)=>{let{shapeSvg:r,bbox:a}=await o(t,e,y(e,void 0),!0),i=a.width+e.padding,n=i/2,s=n/(2.5+i/50),l=a.height+s+e.padding,d="M 0,"+s+" a "+n+","+s+" 0,0,0 "+i+" 0 a "+n+","+s+" 0,0,0 "+-i+" 0 l 0,"+l+" a "+n+","+s+" 0,0,0 "+i+" 0 l 0,"+-l,c=r.attr("label-offset-y",s).insert("path",":first-child").attr("style",e.style).attr("d",d).attr("transform","translate("+-i/2+","+-(l/2+s)+")");return h(e,c),e.intersect=function(t){let r=u(e,t),a=r.x-e.x;if(0!=n&&(Math.abs(a)<e.width/2||Math.abs(a)==e.width/2&&Math.abs(r.y-e.y)>e.height/2-s)){let i=s*s*(1-a*a/(n*n));0!=i&&(i=Math.sqrt(i)),i=s-i,t.y-e.y>0&&(i=-i),r.y+=i}return r},r},start:(t,e)=>{let r=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),a=r.insert("circle",":first-child");return a.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),h(e,a),e.intersect=function(t){return f(e,7,t)},r},end:(t,e)=>{let r=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),a=r.insert("circle",":first-child"),i=r.insert("circle",":first-child");return i.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),a.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),h(e,i),e.intersect=function(t){return f(e,7,t)},r},note:async(t,r)=>{r.useHtmlLabels||(0,e.c)().flowchart.htmlLabels||(r.centerLabel=!0);let{shapeSvg:a,bbox:i,halfPadding:n}=await o(t,r,"node "+r.classes,!0);e.l.info("Classes = ",r.classes);let s=a.insert("rect",":first-child");return s.attr("rx",r.rx).attr("ry",r.ry).attr("x",-i.width/2-n).attr("y",-i.height/2-n).attr("width",i.width+r.padding).attr("height",i.height+r.padding),h(r,s),r.intersect=function(t){return u(r,t)},a},subroutine:async(t,e)=>{let{shapeSvg:r,bbox:a}=await o(t,e,y(e,void 0),!0),i=a.width+e.padding,n=a.height+e.padding,s=[{x:0,y:0},{x:i,y:0},{x:i,y:-n},{x:0,y:-n},{x:0,y:0},{x:-8,y:0},{x:i+8,y:0},{x:i+8,y:-n},{x:-8,y:-n},{x:-8,y:0}],l=c(r,i,n,s);return l.attr("style",e.style),h(e,l),e.intersect=function(t){return g(e,s,t)},r},fork:m,join:m,class_box:(t,a)=>{let i,n=a.padding/2;i=a.classes?"node "+a.classes:"node default";let s=t.insert("g").attr("class",i).attr("id",a.domId||a.id),l=s.insert("rect",":first-child"),o=s.insert("line"),c=s.insert("line"),f=0,g=4,p=s.insert("g").attr("class","label"),y=0,w=a.classData.annotations&&a.classData.annotations[0],x=a.classData.annotations[0]?"«"+a.classData.annotations[0]+"»":"",m=p.node().appendChild(d(x,a.labelStyle,!0,!0)),b=m.getBBox();if((0,e.m)((0,e.c)().flowchart.htmlLabels)){let t=m.children[0],e=(0,r.select)(m);b=t.getBoundingClientRect(),e.attr("width",b.width),e.attr("height",b.height)}a.classData.annotations[0]&&(g+=b.height+4,f+=b.width);let v=a.classData.label;void 0!==a.classData.type&&""!==a.classData.type&&((0,e.c)().flowchart.htmlLabels?v+="&lt;"+a.classData.type+"&gt;":v+="<"+a.classData.type+">");let _=p.node().appendChild(d(v,a.labelStyle,!0,!0));(0,r.select)(_).attr("class","classTitle");let k=_.getBBox();if((0,e.m)((0,e.c)().flowchart.htmlLabels)){let t=_.children[0],e=(0,r.select)(_);k=t.getBoundingClientRect(),e.attr("width",k.width),e.attr("height",k.height)}g+=k.height+4,k.width>f&&(f=k.width);let L=[];a.classData.members.forEach(t=>{let i=t.getDisplayDetails(),n=i.displayText;(0,e.c)().flowchart.htmlLabels&&(n=n.replace(/</g,"&lt;").replace(/>/g,"&gt;"));let s=p.node().appendChild(d(n,i.cssStyle?i.cssStyle:a.labelStyle,!0,!0)),l=s.getBBox();if((0,e.m)((0,e.c)().flowchart.htmlLabels)){let t=s.children[0],e=(0,r.select)(s);l=t.getBoundingClientRect(),e.attr("width",l.width),e.attr("height",l.height)}l.width>f&&(f=l.width),g+=l.height+4,L.push(s)}),g+=8;let C=[];if(a.classData.methods.forEach(t=>{let i=t.getDisplayDetails(),n=i.displayText;(0,e.c)().flowchart.htmlLabels&&(n=n.replace(/</g,"&lt;").replace(/>/g,"&gt;"));let s=p.node().appendChild(d(n,i.cssStyle?i.cssStyle:a.labelStyle,!0,!0)),l=s.getBBox();if((0,e.m)((0,e.c)().flowchart.htmlLabels)){let t=s.children[0],e=(0,r.select)(s);l=t.getBoundingClientRect(),e.attr("width",l.width),e.attr("height",l.height)}l.width>f&&(f=l.width),g+=l.height+4,C.push(s)}),g+=8,w){let t=(f-b.width)/2;(0,r.select)(m).attr("transform","translate( "+(-1*f/2+t)+", "+-1*g/2+")"),y=b.height+4}let $=(f-k.width)/2;return(0,r.select)(_).attr("transform","translate( "+(-1*f/2+$)+", "+(-1*g/2+y)+")"),y+=k.height+4,o.attr("class","divider").attr("x1",-f/2-n).attr("x2",f/2+n).attr("y1",-g/2-n+8+y).attr("y2",-g/2-n+8+y),y+=8,L.forEach(t=>{(0,r.select)(t).attr("transform","translate( "+-f/2+", "+(-1*g/2+y+4)+")");let e=null==t?void 0:t.getBBox();y+=((null==e?void 0:e.height)??0)+4}),y+=8,c.attr("class","divider").attr("x1",-f/2-n).attr("x2",f/2+n).attr("y1",-g/2-n+8+y).attr("y2",-g/2-n+8+y),y+=8,C.forEach(t=>{(0,r.select)(t).attr("transform","translate( "+-f/2+", "+(-1*g/2+y)+")");let e=null==t?void 0:t.getBBox();y+=((null==e?void 0:e.height)??0)+4}),l.attr("style",a.style).attr("class","outer title-state").attr("x",-f/2-n).attr("y",-(g/2)-n).attr("width",f+a.padding).attr("height",g+a.padding),h(a,l),a.intersect=function(t){return u(a,t)},s}},v={},_=async(t,r,a)=>{let i,n;if(r.link){let s;"sandbox"===(0,e.c)().securityLevel?s="_top":r.linkTarget&&(s=r.linkTarget||"_blank"),i=t.insert("svg:a").attr("xlink:href",r.link).attr("target",s),n=await b[r.shape](i,r,a)}else i=n=await b[r.shape](t,r,a);return r.tooltip&&n.attr("title",r.tooltip),r.class&&n.attr("class","node default "+r.class),i.attr("data-node","true"),i.attr("data-id",r.id),v[r.id]=i,r.haveCallback&&v[r.id].attr("class",v[r.id].attr("class")+" clickable"),i},k=(t,e)=>{v[e.id]=t},L=()=>{v={}},C=t=>{let r=v[t.id];e.l.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");let a=t.diff||0;return t.clusterNode?r.attr("transform","translate("+(t.x+a-t.width/2)+", "+(t.y-t.height/2-8)+")"):r.attr("transform","translate("+t.x+", "+t.y+")"),a},$=({flowchart:t})=>{var e,r;let a=(null==(e=null==t?void 0:t.subGraphTitleMargin)?void 0:e.top)??0,i=(null==(r=null==t?void 0:t.subGraphTitleMargin)?void 0:r.bottom)??0;return{subGraphTitleTopMargin:a,subGraphTitleBottomMargin:i,subGraphTitleTotalMargin:a+i}},E={aggregation:18,extension:18,composition:18,dependency:6,lollipop:13.5,arrow_point:5.3};function M(t,e){if(void 0===t||void 0===e)return{angle:0,deltaX:0,deltaY:0};t=S(t),e=S(e);let[r,a]=[t.x,t.y],[i,n]=[e.x,e.y],s=i-r,l=n-a;return{angle:Math.atan(l/s),deltaX:s,deltaY:l}}let S=t=>Array.isArray(t)?{x:t[0],y:t[1]}:t,T=t=>({x:function(e,r,a){let i=0;if(0===r&&Object.hasOwn(E,t.arrowTypeStart)){let{angle:e,deltaX:r}=M(a[0],a[1]);i=E[t.arrowTypeStart]*Math.cos(e)*(r>=0?1:-1)}else if(r===a.length-1&&Object.hasOwn(E,t.arrowTypeEnd)){let{angle:e,deltaX:r}=M(a[a.length-1],a[a.length-2]);i=E[t.arrowTypeEnd]*Math.cos(e)*(r>=0?1:-1)}return S(e).x+i},y:function(e,r,a){let i=0;if(0===r&&Object.hasOwn(E,t.arrowTypeStart)){let{angle:e,deltaY:r}=M(a[0],a[1]);i=E[t.arrowTypeStart]*Math.abs(Math.sin(e))*(r>=0?1:-1)}else if(r===a.length-1&&Object.hasOwn(E,t.arrowTypeEnd)){let{angle:e,deltaY:r}=M(a[a.length-1],a[a.length-2]);i=E[t.arrowTypeEnd]*Math.abs(Math.sin(e))*(r>=0?1:-1)}return S(e).y+i}}),B=(t,e,r,a,i)=>{e.arrowTypeStart&&D(t,"start",e.arrowTypeStart,r,a,i),e.arrowTypeEnd&&D(t,"end",e.arrowTypeEnd,r,a,i)},N={arrow_cross:"cross",arrow_point:"point",arrow_barb:"barb",arrow_circle:"circle",aggregation:"aggregation",extension:"extension",composition:"composition",dependency:"dependency",lollipop:"lollipop"},D=(t,r,a,i,n,s)=>{let l=N[a];l?t.attr(`marker-${r}`,`url(${i}#${n}_${s}-${l}${"start"===r?"Start":"End"})`):e.l.warn(`Unknown arrow type: ${a}`)},X={},O={},P=()=>{X={},O={}},j=(t,a)=>{let i,s=(0,e.m)((0,e.c)().flowchart.htmlLabels),l="markdown"===a.labelType?(0,n.a)(t,a.label,{style:a.labelStyle,useHtmlLabels:s,addSvgBackground:!0}):d(a.label,a.labelStyle),o=t.insert("g").attr("class","edgeLabel"),h=o.insert("g").attr("class","label");h.node().appendChild(l);let c=l.getBBox();if(s){let t=l.children[0],e=(0,r.select)(l);c=t.getBoundingClientRect(),e.attr("width",c.width),e.attr("height",c.height)}if(h.attr("transform","translate("+-c.width/2+", "+-c.height/2+")"),X[a.id]=o,a.width=c.width,a.height=c.height,a.startLabelLeft){let e=d(a.startLabelLeft,a.labelStyle),r=t.insert("g").attr("class","edgeTerminals"),n=r.insert("g").attr("class","inner");i=n.node().appendChild(e);let s=e.getBBox();n.attr("transform","translate("+-s.width/2+", "+-s.height/2+")"),O[a.id]||(O[a.id]={}),O[a.id].startLeft=r,R(i,a.startLabelLeft)}if(a.startLabelRight){let e=d(a.startLabelRight,a.labelStyle),r=t.insert("g").attr("class","edgeTerminals"),n=r.insert("g").attr("class","inner");i=r.node().appendChild(e),n.node().appendChild(e);let s=e.getBBox();n.attr("transform","translate("+-s.width/2+", "+-s.height/2+")"),O[a.id]||(O[a.id]={}),O[a.id].startRight=r,R(i,a.startLabelRight)}if(a.endLabelLeft){let e=d(a.endLabelLeft,a.labelStyle),r=t.insert("g").attr("class","edgeTerminals"),n=r.insert("g").attr("class","inner");i=n.node().appendChild(e);let s=e.getBBox();n.attr("transform","translate("+-s.width/2+", "+-s.height/2+")"),r.node().appendChild(e),O[a.id]||(O[a.id]={}),O[a.id].endLeft=r,R(i,a.endLabelLeft)}if(a.endLabelRight){let e=d(a.endLabelRight,a.labelStyle),r=t.insert("g").attr("class","edgeTerminals"),n=r.insert("g").attr("class","inner");i=n.node().appendChild(e);let s=e.getBBox();n.attr("transform","translate("+-s.width/2+", "+-s.height/2+")"),r.node().appendChild(e),O[a.id]||(O[a.id]={}),O[a.id].endRight=r,R(i,a.endLabelRight)}return l};function R(t,r){(0,e.c)().flowchart.htmlLabels&&t&&(t.style.width=9*r.length+"px",t.style.height="12px")}let U=(t,r)=>{e.l.debug("Moving label abc88 ",t.id,t.label,X[t.id],r);let a=r.updatedPath?r.updatedPath:r.originalPath,{subGraphTitleTotalMargin:i}=$((0,e.c)());if(t.label){let n=X[t.id],s=t.x,l=t.y;if(a){let i=e.u.calcLabelPosition(a);e.l.debug("Moving label "+t.label+" from (",s,",",l,") to (",i.x,",",i.y,") abc88"),r.updatedPath&&(s=i.x,l=i.y)}n.attr("transform",`translate(${s}, ${l+i/2})`)}if(t.startLabelLeft){let r=O[t.id].startLeft,i=t.x,n=t.y;if(a){let r=e.u.calcTerminalLabelPosition(10*!!t.arrowTypeStart,"start_left",a);i=r.x,n=r.y}r.attr("transform",`translate(${i}, ${n})`)}if(t.startLabelRight){let r=O[t.id].startRight,i=t.x,n=t.y;if(a){let r=e.u.calcTerminalLabelPosition(10*!!t.arrowTypeStart,"start_right",a);i=r.x,n=r.y}r.attr("transform",`translate(${i}, ${n})`)}if(t.endLabelLeft){let r=O[t.id].endLeft,i=t.x,n=t.y;if(a){let r=e.u.calcTerminalLabelPosition(10*!!t.arrowTypeEnd,"end_left",a);i=r.x,n=r.y}r.attr("transform",`translate(${i}, ${n})`)}if(t.endLabelRight){let r=O[t.id].endRight,i=t.x,n=t.y;if(a){let r=e.u.calcTerminalLabelPosition(10*!!t.arrowTypeEnd,"end_right",a);i=r.x,n=r.y}r.attr("transform",`translate(${i}, ${n})`)}},I=(t,r)=>{e.l.debug("abc88 cutPathAtIntersect",t,r);let a=[],i=t[0],n=!1;return t.forEach(t=>{let s,l,d,o,h,c;if(s=r.x,l=r.y,d=Math.abs(t.x-s),o=Math.abs(t.y-l),h=r.width/2,c=r.height/2,d>=h||o>=c||n)i=t,n||a.push(t);else{let s=((t,r,a)=>{e.l.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(r)}
  insidePoint : ${JSON.stringify(a)}
  node        : x:${t.x} y:${t.y} w:${t.width} h:${t.height}`);let i=t.x,n=t.y,s=Math.abs(i-a.x),l=t.width/2,d=a.x<r.x?l-s:l+s,o=t.height/2,h=Math.abs(r.y-a.y),c=Math.abs(r.x-a.x);if(Math.abs(n-r.y)*l>Math.abs(i-r.x)*o){let t=a.y<r.y?r.y-o-n:n-o-r.y;d=c*t/h;let i={x:a.x<r.x?a.x+d:a.x-c+d,y:a.y<r.y?a.y+h-t:a.y-h+t};return 0===d&&(i.x=r.x,i.y=r.y),0===c&&(i.x=r.x),0===h&&(i.y=r.y),e.l.debug(`abc89 topp/bott calc, Q ${h}, q ${t}, R ${c}, r ${d}`,i),i}{let t=h*(d=a.x<r.x?r.x-l-i:i-l-r.x)/c,n=a.x<r.x?a.x+c-d:a.x-c+d,s=a.y<r.y?a.y+t:a.y-t;return e.l.debug(`sides calc abc89, Q ${h}, q ${t}, R ${c}, r ${d}`,{_x:n,_y:s}),0===d&&(n=r.x,s=r.y),0===c&&(n=r.x),0===h&&(s=r.y),{x:n,y:s}}})(r,i,t),l=!1;a.forEach(t=>{l=l||t.x===s.x&&t.y===s.y}),a.some(t=>t.x===s.x&&t.y===s.y)||a.push(s),n=!0}}),a},A=function(t,r,n,s,l,d,o){let h,c=n.points;e.l.debug("abc88 InsertEdge: edge=",n,"e=",r);let u=!1,f=d.node(r.v);var g=d.node(r.w);(null==g?void 0:g.intersect)&&(null==f?void 0:f.intersect)&&((c=c.slice(1,n.points.length-1)).unshift(f.intersect(c[0])),c.push(g.intersect(c[c.length-1]))),n.toCluster&&(e.l.debug("to cluster abc88",s[n.toCluster]),c=I(n.points,s[n.toCluster].node),u=!0),n.fromCluster&&(e.l.debug("from cluster abc88",s[n.fromCluster]),c=I(c.reverse(),s[n.fromCluster].node).reverse(),u=!0);let p=c.filter(t=>!Number.isNaN(t.y)),y=i.curveBasis;n.curve&&("graph"===l||"flowchart"===l)&&(y=n.curve);let{x:w,y:x}=T(n),m=(0,a.line)().x(w).y(x).curve(y);switch(n.thickness){case"normal":h="edge-thickness-normal";break;case"thick":case"invisible":h="edge-thickness-thick";break;default:h=""}switch(n.pattern){case"solid":h+=" edge-pattern-solid";break;case"dotted":h+=" edge-pattern-dotted";break;case"dashed":h+=" edge-pattern-dashed"}let b=t.append("path").attr("d",m(p)).attr("id",n.id).attr("class"," "+h+(n.classes?" "+n.classes:"")).attr("style",n.style),v="";((0,e.c)().flowchart.arrowMarkerAbsolute||(0,e.c)().state.arrowMarkerAbsolute)&&(v=(v=(v=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search).replace(/\(/g,"\\(")).replace(/\)/g,"\\)")),B(b,n,v,o,l);let _={};return u&&(_.updatedPath=c),_.originalPath=n.points,_};t.s(["a",()=>l,"b",()=>L,"c",()=>d,"d",()=>P,"e",()=>_,"f",()=>j,"g",()=>$,"h",()=>A,"i",()=>u,"j",()=>U,"k",()=>T,"l",()=>o,"m",()=>B,"p",()=>C,"s",()=>k,"u",()=>h])},91929,57722,t=>{"use strict";t.i(30187);var e=t.i(44958),r=t.i(89325),a=t.i(93746),i=t.i(71261);t.i(63641);var n=t.i(14447);function s(t){var e,n,s={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:(e=t,i.map(e.nodes(),function(t){var a=e.node(t),i=e.parent(t),n={v:t};return r.isUndefined(a)||(n.value=a),r.isUndefined(i)||(n.parent=i),n})),edges:(n=t,i.map(n.edges(),function(t){var e=n.edge(t),a={v:t.v,w:t.w};return r.isUndefined(t.name)||(a.name=t.name),r.isUndefined(e)||(a.value=e),a}))};return r.isUndefined(t.graph())||(s.value=a.clone(t.graph())),s}t.s(["write",()=>s],57722);var l=t.i(44787),d=t.i(34599);t.i(26754);var o=t.i(28284);t.i(31345);var h=t.i(12638);let c={},u={},f={},g=(t,e)=>(d.l.trace("In isDescendant",e," ",t," = ",u[e].includes(t)),!!u[e].includes(t)),p=(t,e,r,a)=>{d.l.warn("Copying children of ",t,"root",a,"data",e.node(t),a);let i=e.children(t)||[];t!==a&&i.push(t),d.l.warn("Copying (nodes) clusterId",t,"nodes",i),i.forEach(i=>{if(e.children(i).length>0)p(i,e,r,a);else{let n=e.node(i);d.l.info("cp ",i," to ",a," with parent ",t),r.setNode(i,n),a!==e.parent(i)&&(d.l.warn("Setting parent",i,e.parent(i)),r.setParent(i,e.parent(i))),t!==a&&i!==t?(d.l.debug("Setting parent",i,t),r.setParent(i,t)):(d.l.info("In copy ",t,"root",a,"data",e.node(t),a),d.l.debug("Not Setting parent for node=",i,"cluster!==rootId",t!==a,"node!==clusterId",i!==t));let s=e.edges(i);d.l.debug("Copying Edges",s),s.forEach(i=>{d.l.info("Edge",i);let n=e.edge(i.v,i.w,i.name);d.l.info("Edge data",n,a);try{(d.l.info("Descendants of ",a," is ",u[a]),d.l.info("Edge is ",i),i.v!==a&&i.w!==a&&(u[a]?u[a].includes(i.v)||g(i.v,a)||g(i.w,a)||u[a].includes(i.w):(d.l.debug("Tilt, ",a,",not in descendants"),!1)))?(d.l.info("Copying as ",i.v,i.w,n,i.name),r.setEdge(i.v,i.w,n,i.name),d.l.info("newGraph edges ",r.edges(),r.edge(r.edges()[0]))):d.l.info("Skipping copy of edge ",i.v,"-->",i.w," rootId: ",a," clusterId:",t)}catch(t){d.l.error(t)}})}d.l.debug("Removing node",i),e.removeNode(i)})},y=(t,e)=>{let r=e.children(t),a=[...r];for(let i of r)f[i]=t,a=[...a,...y(i,e)];return a},w=(t,e)=>{d.l.trace("Searching",t);let r=e.children(t);if(d.l.trace("Searching children of id ",t,r),r.length<1)return d.l.trace("This is a valid node",t),t;for(let a of r){let r=w(a,e);if(r)return d.l.trace("Found replacement for",t," => ",r),r}},x=t=>c[t]&&c[t].externalConnections&&c[t]?c[t].id:t,m=(t,e)=>{if(d.l.warn("extractor - ",e,s(t),t.children("D")),e>10)return void d.l.error("Bailing out");let r=t.nodes(),a=!1;for(let e of r){let r=t.children(e);a=a||r.length>0}if(!a)return void d.l.debug("Done, no node has children",t.nodes());for(let a of(d.l.debug("Nodes = ",r,e),r))if(d.l.debug("Extracting node",a,c,c[a]&&!c[a].externalConnections,!t.parent(a),t.node(a),t.children("D")," Depth ",e),c[a])if(!c[a].externalConnections&&t.children(a)&&t.children(a).length>0){d.l.warn("Cluster without external connections, without a parent and with children",a,e);let r="TB"===t.graph().rankdir?"LR":"TB";c[a]&&c[a].clusterData&&c[a].clusterData.dir&&(r=c[a].clusterData.dir,d.l.warn("Fixing dir",c[a].clusterData.dir,r));let i=new n.Graph({multigraph:!0,compound:!0}).setGraph({rankdir:r,nodesep:50,ranksep:50,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});d.l.warn("Old graph before copy",s(t)),p(a,t,i,a),t.setNode(a,{clusterNode:!0,id:a,clusterData:c[a].clusterData,labelText:c[a].labelText,graph:i}),d.l.warn("New graph after copy node: (",a,")",s(i)),d.l.debug("Old graph after copy",s(t))}else d.l.warn("Cluster ** ",a," **not meeting the criteria !externalConnections:",!c[a].externalConnections," no parent: ",!t.parent(a)," children ",t.children(a)&&t.children(a).length>0,t.children("D"),e),d.l.debug(c);else d.l.debug("Not a cluster",a,e);for(let a of(r=t.nodes(),d.l.warn("New list of nodes",r),r)){let r=t.node(a);d.l.warn(" Now next level",a,r),r.clusterNode&&m(r.graph,e+1)}},b=(t,e)=>{if(0===e.length)return[];let r=Object.assign(e);return e.forEach(e=>{let a=t.children(e),i=b(t,a);r=[...r,...i]}),r},v={rect:(t,e)=>{d.l.info("Creating subgraph rect for ",e.id,e);let r=(0,d.c)(),a=t.insert("g").attr("class","cluster"+(e.class?" "+e.class:"")).attr("id",e.id),i=a.insert("rect",":first-child"),n=(0,d.m)(r.flowchart.htmlLabels),s=a.insert("g").attr("class","cluster-label"),c="markdown"===e.labelType?(0,o.a)(s,e.labelText,{style:e.labelStyle,useHtmlLabels:n}):s.node().appendChild((0,l.c)(e.labelText,e.labelStyle,void 0,!0)),u=c.getBBox();if((0,d.m)(r.flowchart.htmlLabels)){let t=c.children[0],e=(0,h.select)(c);u=t.getBoundingClientRect(),e.attr("width",u.width),e.attr("height",u.height)}let f=0*e.padding,g=e.width<=u.width+f?u.width+f:e.width;e.width<=u.width+f?e.diff=(u.width-e.width)/2-e.padding/2:e.diff=-e.padding/2,d.l.trace("Data ",e,JSON.stringify(e)),i.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-g/2).attr("y",e.y-e.height/2-f/2).attr("width",g).attr("height",e.height+f);let{subGraphTitleTopMargin:p}=(0,l.g)(r);n?s.attr("transform",`translate(${e.x-u.width/2}, ${e.y-e.height/2+p})`):s.attr("transform",`translate(${e.x}, ${e.y-e.height/2+p})`);let y=i.node().getBBox();return e.width=y.width,e.height=y.height,e.intersect=function(t){return(0,l.i)(e,t)},a},roundedWithTitle:(t,e)=>{let r=(0,d.c)(),a=t.insert("g").attr("class",e.classes).attr("id",e.id),i=a.insert("rect",":first-child"),n=a.insert("g").attr("class","cluster-label"),s=a.append("rect"),o=n.node().appendChild((0,l.c)(e.labelText,e.labelStyle,void 0,!0)),c=o.getBBox();if((0,d.m)(r.flowchart.htmlLabels)){let t=o.children[0],e=(0,h.select)(o);c=t.getBoundingClientRect(),e.attr("width",c.width),e.attr("height",c.height)}c=o.getBBox();let u=0*e.padding,f=u/2,g=e.width<=c.width+e.padding?c.width+e.padding:e.width;e.width<=c.width+e.padding?e.diff=(c.width+0*e.padding-e.width)/2:e.diff=-e.padding/2,i.attr("class","outer").attr("x",e.x-g/2-f).attr("y",e.y-e.height/2-f).attr("width",g+u).attr("height",e.height+u),s.attr("class","inner").attr("x",e.x-g/2-f).attr("y",e.y-e.height/2-f+c.height-1).attr("width",g+u).attr("height",e.height+u-c.height-3);let{subGraphTitleTopMargin:p}=(0,l.g)(r);return n.attr("transform",`translate(${e.x-c.width/2}, ${e.y-e.height/2-e.padding/3+((0,d.m)(r.flowchart.htmlLabels)?5:3)+p})`),e.height=i.node().getBBox().height,e.intersect=function(t){return(0,l.i)(e,t)},a},noteGroup:(t,e)=>{let r=t.insert("g").attr("class","note-cluster").attr("id",e.id),a=r.insert("rect",":first-child"),i=0*e.padding,n=i/2;a.attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-e.width/2-n).attr("y",e.y-e.height/2-n).attr("width",e.width+i).attr("height",e.height+i).attr("fill","none");let s=a.node().getBBox();return e.width=s.width,e.height=s.height,e.intersect=function(t){return(0,l.i)(e,t)},r},divider:(t,e)=>{let r=t.insert("g").attr("class",e.classes).attr("id",e.id),a=r.insert("rect",":first-child"),i=0*e.padding;a.attr("class","divider").attr("x",e.x-e.width/2-i/2).attr("y",e.y-e.height/2).attr("width",e.width+i).attr("height",e.height+i);let n=a.node().getBBox();return e.width=n.width,e.height=n.height,e.diff=-e.padding/2,e.intersect=function(t){return(0,l.i)(e,t)},r}},_={},k=async(t,r,a,i,n,o)=>{d.l.info("Graph in recursive render: XXX",s(r),n);let h=r.graph().rankdir;d.l.trace("Dir in recursive render - dir:",h);let u=t.insert("g").attr("class","root");r.nodes()?d.l.info("Recursive render XXX",r.nodes()):d.l.info("No nodes found for",r),r.edges().length>0&&d.l.trace("Recursive edges",r.edge(r.edges()[0]));let f=u.insert("g").attr("class","clusters"),g=u.insert("g").attr("class","edgePaths"),p=u.insert("g").attr("class","edgeLabels"),y=u.insert("g").attr("class","nodes");await Promise.all(r.nodes().map(async function(t){let e=r.node(t);if(void 0!==n){let e=JSON.parse(JSON.stringify(n.clusterData));d.l.info("Setting data for cluster XXX (",t,") ",e,n),r.setNode(n.id,e),r.parent(t)||(d.l.trace("Setting parent",t,n.id),r.setParent(t,n.id,e))}if(d.l.info("(Insert) Node XXX"+t+": "+JSON.stringify(r.node(t))),e&&e.clusterNode){d.l.info("Cluster identified",t,e.width,r.node(t));let n=await k(y,e.graph,a,i,r.node(t),o),s=n.elem;(0,l.u)(e,s),e.diff=n.diff||0,d.l.info("Node bounds (abc123)",t,e,e.width,e.x,e.y),(0,l.s)(s,e),d.l.warn("Recursive render complete ",s,e)}else r.children(t).length>0?(d.l.info("Cluster - the non recursive path XXX",t,e.id,e,r),d.l.info(w(e.id,r)),c[e.id]={id:w(e.id,r),node:e}):(d.l.info("Node - the non recursive path",t,e.id,e),await (0,l.e)(y,r.node(t),h))})),r.edges().forEach(function(t){let e=r.edge(t.v,t.w,t.name);d.l.info("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(t)),d.l.info("Edge "+t.v+" -> "+t.w+": ",t," ",JSON.stringify(r.edge(t))),d.l.info("Fix",c,"ids:",t.v,t.w,"Translating: ",c[t.v],c[t.w]),(0,l.f)(p,e)}),r.edges().forEach(function(t){d.l.info("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(t))}),d.l.info("#############################################"),d.l.info("###                Layout                 ###"),d.l.info("#############################################"),d.l.info(r),(0,e.layout)(r),d.l.info("Graph after layout:",s(r));let x=0,{subGraphTitleTotalMargin:m}=(0,l.g)(o);return b(r,r.children()).forEach(function(t){let e=r.node(t);if(d.l.info("Position "+t+": "+JSON.stringify(r.node(t))),d.l.info("Position "+t+": ("+e.x,","+e.y,") width: ",e.width," height: ",e.height),e&&e.clusterNode)e.y+=m,(0,l.p)(e);else if(r.children(t).length>0){let t;e.height+=m,d.l.trace("Inserting cluster"),t=e.shape||"rect",_[e.id]=v[t](f,e),c[e.id].node=e}else e.y+=m/2,(0,l.p)(e)}),r.edges().forEach(function(t){let e=r.edge(t);d.l.info("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(e),e),e.points.forEach(t=>t.y+=m/2);let n=(0,l.h)(g,t,e,c,a,r,i);(0,l.j)(e,n)}),r.nodes().forEach(function(t){let e=r.node(t);d.l.info(t,e.type,e.diff),"group"===e.type&&(x=e.diff)}),{elem:u,diff:x}},L=async(t,e,r,a,i)=>{(0,l.a)(t,r,a,i),(0,l.b)(),(0,l.d)(),_={},u={},f={},c={},d.l.warn("Graph at first:",JSON.stringify(s(e))),((t,e)=>{if(!t||e>10)return d.l.debug("Opting out, no graph ");for(let e of(d.l.debug("Opting in, graph "),t.nodes().forEach(function(e){t.children(e).length>0&&(d.l.warn("Cluster identified",e," Replacement id in edges: ",w(e,t)),u[e]=y(e,t),c[e]={id:w(e,t),clusterData:t.node(e)})}),t.nodes().forEach(function(e){let r=t.children(e),a=t.edges();r.length>0?(d.l.debug("Cluster identified",e,u),a.forEach(t=>{t.v!==e&&t.w!==e&&g(t.v,e)^g(t.w,e)&&(d.l.warn("Edge: ",t," leaves cluster ",e),d.l.warn("Descendants of XXX ",e,": ",u[e]),c[e].externalConnections=!0)})):d.l.debug("Not a cluster ",e,u)}),Object.keys(c))){let r=c[e].id,a=t.parent(r);a!==e&&c[a]&&!c[a].externalConnections&&(c[e].id=a)}t.edges().forEach(function(e){let r=t.edge(e);d.l.warn("Edge "+e.v+" -> "+e.w+": "+JSON.stringify(e)),d.l.warn("Edge "+e.v+" -> "+e.w+": "+JSON.stringify(t.edge(e)));let a=e.v,i=e.w;if(d.l.warn("Fix XXX",c,"ids:",e.v,e.w,"Translating: ",c[e.v]," --- ",c[e.w]),c[e.v]&&c[e.w]&&c[e.v]===c[e.w]){d.l.warn("Fixing and trixing link to self - removing XXX",e.v,e.w,e.name),d.l.warn("Fixing and trixing - removing XXX",e.v,e.w,e.name),a=x(e.v),i=x(e.w),t.removeEdge(e.v,e.w,e.name);let n=e.w+"---"+e.v;t.setNode(n,{domId:n,id:n,labelStyle:"",labelText:r.label,padding:0,shape:"labelRect",style:""});let s=structuredClone(r),l=structuredClone(r);s.label="",s.arrowTypeEnd="none",l.label="",s.fromCluster=e.v,l.toCluster=e.v,t.setEdge(a,n,s,e.name+"-cyclic-special"),t.setEdge(n,i,l,e.name+"-cyclic-special")}else(c[e.v]||c[e.w])&&(d.l.warn("Fixing and trixing - removing XXX",e.v,e.w,e.name),a=x(e.v),i=x(e.w),t.removeEdge(e.v,e.w,e.name),a!==e.v&&(c[t.parent(a)].externalConnections=!0,r.fromCluster=e.v),i!==e.w&&(c[t.parent(i)].externalConnections=!0,r.toCluster=e.w),d.l.warn("Fix Replacing with XXX",a,i,e.name),t.setEdge(a,i,r,e.name))}),d.l.warn("Adjusted Graph",s(t)),m(t,0),d.l.trace(c)})(e),d.l.warn("Graph after:",JSON.stringify(s(e)));let n=(0,d.c)();await k(t,e,a,i,void 0,n)};t.s(["r",()=>L],91929)}]);