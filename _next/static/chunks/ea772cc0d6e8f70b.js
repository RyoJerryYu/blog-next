(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,90983,e=>{"use strict";var t=e.i(44869);e.s(["default",0,function(e){return(0,t.default)(e,4)}])},15738,19173,e=>{"use strict";e.i(86738);var t=e.i(85607),r=e.i(89325),i=e.i(90983),i=i,l=e.i(71261);e.i(63641);var n=e.i(38973);function a(e){var t,n,a={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:(t=e,l.map(t.nodes(),function(e){var i=t.node(e),l=t.parent(e),n={v:e};return r.isUndefined(i)||(n.value=i),r.isUndefined(l)||(n.parent=l),n})),edges:(n=e,l.map(n.edges(),function(e){var t=n.edge(e),i={v:e.v,w:e.w};return r.isUndefined(e.name)||(i.name=e.name),r.isUndefined(t)||(i.value=t),i}))};return r.isUndefined(e.graph())||(a.value=i.default(e.graph())),a}e.s(["write",()=>a],19173);var o=e.i(39029),d=e.i(9399);e.i(71515);var s=e.i(12192);e.i(31345);var c=e.i(44588);let h={},g={},f={},u=(e,t)=>(d.l.trace("In isDescendant",t," ",e," = ",g[t].includes(e)),!!g[t].includes(e)),p=(e,t,r,i)=>{d.l.warn("Copying children of ",e,"root",i,"data",t.node(e),i);let l=t.children(e)||[];e!==i&&l.push(e),d.l.warn("Copying (nodes) clusterId",e,"nodes",l),l.forEach(l=>{if(t.children(l).length>0)p(l,t,r,i);else{let n=t.node(l);d.l.info("cp ",l," to ",i," with parent ",e),r.setNode(l,n),i!==t.parent(l)&&(d.l.warn("Setting parent",l,t.parent(l)),r.setParent(l,t.parent(l))),e!==i&&l!==e?(d.l.debug("Setting parent",l,e),r.setParent(l,e)):(d.l.info("In copy ",e,"root",i,"data",t.node(e),i),d.l.debug("Not Setting parent for node=",l,"cluster!==rootId",e!==i,"node!==clusterId",l!==e));let a=t.edges(l);d.l.debug("Copying Edges",a),a.forEach(l=>{d.l.info("Edge",l);let n=t.edge(l.v,l.w,l.name);d.l.info("Edge data",n,i);try{(d.l.info("Descendants of ",i," is ",g[i]),d.l.info("Edge is ",l),l.v!==i&&l.w!==i&&(g[i]?g[i].includes(l.v)||u(l.v,i)||u(l.w,i)||g[i].includes(l.w):(d.l.debug("Tilt, ",i,",not in descendants"),!1)))?(d.l.info("Copying as ",l.v,l.w,n,l.name),r.setEdge(l.v,l.w,n,l.name),d.l.info("newGraph edges ",r.edges(),r.edge(r.edges()[0]))):d.l.info("Skipping copy of edge ",l.v,"-->",l.w," rootId: ",i," clusterId:",e)}catch(e){d.l.error(e)}})}d.l.debug("Removing node",l),t.removeNode(l)})},w=(e,t)=>{let r=t.children(e),i=[...r];for(let l of r)f[l]=e,i=[...i,...w(l,t)];return i},y=(e,t)=>{d.l.trace("Searching",e);let r=t.children(e);if(d.l.trace("Searching children of id ",e,r),r.length<1)return d.l.trace("This is a valid node",e),e;for(let i of r){let r=y(i,t);if(r)return d.l.trace("Found replacement for",e," => ",r),r}},b=e=>h[e]&&h[e].externalConnections&&h[e]?h[e].id:e,x=(e,t)=>{if(d.l.warn("extractor - ",t,a(e),e.children("D")),t>10)return void d.l.error("Bailing out");let r=e.nodes(),i=!1;for(let t of r){let r=e.children(t);i=i||r.length>0}if(!i)return void d.l.debug("Done, no node has children",e.nodes());for(let i of(d.l.debug("Nodes = ",r,t),r))if(d.l.debug("Extracting node",i,h,h[i]&&!h[i].externalConnections,!e.parent(i),e.node(i),e.children("D")," Depth ",t),h[i])if(!h[i].externalConnections&&e.children(i)&&e.children(i).length>0){d.l.warn("Cluster without external connections, without a parent and with children",i,t);let r="TB"===e.graph().rankdir?"LR":"TB";h[i]&&h[i].clusterData&&h[i].clusterData.dir&&(r=h[i].clusterData.dir,d.l.warn("Fixing dir",h[i].clusterData.dir,r));let l=new n.Graph({multigraph:!0,compound:!0}).setGraph({rankdir:r,nodesep:50,ranksep:50,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});d.l.warn("Old graph before copy",a(e)),p(i,e,l,i),e.setNode(i,{clusterNode:!0,id:i,clusterData:h[i].clusterData,labelText:h[i].labelText,graph:l}),d.l.warn("New graph after copy node: (",i,")",a(l)),d.l.debug("Old graph after copy",a(e))}else d.l.warn("Cluster ** ",i," **not meeting the criteria !externalConnections:",!h[i].externalConnections," no parent: ",!e.parent(i)," children ",e.children(i)&&e.children(i).length>0,e.children("D"),t),d.l.debug(h);else d.l.debug("Not a cluster",i,t);for(let i of(r=e.nodes(),d.l.warn("New list of nodes",r),r)){let r=e.node(i);d.l.warn(" Now next level",i,r),r.clusterNode&&x(r.graph,t+1)}},v=(e,t)=>{if(0===t.length)return[];let r=Object.assign(t);return t.forEach(t=>{let i=e.children(t),l=v(e,i);r=[...r,...l]}),r},m={rect:(e,t)=>{d.l.info("Creating subgraph rect for ",t.id,t);let r=(0,d.c)(),i=e.insert("g").attr("class","cluster"+(t.class?" "+t.class:"")).attr("id",t.id),l=i.insert("rect",":first-child"),n=(0,d.m)(r.flowchart.htmlLabels),a=i.insert("g").attr("class","cluster-label"),h="markdown"===t.labelType?(0,s.a)(a,t.labelText,{style:t.labelStyle,useHtmlLabels:n}):a.node().appendChild((0,o.c)(t.labelText,t.labelStyle,void 0,!0)),g=h.getBBox();if((0,d.m)(r.flowchart.htmlLabels)){let e=h.children[0],t=(0,c.select)(h);g=e.getBoundingClientRect(),t.attr("width",g.width),t.attr("height",g.height)}let f=0*t.padding,u=t.width<=g.width+f?g.width+f:t.width;t.width<=g.width+f?t.diff=(g.width-t.width)/2-t.padding/2:t.diff=-t.padding/2,d.l.trace("Data ",t,JSON.stringify(t)),l.attr("style",t.style).attr("rx",t.rx).attr("ry",t.ry).attr("x",t.x-u/2).attr("y",t.y-t.height/2-f/2).attr("width",u).attr("height",t.height+f);let{subGraphTitleTopMargin:p}=(0,o.g)(r);n?a.attr("transform",`translate(${t.x-g.width/2}, ${t.y-t.height/2+p})`):a.attr("transform",`translate(${t.x}, ${t.y-t.height/2+p})`);let w=l.node().getBBox();return t.width=w.width,t.height=w.height,t.intersect=function(e){return(0,o.i)(t,e)},i},roundedWithTitle:(e,t)=>{let r=(0,d.c)(),i=e.insert("g").attr("class",t.classes).attr("id",t.id),l=i.insert("rect",":first-child"),n=i.insert("g").attr("class","cluster-label"),a=i.append("rect"),s=n.node().appendChild((0,o.c)(t.labelText,t.labelStyle,void 0,!0)),h=s.getBBox();if((0,d.m)(r.flowchart.htmlLabels)){let e=s.children[0],t=(0,c.select)(s);h=e.getBoundingClientRect(),t.attr("width",h.width),t.attr("height",h.height)}h=s.getBBox();let g=0*t.padding,f=g/2,u=t.width<=h.width+t.padding?h.width+t.padding:t.width;t.width<=h.width+t.padding?t.diff=(h.width+0*t.padding-t.width)/2:t.diff=-t.padding/2,l.attr("class","outer").attr("x",t.x-u/2-f).attr("y",t.y-t.height/2-f).attr("width",u+g).attr("height",t.height+g),a.attr("class","inner").attr("x",t.x-u/2-f).attr("y",t.y-t.height/2-f+h.height-1).attr("width",u+g).attr("height",t.height+g-h.height-3);let{subGraphTitleTopMargin:p}=(0,o.g)(r);return n.attr("transform",`translate(${t.x-h.width/2}, ${t.y-t.height/2-t.padding/3+((0,d.m)(r.flowchart.htmlLabels)?5:3)+p})`),t.height=l.node().getBBox().height,t.intersect=function(e){return(0,o.i)(t,e)},i},noteGroup:(e,t)=>{let r=e.insert("g").attr("class","note-cluster").attr("id",t.id),i=r.insert("rect",":first-child"),l=0*t.padding,n=l/2;i.attr("rx",t.rx).attr("ry",t.ry).attr("x",t.x-t.width/2-n).attr("y",t.y-t.height/2-n).attr("width",t.width+l).attr("height",t.height+l).attr("fill","none");let a=i.node().getBBox();return t.width=a.width,t.height=a.height,t.intersect=function(e){return(0,o.i)(t,e)},r},divider:(e,t)=>{let r=e.insert("g").attr("class",t.classes).attr("id",t.id),i=r.insert("rect",":first-child"),l=0*t.padding;i.attr("class","divider").attr("x",t.x-t.width/2-l/2).attr("y",t.y-t.height/2).attr("width",t.width+l).attr("height",t.height+l);let n=i.node().getBBox();return t.width=n.width,t.height=n.height,t.diff=-t.padding/2,t.intersect=function(e){return(0,o.i)(t,e)},r}},k={},S=async(e,r,i,l,n,s)=>{d.l.info("Graph in recursive render: XXX",a(r),n);let c=r.graph().rankdir;d.l.trace("Dir in recursive render - dir:",c);let g=e.insert("g").attr("class","root");r.nodes()?d.l.info("Recursive render XXX",r.nodes()):d.l.info("No nodes found for",r),r.edges().length>0&&d.l.trace("Recursive edges",r.edge(r.edges()[0]));let f=g.insert("g").attr("class","clusters"),u=g.insert("g").attr("class","edgePaths"),p=g.insert("g").attr("class","edgeLabels"),w=g.insert("g").attr("class","nodes");await Promise.all(r.nodes().map(async function(e){let t=r.node(e);if(void 0!==n){let t=JSON.parse(JSON.stringify(n.clusterData));d.l.info("Setting data for cluster XXX (",e,") ",t,n),r.setNode(n.id,t),r.parent(e)||(d.l.trace("Setting parent",e,n.id),r.setParent(e,n.id,t))}if(d.l.info("(Insert) Node XXX"+e+": "+JSON.stringify(r.node(e))),t&&t.clusterNode){d.l.info("Cluster identified",e,t.width,r.node(e));let n=await S(w,t.graph,i,l,r.node(e),s),a=n.elem;(0,o.u)(t,a),t.diff=n.diff||0,d.l.info("Node bounds (abc123)",e,t,t.width,t.x,t.y),(0,o.s)(a,t),d.l.warn("Recursive render complete ",a,t)}else r.children(e).length>0?(d.l.info("Cluster - the non recursive path XXX",e,t.id,t,r),d.l.info(y(t.id,r)),h[t.id]={id:y(t.id,r),node:t}):(d.l.info("Node - the non recursive path",e,t.id,t),await (0,o.e)(w,r.node(e),c))})),r.edges().forEach(function(e){let t=r.edge(e.v,e.w,e.name);d.l.info("Edge "+e.v+" -> "+e.w+": "+JSON.stringify(e)),d.l.info("Edge "+e.v+" -> "+e.w+": ",e," ",JSON.stringify(r.edge(e))),d.l.info("Fix",h,"ids:",e.v,e.w,"Translating: ",h[e.v],h[e.w]),(0,o.f)(p,t)}),r.edges().forEach(function(e){d.l.info("Edge "+e.v+" -> "+e.w+": "+JSON.stringify(e))}),d.l.info("#############################################"),d.l.info("###                Layout                 ###"),d.l.info("#############################################"),d.l.info(r),(0,t.layout)(r),d.l.info("Graph after layout:",a(r));let b=0,{subGraphTitleTotalMargin:x}=(0,o.g)(s);return v(r,r.children()).forEach(function(e){let t=r.node(e);if(d.l.info("Position "+e+": "+JSON.stringify(r.node(e))),d.l.info("Position "+e+": ("+t.x,","+t.y,") width: ",t.width," height: ",t.height),t&&t.clusterNode)t.y+=x,(0,o.p)(t);else if(r.children(e).length>0){let e;t.height+=x,d.l.trace("Inserting cluster"),e=t.shape||"rect",k[t.id]=m[e](f,t),h[t.id].node=t}else t.y+=x/2,(0,o.p)(t)}),r.edges().forEach(function(e){let t=r.edge(e);d.l.info("Edge "+e.v+" -> "+e.w+": "+JSON.stringify(t),t),t.points.forEach(e=>e.y+=x/2);let n=(0,o.h)(u,e,t,h,i,r,l);(0,o.j)(t,n)}),r.nodes().forEach(function(e){let t=r.node(e);d.l.info(e,t.type,t.diff),"group"===t.type&&(b=t.diff)}),{elem:g,diff:b}},C=async(e,t,r,i,l)=>{(0,o.a)(e,r,i,l),(0,o.b)(),(0,o.d)(),k={},g={},f={},h={},d.l.warn("Graph at first:",JSON.stringify(a(t))),((e,t)=>{if(!e||t>10)return d.l.debug("Opting out, no graph ");for(let t of(d.l.debug("Opting in, graph "),e.nodes().forEach(function(t){e.children(t).length>0&&(d.l.warn("Cluster identified",t," Replacement id in edges: ",y(t,e)),g[t]=w(t,e),h[t]={id:y(t,e),clusterData:e.node(t)})}),e.nodes().forEach(function(t){let r=e.children(t),i=e.edges();r.length>0?(d.l.debug("Cluster identified",t,g),i.forEach(e=>{e.v!==t&&e.w!==t&&u(e.v,t)^u(e.w,t)&&(d.l.warn("Edge: ",e," leaves cluster ",t),d.l.warn("Descendants of XXX ",t,": ",g[t]),h[t].externalConnections=!0)})):d.l.debug("Not a cluster ",t,g)}),Object.keys(h))){let r=h[t].id,i=e.parent(r);i!==t&&h[i]&&!h[i].externalConnections&&(h[t].id=i)}e.edges().forEach(function(t){let r=e.edge(t);d.l.warn("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(t)),d.l.warn("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(e.edge(t)));let i=t.v,l=t.w;if(d.l.warn("Fix XXX",h,"ids:",t.v,t.w,"Translating: ",h[t.v]," --- ",h[t.w]),h[t.v]&&h[t.w]&&h[t.v]===h[t.w]){d.l.warn("Fixing and trixing link to self - removing XXX",t.v,t.w,t.name),d.l.warn("Fixing and trixing - removing XXX",t.v,t.w,t.name),i=b(t.v),l=b(t.w),e.removeEdge(t.v,t.w,t.name);let n=t.w+"---"+t.v;e.setNode(n,{domId:n,id:n,labelStyle:"",labelText:r.label,padding:0,shape:"labelRect",style:""});let a=structuredClone(r),o=structuredClone(r);a.label="",a.arrowTypeEnd="none",o.label="",a.fromCluster=t.v,o.toCluster=t.v,e.setEdge(i,n,a,t.name+"-cyclic-special"),e.setEdge(n,l,o,t.name+"-cyclic-special")}else(h[t.v]||h[t.w])&&(d.l.warn("Fixing and trixing - removing XXX",t.v,t.w,t.name),i=b(t.v),l=b(t.w),e.removeEdge(t.v,t.w,t.name),i!==t.v&&(h[e.parent(i)].externalConnections=!0,r.fromCluster=t.v),l!==t.w&&(h[e.parent(l)].externalConnections=!0,r.toCluster=t.w),d.l.warn("Fix Replacing with XXX",i,l,t.name),e.setEdge(i,l,r,t.name))}),d.l.warn("Adjusted Graph",a(e)),x(e,0),d.l.trace(h)})(t),d.l.warn("Graph after:",JSON.stringify(a(t)));let n=(0,d.c)();await S(e,t,i,l,void 0,n)};e.s(["r",()=>C],15738)},31756,e=>{"use strict";var t=e.i(45484),r=e.i(17463);e.s(["channel",0,(e,i)=>t.default.lang.round(r.default.parse(e)[i])],31756)},25256,74238,72861,57002,e=>{"use strict";e.i(71515);var t=e.i(38973);e.i(31345);var r=e.i(78973),i=e.i(44588),l=e.i(82348),n=e.i(13695);function a(e){return"string"==typeof e?new n.Selection([document.querySelectorAll(e)],[document.documentElement]):new n.Selection([(0,l.default)(e)],n.root)}e.s(["selectAll",0,a],74238);var o=e.i(9399),d=e.i(15738),s=e.i(42706),s=s,c=e.i(84076);function h(e,t){return!!e.children(t).length}function g(e){return u(e.v)+":"+u(e.w)+":"+u(e.name)}var f=/:/g;function u(e){return e?String(e).replace(f,"\\:"):""}function p(e,t){t&&e.attr("style",t)}function w(e,t,r){t&&e.attr("class",t).attr("class",r+" "+e.attr("class"))}function y(e,t){var r=t.graph();if(s.default(r)){var i=r.transition;if(c.isFunction(i))return i(e)}return e}function b(e,t){var r=e.append("foreignObject").attr("width","100000"),i=r.append("xhtml:div");i.attr("xmlns","http://www.w3.org/1999/xhtml");var l=t.label;switch(typeof l){case"function":i.insert(l);break;case"object":i.insert(function(){return l});break;default:i.html(l)}p(i,t.labelStyle),i.style("display","inline-block"),i.style("white-space","nowrap");var n=i.node().getBoundingClientRect();return r.attr("width",n.width).attr("height",n.height),r}e.s(["applyClass",()=>w,"applyStyle",()=>p,"applyTransition",()=>y,"edgeToId",()=>g,"isSubgraph",()=>h],72861),e.s(["addHtmlLabel",()=>b],57002);var x=e.i(31756),v=e.i(65912);let m={},k=async function(e,t,r,i,l,n){let a=i.select(`[id="${r}"]`);for(let r of Object.keys(e)){let i,d=e[r],s="default";d.classes.length>0&&(s=d.classes.join(" ")),s+=" flowchart-label";let c=(0,o.k)(d.styles),h=void 0!==d.text?d.text:d.id;if(o.l.info("vertex",d,d.labelType),"markdown"===d.labelType)o.l.info("vertex",d,d.labelType);else if((0,o.m)((0,o.c)().flowchart.htmlLabels))(i=b(a,{label:h}).node()).parentNode.removeChild(i);else{let e=l.createElementNS("http://www.w3.org/2000/svg","text");for(let t of(e.setAttribute("style",c.labelStyle.replace("color:","fill:")),h.split(o.e.lineBreakRegex))){let r=l.createElementNS("http://www.w3.org/2000/svg","tspan");r.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),r.setAttribute("dy","1em"),r.setAttribute("x","1"),r.textContent=t,e.appendChild(r)}i=e}let g=0,f="";switch(d.type){case"round":g=5,f="rect";break;case"square":case"group":default:f="rect";break;case"diamond":f="question";break;case"hexagon":f="hexagon";break;case"odd":case"odd_right":f="rect_left_inv_arrow";break;case"lean_right":f="lean_right";break;case"lean_left":f="lean_left";break;case"trapezoid":f="trapezoid";break;case"inv_trapezoid":f="inv_trapezoid";break;case"circle":f="circle";break;case"ellipse":f="ellipse";break;case"stadium":f="stadium";break;case"subroutine":f="subroutine";break;case"cylinder":f="cylinder";break;case"doublecircle":f="doublecircle"}let u=await (0,o.r)(h,(0,o.c)());t.setNode(d.id,{labelStyle:c.labelStyle,shape:f,labelText:u,labelType:d.labelType,rx:g,ry:g,class:s,style:c.style,id:d.id,link:d.link,linkTarget:d.linkTarget,tooltip:n.db.getTooltip(d.id)||"",domId:n.db.lookUpDomId(d.id),haveCallback:d.haveCallback,width:"group"===d.type?500:void 0,dir:d.dir,type:d.type,props:d.props,padding:(0,o.c)().flowchart.padding}),o.l.info("setNode",{labelStyle:c.labelStyle,labelType:d.labelType,shape:f,labelText:u,rx:g,ry:g,class:s,style:c.style,id:d.id,domId:n.db.lookUpDomId(d.id),width:"group"===d.type?500:void 0,type:d.type,dir:d.dir,props:d.props,padding:(0,o.c)().flowchart.padding})}},S=async function(e,t,i){let l,n;o.l.info("abc78 edges = ",e);let a=0,d={};if(void 0!==e.defaultStyle){let t=(0,o.k)(e.defaultStyle);l=t.style,n=t.labelStyle}for(let i of e){a++;let s="L-"+i.start+"-"+i.end;void 0===d[s]?d[s]=0:d[s]++,o.l.info("abc78 new entry",s,d[s]);let c=s+"-"+d[s];o.l.info("abc78 new link id to be used is",s,c,d[s]);let h="LS-"+i.start,g="LE-"+i.end,f={style:"",labelStyle:""};switch(f.minlen=i.length||1,"arrow_open"===i.type?f.arrowhead="none":f.arrowhead="normal",f.arrowTypeStart="arrow_open",f.arrowTypeEnd="arrow_open",i.type){case"double_arrow_cross":f.arrowTypeStart="arrow_cross";case"arrow_cross":f.arrowTypeEnd="arrow_cross";break;case"double_arrow_point":f.arrowTypeStart="arrow_point";case"arrow_point":f.arrowTypeEnd="arrow_point";break;case"double_arrow_circle":f.arrowTypeStart="arrow_circle";case"arrow_circle":f.arrowTypeEnd="arrow_circle"}let u="",p="";switch(i.stroke){case"normal":u="fill:none;",void 0!==l&&(u=l),void 0!==n&&(p=n),f.thickness="normal",f.pattern="solid";break;case"dotted":f.thickness="normal",f.pattern="dotted",f.style="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":f.thickness="thick",f.pattern="solid",f.style="stroke-width: 3.5px;fill:none;";break;case"invisible":f.thickness="invisible",f.pattern="solid",f.style="stroke-width: 0;fill:none;"}if(void 0!==i.style){let e=(0,o.k)(i.style);u=e.style,p=e.labelStyle}f.style=f.style+=u,f.labelStyle=f.labelStyle+=p,void 0!==i.interpolate?f.curve=(0,o.n)(i.interpolate,r.curveLinear):void 0!==e.defaultInterpolate?f.curve=(0,o.n)(e.defaultInterpolate,r.curveLinear):f.curve=(0,o.n)(m.curve,r.curveLinear),void 0===i.text?void 0!==i.style&&(f.arrowheadStyle="fill: #333"):(f.arrowheadStyle="fill: #333",f.labelpos="c"),f.labelType=i.labelType,f.label=await (0,o.r)(i.text.replace(o.e.lineBreakRegex,"\n"),(0,o.c)()),void 0===i.style&&(f.style=f.style||"stroke: #333; stroke-width: 1.5px;fill:none;"),f.labelStyle=f.labelStyle.replace("color:","fill:"),f.id=c,f.classes="flowchart-link "+h+" "+g,t.setEdge(i.start,i.end,f,a)}},C=async function(e,r,l,n){let s,c;o.l.info("Drawing flowchart");let h=n.db.getDirection();void 0===h&&(h="TD");let{securityLevel:g,flowchart:f}=(0,o.c)(),u=f.nodeSpacing||50,p=f.rankSpacing||50;"sandbox"===g&&(s=(0,i.select)("#i"+r));let w="sandbox"===g?(0,i.select)(s.nodes()[0].contentDocument.body):(0,i.select)("body"),y="sandbox"===g?s.nodes()[0].contentDocument:document,b=new t.Graph({multigraph:!0,compound:!0}).setGraph({rankdir:h,nodesep:u,ranksep:p,marginx:0,marginy:0}).setDefaultEdgeLabel(function(){return{}}),x=n.db.getSubGraphs();o.l.info("Subgraphs - ",x);for(let e=x.length-1;e>=0;e--)c=x[e],o.l.info("Subgraph - ",c),n.db.addVertex(c.id,{text:c.title,type:c.labelType},"group",void 0,c.classes,c.dir);let v=n.db.getVertices(),m=n.db.getEdges();o.l.info("Edges",m);let C=0;for(C=x.length-1;C>=0;C--){c=x[C],a("cluster").append("text");for(let e=0;e<c.nodes.length;e++)o.l.info("Setting up subgraphs",c.nodes[e],c.id),b.setParent(c.nodes[e],c.id)}await k(v,b,r,w,y,n),await S(m,b);let T=w.select(`[id="${r}"]`),E=w.select("#"+r+" g");if(await (0,d.r)(E,b,["point","circle","cross"],"flowchart",r),o.u.insertTitle(T,"flowchartTitleText",f.titleTopMargin,n.db.getDiagramTitle()),(0,o.o)(b,T,f.diagramPadding,f.useMaxWidth),n.db.indexNodes("subGraph"+C),!f.htmlLabels)for(let e of y.querySelectorAll('[id="'+r+'"] .edgeLabel .label')){let t=e.getBBox(),r=y.createElementNS("http://www.w3.org/2000/svg","rect");r.setAttribute("rx",0),r.setAttribute("ry",0),r.setAttribute("width",t.width),r.setAttribute("height",t.height),e.insertBefore(r,e.firstChild)}Object.keys(v).forEach(function(e){let t=v[e];if(t.link){let l=(0,i.select)("#"+r+' [id="'+e+'"]');if(l){let e=y.createElementNS("http://www.w3.org/2000/svg","a");e.setAttributeNS("http://www.w3.org/2000/svg","class",t.classes.join(" ")),e.setAttributeNS("http://www.w3.org/2000/svg","href",t.link),e.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),"sandbox"===g?e.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):t.linkTarget&&e.setAttributeNS("http://www.w3.org/2000/svg","target",t.linkTarget);let r=l.insert(function(){return e},":first-child"),i=l.select(".label-container");i&&r.append(function(){return i.node()});let n=l.select(".label");n&&r.append(function(){return n.node()})}}})},T={setConf:function(e){for(let t of Object.keys(e))m[t]=e[t]},addVertices:k,addEdges:S,getClasses:function(e,t){return t.db.getClasses()},draw:C},E=e=>{var t;let r,i,l,n;return`.label {
    font-family: ${e.fontFamily};
    color: ${e.nodeTextColor||e.textColor};
  }
  .cluster-label text {
    fill: ${e.titleColor};
  }
  .cluster-label span,p {
    color: ${e.titleColor};
  }

  .label text,span,p {
    fill: ${e.nodeTextColor||e.textColor};
    color: ${e.nodeTextColor||e.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${e.mainBkg};
    stroke: ${e.nodeBorder};
    stroke-width: 1px;
  }
  .flowchart-label text {
    text-anchor: middle;
  }
  // .flowchart-label .text-outer-tspan {
  //   text-anchor: middle;
  // }
  // .flowchart-label .text-inner-tspan {
  //   text-anchor: start;
  // }

  .node .katex path {
    fill: #000;
    stroke: #000;
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${e.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${e.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${e.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${e.edgeLabelBackground};
    rect {
      opacity: 0.5;
      background-color: ${e.edgeLabelBackground};
      fill: ${e.edgeLabelBackground};
    }
    text-align: center;
  }

  /* For html labels only */
  .labelBkg {
    background-color: ${t=e.edgeLabelBackground,i=(r=x.channel)(t,"r"),l=r(t,"g"),n=r(t,"b"),v.rgba(i,l,n,.5)};
    // background-color: 
  }

  .cluster rect {
    fill: ${e.clusterBkg};
    stroke: ${e.clusterBorder};
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${e.titleColor};
  }

  .cluster span,p {
    color: ${e.titleColor};
  }
  /* .cluster div {
    color: ${e.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${e.fontFamily};
    font-size: 12px;
    background: ${e.tertiaryColor};
    border: 1px solid ${e.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${e.textColor};
  }
`};e.s(["a",()=>E,"f",()=>T],25256)},79375,e=>{"use strict";var t=e.i(83911),r=e.i(71515),i=e.i(38973);e.i(31345);var l=e.i(44588),n=e.i(78973),a=e.i(74238),o=e.i(9399),d=e.i(43005),s=e.i(69943),c=e.i(63641);e.i(86738);e.i(85607),e.i(72861),e.i(57002);e.i(29593);function h(e){if(!e.ok)throw Error(e.status+" "+e.statusText);return e.text()}function g(e){return(t,r)=>fetch(t,r).then(h).then(t=>(new DOMParser).parseFromString(t,e))}g("application/xml"),g("text/html");g("image/svg+xml"),e.i(44041),e.i(23909);function f(e,t){return e.intersect(t)}e.s(["intersectNode",()=>f],61751);e.i(44611);function u(e,t,r,i){var l=e.x,n=e.y,a=l-i.x,o=n-i.y,d=Math.sqrt(t*t*o*o+r*r*a*a),s=Math.abs(t*r*a/d);i.x<l&&(s=-s);var c=Math.abs(t*r*o/d);return i.y<n&&(c=-c),{x:l+s,y:n+c}}function p(e,t,r){return u(e,t,t,r)}e.s(["intersectEllipse",()=>u],11357),e.s(["intersectCircle",()=>p],18609);function w(e,t,r){var i=e.x,l=e.y,n=[],a=1/0,o=1/0;t.forEach(function(e){a=Math.min(a,e.x),o=Math.min(o,e.y)});for(var d=i-e.width/2-a,s=l-e.height/2-o,c=0;c<t.length;c++){var h=t[c],g=t[c<t.length-1?c+1:0],f=function(e,t,r,i){var l,n,a,o,d,s,c,h,g,f,u,p,w;if(l=t.y-e.y,a=e.x-t.x,d=t.x*e.y-e.x*t.y,g=l*r.x+a*r.y+d,f=l*i.x+a*i.y+d,0===g||0===f||!(g*f>0)){if((n=i.y-r.y,o=r.x-i.x,s=i.x*r.y-r.x*i.y,c=n*e.x+o*e.y+s,h=n*t.x+o*t.y+s,!(0!==c&&0!==h&&c*h>0))&&0!=(u=l*o-n*a))return p=Math.abs(u/2),{x:(w=a*s-o*d)<0?(w-p)/u:(w+p)/u,y:(w=n*d-l*s)<0?(w-p)/u:(w+p)/u}}}(e,r,{x:d+h.x,y:s+h.y},{x:d+g.x,y:s+g.y});f&&n.push(f)}return n.length?(n.length>1&&n.sort(function(e,t){var i=e.x-r.x,l=e.y-r.y,n=Math.sqrt(i*i+l*l),a=t.x-r.x,o=t.y-r.y,d=Math.sqrt(a*a+o*o);return n<d?-1:+(n!==d)}),n[0]):(console.log("NO INTERSECTION FOUND, RETURN NODE CENTER",e),e)}function y(e,t){var r,i,l=e.x,n=e.y,a=t.x-l,o=t.y-n,d=e.width/2,s=e.height/2;return Math.abs(o)*d>Math.abs(a)*s?(o<0&&(s=-s),r=0===o?0:s*a/o,i=s):(a<0&&(d=-d),r=d,i=0===a?0:d*o/a),{x:l+r,y:n+i}}e.s(["intersectPolygon",()=>w],3310),e.s(["intersectRect",()=>y],69588);n.curveLinear;e.s(["Graph",()=>i.Graph,"version",()=>r.version],62836),e.i(62836);var b=e.i(61751),x=e.i(18609),v=e.i(11357),m=e.i(3310),k=e.i(69588);e.s([],36442),e.i(36442),e.s(["circle",0,x,"ellipse",0,v,"node",0,b,"polygon",0,m,"rect",0,k],13319),e.i(13319);var S=e.i(25256);e.i(94176),e.i(94834),e.i(14942),e.i(77024),e.i(19173);let C={},T=function(e){for(let t of Object.keys(e))C[t]=e[t]},E={parser:t.p,db:t.f,renderer:S.f,styles:S.a,init:e=>{e.flowchart||(e.flowchart={}),e.flowchart.arrowMarkerAbsolute=e.arrowMarkerAbsolute,T(e.flowchart),t.f.clear(),t.f.setGen("gen-1")}};e.s(["diagram",()=>E],79375)}]);