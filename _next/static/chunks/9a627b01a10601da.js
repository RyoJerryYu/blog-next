(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,23154,e=>{"use strict";var t,r,a,i,o,n=e.i(91398),s=e.i(43261),l=e.i(47491),d=e.i(1746);let c={rect:"rectangle",circle:"ellipse"},u={startOnLoad:!1,flowchart:{curve:"linear"},themeVariables:{fontSize:"20px"},maxEdges:500,maxTextSize:5e4};class m{constructor({converter:e}){this.convert=(e,t)=>this.converter(e,{...t,fontSize:t.fontSize||20}),this.converter=e}}(t=a||(a={})).ROUND="round",t.STADIUM="stadium",t.DOUBLECIRCLE="doublecircle",t.CIRCLE="circle",t.DIAMOND="diamond",(i||(i={})).COLOR="color",(r=o||(o={})).FILL="fill",r.STROKE="stroke",r.STROKE_WIDTH="stroke-width",r.STROKE_DASHARRAY="stroke-dasharray";var g=e.i(86462);let h={arrow_circle:{endArrowhead:"dot"},arrow_cross:{endArrowhead:"bar"},arrow_open:{endArrowhead:null,startArrowhead:null},double_arrow_circle:{endArrowhead:"dot",startArrowhead:"dot"},double_arrow_cross:{endArrowhead:"bar",startArrowhead:"bar"},double_arrow_point:{endArrowhead:"arrow",startArrowhead:"arrow"}},p=e=>{let t=e.text;return"markdown"===e.labelType&&(t=(0,g.removeMarkdown)(e.text)),f(t)},f=e=>e.replace(/\s?(fa|fab):[a-zA-Z0-9-]+/g,""),y=new m({converter:(e,t)=>{let r,n,s=[],l=t.fontSize,{getGroupIds:d,getParentId:c}=(r={},e.subGraphs.map(t=>{t.nodeIds.forEach(a=>{r[t.id]={id:t.id,parent:null,isLeaf:!1},r[a]={id:a,parent:t.id,isLeaf:void 0!==e.vertices[a]}})}),n={},[...Object.keys(e.vertices),...e.subGraphs.map(e=>e.id)].forEach(e=>{if(!r[e])return;let t=r[e],a=[];for(t.isLeaf||a.push(`subgraph_group_${t.id}`);;)if(t.parent)a.push(`subgraph_group_${t.parent}`),t=r[t.parent];else break;n[e]=a}),{getGroupIds:e=>n[e]||[],getParentId:e=>r[e]?r[e].parent:null});return e.subGraphs.reverse().forEach(e=>{let t=d(e.id),r={id:e.id,type:"rectangle",groupIds:t,x:e.x,y:e.y,width:e.width,height:e.height,label:{groupIds:t,text:p(e),fontSize:l,verticalAlign:"top"}};s.push(r)}),Object.values(e.vertices).forEach(e=>{var t,r;let n,c;if(!e)return;let u=d(e.id),m=(t=e.containerStyle,n={},Object.keys(t).forEach(e=>{switch(e){case o.FILL:n.backgroundColor=t[e],n.fillStyle="solid";break;case o.STROKE:n.strokeColor=t[e];break;case o.STROKE_WIDTH:n.strokeWidth=Number(t[e]?.split("px")[0]);break;case o.STROKE_DASHARRAY:n.strokeStyle="dashed"}}),n),g=(r=e.labelStyle,c={},Object.keys(r).forEach(e=>{e===i.COLOR&&(c.strokeColor=r[e])}),c),h={id:e.id,type:"rectangle",groupIds:u,x:e.x,y:e.y,width:e.width,height:e.height,strokeWidth:2,label:{groupIds:u,text:p(e),fontSize:l,...g},link:e.link||null,...m};switch(e.type){case a.STADIUM:case a.ROUND:h={...h,roundness:{type:3}};break;case a.DOUBLECIRCLE:{u.push(`doublecircle_${e.id}}`);let t={type:"ellipse",groupIds:u,x:e.x+5,y:e.y+5,width:e.width-10,height:e.height-10,strokeWidth:2,roundness:{type:3},label:{groupIds:u,text:p(e),fontSize:l}};h={...h,groupIds:u,type:"ellipse"},s.push(t);break}case a.CIRCLE:h.type="ellipse";break;case a.DIAMOND:h.type="diamond"}s.push(h)}),e.edges.forEach(e=>{let t=[],r=c(e.start),a=c(e.end);r&&r===a&&(t=d(r));let{startX:i,startY:o,reflectionPoints:n}=e,u=n.map(e=>[e.x-n[0].x,e.y-n[0].y]),m=h[e.type||"arrow_point"],g={id:`${e.start}_${e.end}`,type:"arrow",groupIds:t,x:i,y:o,strokeWidth:"thick"===e.stroke?4:2,strokeStyle:"dotted"===e.stroke?"dashed":void 0,points:u,...e.text?{label:{text:p(e),fontSize:l,groupIds:t}}:{},roundness:{type:2},...m},f=s.find(t=>t.id===e.start),y=s.find(t=>t.id===e.end);f&&y&&(g.start={id:f.id||""},g.end={id:y.id||""},s.push(g))}),{elements:s}}}),b=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((e,t)=>((t&=63)<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),""),w=new m({converter:e=>{let t=b(),{width:r,height:a}=e;return{files:{[t]:{id:t,mimeType:e.mimeType,dataURL:e.dataURL}},elements:[{type:"image",x:0,y:0,width:r,height:a,status:"saved",fileId:t}]}}}),_=e=>{let t={type:"line",x:e.startX,y:e.startY,points:[[0,0],[e.endX-e.startX,e.endY-e.startY]],width:e.endX-e.startX,height:e.endY-e.startY,strokeStyle:e.strokeStyle||"solid",strokeColor:e.strokeColor||"#000",strokeWidth:e.strokeWidth||1};return e.groupId&&Object.assign(t,{groupIds:[e.groupId]}),e.id&&Object.assign(t,{id:e.id}),t},x=e=>{let t={type:"text",x:e.x,y:e.y,width:e.width,height:e.height,text:e.text.replace(/\\n/g,"\n")||"",fontSize:e.fontSize,verticalAlign:"top",strokeColor:e.color};return e.groupId&&Object.assign(t,{groupIds:[e.groupId]}),e.id&&Object.assign(t,{id:e.id}),t},k=e=>{let t={};"rectangle"===e.type&&"activation"===e.subtype&&(t={backgroundColor:"#e9ecef",fillStyle:"solid"});let r={id:e.id,type:e.type,x:e.x,y:e.y,width:e.width,height:e.height,label:{text:(e?.label?.text||"").replace(/\\n/g,"\n"),fontSize:e?.label?.fontSize,verticalAlign:e.label?.verticalAlign||"middle",strokeColor:e.label?.color||"#000",groupIds:e.groupId?[e.groupId]:[]},strokeStyle:e?.strokeStyle,strokeWidth:e?.strokeWidth,strokeColor:e?.strokeColor,backgroundColor:e?.bgColor,fillStyle:"solid",...t};return e.groupId&&Object.assign(r,{groupIds:[e.groupId]}),r},A=e=>{let t={type:"arrow",x:e.startX,y:e.startY,points:e.points||[[0,0],[e.endX-e.startX,e.endY-e.startY]],width:e.endX-e.startX,height:e.endY-e.startY,strokeStyle:e?.strokeStyle||"solid",endArrowhead:e?.endArrowhead||null,startArrowhead:e?.startArrowhead||null,label:{text:(e?.label?.text||"").replace(/\\n/g,"\n"),fontSize:16},roundness:{type:2},start:e.start,end:e.end};return e.groupId&&Object.assign(t,{groupIds:[e.groupId]}),t},v=new m({converter:e=>{let t=[],r=[];if(Object.values(e.nodes).forEach(e=>{e&&e.length&&e.forEach(e=>{let a;switch(e.type){case"line":a=_(e);break;case"rectangle":case"ellipse":a=k(e);break;case"text":a=x(e);break;default:throw`unknown type ${e.type}`}"rectangle"===e.type&&e?.subtype==="activation"?r.push(a):t.push(a)})}),Object.values(e.lines).forEach(e=>{e&&t.push(_(e))}),Object.values(e.arrows).forEach(e=>{e&&(t.push(A(e)),e.sequenceNumber&&t.push(k(e.sequenceNumber)))}),t.push(...r),e.loops){let{lines:r,texts:a,nodes:i}=e.loops;r.forEach(e=>{t.push(_(e))}),a.forEach(e=>{t.push(x(e))}),i.forEach(e=>{t.push(k(e))})}return e.groups&&e.groups.forEach(e=>{let{actorKeys:r,name:a}=e,i=1/0,o=1/0,n=0,s=0;if(!r.length)return;t.filter(e=>{if(e.id){let t=e.id.indexOf("-"),a=e.id.substring(0,t);return r.includes(a)}}).forEach(e=>{if(void 0===e.x||void 0===e.y||void 0===e.width||void 0===e.height)throw Error(`Actor attributes missing ${e}`);i=Math.min(i,e.x),o=Math.min(o,e.y),n=Math.max(n,e.x+e.width),s=Math.max(s,e.y+e.height)});let l=i-10,d=o-10,c=n-i+20,u=s-o+20,m=b(),g=k({type:"rectangle",x:l,y:d,width:c,height:u,bgColor:e.fill,id:m});t.unshift(g);let h=b(),p=[m];t.forEach(e=>{if("frame"!==e.type){if(void 0===e.x||void 0===e.y||void 0===e.width||void 0===e.height)throw Error(`Element attributes missing ${e}`);if(e.x>=i&&e.x+e.width<=n&&e.y>=o&&e.y+e.height<=s){let t=e.id||b();e.id||Object.assign(e,{id:t}),p.push(t)}}}),t.push({type:"frame",id:h,name:a,children:p})}),console.log(t),{elements:t}}}),S=new m({converter:e=>{let t=[];return e.nodes.forEach(e=>{e&&e.length&&e.forEach(e=>{let r;switch(e.type){case"line":r=_(e);break;case"rectangle":case"ellipse":r=k(e);break;case"text":r=x(e);break;default:throw`unknown type ${e.type}`}t.push(r)})}),Object.values(e.lines).forEach(e=>{e&&t.push(_(e))}),Object.values(e.arrows).forEach(e=>{if(!e)return;let r=A(e);t.push(r)}),Object.values(e.text).forEach(e=>{let r=x(e);t.push(r)}),Object.values(e.namespaces).forEach(r=>{let a=Object.keys(r.classes),i=[...a],o=[...e.lines,...e.arrows,...e.text];a.forEach(e=>{let t=o.filter(t=>t.metadata&&t.metadata.classId===e).map(e=>e.id);t.length&&i.push(...t)});let n={type:"frame",id:b(),name:r.id,children:i};t.push(n)}),console.log(t),{elements:t}}});var E=e.i(80802),C=e.i(86790),D=e.i(37905),I=e.i(84527);e.i(47055),e.i(97294),e.i(52002),e.i(97300),e.i(76086);var L=e.i(44115),T=e.i(44270),O=e.i(18885),N=e.i(7827),$=e.i(94176);e.i(31345);var R=e.i(12638),M="comm",Y="rule",q="decl",z=Math.abs,j=String.fromCharCode;function X(e,t,r){return e.replace(t,r)}function B(e,t){return 0|e.charCodeAt(t)}function F(e,t,r){return e.slice(t,r)}function P(e){return e.length}function W(e,t){return t.push(e),e}var V=1,U=1,H=0,G=0,K=0,Z="";function J(e,t,r,a,i,o,n,s){return{value:e,root:t,parent:r,type:a,props:i,children:o,line:V,column:U,length:n,return:"",siblings:s}}function Q(){return K=G<H?B(Z,G++):0,U++,10===K&&(U=1,V++),K}function ee(){return B(Z,G)}function et(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function er(e){var t,r;return(t=G-1,r=function e(t){for(;Q();)switch(K){case t:return G;case 34:case 39:34!==t&&39!==t&&e(K);break;case 40:41===t&&e(t);break;case 92:Q()}return G}(91===e?e+2:40===e?e+1:e),F(Z,t,r)).trim()}function ea(e,t,r,a,i,o,n,s,l,d,c,u){for(var m=i-1,g=0===i?o:[""],h=g.length,p=0,f=0,y=0;p<a;++p)for(var b=0,w=F(e,m+1,m=z(f=n[p])),_=e;b<h;++b)(_=(f>0?g[b]+" "+w:X(w,/&\f/g,g[b])).trim())&&(l[y++]=_);return J(e,t,r,0===i?Y:s,l,d,c,u)}function ei(e,t,r,a,i){return J(e,t,r,q,F(e,0,a),F(e,a+1,-1),a,i)}function eo(e,t){for(var r="",a=0;a<e.length;a++)r+=t(e[a],a,e,t)||"";return r}function en(e,t,r,a){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case"@namespace":case q:return e.return=e.return||e.value;case M:return"";case"@keyframes":return e.return=e.value+"{"+eo(e.children,a)+"}";case Y:if(!P(e.value=e.props.join(",")))return""}return P(r=eo(e.children,a))?e.return=e.value+"{"+r+"}":""}var es=e.i(25448),el=e.i(17183),ed={id:"c4",detector:(0,N.__name)(e=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(e),"detector"),loader:(0,N.__name)(async()=>{let{diagram:t}=await e.A(58204);return{id:"c4",diagram:t}},"loader")},ec="flowchart",eu=(0,N.__name)((e,t)=>t?.flowchart?.defaultRenderer!=="dagre-wrapper"&&t?.flowchart?.defaultRenderer!=="elk"&&/^\s*graph/.test(e),"detector"),em=(0,N.__name)(async()=>{let{diagram:t}=await e.A(97304);return{id:ec,diagram:t}},"loader"),eg={id:ec,detector:eu,loader:em},eh="flowchart-v2",ep=(0,N.__name)((e,t)=>t?.flowchart?.defaultRenderer!=="dagre-d3"&&(t?.flowchart?.defaultRenderer==="elk"&&(t.layout="elk"),!!/^\s*graph/.test(e)&&t?.flowchart?.defaultRenderer==="dagre-wrapper"||/^\s*flowchart/.test(e)),"detector"),ef=(0,N.__name)(async()=>{let{diagram:t}=await e.A(97304);return{id:eh,diagram:t}},"loader"),ey={id:eh,detector:ep,loader:ef},eb={id:"er",detector:(0,N.__name)(e=>/^\s*erDiagram/.test(e),"detector"),loader:(0,N.__name)(async()=>{let{diagram:t}=await e.A(89253);return{id:"er",diagram:t}},"loader")},ew="gitGraph",e_=(0,N.__name)(e=>/^\s*gitGraph/.test(e),"detector"),ex=(0,N.__name)(async()=>{let{diagram:t}=await e.A(83283);return{id:ew,diagram:t}},"loader"),ek={id:ew,detector:e_,loader:ex},eA="gantt",ev=(0,N.__name)(e=>/^\s*gantt/.test(e),"detector"),eS=(0,N.__name)(async()=>{let{diagram:t}=await e.A(40173);return{id:eA,diagram:t}},"loader"),eE={id:eA,detector:ev,loader:eS},eC="info",eD=(0,N.__name)(e=>/^\s*info/.test(e),"detector"),eI=(0,N.__name)(async()=>{let{diagram:t}=await e.A(37951);return{id:eC,diagram:t}},"loader"),eL={id:eC,detector:eD,loader:eI},eT={id:"pie",detector:(0,N.__name)(e=>/^\s*pie/.test(e),"detector"),loader:(0,N.__name)(async()=>{let{diagram:t}=await e.A(47682);return{id:"pie",diagram:t}},"loader")},eO="quadrantChart",eN=(0,N.__name)(e=>/^\s*quadrantChart/.test(e),"detector"),e$=(0,N.__name)(async()=>{let{diagram:t}=await e.A(1498);return{id:eO,diagram:t}},"loader"),eR={id:eO,detector:eN,loader:e$},eM="xychart",eY=(0,N.__name)(e=>/^\s*xychart(-beta)?/.test(e),"detector"),eq=(0,N.__name)(async()=>{let{diagram:t}=await e.A(16999);return{id:eM,diagram:t}},"loader"),ez={id:eM,detector:eY,loader:eq},ej="requirement",eX=(0,N.__name)(e=>/^\s*requirement(Diagram)?/.test(e),"detector"),eB=(0,N.__name)(async()=>{let{diagram:t}=await e.A(84300);return{id:ej,diagram:t}},"loader"),eF={id:ej,detector:eX,loader:eB},eP="sequence",eW=(0,N.__name)(e=>/^\s*sequenceDiagram/.test(e),"detector"),eV=(0,N.__name)(async()=>{let{diagram:t}=await e.A(6157);return{id:eP,diagram:t}},"loader"),eU={id:eP,detector:eW,loader:eV},eH="class",eG=(0,N.__name)((e,t)=>t?.class?.defaultRenderer!=="dagre-wrapper"&&/^\s*classDiagram/.test(e),"detector"),eK=(0,N.__name)(async()=>{let{diagram:t}=await e.A(75409);return{id:eH,diagram:t}},"loader"),eZ={id:eH,detector:eG,loader:eK},eJ="classDiagram",eQ=(0,N.__name)((e,t)=>!!/^\s*classDiagram/.test(e)&&t?.class?.defaultRenderer==="dagre-wrapper"||/^\s*classDiagram-v2/.test(e),"detector"),e0=(0,N.__name)(async()=>{let{diagram:t}=await e.A(47097);return{id:eJ,diagram:t}},"loader"),e1={id:eJ,detector:eQ,loader:e0},e2="state",e6=(0,N.__name)((e,t)=>t?.state?.defaultRenderer!=="dagre-wrapper"&&/^\s*stateDiagram/.test(e),"detector"),e5=(0,N.__name)(async()=>{let{diagram:t}=await e.A(44365);return{id:e2,diagram:t}},"loader"),e3={id:e2,detector:e6,loader:e5},e4="stateDiagram",e8=(0,N.__name)((e,t)=>!!(/^\s*stateDiagram-v2/.test(e)||/^\s*stateDiagram/.test(e)&&t?.state?.defaultRenderer==="dagre-wrapper"),"detector"),e9=(0,N.__name)(async()=>{let{diagram:t}=await e.A(66717);return{id:e4,diagram:t}},"loader"),e7={id:e4,detector:e8,loader:e9},te="journey",tt=(0,N.__name)(e=>/^\s*journey/.test(e),"detector"),tr=(0,N.__name)(async()=>{let{diagram:t}=await e.A(8277);return{id:te,diagram:t}},"loader"),ta={id:te,detector:tt,loader:tr},ti={draw:(0,N.__name)((e,t,r)=>{N.log.debug("rendering svg for syntax error\n");let a=(0,C.selectSvgElement)(t),i=a.append("g");a.attr("viewBox","0 0 2412 512"),(0,O.configureSvgSize)(a,100,512,!0),i.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),i.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),i.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),i.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),i.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),i.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),i.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),i.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${r}`)},"draw")},to={db:{},renderer:ti,parser:{parse:(0,N.__name)(()=>{},"parse")}},tn="flowchart-elk",ts=(0,N.__name)((e,t={})=>!!(/^\s*flowchart-elk/.test(e)||/^\s*(flowchart|graph)/.test(e)&&t?.flowchart?.defaultRenderer==="elk")&&(t.layout="elk",!0),"detector"),tl=(0,N.__name)(async()=>{let{diagram:t}=await e.A(97304);return{id:tn,diagram:t}},"loader"),td={id:tn,detector:ts,loader:tl},tc="timeline",tu=(0,N.__name)(e=>/^\s*timeline/.test(e),"detector"),tm=(0,N.__name)(async()=>{let{diagram:t}=await e.A(7292);return{id:tc,diagram:t}},"loader"),tg={id:tc,detector:tu,loader:tm},th="mindmap",tp=(0,N.__name)(e=>/^\s*mindmap/.test(e),"detector"),tf=(0,N.__name)(async()=>{let{diagram:t}=await e.A(70319);return{id:th,diagram:t}},"loader"),ty={id:th,detector:tp,loader:tf},tb="kanban",tw=(0,N.__name)(e=>/^\s*kanban/.test(e),"detector"),t_=(0,N.__name)(async()=>{let{diagram:t}=await e.A(38657);return{id:tb,diagram:t}},"loader"),tx={id:tb,detector:tw,loader:t_},tk="sankey",tA=(0,N.__name)(e=>/^\s*sankey(-beta)?/.test(e),"detector"),tv=(0,N.__name)(async()=>{let{diagram:t}=await e.A(42261);return{id:tk,diagram:t}},"loader"),tS={id:tk,detector:tA,loader:tv},tE="packet",tC=(0,N.__name)(e=>/^\s*packet(-beta)?/.test(e),"detector"),tD=(0,N.__name)(async()=>{let{diagram:t}=await e.A(25362);return{id:tE,diagram:t}},"loader"),tI={id:tE,detector:tC,loader:tD},tL="radar",tT=(0,N.__name)(e=>/^\s*radar-beta/.test(e),"detector"),tO=(0,N.__name)(async()=>{let{diagram:t}=await e.A(23204);return{id:tL,diagram:t}},"loader"),tN={id:tL,detector:tT,loader:tO},t$="block",tR=(0,N.__name)(e=>/^\s*block(-beta)?/.test(e),"detector"),tM=(0,N.__name)(async()=>{let{diagram:t}=await e.A(98174);return{id:t$,diagram:t}},"loader"),tY={id:t$,detector:tR,loader:tM},tq="architecture",tz=(0,N.__name)(e=>/^\s*architecture/.test(e),"detector"),tj=(0,N.__name)(async()=>{let{diagram:t}=await e.A(83301);return{id:tq,diagram:t}},"loader"),tX={id:tq,detector:tz,loader:tj},tB="treemap",tF=(0,N.__name)(e=>/^\s*treemap/.test(e),"detector"),tP=(0,N.__name)(async()=>{let{diagram:t}=await e.A(24019);return{id:tB,diagram:t}},"loader"),tW={id:tB,detector:tF,loader:tP},tV=!1,tU=(0,N.__name)(()=>{tV||(tV=!0,(0,O.registerDiagram)("error",to,e=>"error"===e.toLowerCase().trim()),(0,O.registerDiagram)("---",{db:{clear:(0,N.__name)(()=>{},"clear")},styles:{},renderer:{draw:(0,N.__name)(()=>{},"draw")},parser:{parse:(0,N.__name)(()=>{throw Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")},"parse")},init:(0,N.__name)(()=>null,"init")},e=>e.toLowerCase().trimStart().startsWith("---")),(0,O.registerLazyLoadedDiagrams)(td,ty,tX),(0,O.registerLazyLoadedDiagrams)(ed,tx,e1,eZ,eb,eE,eL,eT,eF,eU,ey,eg,tg,ek,e7,e3,ta,eR,tS,tI,ez,tY,tN,tW))},"addDiagrams"),tH=(0,N.__name)(async()=>{N.log.debug("Loading registered diagrams");let e=(await Promise.allSettled(Object.entries(O.detectors).map(async([e,{detector:t,loader:r}])=>{if(r)try{(0,O.getDiagram)(e)}catch{try{let{diagram:e,id:a}=await r();(0,O.registerDiagram)(a,e,t)}catch(t){throw N.log.error(`Failed to load external diagram with key ${e}. Removing from detectors.`),delete O.detectors[e],t}}}))).filter(e=>"rejected"===e.status);if(e.length>0){for(let t of(N.log.error(`Failed to load ${e.length} external diagrams`),e))N.log.error(t);throw Error(`Failed to load ${e.length} external diagrams`)}},"loadRegisteredDiagrams");function tG(e,t){e.attr("role","graphics-document document"),""!==t&&e.attr("aria-roledescription",t)}function tK(e,t,r,a){if(void 0!==e.insert){if(r){let t=`chart-desc-${a}`;e.attr("aria-describedby",t),e.insert("desc",":first-child").attr("id",t).text(r)}if(t){let r=`chart-title-${a}`;e.attr("aria-labelledby",r),e.insert("title",":first-child").attr("id",r).text(t)}}}(0,N.__name)(tG,"setA11yDiagramInfo"),(0,N.__name)(tK,"addSVGa11yTitleDescription");var tZ=class e{constructor(e,t,r,a,i){this.type=e,this.text=t,this.db=r,this.parser=a,this.renderer=i}static{(0,N.__name)(this,"Diagram")}static async fromText(t,r={}){let a=(0,O.getConfig)(),i=(0,O.detectType)(t,a);t=(0,T.encodeEntities)(t)+"\n";try{(0,O.getDiagram)(i)}catch{let e=(0,O.getDiagramLoader)(i);if(!e)throw new O.UnknownDiagramError(`Diagram ${i} not found.`);let{id:t,diagram:r}=await e();(0,O.registerDiagram)(t,r)}let{db:o,parser:n,renderer:s,init:l}=(0,O.getDiagram)(i);return n.parser&&(n.parser.yy=o),o.clear?.(),l?.(a),r.title&&o.setDiagramTitle?.(r.title),await n.parse(t),new e(i,t,o,n,s)}async render(e,t){await this.renderer.draw(this.text,e,t,this)}getParser(){return this.parser}getType(){return this.type}},tJ=[],tQ=(0,N.__name)(()=>{tJ.forEach(e=>{e()}),tJ=[]},"attachFunctions"),t0=(0,N.__name)(e=>e.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),"cleanupComments");function t1(e){let t=e.match(O.frontMatterRegex);if(!t)return{text:e,metadata:{}};let r=(0,D.load)(t[1],{schema:D.JSON_SCHEMA})??{};r="object"!=typeof r||Array.isArray(r)?{}:r;let a={};return r.displayMode&&(a.displayMode=r.displayMode.toString()),r.title&&(a.title=r.title.toString()),r.config&&(a.config=r.config),{text:e.slice(t[0].length),metadata:a}}(0,N.__name)(t1,"extractFrontMatter");var t2=(0,N.__name)(e=>e.replace(/\r\n?/g,"\n").replace(/<(\w+)([^>]*)>/g,(e,t,r)=>"<"+t+r.replace(/="([^"]*)"/g,"='$1'")+">"),"cleanupText"),t6=(0,N.__name)(e=>{let{text:t,metadata:r}=t1(e),{displayMode:a,title:i,config:o={}}=r;return a&&(o.gantt||(o.gantt={}),o.gantt.displayMode=a),{title:i,config:o,text:t}},"processFrontmatter"),t5=(0,N.__name)(e=>{let t=T.utils_default.detectInit(e)??{},r=T.utils_default.detectDirective(e,"wrap");return Array.isArray(r)?t.wrap=r.some(({type:e})=>"wrap"===e):r?.type==="wrap"&&(t.wrap=!0),{text:(0,T.removeDirectives)(e),directive:t}},"processDirectives");function t3(e){let t=t6(t2(e)),r=t5(t.text),a=(0,T.cleanAndMerge)(t.config,r.directive);return{code:e=t0(r.text),title:t.title,config:a}}function t4(e){return btoa(Array.from(new TextEncoder().encode(e),e=>String.fromCodePoint(e)).join(""))}(0,N.__name)(t3,"preprocessDiagram"),(0,N.__name)(t4,"toBase64");var t8=["foreignobject"],t9=["dominant-baseline"];function t7(e){let t=t3(e);return(0,O.reset)(),(0,O.addDirective)(t.config??{}),t}async function re(e,t){tU();try{let{code:t,config:r}=t7(e);return{diagramType:(await ru(t)).type,config:r}}catch(e){if(t?.suppressErrors)return!1;throw e}}(0,N.__name)(t7,"processAndSetConfigs"),(0,N.__name)(re,"parse");var rt=(0,N.__name)((e,t,r=[])=>`
.${e} ${t} { ${r.join(" !important; ")} !important; }`,"cssImportantStyles"),rr=(0,N.__name)((e,t=new Map)=>{let r="";if(void 0!==e.themeCSS&&(r+=`
${e.themeCSS}`),void 0!==e.fontFamily&&(r+=`
:root { --mermaid-font-family: ${e.fontFamily}}`),void 0!==e.altFontFamily&&(r+=`
:root { --mermaid-alt-font-family: ${e.altFontFamily}}`),t instanceof Map){let a=e.htmlLabels??e.flowchart?.htmlLabels?["> *","span"]:["rect","polygon","ellipse","circle","path"];t.forEach(e=>{(0,el.default)(e.styles)||a.forEach(t=>{r+=rt(e.id,t,e.styles)}),(0,el.default)(e.textStyles)||(r+=rt(e.id,"tspan",(e?.textStyles||[]).map(e=>e.replace("color","fill"))))})}return r},"createCssStyles"),ra=(0,N.__name)((e,t,r,a)=>{var i,o,n;let s=rr(e,r),l=(0,O.styles_default)(t,s,e.themeVariables);return eo((n=function e(t,r,a,i,o,n,s,l,d){for(var c,u,m,g,h,p,f=0,y=0,b=s,w=0,_=0,x=0,k=1,A=1,v=1,S=0,E="",C=o,D=n,I=i,L=E;A;)switch(x=S,S=Q()){case 40:if(108!=x&&58==B(L,b-1)){-1!=(h=L+=X(er(S),"&","&\f"),p=z(f?l[f-1]:0),h.indexOf("&\f",p))&&(v=-1);break}case 34:case 39:case 91:L+=er(S);break;case 9:case 10:case 13:case 32:L+=function(e){for(;K=ee();)if(K<33)Q();else break;return et(e)>2||et(K)>3?"":" "}(x);break;case 92:L+=function(e,t){for(var r;--t&&Q()&&!(K<48)&&!(K>102)&&(!(K>57)||!(K<65))&&(!(K>70)||!(K<97)););return r=G+(t<6&&32==ee()&&32==Q()),F(Z,e,r)}(G-1,7);continue;case 47:switch(ee()){case 42:case 47:W((c=function(e,t){for(;Q();)if(e+K===57)break;else if(e+K===84&&47===ee())break;return"/*"+F(Z,t,G-1)+"*"+j(47===e?e:Q())}(Q(),G),u=r,m=a,g=d,J(c,u,m,M,j(K),F(c,2,-2),0,g)),d),(5==et(x||1)||5==et(ee()||1))&&P(L)&&" "!==F(L,-1,void 0)&&(L+=" ");break;default:L+="/"}break;case 123*k:l[f++]=P(L)*v;case 125*k:case 59:case 0:switch(S){case 0:case 125:A=0;case 59+y:-1==v&&(L=X(L,/\f/g,"")),_>0&&(P(L)-b||0===k&&47===x)&&W(_>32?ei(L+";",i,a,b-1,d):ei(X(L," ","")+";",i,a,b-2,d),d);break;case 59:L+=";";default:if(W(I=ea(L,r,a,f,y,o,l,E,C=[],D=[],b,n),n),123===S)if(0===y)e(L,r,I,I,C,n,b,l,D);else{switch(w){case 99:if(110===B(L,3))break;case 108:if(97===B(L,2))break;default:y=0;case 100:case 109:case 115:}y?e(t,I,I,i&&W(ea(t,I,I,0,0,o,l,E,o,C=[],b,D),D),o,D,b,l,i?C:D):e(L,I,I,I,[""],D,0,l,D)}}f=y=_=0,k=v=1,E=L="",b=s;break;case 58:b=1+P(L),_=x;default:if(k<1){if(123==S)--k;else if(125==S&&0==k++&&125==(K=G>0?B(Z,--G):0,U--,10===K&&(U=1,V--),K))continue}switch(L+=j(S),S*k){case 38:v=y>0?1:(L+="\f",-1);break;case 44:l[f++]=(P(L)-1)*v,v=1;break;case 64:45===ee()&&(L+=er(Q())),w=ee(),y=b=P(E=L+=function(e){for(;!et(ee());)Q();return F(Z,e,G)}(G)),S++;break;case 45:45===x&&2==P(L)&&(k=0)}}return n}("",null,null,null,[""],(o=i=`${a}{${l}}`,V=U=1,H=P(Z=o),G=0,i=[]),0,[0],i),Z="",n),en)},"createUserStyles"),ri=(0,N.__name)((e="",t,r)=>{let a=e;return r||t||(a=a.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),a=(a=(0,T.decodeEntities)(a)).replace(/<br>/g,"<br/>")},"cleanUpSvgCode"),ro=(0,N.__name)((e="",t)=>{let r=t?.viewBox?.baseVal?.height?t.viewBox.baseVal.height+"px":"100%",a=t4(`<body style="margin:0">${e}</body>`);return`<iframe style="width:100%;height:${r};border:0;margin:0;" src="data:text/html;charset=UTF-8;base64,${a}" sandbox="allow-top-navigation-by-user-activation allow-popups">
  The "iframe" tag is not supported by your browser.
</iframe>`},"putIntoIFrame"),rn=(0,N.__name)((e,t,r,a,i)=>{let o=e.append("div");o.attr("id",r),a&&o.attr("style",a);let n=o.append("svg").attr("id",t).attr("width","100%").attr("xmlns","http://www.w3.org/2000/svg");return i&&n.attr("xmlns:xlink",i),n.append("g"),e},"appendDivSvgG");function rs(e,t){return e.append("iframe").attr("id",t).attr("style","width: 100%; height: 100%;").attr("sandbox","")}(0,N.__name)(rs,"sandboxedIframe");var rl=(0,N.__name)((e,t,r,a)=>{e.getElementById(t)?.remove(),e.getElementById(r)?.remove(),e.getElementById(a)?.remove()},"removeExistingElements"),rd=(0,N.__name)(async function(e,t,r){let a,i;tU();let o=t7(t);t=o.code;let n=(0,O.getConfig)();N.log.debug(n),t.length>(n?.maxTextSize??5e4)&&(t="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa");let s="#"+e,l="i"+e,d="#"+l,c="d"+e,u="#"+c,m=(0,N.__name)(()=>{let e=h?d:u,t=(0,R.select)(e).node();t&&"remove"in t&&t.remove()},"removeTempElements"),g=(0,R.select)("body"),h="sandbox"===n.securityLevel,p="loose"===n.securityLevel,f=n.fontFamily;if(void 0!==r){if(r&&(r.innerHTML=""),h){let e=rs((0,R.select)(r),l);(g=(0,R.select)(e.nodes()[0].contentDocument.body)).node().style.margin=0}else g=(0,R.select)(r);rn(g,e,c,`font-family: ${f}`,"http://www.w3.org/1999/xlink")}else{if(rl(document,e,c,l),h){let e=rs((0,R.select)("body"),l);(g=(0,R.select)(e.nodes()[0].contentDocument.body)).node().style.margin=0}else g=(0,R.select)("body");rn(g,e,c)}try{a=await tZ.fromText(t,{title:o.title})}catch(e){if(n.suppressErrorRendering)throw m(),e;a=await tZ.fromText("error"),i=e}let y=g.select(u).node(),b=a.type,w=y.firstChild,_=w.firstChild,x=ra(n,b,a.renderer.getClasses?.(t,a),s),k=document.createElement("style");k.innerHTML=x,w.insertBefore(k,_);try{await a.renderer.draw(t,e,E.package_default.version,a)}catch(r){throw n.suppressErrorRendering?m():ti.draw(t,e,E.package_default.version),r}rm(b,g.select(`${u} svg`),a.db.getAccTitle?.(),a.db.getAccDescription?.()),g.select(`[id="${e}"]`).selectAll("foreignobject > *").attr("xmlns","http://www.w3.org/1999/xhtml");let A=g.select(u).node().innerHTML;if(N.log.debug("config.arrowMarkerAbsolute",n.arrowMarkerAbsolute),A=ri(A,h,(0,O.evaluate)(n.arrowMarkerAbsolute)),h?A=ro(A,g.select(u+" svg").node()):p||(A=es.default.sanitize(A,{ADD_TAGS:t8,ADD_ATTR:t9,HTML_INTEGRATION_POINTS:{foreignobject:!0}})),tQ(),i)throw i;return m(),{diagramType:b,svg:A,bindFunctions:a.db.bindFunctions}},"render");function rc(e={}){let t=(0,O.assignWithDepth_default)({},e);t?.fontFamily&&!t.themeVariables?.fontFamily&&(t.themeVariables||(t.themeVariables={}),t.themeVariables.fontFamily=t.fontFamily),(0,O.saveConfigFromInitialize)(t),t?.theme&&t.theme in O.themes_default?t.themeVariables=O.themes_default[t.theme].getThemeVariables(t.themeVariables):t&&(t.themeVariables=O.themes_default.default.getThemeVariables(t.themeVariables));let r="object"==typeof t?(0,O.setSiteConfig)(t):(0,O.getSiteConfig)();(0,N.setLogLevel)(r.logLevel),tU()}(0,N.__name)(rc,"initialize");var ru=(0,N.__name)((e,t={})=>{let{code:r}=t3(e);return tZ.fromText(r,t)},"getDiagramFromText");function rm(e,t,r,a){tG(t,e),tK(t,r,a,t.attr("id"))}(0,N.__name)(rm,"addA11yInfo");var rg=Object.freeze({render:rd,parse:re,getDiagramFromText:ru,initialize:rc,getConfig:O.getConfig,setConfig:O.setConfig,getSiteConfig:O.getSiteConfig,updateSiteConfig:O.updateSiteConfig,reset:(0,N.__name)(()=>{(0,O.reset)()},"reset"),globalReset:(0,N.__name)(()=>{(0,O.reset)(O.defaultConfig)},"globalReset"),defaultConfig:O.defaultConfig});(0,N.setLogLevel)((0,O.getConfig)().logLevel),(0,O.reset)((0,O.getConfig)());var rh=(0,N.__name)((e,t,r)=>{N.log.warn(e),(0,T.isDetailedError)(e)?(r&&r(e.str,e.hash),t.push({...e,message:e.str,error:e})):(r&&r(e),e instanceof Error&&t.push({str:e.message,message:e.message,hash:e.name,error:e}))},"handleError"),rp=(0,N.__name)(async function(e={querySelector:".mermaid"}){try{await rf(e)}catch(t){if((0,T.isDetailedError)(t)&&N.log.error(t.str),rD.parseError&&rD.parseError(t),!e.suppressErrors)throw N.log.error("Use the suppressErrors option to suppress these errors"),t}},"run"),rf=(0,N.__name)(async function({postRenderCallback:e,querySelector:t,nodes:r}={querySelector:".mermaid"}){let a,i,o=rg.getConfig();if(N.log.debug(`${!e?"No ":""}Callback function found`),r)a=r;else if(t)a=document.querySelectorAll(t);else throw Error("Nodes and querySelector are both undefined");N.log.debug(`Found ${a.length} diagrams`),o?.startOnLoad!==void 0&&(N.log.debug("Start On Load: "+o?.startOnLoad),rg.updateSiteConfig({startOnLoad:o?.startOnLoad}));let n=new T.utils_default.InitIDGenerator(o.deterministicIds,o.deterministicIDSeed),s=[];for(let t of Array.from(a)){if(N.log.info("Rendering diagram: "+t.id),t.getAttribute("data-processed"))continue;t.setAttribute("data-processed","true");let r=`mermaid-${n.next()}`;i=t.innerHTML,i=(0,$.dedent)(T.utils_default.entityDecode(i)).trim().replace(/<br\s*\/?>/gi,"<br/>");let a=T.utils_default.detectInit(i);a&&N.log.debug("Detected early reinit: ",a);try{let{svg:a,bindFunctions:o}=await rE(r,i,t);t.innerHTML=a,e&&await e(r),o&&o(t)}catch(e){rh(e,s,rD.parseError)}}if(s.length>0)throw s[0]},"runThrowsErrors"),ry=(0,N.__name)(function(e){rg.initialize(e)},"initialize"),rb=(0,N.__name)(async function(e,t,r){N.log.warn("mermaid.init is deprecated. Please use run instead."),e&&ry(e);let a={postRenderCallback:r,querySelector:".mermaid"};"string"==typeof t?a.querySelector=t:t&&(t instanceof HTMLElement?a.nodes=[t]:a.nodes=t),await rp(a)},"init"),rw=(0,N.__name)(async(e,{lazyLoad:t=!0}={})=>{tU(),(0,O.registerLazyLoadedDiagrams)(...e),!1===t&&await tH()},"registerExternalDiagrams"),r_=(0,N.__name)(function(){if(rD.startOnLoad){let{startOnLoad:e}=rg.getConfig();e&&rD.run().catch(e=>N.log.error("Mermaid failed to initialize",e))}},"contentLoaded");"u">typeof document&&window.addEventListener("load",r_,!1);var rx=(0,N.__name)(function(e){rD.parseError=e},"setParseErrorHandler"),rk=[],rA=!1,rv=(0,N.__name)(async()=>{if(!rA){for(rA=!0;rk.length>0;){let e=rk.shift();if(e)try{await e()}catch(e){N.log.error("Error executing queue",e)}}rA=!1}},"executeQueue"),rS=(0,N.__name)(async(e,t)=>new Promise((r,a)=>{let i=(0,N.__name)(()=>new Promise((i,o)=>{rg.parse(e,t).then(e=>{i(e),r(e)},e=>{N.log.error("Error parsing",e),rD.parseError?.(e),o(e),a(e)})}),"performCall");rk.push(i),rv().catch(a)}),"parse"),rE=(0,N.__name)((e,t,r)=>new Promise((a,i)=>{let o=(0,N.__name)(()=>new Promise((o,n)=>{rg.render(e,t,r).then(e=>{o(e),a(e)},e=>{N.log.error("Error parsing",e),rD.parseError?.(e),n(e),i(e)})}),"performCall");rk.push(o),rv().catch(i)}),"render"),rC=(0,N.__name)(()=>Object.keys(O.detectors).map(e=>({id:e})),"getRegisteredDiagramsMetadata"),rD={startOnLoad:!0,mermaidAPI:rg,parse:rS,render:rE,init:rb,run:rp,registerExternalDiagrams:rw,registerLayoutLoaders:I.registerLayoutLoaders,initialize:ry,parseError:void 0,contentLoaded:r_,setParseErrorHandler:rx,detectType:O.detectType,registerIconPacks:L.registerIconPacks,getRegisteredDiagramsMetadata:rC};let rI=e=>{let t=(e=rT(e)).replace(/#(\d+);/g,"&#$1;").replace(/#([a-z]+);/g,"&$1;"),r=document.createElement("textarea");return r.innerHTML=t,r.value},rL=e=>{let t=e.getAttribute("transform"),r=t?.match(/translate\(([ \d.-]+),\s*([\d.-]+)\)/),a=0,i=0;return r&&(a=Number(r[1]),i=Number(r[2])),{transformX:a,transformY:i}},rT=function(e){return e.replace(/ﬂ°°/g,"#").replace(/ﬂ°/g,"&").replace(/¶ß/g,";")},rO=(e,t={x:0,y:0})=>{if("path"!==e.tagName.toLowerCase())throw Error(`Invalid input: Expected an HTMLElement of tag "path", got ${e.tagName}`);let r=e.getAttribute("d");if(!r)throw Error('Path element does not contain a "d" attribute');let a=r.split(/(?=[LM])/),i=a[0].substring(1).split(",").map(e=>parseFloat(e)),o=a[a.length-1].substring(1).split(",").map(e=>parseFloat(e)),n=a.map(e=>{let t=e.substring(1).split(",").map(e=>parseFloat(e));return{x:t[0],y:t[1]}}).filter((e,t,r)=>{if(0===t||t===r.length-1)return!0;if(e.x===r[t-1].x&&e.y===r[t-1].y)return!1;if(t===r.length-2&&(r[t-1].x===e.x||r[t-1].y===e.y)){let t=r[r.length-1];return Math.hypot(t.x-e.x,t.y-e.y)>20}return e.x!==r[t-1].x||e.y!==r[t-1].y}).map(e=>({x:e.x+t.x,y:e.y+t.y}));return{startX:i[0]+t.x,startY:i[1]+t.y,endX:o[0]+t.x,endY:o[1]+t.y,reflectionPoints:n}},rN=e=>(console.log("@",e),e.replace(/\s*!important\s*$/i,"").trim()),r$=(e,t,r)=>{let a,i=t.querySelector(`[id*="${e.domId}"]`);if(!i)return;i.parentElement?.tagName.toLowerCase()==="a"&&(a=i.parentElement.getAttribute("xlink:href"));let o=rR(a?i.parentElement:i,t),n=i.getBBox(),s={width:n.width,height:n.height},l=i.querySelector(".label-container")?.getAttribute("style"),d=i.querySelector(".label")?.getAttribute("style"),c={};l?.split(";").forEach(e=>{if(!e)return;let t=e.split(":")[0].trim(),r=rN(e.split(":")[1]||"");r&&(c[t]=r)});let u={};if(d?.split(";").forEach(e=>{if(!e)return;let t=e.split(":")[0].trim(),r=rN(e.split(":")[1]||"");r&&(u[t]=r)}),e.classes&&r instanceof Map){let t=r.get(Array.isArray(e.classes)?e.classes[0]:e.classes);t&&(t.styles?.forEach(e=>{let[t,r]=e.split(":"),a=rN(r||"");a&&(c[t.trim()]=a)}),t.textStyles?.forEach(e=>{let[t,r]=e.split(":"),a=rN(r||"");a&&(u[t.trim()]=a)}))}return{id:e.id,labelType:e.labelType,text:rI(e.text||""),type:e.type,link:a||void 0,...o,...s,containerStyle:c,labelStyle:u}},rR=(e,t)=>{if(!e)throw Error("Element not found");let r=e.parentElement?.parentElement,a=e.childNodes[0],i={x:0,y:0};if(a){let{transformX:e,transformY:t}=rL(a),r=a.getBBox();i={x:Number(a.getAttribute("x"))||e+r.x||0,y:Number(a.getAttribute("y"))||t+r.y||0}}let{transformX:o,transformY:n}=rL(e),s={x:o+i.x,y:n+i.y};for(;r&&r.id!==t.id;){if("root"===r.classList.value&&r.hasAttribute("transform")){let{transformX:e,transformY:t}=rL(r);s.x+=e,s.y+=t}r=r.parentElement}return s},rM=(e,t,r,a,i)=>{let o={};return o.type="arrow",o.startX=e,o.startY=t,o.endX=r,o.endY=a,Object.assign(o,{...i}),o},rY=(e,t,r,a)=>({type:"text",x:e,y:t,text:r,width:a?.width||20,height:a?.height||20,fontSize:a?.fontSize||20,id:a?.id,color:a?.color,groupId:a?.groupId,metadata:a?.metadata}),rq=(e,t,r)=>{let a={},i=Number(e.getAttribute("x")),o=Number(e.getAttribute("y"));a.type="text",a.text=rI(t),r?.id&&(a.id=r.id),r?.groupId&&(a.groupId=r.groupId);let n=e.getBBox();return a.width=n.width,a.height=n.height,a.x=i-n.width/2,a.y=o,a.fontSize=parseInt(getComputedStyle(e).fontSize),a},rz=(e,t,r={})=>{let a={};a.type=t;let{label:i,subtype:o,id:n,groupId:s}=r;a.id=n,s&&(a.groupId=s),i&&(a.label={text:rI(i.text),fontSize:16,verticalAlign:i?.verticalAlign});let l=e.getBBox();switch(a.x=l.x,a.y=l.y,a.width=l.width,a.height=l.height,a.subtype=o,o){case"highlight":let d=e.getAttribute("fill");d&&(a.bgColor=rN(d));break;case"note":a.strokeStyle="dashed"}return a},rj=(e,t,r,a,i,o)=>{let n={};n.startX=t,n.startY=r,n.endX=a,o?.groupId&&(n.groupId=o.groupId),o?.id&&(n.id=o.id),n.endY=i;let s=e.getAttribute("stroke");return n.strokeColor=s?rN(s):null,n.strokeWidth=Number(e.getAttribute("stroke-width")),n.type="line",n},rX={0:"SOLID",1:"DOTTED",3:"SOLID_CROSS",4:"DOTTED_CROSS",5:"SOLID_OPEN",6:"DOTTED_OPEN",24:"SOLID_POINT",25:"DOTTED_POINT"},rB=(e,t,r)=>{if(!e)throw"root node not found";let a=b(),i=Array.from(e.children),o=[];return i.forEach((e,i)=>{let n,s=`${r?.id}-${i}`;switch(e.tagName){case"line":let l=Number(e.getAttribute("x1")),d=Number(e.getAttribute("y1")),u=Number(e.getAttribute("x2")),m=Number(e.getAttribute("y2"));n=rj(e,l,d,u,m,{groupId:a,id:s});break;case"text":n=rq(e,t,{groupId:a,id:s});break;case"circle":n=rz(e,"ellipse",{label:e.textContent?{text:e.textContent}:void 0,groupId:a,id:s});default:n=rz(e,c[e.tagName],{label:e.textContent?{text:e.textContent}:void 0,groupId:a,id:s})}o.push(n)}),o},rF=(e,t)=>{let r=t.getAttribute("fill"),a=t.getAttribute("stroke"),i=t.getAttribute("stroke-width"),o=t.getAttribute("stroke-dasharray");r&&"none"!==r&&(e.bgColor=rN(r)),a&&"none"!==a&&(e.strokeColor=rN(a)),i&&(e.strokeWidth=Number(i)),o&&o.trim()&&(e.strokeStyle="dashed")},rP=e=>{let t;switch(e){case 0:t="diamond_outline";break;case 2:t="diamond";break;case 1:t="triangle_outline";break;case"none":t=null;break;default:t="arrow"}return t},rW=(e,t)=>{let r=0,a=0,i=e;for(;i&&i!==t;){let{transformX:e,transformY:t}=rL(i);r+=e,a+=t,i=i.parentElement}return{tx:r,ty:a}},rV=e=>{let t=e.querySelector("svg");if(!t)throw Error("SVG element not found");let r=t.getBoundingClientRect(),a=r.width,i=r.height;t.setAttribute("width",`${a}`),t.setAttribute("height",`${i}`);let o=btoa(unescape(encodeURIComponent(t.outerHTML)));return{type:"graphImage",mimeType:"image/svg+xml",dataURL:`data:image/svg+xml;base64,${o}`,width:a,height:i}},rU=async(e,t=u)=>{let r;rD.initialize({...u,...t,themeVariables:{fontSize:"20px"}});let a=await rD.mermaidAPI.getDiagramFromText(e.replace(/style.*:\S*#.*;/g,e=>e.substring(0,e.length-1)).replace(/classDef.*:\S*#.*;/g,e=>e.substring(0,e.length-1)).replace(/#\w+;/g,e=>{let t=e.substring(1,e.length-1);return/^\+?\d+$/.test(t)?`ﬂ\xb0\xb0${t}\xb6\xdf`:`ﬂ\xb0${t}\xb6\xdf`})),{svg:i}=await rD.render("mermaid-to-excalidraw",e),o=document.createElement("div");o.setAttribute("style","opacity: 0; position: relative; z-index: -1;"),o.innerHTML=i,o.id="mermaid-diagram",document.querySelector("#mermaid-diagram")?.remove(),document.body.appendChild(o);try{switch(a.type){case"flowchart-v2":case"graph":var n;let e,t,i,s,l,d,c,u;n=a.db,e=n.getVertices(),t=n.getEdges(),i=n.getSubGraphs(),s=n.getClasses(),l={},d=s instanceof Map?s:{},e instanceof Map?e.forEach((e,t)=>{l[t]=r$(e,o,d)}):"object"==typeof e&&null!==e&&Object.entries(e).forEach(([e,t])=>{l[e]=r$(t,o,d)}),c=new Map,u=(Array.isArray(t)?t:[]).map(e=>{if(!o.querySelector(`[id*="${e.id}"]`))return null;let t=`${e.start}-${e.end}`,r=c.get(t)||0;c.set(t,r+1);let a=o.querySelector(`[id*="${e.id}"]`);if(!a)throw Error("Edge element not found");let i=rR(a,o),n=rO(a,i);return e.length=void 0,{...e,...n,text:rI(e.text)}}).filter(e=>null!==e&&e.reflectionPoints.length>1),r={type:"flowchart",subGraphs:(Array.isArray(i)?i:[]).map(e=>((e,t)=>{let r=e.nodes.map(e=>e.startsWith("flowchart-")?e.split("-")[1]:e),a=t.querySelector(`[id='${e.id}']`);if(!a)throw Error("SubGraph element not found");let i=rR(a,t),o=a.getBBox(),n={width:o.width,height:o.height};return{id:e.id,nodeIds:r,text:rI(e.title),labelType:"text",...i,...n}})(e,o)),vertices:l,edges:u};break;case"sequence":r=((e,t)=>{var r;let a,i,o,n,s,l,d,c,u,m,g,h,p,f,y,b,w,_,x,k,A,v,S,E;e.parser.parse(e.text);let C=e.parser.yy,D=[],I=C.getBoxes().map(e=>({...e,fill:rN(e.fill||"")})),L=(a=Array.from(t.querySelectorAll(".rect")).filter(e=>e.parentElement?.tagName!=="g"),i=[],a.forEach(e=>{let t=rz(e,"rectangle",{label:{text:""},subtype:"highlight"});i.push(t)}),i),{nodes:T,lines:O,actorMap:N}=(r=C.getActors(),o=Array.from(t.querySelectorAll(".actor-top")),n=Array.from(t.querySelectorAll(".actor-bottom")),s=[],l=[],d={},(r instanceof Map?Array.from(r.values()):Object.values(r)).forEach(e=>{let t=o.find(t=>t.getAttribute("name")===e.name),r=n.find(t=>t.getAttribute("name")===e.name);if(!t||!r)throw"root not found";let a=e.description;if("participant"===e.type){let i=rz(t,"rectangle",{id:`${e.name}-top`,label:{text:a},subtype:"actor"});if(rF(i,t),!i)throw"Top Node element not found!";s.push([i]);let o=rz(r,"rectangle",{id:`${e.name}-bottom`,label:{text:a},subtype:"actor"});d[e.name]={topId:`${e.name}-top`,bottomId:`${e.name}-bottom`},rF(o,r),s.push([o]);let n=t?.parentElement?.previousElementSibling;if(n?.tagName!=="line")throw"Line not found";let c=Number(n.getAttribute("x1"));if(!i.height)throw"Top node element height is null";let u=i.y+i.height,m=o.y,g=Number(n.getAttribute("x2")),h=rj(n,c,u,g,m);l.push(h)}else if("actor"===e.type){let i=rB(t,a,{id:`${e.name}-top`});s.push(i);let o=rB(r,a,{id:`${e.name}-bottom`});s.push(o),d[e.name]={topId:`${e.name}-top`,bottomId:`${e.name}-bottom`};let n=t.previousElementSibling;if(n?.tagName!=="line")throw"Line not found";let c=Number(n.getAttribute("x1")),u=Number(n.getAttribute("y1")),m=Number(n.getAttribute("x2")),g=o.find(e=>"ellipse"===e.type);if(g){let e=rj(n,c,u,m,g.y);l.push(e)}}}),{nodes:s,lines:l,actorMap:d}),$=C.getMessages(),R=(c=[],u=Array.from(t.querySelectorAll('[class*="messageLine"]')),m=Object.keys(rX),g=$.filter(e=>m.includes(e.type.toString())),u.forEach((e,t)=>{let r=g[t],a=rX[r.type],i=((e,t)=>{let r={};t?.label&&(r.label={text:rI(t.label),fontSize:16});let a=e.tagName;if("line"===a)r.startX=Number(e.getAttribute("x1")),r.startY=Number(e.getAttribute("y1")),r.endX=Number(e.getAttribute("x2")),r.endY=Number(e.getAttribute("y2"));else if("path"===a){let t=e.getAttribute("d");if(!t)throw Error('Path element does not contain a "d" attribute');let a=t.split(/(?=[LC])/),i=a[0].substring(1).split(",").map(e=>parseFloat(e)),o=[];a.forEach(e=>{let t=e.substring(1).trim().split(" ").map(e=>{let[t,r]=e.split(",");return[parseFloat(t)-i[0],parseFloat(r)-i[1]]});o.push(...t)});let n=o[o.length-1];r.startX=i[0],r.startY=i[1],r.endX=n[0],r.endY=n[1],r.points=o}t?.label&&(r.startY=r.startY-10,r.endY=r.endY-10);let i=e.getAttribute("stroke"),o=(i&&"none"!==i?i:"")||getComputedStyle(e).stroke||"";return r.strokeColor=o?rN(o):null,r.strokeWidth=Number(e.getAttribute("stroke-width")),r.type="arrow",r.strokeStyle=t?.strokeStyle||"solid",r.startArrowhead=t?.startArrowhead||null,r.endArrowhead=t?.endArrowhead||null,r})(e,{label:r?.message,strokeStyle:(e=>{let t;switch(e){case 0:case 3:case 5:case 24:default:t="solid";break;case 1:case 4:case 6:case 25:t="dotted"}return t})(r.type),endArrowhead:"SOLID_OPEN"===a||"DOTTED_OPEN"===a?null:"arrow"}),o=N[r.from],n=N[r.to];o?.topId&&n?.topId&&(i.start={type:"rectangle",id:o.topId},i.end={type:"rectangle",id:n.topId});if(e.nextElementSibling?.classList.contains("sequenceNumber")){let t=e.nextElementSibling?.textContent;if(!t)throw Error("sequence number not present");let r={type:"rectangle",x:i.startX-10,y:i.startY-15,label:{text:t,fontSize:14},bgColor:"#e9ecef",height:30,subtype:"sequence"};Object.assign(i,{sequenceNumber:r})}c.push(i)}),c),M=(h=Array.from(t.querySelectorAll(".note")).map(e=>e.parentElement),p=$.filter(e=>2===e.type),f=[],h.forEach((e,t)=>{if(!e)return;let r=e.firstChild,a=rz(r,"rectangle",{label:{text:p[t].message},subtype:"note"}),i=r.getAttribute("fill"),o=r.getAttribute("stroke"),n=r.getAttribute("stroke-width"),s=r.getAttribute("stroke-dasharray");i&&"none"!==i&&(a.bgColor=rN(i)),o&&"none"!==o&&(a.strokeColor=rN(o)),n&&(a.strokeWidth=Number(n)),s&&s.trim()&&(a.strokeStyle="dashed"),f.push(a)}),f),Y=(y=Array.from(t.querySelectorAll("[class*=activation]")),b=[],y.forEach(e=>{let t,r,a,i,o=rz(e,"rectangle",{label:{text:""},subtype:"activation"});t=e.getAttribute("fill"),r=e.getAttribute("stroke"),a=e.getAttribute("stroke-width"),i=e.getAttribute("stroke-dasharray"),t&&"none"!==t&&(o.bgColor=rN(t)),r&&"none"!==r&&(o.strokeColor=rN(r)),a&&(o.strokeWidth=Number(a)),i&&i.trim()&&(o.strokeStyle="dashed"),b.push(o)}),b),q=(w=Array.from(t.querySelectorAll(".loopLine")),_=[],x=[],k=[],w.forEach(e=>{let t=Number(e.getAttribute("x1")),r=Number(e.getAttribute("y1")),a=Number(e.getAttribute("x2")),i=Number(e.getAttribute("y2")),o=rj(e,t,r,a,i);o.strokeStyle="dotted",o.strokeColor="#adb5bd",o.strokeWidth=2,_.push(o)}),A=Array.from(t.querySelectorAll(".loopText")),v=$.filter(e=>27===e.type).map(e=>e.message),A.forEach(e=>{let t=e.textContent||"",r=rq(e,t),a=t.match(/\[(.*?)\]/)?.[1]||"";v.includes(a)&&(r.x+=16),x.push(r)}),S=Array.from(t?.querySelectorAll(".labelBox")),E=Array.from(t?.querySelectorAll(".labelText")),S.forEach((e,t)=>{let r=rz(e,"rectangle",{label:{text:E[t]?.textContent||""}});r.strokeColor="#adb5bd",r.bgColor="#e9ecef",r.width=void 0,k.push(r)}),{lines:_,texts:x,nodes:k});return D.push(L),D.push(...T),D.push(M),D.push(Y),{type:"sequence",lines:O,arrows:R,nodes:D,loops:q,groups:I}})(a,o);break;case"class":case"classDiagram":r=((e,t)=>{var r;let a,i,o=e.db,n=o.getDirection?.()||"TB",s=[],l=[],d=[],c=[],u=o.getNamespaces?.()||[],m=o.getClasses?.()||{},g=m instanceof Map?Object.fromEntries(m):m;if(g&&Object.keys(g).length){let e,r,a,i="function"==typeof o.lookUpDomId?o.lookUpDomId.bind(o):void 0,n=(e=[],r=[],a=[],Object.values(g).forEach(o=>{var n;let s,l,d,{domId:c,id:u}=o,m=b(),g=(n=o.styles||o.cssStyles,l={},n&&n.forEach(e=>{e.split(";").map(e=>e.trim()).filter(Boolean).forEach(e=>{let[t,r]=e.split(":").map(e=>e.trim());t&&r&&(l[t]=rN(r))})}),l);try{s=i?i(u):void 0}catch{s=void 0}let h=s&&t.querySelector(`#${s}`)||t.querySelector(`#${c}`)||t.querySelector(`[data-id='${u}']`)||(d=RegExp(`^classId-${u}(?:-|$)`),Array.from(t.querySelectorAll("[id]")).filter(e=>d.test(e.id))[0]);if(!h)throw Error(`DOM Node with id ${c} not found`);let p=h.querySelector("rect")||h,f=p.getBBox(),{tx:y,ty:w}=rW(p,t),_={type:"rectangle",id:u,groupId:m,x:f.x+y,y:f.y+w,width:f.width,height:f.height,metadata:{classId:u}},x=p.getAttribute("fill"),k=p.getAttribute("stroke"),A=p.getAttribute("stroke-width"),v=p.getAttribute("stroke-dasharray"),S=getComputedStyle(p),E=rN(x||g.fill||(x?S.fill:"")),C=rN(k||g.stroke||(k?S.stroke:"")),D=A||g["stroke-width"]||(A?S.strokeWidth:""),I=v||g["stroke-dasharray"]||(v?"none"===S.strokeDasharray?"":S.strokeDasharray:""),L=e=>{if(!e)return!1;let t=e.toLowerCase();return"none"!==t&&"transparent"!==t&&"rgba(0, 0, 0, 0)"!==t&&"black"!==t&&"#000"!==t&&"#000000"!==t&&"rgb(0, 0, 0)"!==t&&"rgba(0, 0, 0, 1)"!==t};L(E)?_.bgColor=E:_.bgColor=void 0,L(C)?_.strokeColor=C:_.strokeColor=void 0,D?_.strokeWidth=Number(D):_.strokeWidth=void 0,I&&I.trim().length>0?_.strokeStyle="dashed":_.strokeStyle=void 0,e.push(_),[...Array.from(h.querySelectorAll("line")),...Array.from(h.querySelectorAll("g.divider path"))].forEach(e=>{let a,i,o,n,{tx:s,ty:l}=rW(e,t);if("line"===e.tagName.toLowerCase())a=Number(e.getAttribute("x1"))+s,i=Number(e.getAttribute("y1"))+l,o=Number(e.getAttribute("x2"))+s,n=Number(e.getAttribute("y2"))+l;else{let t=e.getBBox();a=t.x+s,o=t.x+t.width+s;let r=t.y+t.height/2+l;i=r,n=r}if(a===o&&i===n)return;let d=rj(e,a,i,o,n,{groupId:m,id:b()});_.strokeColor?d.strokeColor=_.strokeColor:d.strokeColor=void 0,void 0!==_.strokeWidth?d.strokeWidth=_.strokeWidth:d.strokeWidth=void 0,_.strokeStyle?d.strokeStyle=_.strokeStyle:d.strokeStyle=void 0,d.metadata={classId:u},r.push(d)}),Array.from(h.querySelectorAll("text, foreignObject")).forEach(e=>{let r="foreignobject"===e.tagName.toLowerCase(),i=r?[]:Array.from(e.querySelectorAll("tspan")),o=i.length?i.map(e=>e.textContent?.trim()).filter(Boolean).join("\n"):e.textContent?.trim()||"";if(!o)return;let n=e.getBBox(),{tx:s,ty:l}=rW(e,t),d=parseFloat(getComputedStyle(e).fontSize||"");if(r&&(!Number.isFinite(d)||!d)){let t=e.querySelector("div, span, p");t&&(d=parseFloat(getComputedStyle(t).fontSize||""))}(!Number.isFinite(d)||d<=0)&&(d=Math.max(12,.6*n.height)),d*=.9;let c=rY((_?.x||0)+4,n.y+l,rI(o),{width:_&&_.width?Math.max(_.width-8,n.width):n.width,height:n.height,fontSize:d||void 0,color:rN(e.style?.color||getComputedStyle(e).fill||g.color||"")||void 0,id:b(),groupId:m,metadata:{classId:u}});a.push(c)})}),{nodes:e,lines:r,text:a});s.push(n.nodes),l.push(...n.lines),d.push(...n.text),c.push(...n.nodes)}let{arrows:h,text:p}=((e,t,r,a)=>{let i=r.querySelector(".edgePaths")?.children;if(!i||0===e.length)return{arrows:[],text:[]};let o=[],n=[];return e.forEach((e,r)=>{let s,l,d,c,u,{id1:m,id2:g,relation:h}=e,p=t.find(e=>e.id===m),f=t.find(e=>e.id===g);if(!p)throw Error(`parseRelations: Cannot find node with id ${m}`);if(!f)throw Error(`parseRelations: Cannot find node with id ${g}`);let y=(e=>{let t;switch(e){case 0:default:t="solid";break;case 1:t="dotted"}return t})(h.lineType),b=rP(h.type1),w=rP(h.type2),_=rO(i[r]),x=rM(_.startX,_.startY,_.endX,_.endY,{strokeStyle:y,startArrowhead:b,endArrowhead:w,label:e.title?{text:e.title}:void 0,start:{type:"rectangle",id:p.id},end:{type:"rectangle",id:f.id}}),k=(d=["triangle_outline","diamond","diamond_outline"],c=x.startArrowhead&&d.includes(x.startArrowhead),((u=x.endArrowhead&&d.includes(x.endArrowhead))||c)&&(c&&("LR"===a?x.startX-=16:"RL"===a?x.startX+=16:"TB"===a?x.startY-=16:"BT"===a&&(x.startY+=16)),u&&("LR"===a?x.endX+=16:"RL"===a?x.endX-=16:"TB"===a?x.endY+=16:"BT"===a&&(x.endY-=16))),x);o.push(k);let{relationTitle1:A,relationTitle2:v}=e;if(A&&"none"!==A){switch(a){case"TB":s=k.startX-20,k.endX<k.startX&&(s-=15),l=k.startY+15;break;case"BT":s=k.startX+20,k.endX>k.startX&&(s+=15),l=k.startY-15;break;case"LR":s=k.startX+20,l=k.startY+15,k.endY>k.startY&&(l+=15);break;case"RL":s=k.startX-20,l=k.startY-15,k.startY>k.endY&&(l-=15);break;default:s=k.startX-20,l=k.startY+15}let e=rY(s,l,A,{fontSize:16});n.push(e)}if(v&&"none"!==v){switch(a){case"TB":s=k.endX+20,k.endX<k.startX&&(s+=15),l=k.endY-15;break;case"BT":s=k.endX-20,k.endX>k.startX&&(s-=15),l=k.endY+15;break;case"LR":s=k.endX-20,l=k.endY-15,k.endY>k.startY&&(l-=15);break;case"RL":s=k.endX+20,l=k.endY+15,k.startY>k.endY&&(l+=15);break;default:s=k.endX+20,l=k.endY-15}let e=rY(s,l,v,{fontSize:16});n.push(e)}}),{arrows:o,text:n}})(o.getRelations?.()||[],c,t,n),{notes:f,connectors:y}=(r=o.getNotes?.()||[],a=[],i=[],r.forEach(e=>{let{id:r,text:o,class:n}=e,s=t.querySelector(`#${r}`);if(!s)throw Error(`Node with id ${r} not found!`);let{transformX:l,transformY:d}=rL(s),u=rz(s.firstChild,"rectangle",{id:r,subtype:"note",label:{text:o}});if(Object.assign(u,{x:u.x+l,y:u.y+d}),a.push(u),n){let e=c.find(e=>e.id===n);if(!e)throw Error(`class node with id ${n} not found!`);let t=u.x+(u.width||0)/2,r=u.y+(u.height||0),a=rM(t,r,t,e.y,{strokeStyle:"dotted",startArrowhead:null,endArrowhead:null,start:{id:u.id,type:"rectangle"},end:{id:e.id,type:"rectangle"}});i.push(a)}}),{notes:a,connectors:i});return s.push(f),h.push(...y),d.push(...p),{type:"class",nodes:s,lines:l,arrows:h,text:d,namespaces:u}})(a,o);break;default:r=rV(o)}}catch(e){console.error("Error processing Mermaid diagram:",e),r=rV(o)}finally{o.remove()}return r},rH=async(e,t)=>{let r=t||{},a=parseInt(r.themeVariables?.fontSize??"")||20;return((e,t={})=>{switch(e.type){case"graphImage":return w.convert(e,t);case"flowchart":return y.convert(e,t);case"sequence":return v.convert(e,t);case"class":return S.convert(e,t);default:throw Error(`graphToExcalidraw: unknown graph type "${e.type}, only flowcharts are supported!"`)}})(await rU(e,{...r,themeVariables:{...r.themeVariables}}),{fontSize:a})};var rG=e.i(91788),rK=e.i(96878);async function rZ(e){console.log("before try for",e);let{elements:t}=await rH(e);return console.log("parse mermaid success for",e),t}function rJ({name:e="mermaid",children:t,className:r}){console.log(t);let[a,i]=(0,rG.useState)([]),[o,c]=(0,rG.useState)(!1),u=(0,l.useMutex)("MermaidCodeBlockImpl_parseMermaid");return(0,rG.useEffect)(()=>{(async()=>{if(o||!t)return;let e=[],r=await u.acquire();try{e=await rZ(t)}catch(e){console.error("error",e,"for",t)}finally{r()}let a=(0,d.convertToExcalidrawElements)(e);i(a),c(!0),console.log("elements",a)})()},[t,o]),(0,n.jsx)(n.Fragment,{children:o?(0,n.jsx)(rK.ExcalidrawSceneImpl,{elements:a}):(0,n.jsx)(s.Loading,{})})}e.s(["MermaidExcalidrawImpl",()=>rJ],23154)}]);