(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,72301,80696,t=>{"use strict";t.s(["default",0,function(t){return function(){return t}}],72301);let e=Math.PI,r=2*e,a=r-1e-6;function i(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}class n{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?i:function(t){let e=Math.floor(t);if(!(e>=0))throw Error(`invalid digits: ${t}`);if(e>15)return i;let r=10**e;return function(t){this._+=t[0];for(let e=1,a=t.length;e<a;++e)this._+=Math.round(arguments[e]*r)/r+t[e]}}(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,r,a){this._append`Q${+t},${+e},${this._x1=+r},${this._y1=+a}`}bezierCurveTo(t,e,r,a,i,n){this._append`C${+t},${+e},${+r},${+a},${this._x1=+i},${this._y1=+n}`}arcTo(t,r,a,i,n){if(t*=1,r*=1,a*=1,i*=1,(n*=1)<0)throw Error(`negative radius: ${n}`);let l=this._x1,s=this._y1,d=a-t,h=i-r,o=l-t,c=s-r,y=o*o+c*c;if(null===this._x1)this._append`M${this._x1=t},${this._y1=r}`;else if(y>1e-6)if(Math.abs(c*d-h*o)>1e-6&&n){let p=a-l,g=i-s,x=d*d+h*h,f=Math.sqrt(x),u=Math.sqrt(y),w=n*Math.tan((e-Math.acos((x+y-(p*p+g*g))/(2*f*u)))/2),b=w/u,m=w/f;Math.abs(b-1)>1e-6&&this._append`L${t+b*o},${r+b*c}`,this._append`A${n},${n},0,0,${+(c*p>o*g)},${this._x1=t+m*d},${this._y1=r+m*h}`}else this._append`L${this._x1=t},${this._y1=r}`}arc(t,i,n,l,s,d){if(t*=1,i*=1,n*=1,d=!!d,n<0)throw Error(`negative radius: ${n}`);let h=n*Math.cos(l),o=n*Math.sin(l),c=t+h,y=i+o,p=1^d,g=d?l-s:s-l;null===this._x1?this._append`M${c},${y}`:(Math.abs(this._x1-c)>1e-6||Math.abs(this._y1-y)>1e-6)&&this._append`L${c},${y}`,n&&(g<0&&(g=g%r+r),g>a?this._append`A${n},${n},0,1,${p},${t-h},${i-o}A${n},${n},0,1,${p},${this._x1=c},${this._y1=y}`:g>1e-6&&this._append`A${n},${n},0,${+(g>=e)},${p},${this._x1=t+n*Math.cos(s)},${this._y1=i+n*Math.sin(s)}`)}rect(t,e,r,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${r*=1}v${+a}h${-r}Z`}toString(){return this._}}function l(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(null==r)e=null;else{let t=Math.floor(r);if(!(t>=0))throw RangeError(`invalid digits: ${r}`);e=t}return t},()=>new n(e)}n.prototype,t.s(["withPath",()=>l],80696)},21776,t=>{"use strict";Array.prototype.slice,t.s(["default",0,function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}])},29593,t=>{"use strict";var e=t.i(21776),r=t.i(72301),a=t.i(73422),i=t.i(80696);function n(t){return t[0]}function l(t){return t[1]}t.s(["line",0,function(t,s){var d=(0,r.default)(!0),h=null,o=a.default,c=null,y=(0,i.withPath)(p);function p(r){var a,i,n,l=(r=(0,e.default)(r)).length,p=!1;for(null==h&&(c=o(n=y())),a=0;a<=l;++a)!(a<l&&d(i=r[a],a,r))===p&&((p=!p)?c.lineStart():c.lineEnd()),p&&c.point(+t(i,a,r),+s(i,a,r));if(n)return c=null,n+""||null}return t="function"==typeof t?t:void 0===t?n:(0,r.default)(t),s="function"==typeof s?s:void 0===s?l:(0,r.default)(s),p.x=function(e){return arguments.length?(t="function"==typeof e?e:(0,r.default)(+e),p):t},p.y=function(t){return arguments.length?(s="function"==typeof t?t:(0,r.default)(+t),p):s},p.defined=function(t){return arguments.length?(d="function"==typeof t?t:(0,r.default)(!!t),p):d},p.curve=function(t){return arguments.length?(o=t,null!=h&&(c=o(h)),p):o},p.context=function(t){return arguments.length?(null==t?h=c=null:c=o(h=t),p):h},p}],29593)},39029,t=>{"use strict";var e=t.i(9399);t.i(31345);var r=t.i(44588),a=t.i(29593),i=t.i(34731),n=t.i(12192);let l={extension:(t,r,a)=>{e.l.trace("Making markers for ",a),t.append("defs").append("marker").attr("id",a+"_"+r+"-extensionStart").attr("class","marker extension "+r).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",a+"_"+r+"-extensionEnd").attr("class","marker extension "+r).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},composition:(t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-compositionStart").attr("class","marker composition "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-compositionEnd").attr("class","marker composition "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},aggregation:(t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-aggregationStart").attr("class","marker aggregation "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-aggregationEnd").attr("class","marker aggregation "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},dependency:(t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-dependencyStart").attr("class","marker dependency "+e).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-dependencyEnd").attr("class","marker dependency "+e).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},lollipop:(t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-lollipopStart").attr("class","marker lollipop "+e).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),t.append("defs").append("marker").attr("id",r+"_"+e+"-lollipopEnd").attr("class","marker lollipop "+e).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},point:(t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-pointEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",6).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-pointStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},circle:(t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-circleEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-circleStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},cross:(t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-crossEnd").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-crossStart").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},barb:(t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")}},s=(t,e,r,a)=>{e.forEach(e=>{l[e](t,r,a)})},d=(t,a,i,n)=>{let l=t||"";if("object"==typeof l&&(l=l[0]),(0,e.m)((0,e.c)().flowchart.htmlLabels)){var s,d;let t,i,h,o;return l=l.replace(/\\n|\n/g,"<br />"),e.l.debug("vertexText"+l),s={isNode:n,label:(0,e.M)(l).replace(/fa[blrs]?:fa-[\w-]+/g,t=>`<i class='${t.replace(":"," ")}'></i>`),labelStyle:a.replace("fill:","color:")},i=(t=(0,r.select)(document.createElementNS("http://www.w3.org/2000/svg","foreignObject"))).append("xhtml:div"),h=s.label,o=s.isNode?"nodeLabel":"edgeLabel",i.html('<span class="'+o+'" '+(s.labelStyle?'style="'+s.labelStyle+'"':"")+">"+h+"</span>"),(d=s.labelStyle)&&i.attr("style",d),i.style("display","inline-block"),i.style("white-space","nowrap"),i.attr("xmlns","http://www.w3.org/1999/xhtml"),t.node()}{let t=document.createElementNS("http://www.w3.org/2000/svg","text");t.setAttribute("style",a.replace("color:","fill:"));for(let e of"string"==typeof l?l.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(l)?l:[]){let r=document.createElementNS("http://www.w3.org/2000/svg","tspan");r.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),r.setAttribute("dy","1em"),r.setAttribute("x","0"),i?r.setAttribute("class","title-row"):r.setAttribute("class","row"),r.textContent=e.trim(),t.appendChild(r)}return t}},h=async(t,a,i,l)=>{let s,h,o=a.useHtmlLabels||(0,e.m)((0,e.c)().flowchart.htmlLabels),c=t.insert("g").attr("class",i||"node default").attr("id",a.domId||a.id),y=c.insert("g").attr("class","label").attr("style",a.labelStyle);s=void 0===a.labelText?"":"string"==typeof a.labelText?a.labelText:a.labelText[0];let p=y.node(),g=(h="markdown"===a.labelType?(0,n.a)(y,(0,e.d)((0,e.M)(s),(0,e.c)()),{useHtmlLabels:o,width:a.width||(0,e.c)().flowchart.wrappingWidth,classes:"markdown-node-label"}):p.appendChild(d((0,e.d)((0,e.M)(s),(0,e.c)()),a.labelStyle,!1,l))).getBBox(),x=a.padding/2;if((0,e.m)((0,e.c)().flowchart.htmlLabels)){let t=h.children[0],a=(0,r.select)(h),i=t.getElementsByTagName("img");if(i){let t=""===s.replace(/<img[^>]*>/g,"").trim();await Promise.all([...i].map(r=>new Promise(a=>{function i(){if(r.style.display="flex",r.style.flexDirection="column",t){let t=5*parseInt((0,e.c)().fontSize?(0,e.c)().fontSize:window.getComputedStyle(document.body).fontSize,10)+"px";r.style.minWidth=t,r.style.maxWidth=t}else r.style.width="100%";a(r)}setTimeout(()=>{r.complete&&i()}),r.addEventListener("error",i),r.addEventListener("load",i)})))}g=t.getBoundingClientRect(),a.attr("width",g.width),a.attr("height",g.height)}return o?y.attr("transform","translate("+-g.width/2+", "+-g.height/2+")"):y.attr("transform","translate(0, "+-g.height/2+")"),a.centerLabel&&y.attr("transform","translate("+-g.width/2+", "+-g.height/2+")"),y.insert("rect",":first-child"),{shapeSvg:c,bbox:g,halfPadding:x,label:y}},o=(t,e)=>{let r=e.node().getBBox();t.width=r.width,t.height=r.height};function c(t,e,r,a){return t.insert("polygon",":first-child").attr("points",a.map(function(t){return t.x+","+t.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+r/2+")")}let y=(t,e)=>{var r,a,i=t.x,n=t.y,l=e.x-i,s=e.y-n,d=t.width/2,h=t.height/2;return Math.abs(s)*d>Math.abs(l)*h?(s<0&&(h=-h),r=0===s?0:h*l/s,a=h):(l<0&&(d=-d),r=d,a=0===l?0:d*s/l),{x:i+r,y:n+a}},p=function(t,e,r){var a,i,n,l,s,d,h,o,c,y,p;return a=t,i=e,n=e,l=r,s=a.x,d=a.y,h=s-l.x,c=Math.sqrt(i*i*(o=d-l.y)*o+n*n*h*h),y=Math.abs(i*n*h/c),l.x<s&&(y=-y),p=Math.abs(i*n*o/c),l.y<d&&(p=-p),{x:s+y,y:d+p}},g=function(t,e,r){var a=t.x,i=t.y,n=[],l=1/0,s=1/0;"function"==typeof e.forEach?e.forEach(function(t){l=Math.min(l,t.x),s=Math.min(s,t.y)}):(l=Math.min(l,e.x),s=Math.min(s,e.y));for(var d=a-t.width/2-l,h=i-t.height/2-s,o=0;o<e.length;o++){var c=e[o],y=e[o<e.length-1?o+1:0],p=function(t,e,r,a){var i,n,l,s,d,h,o,c,y,p,g,x,f;if(i=e.y-t.y,l=t.x-e.x,d=e.x*t.y-t.x*e.y,y=i*r.x+l*r.y+d,p=i*a.x+l*a.y+d,0===y||0===p||!(y*p>0)){if((n=a.y-r.y,s=r.x-a.x,h=a.x*r.y-r.x*a.y,o=n*t.x+s*t.y+h,c=n*e.x+s*e.y+h,!(0!==o&&0!==c&&o*c>0))&&0!=(g=i*s-n*l))return x=Math.abs(g/2),{x:(f=l*h-s*d)<0?(f-x)/g:(f+x)/g,y:(f=n*d-i*h)<0?(f-x)/g:(f+x)/g}}}(t,r,{x:d+c.x,y:h+c.y},{x:d+y.x,y:h+y.y});p&&n.push(p)}return n.length?(n.length>1&&n.sort(function(t,e){var a=t.x-r.x,i=t.y-r.y,n=Math.sqrt(a*a+i*i),l=e.x-r.x,s=e.y-r.y,d=Math.sqrt(l*l+s*s);return n<d?-1:+(n!==d)}),n[0]):t},x=t=>t?" "+t:"",f=(t,e)=>`${e||"node default"}${x(t.classes)} ${x(t.class)}`,u=async(t,r)=>{let{shapeSvg:a,bbox:i}=await h(t,r,f(r,void 0),!0),n=i.width+r.padding+(i.height+r.padding),l=[{x:n/2,y:0},{x:n,y:-n/2},{x:n/2,y:-n},{x:0,y:-n/2}];e.l.info("Question main (Circle)");let s=c(a,n,n,l);return s.attr("style",r.style),o(r,s),r.intersect=function(t){return e.l.warn("Intersect called"),g(r,l,t)},a};function w(t,r,a,i){let n=[],l=t=>{n.push(t,0)},s=t=>{n.push(0,t)};r.includes("t")?(e.l.debug("add top border"),l(a)):s(a),r.includes("r")?(e.l.debug("add right border"),l(i)):s(i),r.includes("b")?(e.l.debug("add bottom border"),l(a)):s(a),r.includes("l")?(e.l.debug("add left border"),l(i)):s(i),t.attr("stroke-dasharray",n.join(" "))}let b=(t,e,r)=>{let a=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),i=70,n=10;return"LR"===r&&(i=10,n=70),o(e,a.append("rect").attr("x",-1*i/2).attr("y",-1*n/2).attr("width",i).attr("height",n).attr("class","fork-join")),e.height=e.height+e.padding/2,e.width=e.width+e.padding/2,e.intersect=function(t){return y(e,t)},a},m={rhombus:u,composite:async(t,r)=>{let{shapeSvg:a,bbox:i,halfPadding:n}=await h(t,r,"node "+r.classes,!0),l=a.insert("rect",":first-child"),s=r.positioned?r.width:i.width+r.padding,d=r.positioned?r.height:i.height+r.padding,c=r.positioned?-s/2:-i.width/2-n,p=r.positioned?-d/2:-i.height/2-n;if(l.attr("class","basic cluster composite label-container").attr("style",r.style).attr("rx",r.rx).attr("ry",r.ry).attr("x",c).attr("y",p).attr("width",s).attr("height",d),r.props){let t=new Set(Object.keys(r.props));r.props.borders&&(w(l,r.props.borders,s,d),t.delete("borders")),t.forEach(t=>{e.l.warn(`Unknown node property ${t}`)})}return o(r,l),r.intersect=function(t){return y(r,t)},a},question:u,rect:async(t,r)=>{let{shapeSvg:a,bbox:i,halfPadding:n}=await h(t,r,"node "+r.classes+" "+r.class,!0),l=a.insert("rect",":first-child"),s=r.positioned?r.width:i.width+r.padding,d=r.positioned?r.height:i.height+r.padding,c=r.positioned?-s/2:-i.width/2-n,p=r.positioned?-d/2:-i.height/2-n;if(l.attr("class","basic label-container").attr("style",r.style).attr("rx",r.rx).attr("ry",r.ry).attr("x",c).attr("y",p).attr("width",s).attr("height",d),r.props){let t=new Set(Object.keys(r.props));r.props.borders&&(w(l,r.props.borders,s,d),t.delete("borders")),t.forEach(t=>{e.l.warn(`Unknown node property ${t}`)})}return o(r,l),r.intersect=function(t){return y(r,t)},a},labelRect:async(t,r)=>{let{shapeSvg:a}=await h(t,r,"label",!0);e.l.trace("Classes = ",r.class);let i=a.insert("rect",":first-child");if(i.attr("width",0).attr("height",0),a.attr("class","label edgeLabel"),r.props){let t=new Set(Object.keys(r.props));r.props.borders&&(w(i,r.props.borders,0,0),t.delete("borders")),t.forEach(t=>{e.l.warn(`Unknown node property ${t}`)})}return o(r,i),r.intersect=function(t){return y(r,t)},a},rectWithTitle:(t,a)=>{let i;i=a.classes?"node "+a.classes:"node default";let n=t.insert("g").attr("class",i).attr("id",a.domId||a.id),l=n.insert("rect",":first-child"),s=n.insert("line"),h=n.insert("g").attr("class","label"),c=a.labelText.flat?a.labelText.flat():a.labelText,p="";p="object"==typeof c?c[0]:c,e.l.info("Label text abc79",p,c,"object"==typeof c);let g=h.node().appendChild(d(p,a.labelStyle,!0,!0)),x={width:0,height:0};if((0,e.m)((0,e.c)().flowchart.htmlLabels)){let t=g.children[0],e=(0,r.select)(g);x=t.getBoundingClientRect(),e.attr("width",x.width),e.attr("height",x.height)}e.l.info("Text 2",c);let f=c.slice(1,c.length),u=g.getBBox(),w=h.node().appendChild(d(f.join?f.join("<br/>"):f,a.labelStyle,!0,!0));if((0,e.m)((0,e.c)().flowchart.htmlLabels)){let t=w.children[0],e=(0,r.select)(w);x=t.getBoundingClientRect(),e.attr("width",x.width),e.attr("height",x.height)}let b=a.padding/2;return(0,r.select)(w).attr("transform","translate( "+(x.width>u.width?0:(u.width-x.width)/2)+", "+(u.height+b+5)+")"),(0,r.select)(g).attr("transform","translate( "+(x.width<u.width?0:-(u.width-x.width)/2)+", 0)"),x=h.node().getBBox(),h.attr("transform","translate("+-x.width/2+", "+(-x.height/2-b+3)+")"),l.attr("class","outer title-state").attr("x",-x.width/2-b).attr("y",-x.height/2-b).attr("width",x.width+a.padding).attr("height",x.height+a.padding),s.attr("class","divider").attr("x1",-x.width/2-b).attr("x2",x.width/2+b).attr("y1",-x.height/2-b+u.height+b).attr("y2",-x.height/2-b+u.height+b),o(a,l),a.intersect=function(t){return y(a,t)},n},choice:(t,e)=>{let r=t.insert("g").attr("class","node default").attr("id",e.domId||e.id);return r.insert("polygon",":first-child").attr("points",[{x:0,y:14},{x:14,y:0},{x:0,y:-14},{x:-14,y:0}].map(function(t){return t.x+","+t.y}).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),e.width=28,e.height=28,e.intersect=function(t){return p(e,14,t)},r},circle:async(t,r)=>{let{shapeSvg:a,bbox:i,halfPadding:n}=await h(t,r,f(r,void 0),!0),l=a.insert("circle",":first-child");return l.attr("style",r.style).attr("rx",r.rx).attr("ry",r.ry).attr("r",i.width/2+n).attr("width",i.width+r.padding).attr("height",i.height+r.padding),e.l.info("Circle main"),o(r,l),r.intersect=function(t){return e.l.info("Circle intersect",r,i.width/2+n,t),p(r,i.width/2+n,t)},a},doublecircle:async(t,r)=>{let{shapeSvg:a,bbox:i,halfPadding:n}=await h(t,r,f(r,void 0),!0),l=a.insert("g",":first-child"),s=l.insert("circle"),d=l.insert("circle");return l.attr("class",r.class),s.attr("style",r.style).attr("rx",r.rx).attr("ry",r.ry).attr("r",i.width/2+n+5).attr("width",i.width+r.padding+10).attr("height",i.height+r.padding+10),d.attr("style",r.style).attr("rx",r.rx).attr("ry",r.ry).attr("r",i.width/2+n).attr("width",i.width+r.padding).attr("height",i.height+r.padding),e.l.info("DoubleCircle main"),o(r,s),r.intersect=function(t){return e.l.info("DoubleCircle intersect",r,i.width/2+n+5,t),p(r,i.width/2+n+5,t)},a},stadium:async(t,e)=>{let{shapeSvg:r,bbox:a}=await h(t,e,f(e,void 0),!0),i=a.height+e.padding,n=a.width+i/4+e.padding,l=r.insert("rect",":first-child").attr("style",e.style).attr("rx",i/2).attr("ry",i/2).attr("x",-n/2).attr("y",-i/2).attr("width",n).attr("height",i);return o(e,l),e.intersect=function(t){return y(e,t)},r},hexagon:async(t,e)=>{let{shapeSvg:r,bbox:a}=await h(t,e,f(e,void 0),!0),i=a.height+e.padding,n=i/4,l=a.width+2*n+e.padding,s=[{x:n,y:0},{x:l-n,y:0},{x:l,y:-i/2},{x:l-n,y:-i},{x:n,y:-i},{x:0,y:-i/2}],d=c(r,l,i,s);return d.attr("style",e.style),o(e,d),e.intersect=function(t){return g(e,s,t)},r},block_arrow:async(t,e)=>{var r;let a,i,n,l,s,{shapeSvg:d,bbox:y}=await h(t,e,void 0,!0),p=y.height+2*e.padding,x=p/2,f=y.width+2*x+e.padding,u=(r=e.directions,a=(t=>{let e=new Set;for(let r of t)switch(r){case"x":e.add("right"),e.add("left");break;case"y":e.add("up"),e.add("down");break;default:e.add(r)}return e})(r),n=(i=y.height+2*e.padding)/2,l=y.width+2*n+e.padding,s=e.padding/2,a.has("right")&&a.has("left")&&a.has("up")&&a.has("down")?[{x:0,y:0},{x:n,y:0},{x:l/2,y:2*s},{x:l-n,y:0},{x:l,y:0},{x:l,y:-i/3},{x:l+2*s,y:-i/2},{x:l,y:-2*i/3},{x:l,y:-i},{x:l-n,y:-i},{x:l/2,y:-i-2*s},{x:n,y:-i},{x:0,y:-i},{x:0,y:-2*i/3},{x:-2*s,y:-i/2},{x:0,y:-i/3}]:a.has("right")&&a.has("left")&&a.has("up")?[{x:n,y:0},{x:l-n,y:0},{x:l,y:-i/2},{x:l-n,y:-i},{x:n,y:-i},{x:0,y:-i/2}]:a.has("right")&&a.has("left")&&a.has("down")?[{x:0,y:0},{x:n,y:-i},{x:l-n,y:-i},{x:l,y:0}]:a.has("right")&&a.has("up")&&a.has("down")?[{x:0,y:0},{x:l,y:-n},{x:l,y:-i+n},{x:0,y:-i}]:a.has("left")&&a.has("up")&&a.has("down")?[{x:l,y:0},{x:0,y:-n},{x:0,y:-i+n},{x:l,y:-i}]:a.has("right")&&a.has("left")?[{x:n,y:0},{x:n,y:-s},{x:l-n,y:-s},{x:l-n,y:0},{x:l,y:-i/2},{x:l-n,y:-i},{x:l-n,y:-i+s},{x:n,y:-i+s},{x:n,y:-i},{x:0,y:-i/2}]:a.has("up")&&a.has("down")?[{x:l/2,y:0},{x:0,y:-s},{x:n,y:-s},{x:n,y:-i+s},{x:0,y:-i+s},{x:l/2,y:-i},{x:l,y:-i+s},{x:l-n,y:-i+s},{x:l-n,y:-s},{x:l,y:-s}]:a.has("right")&&a.has("up")?[{x:0,y:0},{x:l,y:-n},{x:0,y:-i}]:a.has("right")&&a.has("down")?[{x:0,y:0},{x:l,y:0},{x:0,y:-i}]:a.has("left")&&a.has("up")?[{x:l,y:0},{x:0,y:-n},{x:l,y:-i}]:a.has("left")&&a.has("down")?[{x:l,y:0},{x:0,y:0},{x:l,y:-i}]:a.has("right")?[{x:n,y:-s},{x:n,y:-s},{x:l-n,y:-s},{x:l-n,y:0},{x:l,y:-i/2},{x:l-n,y:-i},{x:l-n,y:-i+s},{x:n,y:-i+s},{x:n,y:-i+s}]:a.has("left")?[{x:n,y:0},{x:n,y:-s},{x:l-n,y:-s},{x:l-n,y:-i+s},{x:n,y:-i+s},{x:n,y:-i},{x:0,y:-i/2}]:a.has("up")?[{x:n,y:-s},{x:n,y:-i+s},{x:0,y:-i+s},{x:l/2,y:-i},{x:l,y:-i+s},{x:l-n,y:-i+s},{x:l-n,y:-s}]:a.has("down")?[{x:l/2,y:0},{x:0,y:-s},{x:n,y:-s},{x:n,y:-i+s},{x:l-n,y:-i+s},{x:l-n,y:-s},{x:l,y:-s}]:[{x:0,y:0}]),w=c(d,f,p,u);return w.attr("style",e.style),o(e,w),e.intersect=function(t){return g(e,u,t)},d},rect_left_inv_arrow:async(t,e)=>{let{shapeSvg:r,bbox:a}=await h(t,e,f(e,void 0),!0),i=a.width+e.padding,n=a.height+e.padding,l=[{x:-n/2,y:0},{x:i,y:0},{x:i,y:-n},{x:-n/2,y:-n},{x:0,y:-n/2}];return c(r,i,n,l).attr("style",e.style),e.width=i+n,e.height=n,e.intersect=function(t){return g(e,l,t)},r},lean_right:async(t,e)=>{let{shapeSvg:r,bbox:a}=await h(t,e,f(e),!0),i=a.width+e.padding,n=a.height+e.padding,l=[{x:-2*n/6,y:0},{x:i-n/6,y:0},{x:i+2*n/6,y:-n},{x:n/6,y:-n}],s=c(r,i,n,l);return s.attr("style",e.style),o(e,s),e.intersect=function(t){return g(e,l,t)},r},lean_left:async(t,e)=>{let{shapeSvg:r,bbox:a}=await h(t,e,f(e,void 0),!0),i=a.width+e.padding,n=a.height+e.padding,l=[{x:2*n/6,y:0},{x:i+n/6,y:0},{x:i-2*n/6,y:-n},{x:-n/6,y:-n}],s=c(r,i,n,l);return s.attr("style",e.style),o(e,s),e.intersect=function(t){return g(e,l,t)},r},trapezoid:async(t,e)=>{let{shapeSvg:r,bbox:a}=await h(t,e,f(e,void 0),!0),i=a.width+e.padding,n=a.height+e.padding,l=[{x:-2*n/6,y:0},{x:i+2*n/6,y:0},{x:i-n/6,y:-n},{x:n/6,y:-n}],s=c(r,i,n,l);return s.attr("style",e.style),o(e,s),e.intersect=function(t){return g(e,l,t)},r},inv_trapezoid:async(t,e)=>{let{shapeSvg:r,bbox:a}=await h(t,e,f(e,void 0),!0),i=a.width+e.padding,n=a.height+e.padding,l=[{x:n/6,y:0},{x:i-n/6,y:0},{x:i+2*n/6,y:-n},{x:-2*n/6,y:-n}],s=c(r,i,n,l);return s.attr("style",e.style),o(e,s),e.intersect=function(t){return g(e,l,t)},r},rect_right_inv_arrow:async(t,e)=>{let{shapeSvg:r,bbox:a}=await h(t,e,f(e,void 0),!0),i=a.width+e.padding,n=a.height+e.padding,l=[{x:0,y:0},{x:i+n/2,y:0},{x:i,y:-n/2},{x:i+n/2,y:-n},{x:0,y:-n}],s=c(r,i,n,l);return s.attr("style",e.style),o(e,s),e.intersect=function(t){return g(e,l,t)},r},cylinder:async(t,e)=>{let{shapeSvg:r,bbox:a}=await h(t,e,f(e,void 0),!0),i=a.width+e.padding,n=i/2,l=n/(2.5+i/50),s=a.height+l+e.padding,d="M 0,"+l+" a "+n+","+l+" 0,0,0 "+i+" 0 a "+n+","+l+" 0,0,0 "+-i+" 0 l 0,"+s+" a "+n+","+l+" 0,0,0 "+i+" 0 l 0,"+-s,c=r.attr("label-offset-y",l).insert("path",":first-child").attr("style",e.style).attr("d",d).attr("transform","translate("+-i/2+","+-(s/2+l)+")");return o(e,c),e.intersect=function(t){let r=y(e,t),a=r.x-e.x;if(0!=n&&(Math.abs(a)<e.width/2||Math.abs(a)==e.width/2&&Math.abs(r.y-e.y)>e.height/2-l)){let i=l*l*(1-a*a/(n*n));0!=i&&(i=Math.sqrt(i)),i=l-i,t.y-e.y>0&&(i=-i),r.y+=i}return r},r},start:(t,e)=>{let r=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),a=r.insert("circle",":first-child");return a.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),o(e,a),e.intersect=function(t){return p(e,7,t)},r},end:(t,e)=>{let r=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),a=r.insert("circle",":first-child"),i=r.insert("circle",":first-child");return i.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),a.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),o(e,i),e.intersect=function(t){return p(e,7,t)},r},note:async(t,r)=>{r.useHtmlLabels||(0,e.c)().flowchart.htmlLabels||(r.centerLabel=!0);let{shapeSvg:a,bbox:i,halfPadding:n}=await h(t,r,"node "+r.classes,!0);e.l.info("Classes = ",r.classes);let l=a.insert("rect",":first-child");return l.attr("rx",r.rx).attr("ry",r.ry).attr("x",-i.width/2-n).attr("y",-i.height/2-n).attr("width",i.width+r.padding).attr("height",i.height+r.padding),o(r,l),r.intersect=function(t){return y(r,t)},a},subroutine:async(t,e)=>{let{shapeSvg:r,bbox:a}=await h(t,e,f(e,void 0),!0),i=a.width+e.padding,n=a.height+e.padding,l=[{x:0,y:0},{x:i,y:0},{x:i,y:-n},{x:0,y:-n},{x:0,y:0},{x:-8,y:0},{x:i+8,y:0},{x:i+8,y:-n},{x:-8,y:-n},{x:-8,y:0}],s=c(r,i,n,l);return s.attr("style",e.style),o(e,s),e.intersect=function(t){return g(e,l,t)},r},fork:b,join:b,class_box:(t,a)=>{let i,n=a.padding/2;i=a.classes?"node "+a.classes:"node default";let l=t.insert("g").attr("class",i).attr("id",a.domId||a.id),s=l.insert("rect",":first-child"),h=l.insert("line"),c=l.insert("line"),p=0,g=4,x=l.insert("g").attr("class","label"),f=0,u=a.classData.annotations&&a.classData.annotations[0],w=a.classData.annotations[0]?"«"+a.classData.annotations[0]+"»":"",b=x.node().appendChild(d(w,a.labelStyle,!0,!0)),m=b.getBBox();if((0,e.m)((0,e.c)().flowchart.htmlLabels)){let t=b.children[0],e=(0,r.select)(b);m=t.getBoundingClientRect(),e.attr("width",m.width),e.attr("height",m.height)}a.classData.annotations[0]&&(g+=m.height+4,p+=m.width);let k=a.classData.label;void 0!==a.classData.type&&""!==a.classData.type&&((0,e.c)().flowchart.htmlLabels?k+="&lt;"+a.classData.type+"&gt;":k+="<"+a.classData.type+">");let _=x.node().appendChild(d(k,a.labelStyle,!0,!0));(0,r.select)(_).attr("class","classTitle");let L=_.getBBox();if((0,e.m)((0,e.c)().flowchart.htmlLabels)){let t=_.children[0],e=(0,r.select)(_);L=t.getBoundingClientRect(),e.attr("width",L.width),e.attr("height",L.height)}g+=L.height+4,L.width>p&&(p=L.width);let $=[];a.classData.members.forEach(t=>{let i=t.getDisplayDetails(),n=i.displayText;(0,e.c)().flowchart.htmlLabels&&(n=n.replace(/</g,"&lt;").replace(/>/g,"&gt;"));let l=x.node().appendChild(d(n,i.cssStyle?i.cssStyle:a.labelStyle,!0,!0)),s=l.getBBox();if((0,e.m)((0,e.c)().flowchart.htmlLabels)){let t=l.children[0],e=(0,r.select)(l);s=t.getBoundingClientRect(),e.attr("width",s.width),e.attr("height",s.height)}s.width>p&&(p=s.width),g+=s.height+4,$.push(l)}),g+=8;let v=[];if(a.classData.methods.forEach(t=>{let i=t.getDisplayDetails(),n=i.displayText;(0,e.c)().flowchart.htmlLabels&&(n=n.replace(/</g,"&lt;").replace(/>/g,"&gt;"));let l=x.node().appendChild(d(n,i.cssStyle?i.cssStyle:a.labelStyle,!0,!0)),s=l.getBBox();if((0,e.m)((0,e.c)().flowchart.htmlLabels)){let t=l.children[0],e=(0,r.select)(l);s=t.getBoundingClientRect(),e.attr("width",s.width),e.attr("height",s.height)}s.width>p&&(p=s.width),g+=s.height+4,v.push(l)}),g+=8,u){let t=(p-m.width)/2;(0,r.select)(b).attr("transform","translate( "+(-1*p/2+t)+", "+-1*g/2+")"),f=m.height+4}let M=(p-L.width)/2;return(0,r.select)(_).attr("transform","translate( "+(-1*p/2+M)+", "+(-1*g/2+f)+")"),f+=L.height+4,h.attr("class","divider").attr("x1",-p/2-n).attr("x2",p/2+n).attr("y1",-g/2-n+8+f).attr("y2",-g/2-n+8+f),f+=8,$.forEach(t=>{(0,r.select)(t).attr("transform","translate( "+-p/2+", "+(-1*g/2+f+4)+")");let e=null==t?void 0:t.getBBox();f+=((null==e?void 0:e.height)??0)+4}),f+=8,c.attr("class","divider").attr("x1",-p/2-n).attr("x2",p/2+n).attr("y1",-g/2-n+8+f).attr("y2",-g/2-n+8+f),f+=8,v.forEach(t=>{(0,r.select)(t).attr("transform","translate( "+-p/2+", "+(-1*g/2+f)+")");let e=null==t?void 0:t.getBBox();f+=((null==e?void 0:e.height)??0)+4}),s.attr("style",a.style).attr("class","outer title-state").attr("x",-p/2-n).attr("y",-(g/2)-n).attr("width",p+a.padding).attr("height",g+a.padding),o(a,s),a.intersect=function(t){return y(a,t)},l}},k={},_=async(t,r,a)=>{let i,n;if(r.link){let l;"sandbox"===(0,e.c)().securityLevel?l="_top":r.linkTarget&&(l=r.linkTarget||"_blank"),i=t.insert("svg:a").attr("xlink:href",r.link).attr("target",l),n=await m[r.shape](i,r,a)}else i=n=await m[r.shape](t,r,a);return r.tooltip&&n.attr("title",r.tooltip),r.class&&n.attr("class","node default "+r.class),i.attr("data-node","true"),i.attr("data-id",r.id),k[r.id]=i,r.haveCallback&&k[r.id].attr("class",k[r.id].attr("class")+" clickable"),i},L=(t,e)=>{k[e.id]=t},$=()=>{k={}},v=t=>{let r=k[t.id];e.l.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");let a=t.diff||0;return t.clusterNode?r.attr("transform","translate("+(t.x+a-t.width/2)+", "+(t.y-t.height/2-8)+")"):r.attr("transform","translate("+t.x+", "+t.y+")"),a},M=({flowchart:t})=>{var e,r;let a=(null==(e=null==t?void 0:t.subGraphTitleMargin)?void 0:e.top)??0,i=(null==(r=null==t?void 0:t.subGraphTitleMargin)?void 0:r.bottom)??0;return{subGraphTitleTopMargin:a,subGraphTitleBottomMargin:i,subGraphTitleTotalMargin:a+i}},S={aggregation:18,extension:18,composition:18,dependency:6,lollipop:13.5,arrow_point:5.3};function T(t,e){if(void 0===t||void 0===e)return{angle:0,deltaX:0,deltaY:0};t=B(t),e=B(e);let[r,a]=[t.x,t.y],[i,n]=[e.x,e.y],l=i-r,s=n-a;return{angle:Math.atan(s/l),deltaX:l,deltaY:s}}let B=t=>Array.isArray(t)?{x:t[0],y:t[1]}:t,C=t=>({x:function(e,r,a){let i=0;if(0===r&&Object.hasOwn(S,t.arrowTypeStart)){let{angle:e,deltaX:r}=T(a[0],a[1]);i=S[t.arrowTypeStart]*Math.cos(e)*(r>=0?1:-1)}else if(r===a.length-1&&Object.hasOwn(S,t.arrowTypeEnd)){let{angle:e,deltaX:r}=T(a[a.length-1],a[a.length-2]);i=S[t.arrowTypeEnd]*Math.cos(e)*(r>=0?1:-1)}return B(e).x+i},y:function(e,r,a){let i=0;if(0===r&&Object.hasOwn(S,t.arrowTypeStart)){let{angle:e,deltaY:r}=T(a[0],a[1]);i=S[t.arrowTypeStart]*Math.abs(Math.sin(e))*(r>=0?1:-1)}else if(r===a.length-1&&Object.hasOwn(S,t.arrowTypeEnd)){let{angle:e,deltaY:r}=T(a[a.length-1],a[a.length-2]);i=S[t.arrowTypeEnd]*Math.abs(Math.sin(e))*(r>=0?1:-1)}return B(e).y+i}}),E=(t,e,r,a,i)=>{e.arrowTypeStart&&R(t,"start",e.arrowTypeStart,r,a,i),e.arrowTypeEnd&&R(t,"end",e.arrowTypeEnd,r,a,i)},P={arrow_cross:"cross",arrow_point:"point",arrow_barb:"barb",arrow_circle:"circle",aggregation:"aggregation",extension:"extension",composition:"composition",dependency:"dependency",lollipop:"lollipop"},R=(t,r,a,i,n,l)=>{let s=P[a];s?t.attr(`marker-${r}`,`url(${i}#${n}_${l}-${s}${"start"===r?"Start":"End"})`):e.l.warn(`Unknown arrow type: ${a}`)},O={},W={},j=()=>{O={},W={}},A=(t,a)=>{let i,l=(0,e.m)((0,e.c)().flowchart.htmlLabels),s="markdown"===a.labelType?(0,n.a)(t,a.label,{style:a.labelStyle,useHtmlLabels:l,addSvgBackground:!0}):d(a.label,a.labelStyle),h=t.insert("g").attr("class","edgeLabel"),o=h.insert("g").attr("class","label");o.node().appendChild(s);let c=s.getBBox();if(l){let t=s.children[0],e=(0,r.select)(s);c=t.getBoundingClientRect(),e.attr("width",c.width),e.attr("height",c.height)}if(o.attr("transform","translate("+-c.width/2+", "+-c.height/2+")"),O[a.id]=h,a.width=c.width,a.height=c.height,a.startLabelLeft){let e=d(a.startLabelLeft,a.labelStyle),r=t.insert("g").attr("class","edgeTerminals"),n=r.insert("g").attr("class","inner");i=n.node().appendChild(e);let l=e.getBBox();n.attr("transform","translate("+-l.width/2+", "+-l.height/2+")"),W[a.id]||(W[a.id]={}),W[a.id].startLeft=r,D(i,a.startLabelLeft)}if(a.startLabelRight){let e=d(a.startLabelRight,a.labelStyle),r=t.insert("g").attr("class","edgeTerminals"),n=r.insert("g").attr("class","inner");i=r.node().appendChild(e),n.node().appendChild(e);let l=e.getBBox();n.attr("transform","translate("+-l.width/2+", "+-l.height/2+")"),W[a.id]||(W[a.id]={}),W[a.id].startRight=r,D(i,a.startLabelRight)}if(a.endLabelLeft){let e=d(a.endLabelLeft,a.labelStyle),r=t.insert("g").attr("class","edgeTerminals"),n=r.insert("g").attr("class","inner");i=n.node().appendChild(e);let l=e.getBBox();n.attr("transform","translate("+-l.width/2+", "+-l.height/2+")"),r.node().appendChild(e),W[a.id]||(W[a.id]={}),W[a.id].endLeft=r,D(i,a.endLabelLeft)}if(a.endLabelRight){let e=d(a.endLabelRight,a.labelStyle),r=t.insert("g").attr("class","edgeTerminals"),n=r.insert("g").attr("class","inner");i=n.node().appendChild(e);let l=e.getBBox();n.attr("transform","translate("+-l.width/2+", "+-l.height/2+")"),r.node().appendChild(e),W[a.id]||(W[a.id]={}),W[a.id].endRight=r,D(i,a.endLabelRight)}return s};function D(t,r){(0,e.c)().flowchart.htmlLabels&&t&&(t.style.width=9*r.length+"px",t.style.height="12px")}let H=(t,r)=>{e.l.debug("Moving label abc88 ",t.id,t.label,O[t.id],r);let a=r.updatedPath?r.updatedPath:r.originalPath,{subGraphTitleTotalMargin:i}=M((0,e.c)());if(t.label){let n=O[t.id],l=t.x,s=t.y;if(a){let i=e.u.calcLabelPosition(a);e.l.debug("Moving label "+t.label+" from (",l,",",s,") to (",i.x,",",i.y,") abc88"),r.updatedPath&&(l=i.x,s=i.y)}n.attr("transform",`translate(${l}, ${s+i/2})`)}if(t.startLabelLeft){let r=W[t.id].startLeft,i=t.x,n=t.y;if(a){let r=e.u.calcTerminalLabelPosition(10*!!t.arrowTypeStart,"start_left",a);i=r.x,n=r.y}r.attr("transform",`translate(${i}, ${n})`)}if(t.startLabelRight){let r=W[t.id].startRight,i=t.x,n=t.y;if(a){let r=e.u.calcTerminalLabelPosition(10*!!t.arrowTypeStart,"start_right",a);i=r.x,n=r.y}r.attr("transform",`translate(${i}, ${n})`)}if(t.endLabelLeft){let r=W[t.id].endLeft,i=t.x,n=t.y;if(a){let r=e.u.calcTerminalLabelPosition(10*!!t.arrowTypeEnd,"end_left",a);i=r.x,n=r.y}r.attr("transform",`translate(${i}, ${n})`)}if(t.endLabelRight){let r=W[t.id].endRight,i=t.x,n=t.y;if(a){let r=e.u.calcTerminalLabelPosition(10*!!t.arrowTypeEnd,"end_right",a);i=r.x,n=r.y}r.attr("transform",`translate(${i}, ${n})`)}},U=(t,r)=>{e.l.debug("abc88 cutPathAtIntersect",t,r);let a=[],i=t[0],n=!1;return t.forEach(t=>{let l,s,d,h,o,c;if(l=r.x,s=r.y,d=Math.abs(t.x-l),h=Math.abs(t.y-s),o=r.width/2,c=r.height/2,d>=o||h>=c||n)i=t,n||a.push(t);else{let l=((t,r,a)=>{e.l.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(r)}
  insidePoint : ${JSON.stringify(a)}
  node        : x:${t.x} y:${t.y} w:${t.width} h:${t.height}`);let i=t.x,n=t.y,l=Math.abs(i-a.x),s=t.width/2,d=a.x<r.x?s-l:s+l,h=t.height/2,o=Math.abs(r.y-a.y),c=Math.abs(r.x-a.x);if(Math.abs(n-r.y)*s>Math.abs(i-r.x)*h){let t=a.y<r.y?r.y-h-n:n-h-r.y;d=c*t/o;let i={x:a.x<r.x?a.x+d:a.x-c+d,y:a.y<r.y?a.y+o-t:a.y-o+t};return 0===d&&(i.x=r.x,i.y=r.y),0===c&&(i.x=r.x),0===o&&(i.y=r.y),e.l.debug(`abc89 topp/bott calc, Q ${o}, q ${t}, R ${c}, r ${d}`,i),i}{let t=o*(d=a.x<r.x?r.x-s-i:i-s-r.x)/c,n=a.x<r.x?a.x+c-d:a.x-c+d,l=a.y<r.y?a.y+t:a.y-t;return e.l.debug(`sides calc abc89, Q ${o}, q ${t}, R ${c}, r ${d}`,{_x:n,_y:l}),0===d&&(n=r.x,l=r.y),0===c&&(n=r.x),0===o&&(l=r.y),{x:n,y:l}}})(r,i,t),s=!1;a.forEach(t=>{s=s||t.x===l.x&&t.y===l.y}),a.some(t=>t.x===l.x&&t.y===l.y)||a.push(l),n=!0}}),a},X=function(t,r,n,l,s,d,h){let o,c=n.points;e.l.debug("abc88 InsertEdge: edge=",n,"e=",r);let y=!1,p=d.node(r.v);var g=d.node(r.w);(null==g?void 0:g.intersect)&&(null==p?void 0:p.intersect)&&((c=c.slice(1,n.points.length-1)).unshift(p.intersect(c[0])),c.push(g.intersect(c[c.length-1]))),n.toCluster&&(e.l.debug("to cluster abc88",l[n.toCluster]),c=U(n.points,l[n.toCluster].node),y=!0),n.fromCluster&&(e.l.debug("from cluster abc88",l[n.fromCluster]),c=U(c.reverse(),l[n.fromCluster].node).reverse(),y=!0);let x=c.filter(t=>!Number.isNaN(t.y)),f=i.curveBasis;n.curve&&("graph"===s||"flowchart"===s)&&(f=n.curve);let{x:u,y:w}=C(n),b=(0,a.line)().x(u).y(w).curve(f);switch(n.thickness){case"normal":o="edge-thickness-normal";break;case"thick":case"invisible":o="edge-thickness-thick";break;default:o=""}switch(n.pattern){case"solid":o+=" edge-pattern-solid";break;case"dotted":o+=" edge-pattern-dotted";break;case"dashed":o+=" edge-pattern-dashed"}let m=t.append("path").attr("d",b(x)).attr("id",n.id).attr("class"," "+o+(n.classes?" "+n.classes:"")).attr("style",n.style),k="";((0,e.c)().flowchart.arrowMarkerAbsolute||(0,e.c)().state.arrowMarkerAbsolute)&&(k=(k=(k=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search).replace(/\(/g,"\\(")).replace(/\)/g,"\\)")),E(m,n,k,h,s);let _={};return y&&(_.updatedPath=c),_.originalPath=n.points,_};t.s(["a",()=>s,"b",()=>$,"c",()=>d,"d",()=>j,"e",()=>_,"f",()=>A,"g",()=>M,"h",()=>X,"i",()=>y,"j",()=>H,"k",()=>C,"l",()=>h,"m",()=>E,"p",()=>v,"s",()=>L,"u",()=>o])}]);