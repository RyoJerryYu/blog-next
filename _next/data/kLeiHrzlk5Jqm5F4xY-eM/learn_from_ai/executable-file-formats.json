{"pageProps":{"slug":"executable-file-formats","tags":[{"tag":"Linux","slug":"linux","path":"/tags/linux","postSlugs":[{"postType":"ideas","postPagePath":"/ideas/Linux Systemd"},{"postType":"ideas","postPagePath":"/ideas/Linux ä¿¡å·å¤„ç† â€”â€” Signal"},{"postType":"ideas","postPagePath":"/ideas/Linux å†…å­˜ â€”â€” å†…å­˜åˆ†é¡µã€åˆ†æ®µ"},{"postType":"ideas","postPagePath":"/ideas/Linux å†…å­˜ â€”â€” å †å’Œæ ˆ"},{"postType":"ideas","postPagePath":"/ideas/Linux å†…å­˜ â€”â€” è™šæ‹Ÿå†…å­˜"},{"postType":"ideas","postPagePath":"/ideas/Linux è°ƒåº¦ â€”â€” è¿›ç¨‹ä¸çº¿ç¨‹"},{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/executable-file-formats"}]},{"tag":"Windows","slug":"windows","path":"/tags/windows","postSlugs":[{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/executable-file-formats"}]},{"tag":"macOS","slug":"macos","path":"/tags/macos","postSlugs":[{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/executable-file-formats"}]},{"tag":"å¯æ‰§è¡Œæ–‡ä»¶","slug":"å¯æ‰§è¡Œæ–‡ä»¶","path":"/tags/å¯æ‰§è¡Œæ–‡ä»¶","postSlugs":[{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/executable-file-formats"}]},{"tag":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","path":"/tags/å­¦ä¹ ç¬”è®°","postSlugs":[{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/deep-learning-model-formats"},{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/opencv-coordinate-system-conventions"},{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/executable-file-formats"},{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/lora-matrix-initialization-strategy"},{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/pytorch-backpropagation-mechanism"},{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/mqtt-protocol-principles-applications"},{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/stable-diffusion-unet-structure"},{"postType":"learn_from_ai","postPagePath":"/learn_from_ai/stable-diffusion-lora-training-methods"}]}],"source":{"compiledSource":"\"use strict\";\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = {\n    a: \"a\",\n    blockquote: \"blockquote\",\n    h2: \"h2\",\n    li: \"li\",\n    ol: \"ol\",\n    p: \"p\",\n    strong: \"strong\",\n    ul: \"ul\",\n    ..._provideComponents(),\n    ...props.components\n  };\n  return _jsxs(_Fragment, {\n    children: [_jsxs(_components.blockquote, {\n      children: [\"\\n\", _jsx(_components.p, {\n        children: \"æœ¬æ–‡ä»‹ç»äº†å‡ ç§ä¸»è¦çš„å¯æ‰§è¡Œæ–‡ä»¶æ ¼å¼ï¼ŒåŒ…æ‹¬Linuxç³»ç»Ÿä½¿ç”¨çš„ELFæ ¼å¼ã€Windowsç³»ç»Ÿä½¿ç”¨çš„PEæ ¼å¼ã€ä»¥åŠmacOSç³»ç»Ÿä½¿ç”¨çš„Mach-Oæ ¼å¼ç­‰ã€‚æ–‡ç« è¯¦ç»†è®¨è®ºäº†æ¯ç§æ ¼å¼çš„ç‰¹ç‚¹ã€ä½¿ç”¨å¹³å°å’Œå†å²æ¼”å˜ï¼Œå¸®åŠ©è¯»è€…ç†è§£ä¸åŒæ“ä½œç³»ç»Ÿä¸­äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼çš„å·®å¼‚ã€‚\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      id: \"q-è§£é‡Š-elf-æ‰§è¡Œæ–‡ä»¶\",\n      children: _jsx(_components.a, {\n        href: \"#q-è§£é‡Š-elf-æ‰§è¡Œæ–‡ä»¶\",\n        children: \"Q: è§£é‡Š: ELF æ‰§è¡Œæ–‡ä»¶\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ELFï¼ˆExecutable and Linkable Formatï¼‰æ‰§è¡Œæ–‡ä»¶æ˜¯ä¸€ç§ç”¨äºLinuxå’Œç±»Unixæ“ä½œç³»ç»Ÿçš„æ ‡å‡†äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼ã€‚å®ƒåŒ…å«äº†å¯æ‰§è¡Œç¨‹åºã€å…±äº«åº“ã€ç›®æ ‡æ–‡ä»¶å’Œæ ¸å¿ƒè½¬å‚¨æ–‡ä»¶ã€‚ELFæ–‡ä»¶æ ¼å¼è®¾è®¡çµæ´»ã€å¯æ‰©å±•ï¼Œå¹¶ä¸”å¯ç§»æ¤ï¼Œå®ƒå®šä¹‰äº†ç¨‹åºä»£ç çš„åŠ è½½å’Œæ‰§è¡Œæ–¹å¼ï¼ŒåŒ…æ‹¬ä»£ç æ®µã€æ•°æ®æ®µã€ç¬¦å·è¡¨å’Œé‡å®šä½ä¿¡æ¯ç­‰ã€‚æ“ä½œç³»ç»Ÿæ ¹æ®ELFæ–‡ä»¶ä¸­çš„è¿™äº›ä¿¡æ¯æ¥å’Œæ‰§è¡Œç¨‹åºã€‚ELFæ ¼å¼ä¹Ÿå…è®¸ç¨‹åºå…±äº«åº“ï¼Œå³å¤šä¸ªç¨‹åºå¯ä»¥å…±äº«åŒä¸€æ®µä»£ç ï¼Œä»è€Œå‡å°‘å†…å­˜å ç”¨å¹¶æé«˜æ•ˆç‡ã€‚åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­ï¼ŒELFæ–‡ä»¶ä½œä¸ºç›®æ ‡æ–‡ä»¶æ ¼å¼åœ¨ç¼–è¯‘æ—¶ç”Ÿæˆï¼Œå¹¶æœ€ç»ˆç”±é“¾æ¥å™¨ç»„åˆå½¢æˆå¯æ‰§è¡Œæ–‡ä»¶æˆ–å…±äº«åº“ã€‚\"\n    }), \"\\n\", _jsx(_components.h2, {\n      id: \"q-æœ‰ä¸-elf-ç›¸å¹¶åˆ—çš„å¦å¤–çš„ä¸€äº›äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼å—\",\n      children: _jsx(_components.a, {\n        href: \"#q-æœ‰ä¸-elf-ç›¸å¹¶åˆ—çš„å¦å¤–çš„ä¸€äº›äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼å—\",\n        children: \"Q: æœ‰ä¸ ELF ç›¸å¹¶åˆ—çš„å¦å¤–çš„ä¸€äº›äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼å—ï¼Ÿ\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"æ˜¯çš„ï¼Œé™¤äº†ELFï¼ˆExecutable and Linking Formatï¼‰ä¹‹å¤–ï¼Œè¿˜æœ‰å…¶ä»–å‡ ç§å¸¸è§çš„äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼ï¼Œå®ƒä»¬åœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿå’Œå¹³å°ä¸Šè¢«å¹¿æ³›ä½¿ç”¨ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ä¸»è¦çš„äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼ï¼š\"\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsxs(_components.p, {\n          children: [_jsx(_components.strong, {\n            children: \"PEï¼ˆPortable Executableï¼‰\"\n          }), \"ï¼š\"]\n        }), \"\\n\", _jsxs(_components.ul, {\n          children: [\"\\n\", _jsxs(_components.li, {\n            children: [_jsx(_components.strong, {\n              children: \"ä½¿ç”¨å¹³å°\"\n            }), \"ï¼šä¸»è¦åœ¨Windowsæ“ä½œç³»ç»Ÿä¸Šä½¿ç”¨ã€‚\"]\n          }), \"\\n\", _jsxs(_components.li, {\n            children: [_jsx(_components.strong, {\n              children: \"ç‰¹ç‚¹\"\n            }), \"ï¼šPEæ ¼å¼æ˜¯COFFï¼ˆCommon Object File Formatï¼‰çš„æ‰©å±•ï¼Œç”¨äºå¯æ‰§è¡Œæ–‡ä»¶ã€ç›®æ ‡æ–‡ä»¶ã€åŠ¨æ€é“¾æ¥åº“DLLsï¼‰å’Œé©±åŠ¨ç¨‹åºç­‰ã€‚PEæ–‡ä»¶åŒ…å«ä¸€ä¸ªå¤´éƒ¨ï¼ˆPE headerï¼‰ã€èŠ‚è¡¨ï¼ˆsection tableï¼‰å’Œå„ä¸ªèŠ‚ï¼ˆsectionsï¼‰ï¼Œå¦‚ä»£ç èŠ‚ã€æ•°æ®èŠ‚ç­‰ã€‚\"]\n          }), \"\\n\"]\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsxs(_components.p, {\n          children: [_jsx(_components.strong, {\n            children: \"Mach-Oï¼ˆMach Objectï¼‰\"\n          }), \"ï¼š\"]\n        }), \"\\n\", _jsxs(_components.ul, {\n          children: [\"\\n\", _jsxs(_components.li, {\n            children: [_jsx(_components.strong, {\n              children: \"ä½¿ç”¨å¹³å°\"\n            }), \"ï¼šä¸»è¦åœ¨Appleçš„macOSå’ŒiOSæ“ä½œç³»ç»Ÿä¸Šä½¿ç”¨ã€‚\"]\n          }), \"\\n\", _jsxs(_components.li, {\n            children: [_jsx(_components.strong, {\n              children: \"ç‰¹ç‚¹\"\n            }), \"ï¼šMach-Oæ ¼å¼ç”¨äºå­˜å‚¨å¯æ‰§è¡Œæ–‡ä»¶ã€ç›®æ ‡æ–‡ä»¶å’ŒåŠ¨æ€åº“ã€‚å®ƒåŒ…å«å¤šä¸ªæ®µï¼ˆsegmentså’ŒèŠ‚ï¼ˆsectionsï¼‰ï¼Œæ”¯æŒå¤šç§æ¶æ„ï¼Œå¹¶ä¸”å¯ä»¥åŒ…å«å¤šä¸ªæ¶æ„çš„ä»£ç ï¼ˆç§°ä¸º\\\"fat binary\\\"ï¼‰ã€‚\"]\n          }), \"\\n\"]\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsxs(_components.p, {\n          children: [_jsx(_components.strong, {\n            children: \"COFFï¼ˆCommon Object File Formatï¼‰\"\n          }), \"ï¼š\"]\n        }), \"\\n\", _jsxs(_components.ul, {\n          children: [\"\\n\", _jsxs(_components.li, {\n            children: [_jsx(_components.strong, {\n              children: \"ä½¿ç”¨å¹³å°\"\n            }), \"ï¼šæ—©æœŸåœ¨Unix System Vå’ŒWindows NTä¸Šä½¿ç”¨ã€‚\"]\n          }), \"\\n\", _jsxs(_components.li, {\n            children: [_jsx(_components.strong, {\n              children: \"ç‰¹ç‚¹\"\n            }), \"ï¼šCOFFæ ¼å¼æ˜¯ä¸€ç§é€šç”¨çš„ç›®æ ‡æ–‡ä»¶æ ¼å¼ï¼ŒåŒ…å«ä»£ç ã€æ•°æ®å’Œé‡å®šä½ä¿¡æ¯ã€‚è™½ç„¶ç°åœ¨è¾ƒå°‘ç›´æ¥ä½¿ç”¨ï¼Œä½†å®ƒçš„è®¸å¤šæ¦‚å¿µå’Œç»“æ„è¢«PEå’ŒELFç»§æ‰¿ã€‚\"]\n          }), \"\\n\"]\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsxs(_components.p, {\n          children: [_jsx(_components.strong, {\n            children: \"a.outï¼ˆAssembler Outputï¼‰\"\n          }), \"ï¼š\"]\n        }), \"\\n\", _jsxs(_components.ul, {\n          children: [\"\\n\", _jsxs(_components.li, {\n            children: [_jsx(_components.strong, {\n              children: \"ä½¿ç”¨å¹³å°\"\n            }), \"ï¼šæ—©æœŸUnixç³»ç»Ÿä¸Šä½¿ç”¨ã€‚\"]\n          }), \"\\n\", _jsxs(_components.li, {\n            children: [_jsx(_components.strong, {\n              children: \"ç‰¹ç‚¹\"\n            }), \"ï¼ša.outæ˜¯ä¸€ç§è¾ƒç®€å•çš„äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼ï¼ŒåŒ…å«å¯æ‰§è¡Œä»£ç ã€æ•°æ®å’Œç¬¦å·è¡¨ã€‚éšç€ELFæ ¼å¼çš„å‡ºç°ï¼Œa.outé€æ¸è¢«æ·˜æ±°ã€‚\"]\n          }), \"\\n\"]\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsxs(_components.p, {\n          children: [_jsx(_components.strong, {\n            children: \"DOS MZï¼ˆMark Zbikowskiï¼‰\"\n          }), \"ï¼š\"]\n        }), \"\\n\", _jsxs(_components.ul, {\n          children: [\"\\n\", _jsxs(_components.li, {\n            children: [_jsx(_components.strong, {\n              children: \"ä½¿ç”¨å¹³å°\"\n            }), \"ï¼šæ—©æœŸDOSå’ŒWindowsç³»ç»Ÿä¸Šä½¿ç”¨ã€‚\"]\n          }), \"\\n\", _jsxs(_components.li, {\n            children: [_jsx(_components.strong, {\n              children: \"ç‰¹ç‚¹\"\n            }), \"ï¼šDOSZæ ¼å¼æ˜¯DOSå¯æ‰§è¡Œæ–‡ä»¶çš„æ ¼å¼ï¼Œä»¥\\\"MZ\\\"ï¼ˆå¼€å‘è€…Mark Zbikowskiçš„é¦–å­—æ¯ï¼‰ä½œä¸ºæ–‡ä»¶å¤´éƒ¨çš„æ ‡è¯†ã€‚å®ƒè¢«åæ¥çš„PEæ ¼å¼æ‰€å–ä»£ã€‚\"]\n          }), \"\\n\"]\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsxs(_components.p, {\n          children: [_jsx(_components.strong, {\n            children: \"COMæ–‡ä»¶\"\n          }), \"ï¼š\"]\n        }), \"\\n\", _jsxs(_components.ul, {\n          children: [\"\\n\", _jsxs(_components.li, {\n            children: [_jsx(_components.strong, {\n              children: \"ä½¿ç”¨å¹³å°\"\n            }), \"ï¼šæ—©æœŸDOSç³»ç»Ÿä¸Šä½¿ç”¨ã€‚\"]\n          }), \"\\n\", _jsxs(_components.li, {\n            children: [_jsx(_components.strong, {\n              children: \"ç‰¹ç‚¹\"\n            }), \"ï¼šCOMæ–‡ä»¶æ˜¯ä¸€ç§éå¸¸ç®€å•çš„å¯æ‰§è¡Œæ–‡ä»¶æ ¼å¼ï¼Œä»…åŒ…å«ä»£ç å’Œæ•°æ®ï¼Œæ²¡æœ‰å¤´éƒ¨ä¿¡æ¯ï¼Œå¤§å°é™åˆ¶ä¸º64KBã€‚\"]\n          }), \"\\n\"]\n        }), \"\\n\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"è¿™äº›äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼å„æœ‰ç‰¹ç‚¹ï¼Œé€‚ç”¨äºä¸åŒçš„å’Œåœºæ™¯ã€‚å®ƒä»¬åœ¨æ–‡ä»¶ç»“æ„ã€åŠ è½½æœºåˆ¶å’ŒåŠŸèƒ½æ”¯æŒä¸Šæœ‰æ‰€ä¸åŒï¼Œä½†éƒ½æ—¨åœ¨å®ç°ç¨‹åºä»£ç çš„æœ‰æ•ˆå­˜å‚¨å’Œæ‰§è¡Œã€‚\"\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = {\n    ..._provideComponents(),\n    ...props.components\n  };\n  return MDXLayout ? _jsx(MDXLayout, {\n    ...props,\n    children: _jsx(_createMdxContent, {\n      ...props\n    })\n  }) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}},"meta":{"content":"\n> æœ¬æ–‡ä»‹ç»äº†å‡ ç§ä¸»è¦çš„å¯æ‰§è¡Œæ–‡ä»¶æ ¼å¼ï¼ŒåŒ…æ‹¬Linuxç³»ç»Ÿä½¿ç”¨çš„ELFæ ¼å¼ã€Windowsç³»ç»Ÿä½¿ç”¨çš„PEæ ¼å¼ã€ä»¥åŠmacOSç³»ç»Ÿä½¿ç”¨çš„Mach-Oæ ¼å¼ç­‰ã€‚æ–‡ç« è¯¦ç»†è®¨è®ºäº†æ¯ç§æ ¼å¼çš„ç‰¹ç‚¹ã€ä½¿ç”¨å¹³å°å’Œå†å²æ¼”å˜ï¼Œå¸®åŠ©è¯»è€…ç†è§£ä¸åŒæ“ä½œç³»ç»Ÿä¸­äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼çš„å·®å¼‚ã€‚\n\n## Q: è§£é‡Š: ELF æ‰§è¡Œæ–‡ä»¶\n\nELFï¼ˆExecutable and Linkable Formatï¼‰æ‰§è¡Œæ–‡ä»¶æ˜¯ä¸€ç§ç”¨äºLinuxå’Œç±»Unixæ“ä½œç³»ç»Ÿçš„æ ‡å‡†äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼ã€‚å®ƒåŒ…å«äº†å¯æ‰§è¡Œç¨‹åºã€å…±äº«åº“ã€ç›®æ ‡æ–‡ä»¶å’Œæ ¸å¿ƒè½¬å‚¨æ–‡ä»¶ã€‚ELFæ–‡ä»¶æ ¼å¼è®¾è®¡çµæ´»ã€å¯æ‰©å±•ï¼Œå¹¶ä¸”å¯ç§»æ¤ï¼Œå®ƒå®šä¹‰äº†ç¨‹åºä»£ç çš„åŠ è½½å’Œæ‰§è¡Œæ–¹å¼ï¼ŒåŒ…æ‹¬ä»£ç æ®µã€æ•°æ®æ®µã€ç¬¦å·è¡¨å’Œé‡å®šä½ä¿¡æ¯ç­‰ã€‚æ“ä½œç³»ç»Ÿæ ¹æ®ELFæ–‡ä»¶ä¸­çš„è¿™äº›ä¿¡æ¯æ¥å’Œæ‰§è¡Œç¨‹åºã€‚ELFæ ¼å¼ä¹Ÿå…è®¸ç¨‹åºå…±äº«åº“ï¼Œå³å¤šä¸ªç¨‹åºå¯ä»¥å…±äº«åŒä¸€æ®µä»£ç ï¼Œä»è€Œå‡å°‘å†…å­˜å ç”¨å¹¶æé«˜æ•ˆç‡ã€‚åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­ï¼ŒELFæ–‡ä»¶ä½œä¸ºç›®æ ‡æ–‡ä»¶æ ¼å¼åœ¨ç¼–è¯‘æ—¶ç”Ÿæˆï¼Œå¹¶æœ€ç»ˆç”±é“¾æ¥å™¨ç»„åˆå½¢æˆå¯æ‰§è¡Œæ–‡ä»¶æˆ–å…±äº«åº“ã€‚\n\n## Q: æœ‰ä¸ ELF ç›¸å¹¶åˆ—çš„å¦å¤–çš„ä¸€äº›äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼å—ï¼Ÿ\n\næ˜¯çš„ï¼Œé™¤äº†ELFï¼ˆExecutable and Linking Formatï¼‰ä¹‹å¤–ï¼Œè¿˜æœ‰å…¶ä»–å‡ ç§å¸¸è§çš„äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼ï¼Œå®ƒä»¬åœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿå’Œå¹³å°ä¸Šè¢«å¹¿æ³›ä½¿ç”¨ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ä¸»è¦çš„äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼ï¼š\n\n1. **PEï¼ˆPortable Executableï¼‰**ï¼š\n   - **ä½¿ç”¨å¹³å°**ï¼šä¸»è¦åœ¨Windowsæ“ä½œç³»ç»Ÿä¸Šä½¿ç”¨ã€‚\n   - **ç‰¹ç‚¹**ï¼šPEæ ¼å¼æ˜¯COFFï¼ˆCommon Object File Formatï¼‰çš„æ‰©å±•ï¼Œç”¨äºå¯æ‰§è¡Œæ–‡ä»¶ã€ç›®æ ‡æ–‡ä»¶ã€åŠ¨æ€é“¾æ¥åº“DLLsï¼‰å’Œé©±åŠ¨ç¨‹åºç­‰ã€‚PEæ–‡ä»¶åŒ…å«ä¸€ä¸ªå¤´éƒ¨ï¼ˆPE headerï¼‰ã€èŠ‚è¡¨ï¼ˆsection tableï¼‰å’Œå„ä¸ªèŠ‚ï¼ˆsectionsï¼‰ï¼Œå¦‚ä»£ç èŠ‚ã€æ•°æ®èŠ‚ç­‰ã€‚\n\n2. **Mach-Oï¼ˆMach Objectï¼‰**ï¼š\n   - **ä½¿ç”¨å¹³å°**ï¼šä¸»è¦åœ¨Appleçš„macOSå’ŒiOSæ“ä½œç³»ç»Ÿä¸Šä½¿ç”¨ã€‚\n   - **ç‰¹ç‚¹**ï¼šMach-Oæ ¼å¼ç”¨äºå­˜å‚¨å¯æ‰§è¡Œæ–‡ä»¶ã€ç›®æ ‡æ–‡ä»¶å’ŒåŠ¨æ€åº“ã€‚å®ƒåŒ…å«å¤šä¸ªæ®µï¼ˆsegmentså’ŒèŠ‚ï¼ˆsectionsï¼‰ï¼Œæ”¯æŒå¤šç§æ¶æ„ï¼Œå¹¶ä¸”å¯ä»¥åŒ…å«å¤šä¸ªæ¶æ„çš„ä»£ç ï¼ˆç§°ä¸º\"fat binary\"ï¼‰ã€‚\n\n3. **COFFï¼ˆCommon Object File Formatï¼‰**ï¼š\n   - **ä½¿ç”¨å¹³å°**ï¼šæ—©æœŸåœ¨Unix System Vå’ŒWindows NTä¸Šä½¿ç”¨ã€‚\n   - **ç‰¹ç‚¹**ï¼šCOFFæ ¼å¼æ˜¯ä¸€ç§é€šç”¨çš„ç›®æ ‡æ–‡ä»¶æ ¼å¼ï¼ŒåŒ…å«ä»£ç ã€æ•°æ®å’Œé‡å®šä½ä¿¡æ¯ã€‚è™½ç„¶ç°åœ¨è¾ƒå°‘ç›´æ¥ä½¿ç”¨ï¼Œä½†å®ƒçš„è®¸å¤šæ¦‚å¿µå’Œç»“æ„è¢«PEå’ŒELFç»§æ‰¿ã€‚\n\n4. **a.outï¼ˆAssembler Outputï¼‰**ï¼š\n   - **ä½¿ç”¨å¹³å°**ï¼šæ—©æœŸUnixç³»ç»Ÿä¸Šä½¿ç”¨ã€‚\n   - **ç‰¹ç‚¹**ï¼ša.outæ˜¯ä¸€ç§è¾ƒç®€å•çš„äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼ï¼ŒåŒ…å«å¯æ‰§è¡Œä»£ç ã€æ•°æ®å’Œç¬¦å·è¡¨ã€‚éšç€ELFæ ¼å¼çš„å‡ºç°ï¼Œa.outé€æ¸è¢«æ·˜æ±°ã€‚\n\n5. **DOS MZï¼ˆMark Zbikowskiï¼‰**ï¼š\n   - **ä½¿ç”¨å¹³å°**ï¼šæ—©æœŸDOSå’ŒWindowsç³»ç»Ÿä¸Šä½¿ç”¨ã€‚\n   - **ç‰¹ç‚¹**ï¼šDOSZæ ¼å¼æ˜¯DOSå¯æ‰§è¡Œæ–‡ä»¶çš„æ ¼å¼ï¼Œä»¥\"MZ\"ï¼ˆå¼€å‘è€…Mark Zbikowskiçš„é¦–å­—æ¯ï¼‰ä½œä¸ºæ–‡ä»¶å¤´éƒ¨çš„æ ‡è¯†ã€‚å®ƒè¢«åæ¥çš„PEæ ¼å¼æ‰€å–ä»£ã€‚\n\n6. **COMæ–‡ä»¶**ï¼š\n   - **ä½¿ç”¨å¹³å°**ï¼šæ—©æœŸDOSç³»ç»Ÿä¸Šä½¿ç”¨ã€‚\n   - **ç‰¹ç‚¹**ï¼šCOMæ–‡ä»¶æ˜¯ä¸€ç§éå¸¸ç®€å•çš„å¯æ‰§è¡Œæ–‡ä»¶æ ¼å¼ï¼Œä»…åŒ…å«ä»£ç å’Œæ•°æ®ï¼Œæ²¡æœ‰å¤´éƒ¨ä¿¡æ¯ï¼Œå¤§å°é™åˆ¶ä¸º64KBã€‚\n\nè¿™äº›äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼å„æœ‰ç‰¹ç‚¹ï¼Œé€‚ç”¨äºä¸åŒçš„å’Œåœºæ™¯ã€‚å®ƒä»¬åœ¨æ–‡ä»¶ç»“æ„ã€åŠ è½½æœºåˆ¶å’ŒåŠŸèƒ½æ”¯æŒä¸Šæœ‰æ‰€ä¸åŒï¼Œä½†éƒ½æ—¨åœ¨å®ç°ç¨‹åºä»£ç çš„æœ‰æ•ˆå­˜å‚¨å’Œæ‰§è¡Œã€‚\n\n","title":"å¯æ‰§è¡Œæ–‡ä»¶æ ¼å¼å¯¹æ¯”ï¼šELFã€PEã€Mach-Oç­‰","abstract":"> æœ¬æ–‡ä»‹ç»äº†å‡ ç§ä¸»è¦çš„å¯æ‰§è¡Œæ–‡ä»¶æ ¼å¼ï¼ŒåŒ…æ‹¬Linuxç³»ç»Ÿä½¿ç”¨çš„ELFæ ¼å¼ã€Windowsç³»ç»Ÿä½¿ç”¨çš„PEæ ¼å¼ã€ä»¥åŠmacOSç³»ç»Ÿä½¿ç”¨çš„Mach-Oæ ¼å¼ç­‰ã€‚æ–‡ç« è¯¦ç»†è®¨è®ºäº†æ¯ç§æ ¼å¼çš„ç‰¹ç‚¹ã€ä½¿ç”¨å¹³å°å’Œå†å²æ¼”å˜ï¼Œå¸®åŠ©è¯»è€…ç†è§£ä¸åŒæ“ä½œç³»ç»Ÿä¸­äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼çš„å·®å¼‚ã€‚\nELFï¼ˆExecutable and Linkable Formatï¼‰æ‰§è¡Œæ–‡ä»¶æ˜¯ä¸€ç§ç”¨äºLinuxå’Œç±»Unixæ“ä½œç³»ç»Ÿçš„æ ‡å‡†äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼ã€‚å®ƒåŒ…å«äº†å¯æ‰§è¡Œç¨‹åºã€å…±äº«åº“ã€ç›®æ ‡æ–‡ä»¶å’Œæ ¸å¿ƒè½¬å‚¨æ–‡ä»¶ã€‚ELFæ–‡ä»¶æ ¼å¼è®¾è®¡çµæ´»ã€å¯æ‰©å±•ï¼Œå¹¶ä¸”å¯ç§»æ¤ï¼Œå®ƒå®šä¹‰äº†ç¨‹åºä»£ç çš„åŠ è½½å’Œæ‰§è¡Œæ–¹å¼ï¼ŒåŒ…æ‹¬ä»£ç æ®µã€æ•°æ®æ®µã€ç¬¦å·è¡¨å’Œé‡å®šä½ä¿¡æ¯ç­‰ã€‚æ“ä½œç³»ç»Ÿæ ¹æ®ELFæ–‡ä»¶ä¸­çš„è¿™äº›ä¿¡æ¯æ¥å’Œæ‰§è¡Œç¨‹åºã€‚ELFæ ¼å¼ä¹Ÿå…è®¸ç¨‹åºå…±äº«åº“ï¼Œå³å¤šä¸ªç¨‹åºå¯ä»¥å…±äº«åŒä¸€æ®µä»£ç ï¼Œä»è€Œå‡å°‘å†…å­˜å ç”¨å¹¶æé«˜æ•ˆç‡ã€‚åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­ï¼ŒELFæ–‡ä»¶ä½œä¸ºç›®æ ‡æ–‡ä»¶æ ¼å¼åœ¨ç¼–è¯‘æ—¶ç”Ÿæˆï¼Œå¹¶æœ€ç»ˆç”±é“¾æ¥å™¨ç»„åˆå½¢æˆå¯æ‰§è¡Œæ–‡ä»¶æˆ–å…±äº«åº“ã€‚\næ˜¯çš„ï¼Œé™¤äº†ELFï¼ˆExecutable and Linking Formatï¼‰ä¹‹å¤–ï¼Œè¿˜æœ‰å…¶ä»–å‡ ç§å¸¸è§çš„äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼ï¼Œå®ƒä»¬åœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿå’Œå¹³å°ä¸Šè¢«å¹¿æ³›ä½¿ç”¨ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ä¸»è¦çš„äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼ï¼š","length":38,"created_at":"2024-12-08T02:00:00.000Z","updated_at":"2024-12-08T02:00:00.000Z","tags":["Linux","Windows","macOS","å¯æ‰§è¡Œæ–‡ä»¶","å­¦ä¹ ç¬”è®°"],"license":true,"headingTrees":[{"key":"q-è§£é‡Š-elf-æ‰§è¡Œæ–‡ä»¶","href":"#q-è§£é‡Š-elf-æ‰§è¡Œæ–‡ä»¶","heading":2,"title":"Q: è§£é‡Š: ELF æ‰§è¡Œæ–‡ä»¶","children":[],"id":"q-è§£é‡Š-elf-æ‰§è¡Œæ–‡ä»¶"},{"key":"q-æœ‰ä¸-elf-ç›¸å¹¶åˆ—çš„å¦å¤–çš„ä¸€äº›äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼å—","href":"#q-æœ‰ä¸-elf-ç›¸å¹¶åˆ—çš„å¦å¤–çš„ä¸€äº›äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼å—","heading":2,"title":"Q: æœ‰ä¸ ELF ç›¸å¹¶åˆ—çš„å¦å¤–çš„ä¸€äº›äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼å—ï¼Ÿ","children":[],"id":"q-æœ‰ä¸-elf-ç›¸å¹¶åˆ—çš„å¦å¤–çš„ä¸€äº›äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼å—"}],"wikiRefAliases":[],"richRefAliases":[]},"prevNextInfo":{"prevInfo":{"pathMapping":{"filePath":"public/content/learn_from_ai/2024-12-08-cpp-rvo-and-rust-move-semantics.md","pagePath":"/learn_from_ai/cpp-rvo-and-rust-move-semantics","slug":"cpp-rvo-and-rust-move-semantics"},"meta":{"content":"\n> **å‚è€ƒè¦ç‚¹:**\n> - C++çš„å³å€¼å¼•ç”¨(T&&)ç”¨äºæ•è·ä¸´æ—¶å¯¹è±¡ï¼Œç§»åŠ¨è¯­ä¹‰é€šè¿‡è½¬ç§»èµ„æºæ‰€æœ‰æƒé¿å…ä¸å¿…è¦çš„å¤åˆ¶\n> - è¿”å›å€¼ä¼˜åŒ–(RVO)æ˜¯ç¼–è¯‘å™¨ä¼˜åŒ–æŠ€æœ¯ï¼Œå¯ä»¥ç›´æ¥åœ¨è°ƒç”¨æ–¹æ ˆå¸§æ„é€ å¯¹è±¡ï¼Œé¿å…å¤åˆ¶\n> - ç§»åŠ¨è¯­ä¹‰é€šè¿‡è½¬ç§»èµ„æºæŒ‡é’ˆå¹¶å°†æºå¯¹è±¡æŒ‡é’ˆç½®ç©ºæ¥å®‰å…¨è½¬ç§»èµ„æºæ‰€æœ‰æƒ\n> - Rustä¹Ÿæœ‰ç±»ä¼¼çš„RVOä¼˜åŒ–ï¼Œä½†æ›´ä¾èµ–å…¶æ‰€æœ‰æƒç³»ç»Ÿå®ç°ä¸¥æ ¼çš„ç§»åŠ¨è¯­ä¹‰\n> - Rustçš„å€Ÿç”¨æ£€æŸ¥å™¨ç¡®ä¿å†…å­˜å®‰å…¨ï¼Œé˜²æ­¢æ•°æ®ç«äº‰\n\n## Q:\nä»‹ç»C++çš„å³å€¼å¼•ç”¨å’Œç§»åŠ¨è¯­ä¹‰ï¼Œå¹¶è§£é‡Šå‡½æ•°è¿”å›å³å€¼å¼•ç”¨æ˜¯å¦‚ä½•é¿å…å†…å­˜æ‹·è´çš„ã€‚\n\n## A:\n### C++çš„å³å€¼å¼•ç”¨å’Œç§»åŠ¨è¯­ä¹‰\n\n#### å³å€¼å¼•ç”¨\n\nåœ¨C++ä¸­ï¼Œè¡¨è¾¾å¼å¯ä»¥åˆ†ä¸ºå·¦å€¼ï¼ˆLvalueï¼‰å’Œå³å€¼ï¼ˆRvalueï¼‰ï¼š\n\n- **å·¦å€¼ï¼ˆLvalueï¼‰**ï¼šæœ‰åç§°ä¸”å¯ä»¥æŒä¹…å­˜åœ¨çš„å¯¹è±¡ï¼Œä¾‹å¦‚å˜é‡ã€‚å·¦å€¼å¯ä»¥å–åœ°å€ï¼ˆ&ï¼‰ã€‚\n  ```cpp\n  int a = 10; // a æ˜¯å·¦å€¼\n  ```\n\n- **å³å€¼ï¼ˆRvalueï¼‰**ï¼šæ²¡æœ‰åç§°ä¸”ä¸´æ—¶å¯¹è±¡ï¼Œä¾‹å¦‚å­—é¢é‡æˆ–è¡¨è¾¾å¼çš„ç»“æœã€‚å³å€¼ä¸èƒ½å–åœ°å€ã€‚\n  ```cpp\n  int b = 20 + 5; // 20 + 5 çš„ç»“æœæ˜¯å³å€¼\n  ```\n\n**å³å€¼å¼•ç”¨ï¼ˆT&&ï¼‰** æ˜¯ä¸“é—¨è®¾è®¡ç”¨æ¥æ•è·å³å€¼çš„å¼•ç”¨ç±»å‹ï¼Œå…è®¸æˆ‘ä»¬å®‰å…¨åœ°ä¿®æ”¹æˆ–è½¬ç§»å³å€¼çš„èµ„æºã€‚\n\n#### ç§»åŠ¨è¯­ä¹‰\n\nç§»åŠ¨è¯­ä¹‰æ˜¯C++11å¼•å…¥çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ï¼Œæ—¨åœ¨è§£å†³ä¼ ç»Ÿå¤åˆ¶è¯­ä¹‰çš„æ€§èƒ½é—®é¢˜ã€‚ä¼ ç»Ÿçš„æ·±è´ä¼šåˆ†é…æ–°çš„å†…å­˜ç©ºé—´å¹¶å¤åˆ¶æ•°æ®ï¼Œå¯¼è‡´æ€§èƒ½å¼€é”€è¾ƒå¤§ï¼Œå°¤å…¶æ˜¯å½“å¯¹è±¡åŒ…å«å¤§é‡èµ„æºï¼ˆå¦‚åŠ¨æ€åˆ†é…çš„å†…å­˜ã€å¤§å‹æ•°ç»„æˆ–æ–‡ä»¶å¥æŸ„ï¼‰æ—¶ã€‚\n\n**ç§»åŠ¨è¯­ä¹‰çš„æ ¸å¿ƒæ¦‚å¿µ**ï¼š\n\n1. **ç§»åŠ¨æ„é€ å‡½æ•°**ï¼šé€šè¿‡è½¬ç§»èµ„æºæ‰€æœ‰æƒæ„é€ æ–°å¯¹è±¡ï¼Œè€Œä¸æ˜¯å¤åˆ¶èµ„æºã€‚\n   ```cpp\n   class MyClass {\n   public:\n       MyClass(MyClass&& other) noexcept { /* è½¬ç§»èµ„æº */ }\n   };\n   ```\n\n2. **ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦**ï¼šé€šè¿‡è½¬ç§»èµ„æºæ‰€æœ‰æƒèµ‹å€¼ï¼Œè€Œä¸æ˜¯å¤åˆ¶èµ„æºã€‚\n   ```cpp\n   class MyClass {\n   public:\n       MyClass& operator=(MyClass&& other) noexcept { /* è½¬ç§»èµ„æº */ return *this; }\n   };\n   ```\n\n### å‡½æ•°è¿”å›å³å€¼å¼•ç”¨é¿å…å†…å­˜æ‹·è´\n\nå½“å‡½æ•°è¿”å›ä¸€ä¸ªå³å€¼å¼•ç”¨æ—¶ï¼Œå¯ä»¥é¿å…ä¸å¿…è¦çš„å†…å­˜æ‹·è´ï¼Œä»è€Œæé«˜ç¨‹åºæ€§èƒ½ã€‚è¿™æ˜¯å› ä¸ºå³å€¼å¼•ç”¨å…è®¸ç›´æ¥è½¬ç§»ä¸´æ—¶å¯¹è±¡çš„èµ„æºï¼Œè€Œä¸æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„å‰¯æœ¬ã€‚\n\n#### ç¤ºä¾‹\n\nè€ƒè™‘ä»¥ä¸‹ï¼š\n\n```cpp\n#include <iostream>\n#include <string>\n\nclass MyClass {\npublic:\n    std::string data;\n\n    MyClass(std::string d) : data(std::move(d)) {\n        std::cout << \"Constructing MyClass with data: \" << data << std::endl;\n    }\n\n    MyClass(MyClass&& other) noexcept : data(std::move(other.data)) {\n        std::cout << \"Moving MyClass with data: \" << data << std::endl;\n    }\n\n    MyClass& operator=(MyClass&& other) noexcept {\n        if (this != &other) {\n            data = std::move(other.data);\n        }\n        return *this;\n    }\n};\n\nMyClass createMyClass() {\n    MyClass temp(\"Temporary\");\n    return temp; // è¿”å›ä¸€ä¸ªå³å€¼\n}\n\nint main() {\n    MyClass obj = createMyClass(); // è§¦å‘ç§»åŠ¨æ„é€ å‡½æ•°\n    return 0;\n}\n```\n\n#### è§£é‡Š\n\n1. **å‡½æ•°è¿”å›å³å€¼**ï¼š\n   ```cpp\n   MyClass createMyClass() {\n       MyClass temp(\"Temporary\");\n       return temp; // è¿”å›ä¸€ä¸ªå³å€¼\n   }\n   ```\n\n   åœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼Œ`temp`æ˜¯ä¸€ä¸ªå±€éƒ¨å¯¹è±¡ï¼Œå½“å‡½æ•°è¿”å›æ—¶ï¼Œ`temp`ä¼šè¢«è§†ä¸ºä¸€ä¸ªå³å€¼ã€‚\n\n2. **ç§»åŠ¨æ„é€ å‡½æ•°è¢«è°ƒç”¨**ï¼š\n   ```cpp\n   MyClass obj = createMyClass(); // è§¦å‘ç§»åŠ¨æ„é€ å‡½æ•°\n   ```\n\n   ç”±äº`createMyClass()`è¿”å›çš„æ˜¯ä¸€ä¸ªå³å€¼ï¼Œç¼–è¯‘å™¨ä¼šä¼˜å…ˆé€‰æ‹©ç§»åŠ¨æ„é€ å‡½æ•°æ¥æ„é€ `obj`ï¼Œè€Œä¸æ˜¯å¤åˆ¶æ„é€ å‡½æ•°ã€‚\n\n3. **èµ„æºè½¬ç§»** ï¼š\n   åœ¨ç§»åŠ¨æ„é€ å‡½æ•°ä¸­ï¼Œèµ„æºçš„æ‰€æœ‰æƒè¢«è½¬ç§»ï¼Œè€Œä¸æ˜¯å¤åˆ¶ï¼š\n   ```cpp\n   MyClass(MyClass&& other) noexcept : data(std::move(other.data)) {\n       std::cout << \"Moving MyClass with data: \" << data << std::endl;\n   }\n   ```\n\n   è¿™é‡Œä½¿ç”¨`std::move`å°†`other.data`çš„èµ„æºè½¬ç§»åˆ°æ–°å¯¹è±¡ä¸­ï¼Œé¿å…äº†å†…å­˜æ‹·è´ã€‚\n\n### æ€»ç»“\n\né€šè¿‡ä½¿ç”¨å³å€¼å¼•ç”¨å’Œç§»åŠ¨è¯­ä¹‰ï¼ŒC++èƒ½å¤Ÿæœ‰æ•ˆåœ°é¿å…ä¸å¿…è¦çš„æ‹·è´ï¼Œæé«˜ç¨‹åºçš„æ€§èƒ½ã€‚å‡½æ•°è¿”å›å³å€¼å¼•ç”¨æ—¶ï¼Œå¯ä»¥ç›´æ¥åˆ©ç”¨ç§»åŠ¨æ„é€ å‡½æ•°è½¬ç§»èµ„æºï¼Œä»è€Œé¿å…äº†æ·±æ‹·è´çš„å¼€é”€ã€‚è¿™å¯¹äºåŒ…å«å¤§é‡èµ„æºçš„å¯¹è±¡å°¤ä¸ºé‡è¦ã€‚\n\n\n## Q:\n\nåœ¨ä½ çš„ä¾‹å­é‡Œï¼Œä¸ºä»€ä¹ˆ temp è¿”å›æ—¶èµ‹å€¼ç»™ obj å¯ä»¥ä¸å‘ç”Ÿå¤åˆ¶ï¼Ÿ temp åº”è¯¥åœ¨æ ˆä¸Šä¸æ˜¯å—ï¼Ÿå‡½æ•°å‡ºæ ˆæ—¶å¦‚æœä¸å‘ç”Ÿå¤åˆ¶ï¼Œtempä¸ä¼šè¢«å›æ”¶å—ï¼Ÿ\n\n## A:\n\nä½ æå‡ºçš„é—®é¢˜éå¸¸å…³é”®ï¼Œå®ƒæ¶‰åŠåˆ°C++ä¸­ä¸€ä¸ªé‡è¦çš„ä¼˜åŒ–æœºåˆ¶â€”â€”**è¿”å›å€¼ä¼˜åŒ–ï¼ˆReturn Value Optimization, RVOï¼‰**å’Œ**ç§»åŠ¨è¯­ä¹‰**ã€‚\n\n### è¿”å›å€¼ä¼˜åŒ–ï¼ˆRVOï¼‰\n\nåœ¨C++ä¸­ï¼Œç¼–è¯‘å™¨é€šå¸¸ä¼šè¿›è¡Œä¸€ç§ç§°ä¸ºè¿”å›å€¼ä¼˜åŒ–çš„ä¼˜åŒ–ï¼Œä»¥å‡å°‘ä¸å¿…è¦çš„å¤åˆ¶ã€‚å½“å‡½æ•°è¿”å›ä¸€ä¸ªå±€éƒ¨å¯¹è±¡æ—¶ï¼Œç¼–è¯‘å™¨å¯ä»¥ä¼˜åŒ–ä»£ç ï¼Œé¿å…å®é™…çš„å¤åˆ¶æ“ä½œã€‚\n\n#### RVOçš„å·¥ä½œåŸç†\n\nè€ƒè™‘ä»¥ä¸‹å‡½æ•°ï¼š\n\n```cpp\nMyClass createMyClass() {\n    MyClass temp(\"Temporary\");\n    return temp;\n}\n```\n\nåœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼Œ`temp`ç¡®å®æ˜¯ä¸€ä¸ªå±€éƒ¨å¯¹è±¡ï¼Œå­˜å‚¨åœ¨æ ˆä¸Šã€‚æŒ‰ç…§å¸¸è§„é€»è¾‘ï¼Œå½“å‡½æ•°è¿”å›æ—¶ï¼Œ`temp`ä¼šè¢«é”€æ¯ã€‚ç„¶è€Œï¼Œç¼–è¯‘å™¨å¯ä»¥åº”ç”¨RVOæ¥ä¼˜åŒ–è¿™ä¸€è¿‡ç¨‹ï¼š\n\n1. **ç¼–è¯‘å™¨ä¼˜åŒ–**ï¼šç¼–è¯‘å™¨åœ¨ç”Ÿæˆæœºå™¨ä»£ç æ—¶ï¼Œå¯ä»¥å†³å®šç›´æ¥åœ¨è°ƒç”¨æ–¹åˆ†é…`temp`æ‰€éœ€çš„å†…å­˜ï¼Œè€Œä¸æ˜¯åœ¨å‡½æ•°å†…éƒ¨åˆ†é…ã€‚è¿™æ ·ï¼Œtemp`çš„æ„é€ å®é™…ä¸Šå‘ç”Ÿåœ¨è°ƒç”¨æ–¹çš„æ ˆå¸§ä¸Šã€‚\n\n2. **é¿å…å¤åˆ¶**ï¼šç”±äº`temp`çš„æ„é€ ç›´æ¥å‘ç”Ÿåœ¨è°ƒç”¨æ–¹çš„æ ˆå¸§ä¸Šï¼Œè¿”å›æ—¶ä¸éœ€è¦è¿›è¡Œå¤åˆ¶æ“ä½œã€‚è¿™æ ·ï¼Œ`temp`çš„ç”Ÿå‘½å‘¨æœŸè‡ªç„¶å»¶ç»­åˆ°è°ƒç”¨æ–¹çš„ä½œç”¨åŸŸä¸­ã€‚\n\n### ç§»åŠ¨è¯­ä¹‰\n\nå³ä½¿æ²¡æœ‰RVOï¼ŒC++11å¼•å…¥çš„ç§»åŠ¨è¯­ä¹‰ä¹Ÿèƒ½æ˜¾è‘—å‡å°‘å¤åˆ¶çš„å¼€é”€ã€‚\n\n#### ç§»åŠ¨æ„é€ å‡½æ•°çš„ä½œç”¨\n\nåœ¨æ²¡æœ‰RVOçš„æƒ…å†µä¸‹ï¼Œå‡½æ•°è¿”å›å±€éƒ¨å¯¹è±¡æ—¶ï¼Œä¼šè§¦å‘æ„é€ å‡½æ•°ï¼ˆè€Œä¸æ˜¯å¤åˆ¶æ„é€ å‡½æ•°ï¼‰ï¼Œä»è€Œé¿å…æ·±æ‹·è´ï¼š\n\n```cpp\nMyClass obj = createMyClass();\n```\n\nè¿™é‡Œï¼Œ`createMyClass()`è¿”å›çš„æ˜¯ä¸€ä¸ªå³å€¼ï¼ˆä¸´æ—¶å¯¹è±¡ï¼‰ï¼Œå› æ­¤ç¼–è¯‘å™¨ä¼šè°ƒç”¨`MyClass`çš„ç§»åŠ¨æ„é€ å‡½æ•°æ¥æ„é€ `obj`ï¼š\n\n```cpp\nMyClass(MyClass&& other) noexcept : data(std::move(other.data)) {\n    std::cout << \"Moving MyClass with data: \" << data << std::endl;\n}\n```\n\nåœ¨æ„é€ å‡½æ•°ä¸­ï¼Œèµ„æºçš„æ‰€æœ‰æƒè¢«è½¬ç§»ï¼Œè€Œä¸æ˜¯å¤åˆ¶ã€‚è¿™æ ·ï¼Œå³ä½¿`temp`åœ¨`createMyClass()`å‡½æ•°ç»“æŸæ—¶è¢«é”€æ¯ï¼Œå…¶èµ„æºå·²ç»å®‰å…¨åœ°è½¬ç§»åˆ°äº†`obj`ä¸­ï¼Œé¿å…äº†å†…å­˜æ³„æ¼ã€‚\n\n### ç»“åˆRVOå’Œç§»åŠ¨è¯­ä¹‰\n\nåœ¨å®é™…åº”ç”¨ä¸­ï¼Œç¼–è¯‘å™¨ä¼šä¼˜å…ˆåº”ç”¨RVOæ¥é¿å…å¤åˆ¶ã€‚å¦‚æœRVOä¸å¯ç”¨æˆ–æœªèƒ½åº”ç”¨ï¼Œç¼–è¯‘å™¨ä¼šé€€è€Œæ±‚å…¶æ¬¡ï¼Œä½¿ç”¨ç§»åŠ¨è¯­ä¹‰æ¥å‡å°‘å¼€é”€ã€‚\n\n#### ç¤ºä¾‹ä»£ç ä¼˜åŒ–\n\nè€ƒè™‘ä»¥ä¸‹ç¤ºä¾‹ï¼š\n\n```cpp\n#include <iostream>\n#include <string>\n\nclass MyClass {\npublic:\n    std::string data;\n\n    MyClass(std::string d) : data(std::move(d)) {\n        std::cout << \"Constructing MyClass with data: \" << data << std::endl;\n    }\n\n    MyClass(MyClass&& other) noexcept : data(std::move(other.data)) {\n        std::cout << \"Moving MyClass with data: \" << data << std::endl;\n    }\n\n    MyClass& operator=(MyClass&& other) noexcept {\n        if (this != &other) {\n            data = std::move(other.data);\n        }\n        return *this;\n    }\n};\n\nMyClass createMyClass() {\n    MyClass temp(\"Temporary\");\n    return temp; // å¯èƒ½è§¦å‘RVOæˆ–ç§»åŠ¨æ„é€ \n}\n\nint main() {\n    MyClass obj = createMyClass(); // è§¦å‘RVOæˆ–ç§»åŠ¨æ„é€ \n    return 0;\n}\n```\n\nåœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼š\n\n1. **RVOä¼˜åŒ–**ï¼šç¼–è¯‘å™¨å¯èƒ½ä¼šåº”ç”¨RVOï¼Œç›´æ¥åœ¨`main`å‡½æ•°çš„æ ˆå¸§ä¸Šæ„é€ `temp`ï¼Œé¿å…å¤åˆ¶ã€‚\n2. **ç§»åŠ¨è¯­ä¹‰**ï¼šå¦‚æœRVOæœªåº”ç”¨ï¼Œ`createMyClass()`è¿”å›çš„ä¸´æ—¶å¯¹è±¡ä¼šè§¦å‘ç§»åŠ¨æ„é€ å‡½æ•°ï¼Œè½¬ç§»èµ„æºã€‚\n\n### æ€»ç»“\n\n- **RVO**ï¼šç¼–è¯‘å™¨ä¼˜åŒ–ï¼Œç›´æ¥åœ¨è°ƒç”¨æ–¹åˆ†é…å†…å­˜ï¼Œé¿å…å¤åˆ¶ã€‚\n- **ç§»åŠ¨è¯­ä¹‰**ï¼šåœ¨æ²¡æœ‰RVOçš„æƒ…å†µä¸‹ï¼Œé€šè¿‡ç§»åŠ¨æ„é€ å‡½æ•°è½¬ç§»èµ„æºï¼Œå‡å°‘å¤åˆ¶å¼€é”€ã€‚\n\né€šè¿‡è¿™ä¸¤ç§æœºåˆ¶ï¼ŒC++èƒ½å¤Ÿæœ‰æ•ˆåœ°é¿å…å†…å­˜æ‹·è´ï¼Œæé«˜ç¨‹åºæ€§èƒ½ã€‚å³ä½¿å±€éƒ¨å¯¹è±¡åœ¨å‡½æ•°ç»“æŸæ—¶è¢«é”€æ¯ï¼Œå…¶èµ„æºå·²ç»å®‰å…¨åœ°è½¬ç§»åˆ°äº†è°ƒç”¨æ–¹ï¼Œé¿å…äº†èµ„æºæ³„æ¼ã€‚\n\n## Q:\n\nè§£é‡Šä¸€ä¸‹ä½ è¯´çš„â€œåœ¨æ²¡æœ‰RVOæƒ…å†µä¸‹ï¼Œå³ä½¿ `temp` åœ¨ `createMyClass()` å‡½æ•°ç»“æŸæ—¶è¢«é”€æ¯ï¼Œå…¶èµ„æºå·²ç»å®‰å…¨åœ°è½¬ç§»åˆ°äº† `obj` ä¸­ã€‚â€ åœ¨æˆ‘ç†è§£é‡Œï¼Œæ—¢ç„¶ `temp` åœ¨æ ˆä¸Šï¼Œé‚£ä»–çš„æ‰€æœ‰éæŒ‡é’ˆéå¼•ç”¨æˆå‘˜ä¹Ÿéƒ½ä¼šåœ¨æ ˆä¸Šï¼Œé‚£å‡½æ•°å‡ºæ ˆæ—¶ä¹Ÿéƒ½ä¼šè¢«å›æ”¶ã€‚é‚£è¿™äº›èµ„æºæ˜¯æ€ä¹ˆè½¬ç§»åˆ° `obj` ä¸­è€Œä¸å‘ç”Ÿå¤åˆ¶çš„ï¼Ÿ\n\n## A:\n\nä½ çš„ç–‘é—®éå¸¸åˆç†ï¼Œæ¶‰åŠåˆ°C++ä¸­èµ„æºç®¡ç†çš„æ ¸å¿ƒæ¦‚å¿µã€‚è®©æˆ‘ä»¬æ·±å…¥æ¢è®¨ä¸€ä¸‹åœ¨æ²¡æœ‰RVOçš„æƒ…å†µä¸‹ï¼Œå¦‚ä½•é€šè¿‡ç§»åŠ¨è¯­ä¹‰å®ç°èµ„æºçš„è½¬ç§»ï¼Œè€Œä¸ä»…ä»…æ˜¯ç®€å•çš„æ ˆä¸Šå†…å­˜æ‹·è´ã€‚\n\n### æ ˆä¸Šå¯¹è±¡å’Œèµ„æºç®¡ç†\n\né¦–å…ˆï¼Œæ˜ç¡®ä¸€ç‚¹ï¼šæ ˆä¸Šå¯¹è±¡çš„éæŒ‡é’ˆéå¼•ç”¨æˆå‘˜ç¡®å®æ˜¯åœ¨æ ˆä¸Šåˆ†é…çš„ï¼Œå¹¶ä¸”ä¼šåœ¨å‡½æ•°ç»“æŸæ—¶è¢«è‡ªåŠ¨é”€æ¯ã€‚ç„¶è€Œï¼Œå¯¹äºåŒ…å«åŠ¨æ€èµ„æºï¼ˆå¦‚åŠ¨æ€åˆ†é…çš„å†…å­˜ã€æ–‡ä»¶å¥æŸ„ç­‰ï¼‰ï¼Œèµ„æºçš„å®é™…ç®¡ç†æ˜¯é€šè¿‡æŒ‡é’ˆæˆ–å¼•ç”¨æ¥å®ç°çš„ã€‚\n\n### ç§»åŠ¨è¯­ä¹‰çš„æ ¸å¿ƒ\n\nç§»åŠ¨è¯­ä¹‰çš„æ ¸å¿ƒåœ¨äº**è½¬ç§»èµ„æºçš„æ‰€æœ‰æƒ**ï¼Œè€Œä¸æ˜¯å¤åˆ¶èµ„æºã€‚å¯¹äºåŒ…å«åŠ¨æ€èµ„æºçš„å¯¹è±¡ï¼Œç§»åŠ¨æ“ä½œé€šå¸¸æ¶‰åŠä»¥ä¸‹æ­¥éª¤ï¼š\n\n1. **å°†æºå¯¹è±¡çš„èµ„æºæŒ‡é’ˆèµ‹å€¼ç»™ç›®æ ‡å¯¹è±¡**ã€‚\n2. **å°†æºå¯¹è±¡çš„èµ„æºæŒ‡é’ˆç½®ä¸º`nullptr`**ï¼Œä»¥é˜²æ­¢å…¶ææ„æ—¶é‡Šæ”¾èµ„æºã€‚\n\nè¿™æ ·ï¼Œèµ„æºçš„æ‰€æœ‰æƒå°±ä»æºå¯¹è±¡è½¬ç§»åˆ°äº†ç›®æ ‡å¯¹è±¡ï¼Œè€Œæ— éœ€è¿›è¡Œå®é™…çš„å¤åˆ¶ã€‚\n\n### ç¤ºä¾‹è§£é‡Š\n\nè€ƒè™‘ä»¥ä¸‹ç¤ºä¾‹ï¼š\n\n```cpp\n#include <iostream>\n#include <string>\n\nclass MyClass {\npublic:\n    std::string data;\n\n    MyClass(std::string d) : data(std::move(d)) {\n        std::cout << \"Constructing MyClass with data: \" << data << std::endl;\n    }\n\n    // ç§»åŠ¨æ„é€ å‡½æ•°\n    MyClass(MyClass&& other) noexcept : data(std::move(other.data)) {\n        std::cout << \"Moving MyClass with data: \" << data << std::endl;\n    }\n\n    // ç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦\n    MyClass& operator=(MyClass&& other) noexcept {\n        if (this != &other) {\n            data = std::move(other.data);\n        }\n        return *this;\n    }\n};\n\nMyClass createMyClass() {\n    MyClass temp(\"Temporary\");\n    return temp; // è¿”å›ä¸€ä¸ªå³å€¼\n}\n\nint main() {\n    MyClass obj = createMyClass(); // è§¦å‘ç§»åŠ¨æ„é€ å‡½æ•°\n    return 0;\n}\n```\n\n#### è¯¦ç»†æ­¥éª¤\n\n1. **æ„é€ å¯¹è±¡**ï¼š\n   ```cpp\n   MyClass temp(\"Temporary\");\n   ```\n   è¿™é‡Œï¼Œ`temp`æ˜¯ä¸€ä¸ªå±€éƒ¨å¯¹è±¡ï¼Œå…¶`data`æˆå‘˜æ˜¯ä¸€ä¸ª`std::string`ï¼Œå¯èƒ½åŒ…å«åŠ¨æ€åˆ†é…çš„å†…å­˜ã€‚\n\n2. **è¿”å›ä¸´æ—¶å¯¹è±¡**ï¼š\n   ```cpp\n   return temp;\n   ```\n   ç”±äº`temp`æ˜¯ä¸€ä¸ªå³å€¼ï¼Œç¼–è¯‘å™¨ä¼šä¼˜å…ˆé€‰æ‹©ç§»åŠ¨æ„é€ å‡½æ•°æ¥æ„é€ è¿”å›å€¼ã€‚\n\n3. **ç§»åŠ¨æ„é€ å‡½æ•°è¢«è°ƒç”¨**ï¼š\n   ```cpp\n   MyClass(MyClass&& other) noexcept : data(std::move(other.data)) {\n       std::cout << \"Moving MyClass with data: \" << data << std::endl;\n   }\n   ```\n   åœ¨ç§»åŠ¨æ„é€ å‡½æ•°ä¸­ï¼Œ`std::move(other.data)`å°†`other.data`çš„èµ„æºæ‰€æœ‰æƒè½¬ç§»ç»™`data`ã€‚å…·ä½“æ¥è¯´ï¼Œ`std::move`ä¼šå°†`other.data`å†…éƒ¨çš„æŒ‡é’ˆç›´æ¥èµ‹å€¼ç»™`data`ï¼Œå¹¶å°†`other.data`å†…éƒ¨çš„æŒ‡é’ˆç½®ä¸º`nullptr`ã€‚\n\n4. **èµ„æºè½¬ç§»** - `data`ç°åœ¨æ‹¥æœ‰åŸæ¥`temp.data`çš„èµ„æºã€‚\n   - `temp.data`è¢«ç½®ä¸º`nullptr`ï¼Œåœ¨å…¶ææ„æ—¶ä¸ä¼šé‡Šæ”¾èµ„æºã€‚\n\n5. **å‡½æ•°ç»“æŸæ—¶`temp`è¢«é”€æ¯**ï¼š\n   å½“`createMyClass()`å‡½æ•°ç»“æŸæ—¶ï¼Œ`temp`ä¼šè¢«é”€æ¯ã€‚ä½†ç”±äºå…¶`data`æˆå‘˜çš„æŒ‡é’ˆå·²ç»è¢«ç½®ä¸º`nullptr`ï¼Œææ„æ—¶ä¸ä¼šé‡Šæ”¾å®é™…èµ„æºã€‚\n\n6. **`obj`æ‹¥æœ‰èµ„æº**ï¼š\n   ```\n   MyClass obj = createMyClass();\n   ```\n   `obj`é€šè¿‡ç§»åŠ¨æ„é€ å‡½æ•°è·å¾—äº†`temp`çš„èµ„æºï¼Œé¿å…äº†æ·±æ‹·è´ã€‚\n\n### æ€»ç»“\n\nåœ¨æ²¡æœ‰RVOçš„æƒ…å†µä¸‹ï¼Œç§»åŠ¨è¯­ä¹‰é€šè¿‡ä»¥ä¸‹æ–¹å¼é¿å…å¤åˆ¶ï¼š\n\n- **è½¬ç§»èµ„æºæŒ‡é’ˆ**ï¼šå°†æºå¯¹è±¡çš„èµ„æºæŒ‡é’ˆç›´æ¥èµ‹å€¼ç»™ç›®æ ‡å¯¹è±¡ã€‚\n- **ç½®ç©ºæºå¯¹è±¡æŒ‡é’ˆ**ï¼šå°†æºå¯¹è±¡çš„èµ„æºæŒ‡é’ˆç½®ä¸º`nullptr`ï¼Œé˜²æ­¢å…¶ææ„æ—¶é‡Šæ”¾èµ„æºã€‚\n\nè¿™æ ·ï¼Œèµ„æºçš„æ‰€æœ‰æƒä»æºå¯¹è±¡å®‰å…¨åœ°åˆ°äº†ç›®æ ‡å¯¹è±¡ï¼Œè€Œæ— éœ€è¿›è¡Œå®é™…çš„èµ„æºå¤åˆ¶ã€‚å³ä½¿æºå¯¹è±¡åœ¨æ ˆä¸Šå¹¶åœ¨å‡½æ•°ç»“æŸæ—¶è¢«é”€æ¯ï¼Œå…¶èµ„æºå·²ç»è½¬ç§»åˆ°äº†ç›®æ ‡å¯¹è±¡ä¸­ï¼Œä¸ä¼šå‘ç”Ÿèµ„æºæ³„æ¼ã€‚\n\n### å…³é”®ç‚¹\n\n- **åŠ¨æ€èµ„æºç®¡ç†**ï¼šé€šè¿‡æŒ‡é’ˆæˆ–å¼•ç”¨ç®¡ç†åŠ¨æ€èµ„æºã€‚\n- **ç§»åŠ¨æ“ä½œ**ï¼šè½¬ç§»èµ„æºæ‰€æœ‰æƒï¼Œè€Œä¸æ˜¯å¤åˆ¶èµ„æºã€‚\n- **å®‰å…¨è½¬ç§»**ï¼šç¡®ä¿æºå¯¹è±¡åœ¨ææ„æ—¶ä¸ä¼šé‡Šæ”¾å·²è½¬ç§»çš„èµ„æºã€‚\n\né€šè¿‡è¿™ç§æ–¹å¼ï¼ŒC++å®ç°äº†é«˜æ•ˆä¸”å®‰å…¨çš„èµ„æºç®¡ç†ï¼Œæ˜¾è‘—æé«˜äº†æ€§èƒ½ã€‚\n\n## Q:\n\nåœ¨ Rust ä¸­ï¼Œæœ‰æ²¡æœ‰ç±»ä¼¼çš„ RVO ä¼˜åŒ–æˆ–ç§»åŠ¨è¯­ä¹‰ï¼Ÿ\n\n## A:\n\nåœ¨Rustä¸­ï¼Œç¡®å®å­˜åœ¨ç±»ä¼¼äºC++ä¸­çš„è¿”å›å€¼ä¼˜åŒ–ï¼ˆRVOï¼‰å’Œç§»åŠ¨è¯­ä¹‰çš„æœºåˆ¶ï¼Œä½†Rustçš„å®ç°æ–¹å¼å’Œæœ¯è¯­æœ‰æ‰€ä¸åŒã€‚Rustçš„è®¾è®¡ç†å¿µå¼ºè°ƒå†…å­˜å®‰å…¨å’Œæ€§èƒ½ï¼Œå› æ­¤å®ƒå†…ç½®äº†è®¸å¤šä¼˜åŒ–æœºåˆ¶æ¥é¿å…ä¸å¿…è¦çš„å†…å­˜æ‹·è´ã€‚\n\n### Rustä¸­çš„RVOä¼˜åŒ–\n\nRustç¼–è¯‘å™¨ï¼ˆå¦‚`rustc`ï¼‰ä¹Ÿä¼šè¿›è¡Œè¿”å›å€¼ä¼˜åŒ–ï¼ˆRVOï¼‰ï¼Œå°½ç®¡Rustç¤¾åŒºä¸ç»å¸¸ä½¿ç”¨â€œRVOâ€è¿™ä¸ªæœ¯è¯­ã€‚ustçš„ç¼–è¯‘å™¨ä¼šå°½é‡å‡å°‘ä¸å¿…è¦çš„å¤åˆ¶ï¼Œå°¤å…¶æ˜¯åœ¨å‡½æ•°è¿”å›å€¼æ—¶ã€‚\n\n#### ç¤ºä¾‹\n\nè€ƒè™‘ä»¥ä¸‹Rustä»£ç ï¼š\n\n```rust\nstruct MyStruct {\n    data: String,\n}\n\nimpl MyStruct {\n    fn new(data: String) -> MyStruct {\n        MyStruct { data }\n    }\n}\n\nfn create_my_struct() -> MyStruct {\n    MyStruct::new(\"Temporary\".to_string())\n}\n\nfn main() {\n    let obj = create_my_struct();\n}\n```\n\nåœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ`create_my_struct`å‡½æ•°è¿”å›ä¸€ä¸ª`My`å®ä¾‹ã€‚Rustç¼–è¯‘å™¨å¯èƒ½ä¼šåº”ç”¨RVOä¼˜åŒ–ï¼Œç›´æ¥åœ¨`main`å‡½æ•°çš„æ ˆå¸§ä¸Šæ„é€ `MyStruct`å®ä¾‹ï¼Œé¿å…ä¸å¿…è¦çš„å¤åˆ¶ã€‚\n\n### Rustä¸­çš„ç§»åŠ¨è¯­ä¹‰\n\nRustçš„ç§»åŠ¨è¯­ä¹‰æ˜¯å…¶æ‰€æœ‰æƒç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºé«˜æ•ˆåœ°ç®¡ç†èµ„æºã€‚Rustä¸­çš„ç§»åŠ¨è¯­ä¹‰æ¯”C++æ›´ä¸ºä¸¥æ ¼å’Œæ˜¾å¼ã€‚\n\n#### ç§»åŠ¨è¯­ä¹‰çš„å·¥ä½œåŸç†\n\nåœ¨Rustä¸­ï¼Œå½“ä¸€ä¸ªå€¼è¢«ç§»åŠ¨åˆ°å¦ä¸€ä¸ªå˜é‡æ—¶ï¼ŒåŸå˜é‡å°†ä¸å†æœ‰æ•ˆï¼Œé˜²æ­¢äº†å‚å¼•ç”¨ã€‚\n\n#### ç¤ºä¾‹\n\n```rust\nfn main() {\n    let x = String::from(\"hello\");\n    let y = x; // x çš„æ‰€æœ‰æƒç§»åŠ¨åˆ° yï¼Œx ä¸å†æœ‰æ•ˆ\n\n    // ä¸‹é¢çš„ä»£ç ä¼šæŠ¥é”™ï¼Œå› ä¸º x å·²ç»ä¸å†æœ‰æ•ˆ\n    // println!(\"x: {}\", x);\n    println!(\"y: {}\", y);\n}\n```\n\nåœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ`x`çš„æ‰€æœ‰æƒç§»åŠ¨åˆ°`y`ï¼Œä¹‹å`x`ä¸å†æœ‰æ•ˆã€‚è¿™ç§æœºåˆ¶ç¡®ä¿äº†å†…å­˜ï¼Œé¿å…äº†æ‚¬å‚å¼•ç”¨ã€‚\n\n### Rustä¸­çš„ç§»åŠ¨æ„é€ \n\nRustçš„ç§»åŠ¨æ„é€ æ˜¯é€šè¿‡æ‰€æœ‰æƒè½¬ç§»å®ç°çš„ã€‚å½“ä¸€ä¸ªå¯¹è±¡è¢«ç§»åŠ¨æ—¶ï¼Œå…¶å†…éƒ¨èµ„æºçš„æ‰€æœ‰æƒä¹Ÿä¼šéšä¹‹è½¬ç§»ã€‚\n\n#### ç¤ºä¾‹\n\n```rust\nstruct MyStruct {\n    data: String,\n}\n\nimpl MyStruct {\n    fn new(data: String) -> MyStruct {\n        MyStruct { data }\n    }\n}\n\nfn main() {\n    let a = MyStruct::new(\"Temporary\".to_string());\n    let b = a; // a çš„æ‰€æœ‰æƒç§»åŠ¨åˆ° bï¼Œ ä¸å†æœ‰æ•ˆ\n\n    // ä¸‹é¢çš„ä»£ç ä¼šæŠ¥é”™ï¼Œå› ä¸º a å·²ç»ä¸å†æœ‰æ•ˆ\n    // println!(\"a: {:?}\", a);\n    println!(\"b: {:?}\", b);\n}\n```\n\nåœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ`a`çš„æ‰€æœ‰æƒç§»åŠ¨åˆ°`b`ï¼Œ`a`ä¸å†æœ‰æ•ˆã€‚`MyStruct`çš„`data`æˆå‘˜ï¼ˆä¸€ä¸ª`String`ï¼‰çš„æ‰€æœ‰æƒä¹Ÿéšä¹‹è½¬ç§»ã€‚\n\n### Rustä¸­çš„å€Ÿç”¨æ£€æŸ¥\n\nRustçš„å€Ÿç”¨æ£€æŸ¥å™¨ç¡®ä¿åœ¨ä»»æ„æ—¶åˆ»ï¼Œè¦ä¹ˆåªæœ‰ä¸€ä¸ªå¯å˜å¼•ç”¨ï¼Œæœ‰å¤šä¸ªä¸å¯å˜å¼•ç”¨ï¼Œä»è€Œé˜²æ­¢æ•°æ®ç«äº‰ã€‚\n\n#### ç¤ºä¾‹\n\n```rust\nfn main() {\n    let mut x = String::from(\"hello\");\n    let y = &x; // ä¸å¯å˜å€Ÿç”¨\n    let z = &mut x; // å¯å˜å€Ÿç”¨ï¼Œéœ€è¦å…ˆé‡Šæ”¾ y çš„å€Ÿç”¨\n\n    println!(\"y: {}\", y);\n    println!(\"z: {}\", z);\n}\n```\n\nåœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ`y`æ˜¯å¯¹`x`çš„ä¸å¯å˜å€Ÿç”¨ï¼Œ`z`æ˜¯å¯¹x`çš„å¯å˜å€Ÿç”¨ã€‚Rustçš„å€Ÿç”¨æ£€æŸ¥å™¨ç¡®ä¿åœ¨`z`çš„å¯å˜å€Ÿç”¨ç”Ÿæ•ˆå‰ï¼Œ`y`çš„å€Ÿç”¨å·²ç»è¢«é‡Šæ”¾ã€‚\n\n### æ€»ç»“\n\n- **RVOä¼˜åŒ–**ï¼šRustç¼–è¯‘å™¨ä¼šè¿›è¡Œç±»ä¼¼çš„è¿”å›å€¼ä¼˜åŒ–ï¼Œå‡å°‘ä¸å¿…è¦çš„å¤åˆ¶ã€‚\n- **ç§»åŠ¨è¯­ä¹‰**ï¼šRusté€šè¿‡æ‰€æœ‰æƒç³»ç»Ÿå®ç°ä¸¥æ ¼çš„ç§»åŠ¨è¯­ä¹‰ï¼Œç¡®ä¿å†…å­˜å®‰å…¨ã€‚\n- **å€Ÿç”¨æ£€æŸ¥**ï¼šRustçš„å€Ÿç”¨æ£€æŸ¥å™¨é˜²æ­¢æ•°æ®ç«äº‰ï¼Œç¡®ä¿å†…å­˜å®‰å…¨ã€‚\n\nRustçš„è¿™äº›å…±åŒä½œç”¨ï¼Œæä¾›äº†é«˜æ•ˆä¸”å®‰å…¨çš„èµ„æºç®¡ç†ï¼Œé¿å…äº†ä¸å¿…è¦çš„å†…å­˜æ‹·è´ï¼ŒåŒæ—¶ç¡®ä¿äº†ç¨‹åºçš„å†…å­˜å®‰å…¨æ€§ã€‚\n\n","title":"C++å³å€¼å¼•ç”¨ä¸Rustç§»åŠ¨è¯­ä¹‰","abstract":"> **å‚è€ƒè¦ç‚¹:**\n> - C++çš„å³å€¼å¼•ç”¨(T&&)ç”¨äºæ•è·ä¸´æ—¶å¯¹è±¡ï¼Œç§»åŠ¨è¯­ä¹‰é€šè¿‡è½¬ç§»èµ„æºæ‰€æœ‰æƒé¿å…ä¸å¿…è¦çš„å¤åˆ¶\n> - è¿”å›å€¼ä¼˜åŒ–(RVO)æ˜¯ç¼–è¯‘å™¨ä¼˜åŒ–æŠ€æœ¯ï¼Œå¯ä»¥ç›´æ¥åœ¨è°ƒç”¨æ–¹æ ˆå¸§æ„é€ å¯¹è±¡ï¼Œé¿å…å¤åˆ¶","length":466,"created_at":"2024-12-08T12:00:00.000Z","updated_at":"2024-12-08T12:00:00.000Z","tags":["C++","Rust","ç¼–ç¨‹è¯­è¨€"],"license":true,"headingTrees":[{"key":"q","href":"#q","heading":2,"title":"Q:","children":[],"id":"q"},{"key":"a","href":"#a","heading":2,"title":"A:","children":[{"key":"cçš„å³å€¼å¼•ç”¨å’Œç§»åŠ¨è¯­ä¹‰","href":"#cçš„å³å€¼å¼•ç”¨å’Œç§»åŠ¨è¯­ä¹‰","heading":3,"title":"C++çš„å³å€¼å¼•ç”¨å’Œç§»åŠ¨è¯­ä¹‰","children":[{"key":"å³å€¼å¼•ç”¨","href":"#å³å€¼å¼•ç”¨","heading":4,"title":"å³å€¼å¼•ç”¨","children":[],"id":"å³å€¼å¼•ç”¨"},{"key":"ç§»åŠ¨è¯­ä¹‰","href":"#ç§»åŠ¨è¯­ä¹‰","heading":4,"title":"ç§»åŠ¨è¯­ä¹‰","children":[],"id":"ç§»åŠ¨è¯­ä¹‰"}],"id":"cçš„å³å€¼å¼•ç”¨å’Œç§»åŠ¨è¯­ä¹‰"},{"key":"å‡½æ•°è¿”å›å³å€¼å¼•ç”¨é¿å…å†…å­˜æ‹·è´","href":"#å‡½æ•°è¿”å›å³å€¼å¼•ç”¨é¿å…å†…å­˜æ‹·è´","heading":3,"title":"å‡½æ•°è¿”å›å³å€¼å¼•ç”¨é¿å…å†…å­˜æ‹·è´","children":[{"key":"ç¤ºä¾‹","href":"#ç¤ºä¾‹","heading":4,"title":"ç¤ºä¾‹","children":[],"id":"ç¤ºä¾‹"},{"key":"è§£é‡Š","href":"#è§£é‡Š","heading":4,"title":"è§£é‡Š","children":[],"id":"è§£é‡Š"}],"id":"å‡½æ•°è¿”å›å³å€¼å¼•ç”¨é¿å…å†…å­˜æ‹·è´"},{"key":"æ€»ç»“","href":"#æ€»ç»“","heading":3,"title":"æ€»ç»“","children":[],"id":"æ€»ç»“"}],"id":"a"},{"key":"q-1","href":"#q-1","heading":2,"title":"Q:","children":[],"id":"q-1"},{"key":"a-1","href":"#a-1","heading":2,"title":"A:","children":[{"key":"è¿”å›å€¼ä¼˜åŒ–rvo","href":"#è¿”å›å€¼ä¼˜åŒ–rvo","heading":3,"title":"è¿”å›å€¼ä¼˜åŒ–ï¼ˆRVOï¼‰","children":[{"key":"rvoçš„å·¥ä½œåŸç†","href":"#rvoçš„å·¥ä½œåŸç†","heading":4,"title":"RVOçš„å·¥ä½œåŸç†","children":[],"id":"rvoçš„å·¥ä½œåŸç†"}],"id":"è¿”å›å€¼ä¼˜åŒ–rvo"},{"key":"ç§»åŠ¨è¯­ä¹‰-1","href":"#ç§»åŠ¨è¯­ä¹‰-1","heading":3,"title":"ç§»åŠ¨è¯­ä¹‰","children":[{"key":"ç§»åŠ¨æ„é€ å‡½æ•°çš„ä½œç”¨","href":"#ç§»åŠ¨æ„é€ å‡½æ•°çš„ä½œç”¨","heading":4,"title":"ç§»åŠ¨æ„é€ å‡½æ•°çš„ä½œç”¨","children":[],"id":"ç§»åŠ¨æ„é€ å‡½æ•°çš„ä½œç”¨"}],"id":"ç§»åŠ¨è¯­ä¹‰-1"},{"key":"ç»“åˆrvoå’Œç§»åŠ¨è¯­ä¹‰","href":"#ç»“åˆrvoå’Œç§»åŠ¨è¯­ä¹‰","heading":3,"title":"ç»“åˆRVOå’Œç§»åŠ¨è¯­ä¹‰","children":[{"key":"ç¤ºä¾‹ä»£ç ä¼˜åŒ–","href":"#ç¤ºä¾‹ä»£ç ä¼˜åŒ–","heading":4,"title":"ç¤ºä¾‹ä»£ç ä¼˜åŒ–","children":[],"id":"ç¤ºä¾‹ä»£ç ä¼˜åŒ–"}],"id":"ç»“åˆrvoå’Œç§»åŠ¨è¯­ä¹‰"},{"key":"æ€»ç»“-1","href":"#æ€»ç»“-1","heading":3,"title":"æ€»ç»“","children":[],"id":"æ€»ç»“-1"}],"id":"a-1"},{"key":"q-2","href":"#q-2","heading":2,"title":"Q:","children":[],"id":"q-2"},{"key":"a-2","href":"#a-2","heading":2,"title":"A:","children":[{"key":"æ ˆä¸Šå¯¹è±¡å’Œèµ„æºç®¡ç†","href":"#æ ˆä¸Šå¯¹è±¡å’Œèµ„æºç®¡ç†","heading":3,"title":"æ ˆä¸Šå¯¹è±¡å’Œèµ„æºç®¡ç†","children":[],"id":"æ ˆä¸Šå¯¹è±¡å’Œèµ„æºç®¡ç†"},{"key":"ç§»åŠ¨è¯­ä¹‰çš„æ ¸å¿ƒ","href":"#ç§»åŠ¨è¯­ä¹‰çš„æ ¸å¿ƒ","heading":3,"title":"ç§»åŠ¨è¯­ä¹‰çš„æ ¸å¿ƒ","children":[],"id":"ç§»åŠ¨è¯­ä¹‰çš„æ ¸å¿ƒ"},{"key":"ç¤ºä¾‹è§£é‡Š","href":"#ç¤ºä¾‹è§£é‡Š","heading":3,"title":"ç¤ºä¾‹è§£é‡Š","children":[{"key":"è¯¦ç»†æ­¥éª¤","href":"#è¯¦ç»†æ­¥éª¤","heading":4,"title":"è¯¦ç»†æ­¥éª¤","children":[],"id":"è¯¦ç»†æ­¥éª¤"}],"id":"ç¤ºä¾‹è§£é‡Š"},{"key":"æ€»ç»“-2","href":"#æ€»ç»“-2","heading":3,"title":"æ€»ç»“","children":[],"id":"æ€»ç»“-2"},{"key":"å…³é”®ç‚¹","href":"#å…³é”®ç‚¹","heading":3,"title":"å…³é”®ç‚¹","children":[],"id":"å…³é”®ç‚¹"}],"id":"a-2"},{"key":"q-3","href":"#q-3","heading":2,"title":"Q:","children":[],"id":"q-3"},{"key":"a-3","href":"#a-3","heading":2,"title":"A:","children":[{"key":"rustä¸­çš„rvoä¼˜åŒ–","href":"#rustä¸­çš„rvoä¼˜åŒ–","heading":3,"title":"Rustä¸­çš„RVOä¼˜åŒ–","children":[{"key":"ç¤ºä¾‹-1","href":"#ç¤ºä¾‹-1","heading":4,"title":"ç¤ºä¾‹","children":[],"id":"ç¤ºä¾‹-1"}],"id":"rustä¸­çš„rvoä¼˜åŒ–"},{"key":"rustä¸­çš„ç§»åŠ¨è¯­ä¹‰","href":"#rustä¸­çš„ç§»åŠ¨è¯­ä¹‰","heading":3,"title":"Rustä¸­çš„ç§»åŠ¨è¯­ä¹‰","children":[{"key":"ç§»åŠ¨è¯­ä¹‰çš„å·¥ä½œåŸç†","href":"#ç§»åŠ¨è¯­ä¹‰çš„å·¥ä½œåŸç†","heading":4,"title":"ç§»åŠ¨è¯­ä¹‰çš„å·¥ä½œåŸç†","children":[],"id":"ç§»åŠ¨è¯­ä¹‰çš„å·¥ä½œåŸç†"},{"key":"ç¤ºä¾‹-2","href":"#ç¤ºä¾‹-2","heading":4,"title":"ç¤ºä¾‹","children":[],"id":"ç¤ºä¾‹-2"}],"id":"rustä¸­çš„ç§»åŠ¨è¯­ä¹‰"},{"key":"rustä¸­çš„ç§»åŠ¨æ„é€ ","href":"#rustä¸­çš„ç§»åŠ¨æ„é€ ","heading":3,"title":"Rustä¸­çš„ç§»åŠ¨æ„é€ ","children":[{"key":"ç¤ºä¾‹-3","href":"#ç¤ºä¾‹-3","heading":4,"title":"ç¤ºä¾‹","children":[],"id":"ç¤ºä¾‹-3"}],"id":"rustä¸­çš„ç§»åŠ¨æ„é€ "},{"key":"rustä¸­çš„å€Ÿç”¨æ£€æŸ¥","href":"#rustä¸­çš„å€Ÿç”¨æ£€æŸ¥","heading":3,"title":"Rustä¸­çš„å€Ÿç”¨æ£€æŸ¥","children":[{"key":"ç¤ºä¾‹-4","href":"#ç¤ºä¾‹-4","heading":4,"title":"ç¤ºä¾‹","children":[],"id":"ç¤ºä¾‹-4"}],"id":"rustä¸­çš„å€Ÿç”¨æ£€æŸ¥"},{"key":"æ€»ç»“-3","href":"#æ€»ç»“-3","heading":3,"title":"æ€»ç»“","children":[],"id":"æ€»ç»“-3"}],"id":"a-3"}],"wikiRefAliases":[],"richRefAliases":[]}},"nextInfo":{"pathMapping":{"filePath":"public/content/learn_from_ai/2024-11-29-opencv-coordinate-system-conventions.md","pagePath":"/learn_from_ai/opencv-coordinate-system-conventions","slug":"opencv-coordinate-system-conventions"},"meta":{"content":"\n> ğŸ“ æœ¬æ–‡æ˜¯æˆ‘åœ¨å­¦ä¹  OpenCV æ—¶é‡åˆ°çš„ä¸€ä¸ªé—®é¢˜ã€‚é—®é¢˜çš„è§£ç­”å’Œä¸­æ–‡ç¿»è¯‘å‡ç”± AI ç”Ÿæˆã€‚\n\n## OpenCV åæ ‡è¡¨ç¤ºï¼šç†è§£ (y, x) ä¸ (x, y) çš„åŒºåˆ«\n\n## Q\n\nWhy sometimes opencv represent a point coordinate as (y,x) (e.g. the result of cv2.findContours) , and sometimes it represent as (x, y) (e.g. the arg `center` of cv2.circle)?\n\n> ä¸ºä»€ä¹ˆ OpenCV æœ‰æ—¶ç”¨ (y,x) è¡¨ç¤ºåæ ‡ç‚¹ï¼ˆæ¯”å¦‚ cv2.findContours çš„è¿”å›å€¼ï¼‰ï¼Œæœ‰æ—¶åˆç”¨ (x,y) è¡¨ç¤ºï¼ˆæ¯”å¦‚ cv2.circle å‡½æ•°çš„ `center` å‚æ•°ï¼‰ï¼Ÿ\n\n## A\n\nOpenCV uses different conventions for different functions based on their specific requirements and historical reasons:\n\n> OpenCV åŸºäºä¸åŒå‡½æ•°çš„å…·ä½“éœ€æ±‚å’Œå†å²åŸå› ï¼Œä½¿ç”¨äº†ä¸åŒçš„åæ ‡è¡¨ç¤ºçº¦å®šï¼š\n\n1. **(y, x) Convention**: This is often used when dealing with image matrices directly. In image processing, images are typically represented as 2D arrays where the first dimension is the row (height, y-coordinate) and the second dimension is the column (width, x-coordinate). Functions like `cv2.findContours` return coordinates in this order to match the array indexing.\n\n> 1. **(y, x) çº¦å®š**ï¼šè¿™ç§è¡¨ç¤ºæ–¹æ³•é€šå¸¸ç”¨äºç›´æ¥å¤„ç†å›¾åƒçŸ©é˜µæ—¶ã€‚åœ¨å›¾åƒå¤„ç†ä¸­ï¼Œå›¾åƒé€šå¸¸è¡¨ç¤ºä¸ºäºŒç»´æ•°ç»„ï¼Œå…¶ä¸­ç¬¬ä¸€ç»´æ˜¯è¡Œï¼ˆé«˜åº¦ï¼Œy åæ ‡ï¼‰ï¼Œç¬¬äºŒç»´æ˜¯åˆ—ï¼ˆå®½åº¦ï¼Œx åæ ‡ï¼‰ã€‚åƒ `cv2.findContours` è¿™æ ·çš„å‡½æ•°è¿”å›è¿™ç§é¡ºåºçš„åæ ‡æ˜¯ä¸ºäº†åŒ¹é…æ•°ç»„ç´¢å¼•æ–¹å¼ã€‚\n\n2. **(x, y) Convention**: This is used in functions that deal with geometric shapes or points in a more traditional Cartesian coordinate system, where `x` is the horizontal axis and `y` is the vertical axis. Functions like `cv2.circle` use this convention to specify the center of the circle.\n\n> 2. **(x, y) çº¦å®š**ï¼šè¿™ç§è¡¨ç¤ºæ–¹æ³•ç”¨äºå¤„ç†å‡ ä½•å›¾å½¢æˆ–åœ¨ä¼ ç»Ÿç¬›å¡å°”åæ ‡ç³»ä¸­çš„ç‚¹ï¼Œå…¶ä¸­ `x` æ˜¯æ°´å¹³è½´ï¼Œ`y` æ˜¯å‚ç›´è½´ã€‚åƒ `cv2.circle` è¿™æ ·çš„å‡½æ•°ä½¿ç”¨è¿™ç§çº¦å®šæ¥æŒ‡å®šåœ†å¿ƒä½ç½®ã€‚\n\nThe inconsistency arises because OpenCV aims to balance between image matrix operations and geometric operations, each having their own conventional coordinate systems.\n\n> è¿™ç§ä¸ä¸€è‡´æ€§çš„å‡ºç°æ˜¯å› ä¸º OpenCV éœ€è¦åœ¨å›¾åƒçŸ©é˜µè¿ç®—å’Œå‡ ä½•è¿ç®—ä¹‹é—´å–å¾—å¹³è¡¡ï¼Œè€Œè¿™ä¸¤ç§è¿ç®—å„è‡ªæœ‰å…¶ä¼ ç»Ÿçš„åæ ‡ç³»ç»Ÿè¡¨ç¤ºæ–¹æ³•ã€‚\n","title":"OpenCV åæ ‡è¡¨ç¤ºï¼šç†è§£ (y, x) ä¸ (x, y) çš„åŒºåˆ«","abstract":"> ğŸ“ æœ¬æ–‡æ˜¯æˆ‘åœ¨å­¦ä¹  OpenCV æ—¶é‡åˆ°çš„ä¸€ä¸ªé—®é¢˜ã€‚é—®é¢˜çš„è§£ç­”å’Œä¸­æ–‡ç¿»è¯‘å‡ç”± AI ç”Ÿæˆã€‚\nWhy sometimes opencv represent a point coordinate as (y,x) (e.g. the result of cv2.findContours) , and sometimes it represent as (x, y) (e.g. the arg `center` of cv2.circle)?\n> ä¸ºä»€ä¹ˆ OpenCV æœ‰æ—¶ç”¨ (y,x) è¡¨ç¤ºåæ ‡ç‚¹ï¼ˆæ¯”å¦‚ cv2.findContours çš„è¿”å›å€¼ï¼‰ï¼Œæœ‰æ—¶åˆç”¨ (x,y) è¡¨ç¤ºï¼ˆæ¯”å¦‚ cv2.circle å‡½æ•°çš„ `center` å‚æ•°ï¼‰ï¼Ÿ","length":29,"created_at":"2024-11-29T03:00:00.000Z","updated_at":"2024-11-29T03:00:00.000Z","tags":["OpenCV","å›¾åƒå¤„ç†","å­¦ä¹ ç¬”è®°"],"license":true,"headingTrees":[{"key":"opencv-åæ ‡è¡¨ç¤ºç†è§£-y-x-ä¸-x-y-çš„åŒºåˆ«","href":"#opencv-åæ ‡è¡¨ç¤ºç†è§£-y-x-ä¸-x-y-çš„åŒºåˆ«","heading":2,"title":"OpenCV åæ ‡è¡¨ç¤ºï¼šç†è§£ (y, x) ä¸ (x, y) çš„åŒºåˆ«","children":[],"id":"opencv-åæ ‡è¡¨ç¤ºç†è§£-y-x-ä¸-x-y-çš„åŒºåˆ«"},{"key":"q","href":"#q","heading":2,"title":"Q","children":[],"id":"q"},{"key":"a","href":"#a","heading":2,"title":"A","children":[],"id":"a"}],"wikiRefAliases":[],"richRefAliases":[]}}}},"__N_SSG":true}